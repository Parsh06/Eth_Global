(function(Ui,or){typeof exports=="object"&&typeof module<"u"?or(exports):typeof define=="function"&&define.amd?define(["exports"],or):(Ui=typeof globalThis<"u"?globalThis:Ui||self,or(Ui["@walletconnect/ethereum-provider"]={}))})(this,function(Ui){"use strict";var or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Y3(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var yt={exports:{}},lu=typeof Reflect=="object"?Reflect:null,X3=lu&&typeof lu.apply=="function"?lu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},_f;lu&&typeof lu.ownKeys=="function"?_f=lu.ownKeys:Object.getOwnPropertySymbols?_f=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_f=function(e){return Object.getOwnPropertyNames(e)};function WN(t){console&&console.warn&&console.warn(t)}var J3=Number.isNaN||function(e){return e!==e};function dt(){dt.init.call(this)}yt.exports=dt,yt.exports.once=YN,dt.EventEmitter=dt,dt.prototype._events=void 0,dt.prototype._eventsCount=0,dt.prototype._maxListeners=void 0;var Q3=10;function Sf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(dt,"defaultMaxListeners",{enumerable:!0,get:function(){return Q3},set:function(t){if(typeof t!="number"||t<0||J3(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Q3=t}}),dt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},dt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||J3(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ev(t){return t._maxListeners===void 0?dt.defaultMaxListeners:t._maxListeners}dt.prototype.getMaxListeners=function(){return ev(this)},dt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")X3(c,this,r);else for(var l=c.length,u=sv(c,l),n=0;n<l;++n)X3(u[n],this,r);return!0};function tv(t,e,r,n){var i,s,o;if(Sf(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=ev(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,WN(a)}return t}dt.prototype.addListener=function(e,r){return tv(this,e,r,!1)},dt.prototype.on=dt.prototype.addListener,dt.prototype.prependListener=function(e,r){return tv(this,e,r,!0)};function ZN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rv(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=ZN.bind(n);return i.listener=r,n.wrapFn=i,i}dt.prototype.once=function(e,r){return Sf(r),this.on(e,rv(this,e,r)),this},dt.prototype.prependOnceListener=function(e,r){return Sf(r),this.prependListener(e,rv(this,e,r)),this},dt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Sf(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():KN(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},dt.prototype.off=dt.prototype.removeListener,dt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function nv(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?GN(i):sv(i,i.length)}dt.prototype.listeners=function(e){return nv(this,e,!0)},dt.prototype.rawListeners=function(e){return nv(this,e,!1)},dt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):iv.call(t,e)},dt.prototype.listenerCount=iv;function iv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}dt.prototype.eventNames=function(){return this._eventsCount>0?_f(this._events):[]};function sv(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function KN(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function GN(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function YN(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ov(t,e,s,{once:!0}),e!=="error"&&XN(t,i,{once:!0})})}function XN(t,e,r){typeof t.on=="function"&&ov(t,"error",e,r)}function ov(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var av=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},JN=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),QN=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),eT=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),tT=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),rT=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),nT=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,iT=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,cv=3,sT=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nT]],lv=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function uv(t){return t?hv(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new rT:typeof navigator<"u"?hv(navigator.userAgent):cT()}function oT(t){return t!==""&&sT.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function hv(t){var e=oT(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new tT;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<cv&&(i=av(av([],i,!0),lT(cv-i.length),!0)):i=[];var s=i.join("."),o=aT(t),a=iT.exec(t);return a&&a[1]?new eT(r,s,o,a[1]):new JN(r,s,o)}function aT(t){for(var e=0,r=lv.length;e<r;e++){var n=lv[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function cT(){var t=typeof process<"u"&&process.version;return t?new QN(process.version.slice(1)):null}function lT(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Z={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Iw=function(t,e){return Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Iw(t,e)};function uT(t,e){Iw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ow=function(){return Ow=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ow.apply(this,arguments)};function hT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function dT(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function pT(t,e){return function(r,n){e(r,n,t)}}function fT(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function gT(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function mT(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function yT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function bT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(dv(arguments[e]));return t}function vT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function sd(t){return this instanceof sd?(this.v=t,this):new sd(t)}function ET(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(p){return new Promise(function(f,g){s.push([d,p,f,g])>1||a(d,p)})})}function a(d,p){try{c(n[d](p))}catch(f){h(s[0][3],f)}}function c(d){d.value instanceof sd?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,p){d(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function CT(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:sd(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function AT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function $T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _T(t){return t&&t.__esModule?t:{default:t}}function ST(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function IT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var OT=Object.freeze({__proto__:null,__extends:uT,get __assign(){return Ow},__rest:hT,__decorate:dT,__param:pT,__metadata:fT,__awaiter:gT,__generator:mT,__createBinding:wT,__exportStar:yT,__values:Pw,__read:dv,__spread:bT,__spreadArrays:vT,__await:sd,__asyncGenerator:ET,__asyncDelegator:CT,__asyncValues:AT,__makeTemplateObject:$T,__importStar:xT,__importDefault:_T,__classPrivateFieldGet:ST,__classPrivateFieldSet:IT}),If=Y3(OT),Nw={},od={},pv;function PT(){if(pv)return od;pv=1,Object.defineProperty(od,"__esModule",{value:!0}),od.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return od.delay=t,od}var Mc={},Tw={},Uc={},fv;function NT(){return fv||(fv=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.ONE_THOUSAND=Uc.ONE_HUNDRED=void 0,Uc.ONE_HUNDRED=100,Uc.ONE_THOUSAND=1e3),Uc}var kw={},gv;function TT(){return gv||(gv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(kw)),kw}var mv;function wv(){return mv||(mv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=If;e.__exportStar(NT(),t),e.__exportStar(TT(),t)}(Tw)),Tw}var yv;function kT(){if(yv)return Mc;yv=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.fromMiliseconds=Mc.toMiliseconds=void 0;const t=wv();function e(n){return n*t.ONE_THOUSAND}Mc.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Mc.fromMiliseconds=r,Mc}var bv;function RT(){return bv||(bv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=If;e.__exportStar(PT(),t),e.__exportStar(kT(),t)}(Nw)),Nw}var uu={},vv;function DT(){if(vv)return uu;vv=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return uu.Watch=t,uu.default=t,uu}var Rw={},ad={},Ev;function BT(){if(Ev)return ad;Ev=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.IWatch=void 0;class t{}return ad.IWatch=t,ad}var Cv;function MT(){return Cv||(Cv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),If.__exportStar(BT(),t)}(Rw)),Rw}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=If;e.__exportStar(RT(),t),e.__exportStar(DT(),t),e.__exportStar(MT(),t),e.__exportStar(wv(),t)})(Z);var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.getLocalStorage=Ct.getLocalStorageOrThrow=Ct.getCrypto=Ct.getCryptoOrThrow=Dw=Ct.getLocation=Ct.getLocationOrThrow=cd=Ct.getNavigator=Ct.getNavigatorOrThrow=Fn=Ct.getDocument=Ct.getDocumentOrThrow=Ct.getFromWindowOrThrow=Ct.getFromWindow=void 0;function Lc(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ct.getFromWindow=Lc;function hu(t){const e=Lc(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ct.getFromWindowOrThrow=hu;function UT(){return hu("document")}Ct.getDocumentOrThrow=UT;function LT(){return Lc("document")}var Fn=Ct.getDocument=LT;function FT(){return hu("navigator")}Ct.getNavigatorOrThrow=FT;function HT(){return Lc("navigator")}var cd=Ct.getNavigator=HT;function jT(){return hu("location")}Ct.getLocationOrThrow=jT;function VT(){return Lc("location")}var Dw=Ct.getLocation=VT;function zT(){return hu("crypto")}Ct.getCryptoOrThrow=zT;function qT(){return Lc("crypto")}Ct.getCrypto=qT;function WT(){return hu("localStorage")}Ct.getLocalStorageOrThrow=WT;function ZT(){return Lc("localStorage")}Ct.getLocalStorage=ZT;var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});var Mw=Bw.getWindowMetadata=void 0;const Av=Ct;function KT(){let t,e;try{t=Av.getDocumentOrThrow(),e=Av.getLocationOrThrow()}catch{return null}function r(){const h=t.getElementsByTagName("link"),d=[];for(let p=0;p<h.length;p++){const f=h[p],g=f.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=f.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let v=e.protocol+"//"+e.host;if(w.indexOf("/")===0)v+=w;else{const C=e.pathname.split("/");C.pop();const b=C.join("/");v+=b+"/"+w}d.push(v)}else if(w.indexOf("//")===0){const v=e.protocol+w;d.push(v)}else d.push(w)}}return d}function n(...h){const d=t.getElementsByTagName("meta");for(let p=0;p<d.length;p++){const f=d[p],g=["itemprop","property","name"].map(w=>f.getAttribute(w)).filter(w=>w?h.includes(w):!1);if(g.length&&g){const w=f.getAttribute("content");if(w)return w}}return""}function i(){let h=n("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}Mw=Bw.getWindowMetadata=KT;function Fc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Uo(t){return Fc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const $v="2.36.0";let Uw={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${$v}`};class Fe extends Error{constructor(e,r={}){const n=r.cause instanceof Fe?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof Fe&&r.cause.docsPath||r.docsPath,s=Uw.getDocsUrl?.({...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...Uw.version?[`Version: ${Uw.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=$v}walk(e){return xv(this,e)}}function xv(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?xv(t.cause,e):e?null:t}class _v extends Fe{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Sv extends Fe{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function du(t,{dir:e,size:r=32}={}){return typeof t=="string"?GT(t,{dir:e,size:r}):YT(t,{dir:e,size:r})}function GT(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new Sv({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function YT(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new Sv({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class XT extends Fe{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class JT extends Fe{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function pu(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function fu(t,{size:e}){if(Uo(t)>e)throw new JT({givenSize:Uo(t),maxSize:e})}function Li(t,e={}){const{signed:r}=e;e.size&&fu(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function ld(t,e={}){return Number(Li(t,e))}const QT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gr(t,e={}){return typeof t=="number"||typeof t=="bigint"?Pe(t,e):typeof t=="string"?Iv(t,e):typeof t=="boolean"?ek(t,e):Lo(t,e)}function ek(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(fu(r,{size:e.size}),du(r,{size:e.size})):r}function Lo(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=QT[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(fu(n,{size:e.size}),du(n,{dir:"right",size:e.size})):n}function Pe(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new XT({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?du(a,{size:n}):a}const tk=new TextEncoder;function Iv(t,e={}){const r=tk.encode(t);return Lo(r,e)}const rk=new TextEncoder;function Ov(t,e={}){return typeof t=="number"||typeof t=="bigint"?ik(t,e):typeof t=="boolean"?nk(t,e):Fc(t)?Hc(t,e):Nv(t,e)}function nk(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(fu(r,{size:e.size}),du(r,{size:e.size})):r}const Fo={zero:48,nine:57,A:65,F:70,a:97,f:102};function Pv(t){if(t>=Fo.zero&&t<=Fo.nine)return t-Fo.zero;if(t>=Fo.A&&t<=Fo.F)return t-(Fo.A-10);if(t>=Fo.a&&t<=Fo.f)return t-(Fo.a-10)}function Hc(t,e={}){let r=t;e.size&&(fu(r,{size:e.size}),r=du(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=Pv(n.charCodeAt(a++)),l=Pv(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Fe(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function ik(t,e){const r=Pe(t,e);return Hc(r)}function Nv(t,e={}){const r=rk.encode(t);return typeof e.size=="number"?(fu(r,{size:e.size}),du(r,{dir:"right",size:e.size})):r}const Of=BigInt(2**32-1),Tv=BigInt(32);function sk(t,e=!1){return e?{h:Number(t&Of),l:Number(t>>Tv&Of)}:{h:Number(t>>Tv&Of)|0,l:Number(t&Of)|0}}function ok(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=sk(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const ak=(t,e,r)=>t<<r|e>>>32-r,ck=(t,e,r)=>e<<r|t>>>32-r,lk=(t,e,r)=>e<<r-32|t>>>64-r,uk=(t,e,r)=>t<<r-32|e>>>64-r,gu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ud(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function li(t,...e){if(!ud(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function kv(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");mu(t.outputLen),mu(t.blockLen)}function wu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rv(t,e){li(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function hk(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Lw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ss(t,e){return t<<32-e|t>>>e}const dk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pk(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function fk(t){for(let e=0;e<t.length;e++)t[e]=pk(t[e]);return t}const Dv=dk?t=>t:fk,Bv=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gk=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bu(t){if(li(t),Bv)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=gk[t[r]];return e}const Ho={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mv(t){if(t>=Ho._0&&t<=Ho._9)return t-Ho._0;if(t>=Ho.A&&t<=Ho.F)return t-(Ho.A-10);if(t>=Ho.a&&t<=Ho.f)return t-(Ho.a-10)}function Pf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Bv)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=Mv(t.charCodeAt(s)),a=Mv(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function vu(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Nf(t){return typeof t=="string"&&(t=vu(t)),li(t),t}function mr(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];li(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class Fw{}function Uv(t){const e=n=>t().update(Nf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Eu(t=32){if(gu&&typeof gu.getRandomValues=="function")return gu.getRandomValues(new Uint8Array(t));if(gu&&typeof gu.randomBytes=="function")return Uint8Array.from(gu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const mk=BigInt(0),hd=BigInt(1),wk=BigInt(2),yk=BigInt(7),bk=BigInt(256),vk=BigInt(113),Lv=[],Fv=[],Hv=[];for(let t=0,e=hd,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Lv.push(2*(5*n+r)),Fv.push((t+1)*(t+2)/2%64);let i=mk;for(let s=0;s<7;s++)e=(e<<hd^(e>>yk)*vk)%bk,e&wk&&(i^=hd<<(hd<<BigInt(s))-hd);Hv.push(i)}const jv=ok(Hv,!0),Ek=jv[0],Ck=jv[1],Vv=(t,e,r)=>r>32?lk(t,e,r):ak(t,e,r),zv=(t,e,r)=>r>32?uk(t,e,r):ck(t,e,r);function Ak(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=Vv(l,u,1)^r[a],d=zv(l,u,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=h,t[o+p+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Fv[o],c=Vv(i,s,a),l=zv(i,s,a),u=Lv[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Ek[n],t[1]^=Ck[n]}yu(r)}class Hw extends Fw{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,mu(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=hk(this.state)}clone(){return this._cloneInto()}keccak(){Dv(this.state32),Ak(this.state32,this.rounds),Dv(this.state32),this.posOut=0,this.pos=0}update(e){wu(this),e=Nf(e),li(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){wu(this,!1),li(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Rv(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,yu(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Hw(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const $k=(t,e,r)=>Uv(()=>new Hw(e,t,r)),Tf=$k(1,136,256/8);function qv(t,e){const r=e||"hex",n=Tf(Fc(t,{strict:!1})?Ov(t):t);return r==="bytes"?n:gr(n)}class Ia extends Fe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class kf extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const jw=new kf(8192);function Wv(t,e){if(jw.has(`${t}.${e}`))return jw.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=qv(Nv(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return jw.set(`${t}.${e}`,s),s}const xk=/^0x[a-fA-F0-9]{40}$/,Vw=new kf(8192);function jo(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(Vw.has(n))return Vw.get(n);const i=xk.test(t)?t.toLowerCase()===t?!0:r?Wv(t)===t:!0:!1;return Vw.set(n,i),i}function Cu(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function _k(t,e,r,{strict:n}={}){return Fc(t,{strict:!1})?Ik(t,e,r,{strict:n}):Sk(t,e,r,{strict:n})}function Zv(t,e){if(typeof e=="number"&&e>0&&e>Uo(t)-1)throw new _v({offset:e,position:"start",size:Uo(t)})}function Kv(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Uo(t)!==r-e)throw new _v({offset:r,position:"end",size:Uo(t)})}function Sk(t,e,r,{strict:n}={}){Zv(t,e);const i=t.slice(e,r);return n&&Kv(i,e,r),i}function Ik(t,e,r,{strict:n}={}){Zv(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&Kv(i,e,r),i}class Gv extends Fe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Ok extends Fe{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Pk extends Fe{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Nk={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Pk({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Ok({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Gv({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Gv({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Yv(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(Nk);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}const jc=(t,e,r)=>JSON.stringify(t,(n,i)=>{const s=typeof i=="bigint"?i.toString():i;return typeof e=="function"?e(n,s):s},r),Tk={ether:-9,wei:9};function Xv(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function zw(t,e="wei"){return Xv(t,Tk[e])}function kk(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class Rk extends Fe{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Dk extends Fe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",kk(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Bk extends Fe{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}const qw=t=>t;class dd extends Fe{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${qw(o)}`,e&&`Request body: ${jc(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class Jv extends Fe{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${qw(n)}`,`Request body: ${jc(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class Qv extends Fe{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${qw(r)}`,`Request body: ${jc(e)}`],name:"TimeoutError"})}}const Mk=-1;class pn extends Fe{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof Jv?e.code:r??Mk}}class Hn extends pn{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class pd extends pn{constructor(e){super(e,{code:pd.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class fd extends pn{constructor(e){super(e,{code:fd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class gd extends pn{constructor(e,{method:r}={}){super(e,{code:gd.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(gd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class md extends pn{constructor(e){super(e,{code:md.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(md,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Au extends pn{constructor(e){super(e,{code:Au.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Au,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class wd extends pn{constructor(e){super(e,{code:wd.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class yd extends pn{constructor(e){super(e,{code:yd.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(yd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class bd extends pn{constructor(e){super(e,{code:bd.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class $u extends pn{constructor(e){super(e,{code:$u.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty($u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Vc extends pn{constructor(e,{method:r}={}){super(e,{code:Vc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(Vc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class xu extends pn{constructor(e){super(e,{code:xu.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(xu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class vd extends pn{constructor(e){super(e,{code:vd.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class zc extends Hn{constructor(e){super(e,{code:zc.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Ed extends Hn{constructor(e){super(e,{code:Ed.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Cd extends Hn{constructor(e,{method:r}={}){super(e,{code:Cd.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ad extends Hn{constructor(e){super(e,{code:Ad.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ad,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class $d extends Hn{constructor(e){super(e,{code:$d.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty($d,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class xd extends Hn{constructor(e){super(e,{code:xd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(xd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class _d extends Hn{constructor(e){super(e,{code:_d.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(_d,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Sd extends Hn{constructor(e){super(e,{code:Sd.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Id extends Hn{constructor(e){super(e,{code:Id.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Od extends Hn{constructor(e){super(e,{code:Od.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Od,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Pd extends Hn{constructor(e){super(e,{code:Pd.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Nd extends Hn{constructor(e){super(e,{code:Nd.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Td extends Hn{constructor(e){super(e,{code:Td.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Td,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Uk extends pn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function Lk(t){const e=qv(`0x${t.substring(4)}`).substring(26);return Wv(`0x${e}`)}async function Fk({hash:t,signature:e}){const r=Fc(t)?t:gr(t),{secp256k1:n}=await Promise.resolve().then(function(){return nB});return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,p=Number(d??h),f=e5(p);return new n.Signature(Li(l),Li(u)).addRecoveryBit(f)}const o=Fc(e)?e:gr(e);if(Uo(o)!==65)throw new Error("invalid signature length");const a=ld(`0x${o.slice(130)}`),c=e5(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function e5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Hk({hash:t,signature:e}){return Lk(await Fk({hash:t,signature:e}))}function Oa(t,e="hex"){const r=t5(t),n=Yv(new Uint8Array(r.length));return r.encode(n),e==="hex"?Lo(n.bytes):n.bytes}function t5(t){return Array.isArray(t)?jk(t.map(e=>t5(e))):Vk(t)}function jk(t){const e=t.reduce((i,s)=>i+s.length,0),r=r5(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function Vk(t){const e=typeof t=="string"?Hc(t):t,r=r5(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function r5(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Fe("Length is too large.")}class Ww extends Fe{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Ww,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class kd extends Fe{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${zw(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(kd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Zw extends Fe{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${zw(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${zw(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Zw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});function Rf(t,e){return({exclude:r,format:n})=>({exclude:r,format:i=>{const s=e(i);if(r)for(const o of r)delete s[o];return{...s,...n(i)}},type:t})}const zk={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function qk(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Zk(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>Lo(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Pe(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Pe(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Pe(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Pe(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Pe(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Pe(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=zk[t.type]),typeof t.value<"u"&&(e.value=Pe(t.value)),e}const Wk=Rf("transactionRequest",qk);function Zk(t){return t.map(e=>({address:e.address,r:e.r?Pe(BigInt(e.r)):e.r,s:e.s?Pe(BigInt(e.s)):e.s,chainId:Pe(e.chainId),nonce:Pe(e.nonce),...typeof e.yParity<"u"?{yParity:Pe(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Pe(e.v)}:{}}))}const Df=2n**256n-1n,n5={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Bf(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ld(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ld(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?n5[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Kk(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const i5=Rf("transaction",Bf);function Kk(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Gk(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:Bf(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const s5=Rf("block",Gk);function o5(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>Hc(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>Lo(s))}function a5(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>Hc(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>Hc(o)):t.commitments,s=[];for(let o=0;o<n.length;o++){const a=n[o],c=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(o=>Lo(o))}function Yk(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function Xk(t,e,r){return t&e^~t&r}function Jk(t,e,r){return t&e^t&r^e&r}class Qk extends Fw{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Lw(this.buffer)}update(e){wu(this),e=Nf(e),li(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Lw(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wu(this),Rv(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,yu(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;Yk(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Lw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Pa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),eR=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Na=new Uint32Array(64);class tR extends Qk{constructor(e=32){super(64,e,8,!1),this.A=Pa[0]|0,this.B=Pa[1]|0,this.C=Pa[2]|0,this.D=Pa[3]|0,this.E=Pa[4]|0,this.F=Pa[5]|0,this.G=Pa[6]|0,this.H=Pa[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Na[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Na[h-15],p=Na[h-2],f=ss(d,7)^ss(d,18)^d>>>3,g=ss(p,17)^ss(p,19)^p>>>10;Na[h]=g+Na[h-7]+f+Na[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=ss(a,6)^ss(a,11)^ss(a,25),p=u+d+Xk(a,c,l)+eR[h]+Na[h]|0,g=(ss(n,2)^ss(n,13)^ss(n,22))+Jk(n,i,s)|0;u=l,l=c,c=a,a=o+p|0,o=s,s=i,i=n,n=p+g|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){yu(Na)}destroy(){this.set(0,0,0,0,0,0,0,0),yu(this.buffer)}}const Vo=Uv(()=>new tR),rR=Vo;function nR(t,e){const r=e||"hex",n=rR(Fc(t,{strict:!1})?Ov(t):t);return r==="bytes"?n:gr(n)}function iR(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=nR(e,"bytes");return i.set([r],0),n==="bytes"?i:Lo(i)}function sR(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(iR({commitment:s,to:n,version:r}));return i}const c5=6,l5=32,Kw=4096,u5=l5*Kw,h5=u5*c5-1-1*Kw*c5,d5=1;class oR extends Fe{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class p5 extends Fe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class aR extends Fe{constructor({hash:e,size:r}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class cR extends Fe{constructor({hash:e,version:r}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${d5}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function lR(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?Hc(t.data):t.data,n=Uo(r);if(!n)throw new p5;if(n>h5)throw new oR({maxSize:h5,size:n});const i=[];let s=!0,o=0;for(;s;){const a=Yv(new Uint8Array(u5));let c=0;for(;c<Kw;){const l=r.slice(o,o+(l5-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}c++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>Lo(a.bytes))}function uR(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??lR({data:e,to:n}),s=t.commitments??o5({blobs:i,kzg:r,to:n}),o=t.proofs??a5({blobs:i,commitments:s,kzg:r,to:n}),a=[];for(let c=0;c<i.length;c++)a.push({blob:i[c],commitment:s[c],proof:o[c]});return a}function hR(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Dk({transaction:t})}function dR(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}const Gw=BigInt(0),Yw=BigInt(1);function Mf(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function qc(t,e,r=""){const n=ud(t),i=t?.length,s=e!==void 0;if(!n||s&&i!==e){const o=r&&`"${r}" `,a=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Uf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function f5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Gw:BigInt("0x"+t)}function Wc(t){return f5(bu(t))}function g5(t){return li(t),f5(bu(Uint8Array.from(t).reverse()))}function Lf(t,e){return Pf(t.toString(16).padStart(e*2,"0"))}function m5(t,e){return Lf(t,e).reverse()}function Wt(t,e,r){let n;if(typeof e=="string")try{n=Pf(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ud(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Xw=t=>typeof t=="bigint"&&Gw<=t;function Jw(t,e,r){return Xw(t)&&Xw(e)&&Xw(r)&&e<=t&&t<r}function pR(t,e,r,n){if(!Jw(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function w5(t){let e;for(e=0;t>Gw;t>>=Yw,e+=1);return e}const Rd=t=>(Yw<<BigInt(t))-Yw;function fR(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=p=>new Uint8Array(p),i=p=>Uint8Array.of(p);let s=n(t),o=n(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...p)=>r(o,s,...p),u=(p=n(0))=>{o=l(i(0),p),s=l(),p.length!==0&&(o=l(i(1),p),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const f=[];for(;p<e;){s=l();const g=s.slice();f.push(g),p+=s.length}return mr(...f)};return(p,f)=>{c(),u(p);let g;for(;!(g=f(h()));)u();return c(),g}}function gR(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function Ff(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function y5(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const mR="0.1.1";function wR(){return mR}class Gr extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Gr){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof Gr&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${wR()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return b5(this,e)}}function b5(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?b5(t.cause,e):e?null:t}function yR(t,e){if(C5(t)>e)throw new _R({givenSize:C5(t),maxSize:e})}const zo={zero:48,nine:57,A:65,F:70,a:97,f:102};function v5(t){if(t>=zo.zero&&t<=zo.nine)return t-zo.zero;if(t>=zo.A&&t<=zo.F)return t-(zo.A-10);if(t>=zo.a&&t<=zo.f)return t-(zo.a-10)}function bR(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new SR({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function Qw(t,e){if(ty(t)>e)throw new RR({givenSize:ty(t),maxSize:e})}function E5(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new DR({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const vR=new TextEncoder;function ER(t){return t instanceof Uint8Array?t:typeof t=="string"?AR(t):CR(t)}function CR(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function AR(t,e={}){const{size:r}=e;let n=t;r&&(Qw(t,r),n=ey(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=v5(i.charCodeAt(c++)),u=v5(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new Gr(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function $R(t,e={}){const{size:r}=e,n=vR.encode(t);return typeof r=="number"?(yR(n,r),xR(n,r)):n}function xR(t,e){return bR(t,{dir:"right",size:e})}function C5(t){return t.length}class _R extends Gr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class SR extends Gr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const IR=new TextEncoder,OR=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function A5(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function PR(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Qw(r,e.size),Hf(r,e.size)):r}function $5(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=OR[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Qw(n,e.size),ey(n,e.size)):n}function NR(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new kR({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Hf(c,n):c}function TR(t,e={}){return $5(IR.encode(t),e)}function Hf(t,e){return E5(t,{dir:"left",size:e})}function ey(t,e){return E5(t,{dir:"right",size:e})}function ty(t){return Math.ceil((t.length-2)/2)}class kR extends Gr{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class RR extends Gr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class DR extends Gr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}class Dd extends Fe{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function BR(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const ry=new Map;function MR({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&t(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let p=0;p<u.length;p++){const{resolve:f}=u[p];f?.([d[p],d])}}).catch(d=>{for(let p=0;p<u.length;p++){const{reject:f}=u[p];f?.(d)}})},o=()=>ry.delete(e),a=()=>c().map(({args:u})=>u),c=()=>ry.get(e)||[],l=u=>ry.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:p}=BR();return r?.([...a(),u])&&s(),c().length>0?(l({args:u,resolve:d,reject:p}),h):(l({args:u,resolve:d,reject:p}),setTimeout(s,n),h)}}}async function x5(t){return new Promise(e=>setTimeout(e,t))}new kf(128);function UR(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await x5(u),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return c({error:l});s(l)}};o()})}const LR={"0x0":"reverted","0x1":"success"};function FR(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>dR(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ld(t.transactionIndex):null,status:t.status?LR[t.status]:null,type:t.type?n5[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const HR=Rf("transactionReceipt",FR);Pe(0,{size:32});const ny=256;let jf=ny,Vf;function jR(t=11){if(!Vf||jf+t>ny*2){Vf="",jf=0;for(let e=0;e<ny;e++)Vf+=(256+Math.random()*256|0).toString(16).substring(1)}return Vf.substring(jf,jf+++t)}function VR(t){const{authorizationList:e}=t;if(e)for(const r of e){const{chainId:n}=r,i=r.address;if(!jo(i))throw new Ia({address:i});if(n<0)throw new Dd({chainId:n})}iy(t)}function zR(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new p5;for(const r of e){const n=Uo(r),i=ld(_k(r,0,1));if(n!==32)throw new aR({hash:r,size:n});if(i!==d5)throw new cR({hash:r,version:i})}}iy(t)}function iy(t){const{chainId:e,maxPriorityFeePerGas:r,maxFeePerGas:n,to:i}=t;if(e<=0)throw new Dd({chainId:e});if(i&&!jo(i))throw new Ia({address:i});if(n&&n>Df)throw new kd({maxFeePerGas:n});if(r&&n&&r>n)throw new Zw({maxFeePerGas:n,maxPriorityFeePerGas:r})}function qR(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s}=t;if(e<=0)throw new Dd({chainId:e});if(s&&!jo(s))throw new Ia({address:s});if(r||i)throw new Fe("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>Df)throw new kd({maxFeePerGas:n})}function WR(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s}=t;if(s&&!jo(s))throw new Ia({address:s});if(typeof e<"u"&&e<=0)throw new Dd({chainId:e});if(r||i)throw new Fe("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>Df)throw new kd({maxFeePerGas:n})}function Bd(t){if(!t||t.length===0)return[];const e=[];for(let r=0;r<t.length;r++){const{address:n,storageKeys:i}=t[r];for(let s=0;s<i.length;s++)if(i[s].length-2!==64)throw new Bk({storageKey:i[s]});if(!jo(n,{strict:!1}))throw new Ia({address:n});e.push([n,i])}return e}function ZR(t,e){const r=hR(t);return r==="eip1559"?YR(t,e):r==="eip2930"?XR(t,e):r==="eip4844"?GR(t,e):r==="eip7702"?KR(t,e):JR(t,e)}function KR(t,e){const{authorizationList:r,chainId:n,gas:i,nonce:s,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=t;VR(t);const d=Bd(u),p=QR(r);return Cu(["0x04",Oa([Pe(n),s?Pe(s):"0x",l?Pe(l):"0x",c?Pe(c):"0x",i?Pe(i):"0x",o??"0x",a?Pe(a):"0x",h??"0x",d,p,..._u(t,e)])])}function GR(t,e){const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=t;zR(t);let d=t.blobVersionedHashes,p=t.sidecars;if(t.blobs&&(typeof d>"u"||typeof p>"u")){const b=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(R=>Lo(R)),A=t.kzg,P=o5({blobs:b,kzg:A});if(typeof d>"u"&&(d=sR({commitments:P})),typeof p>"u"){const R=a5({blobs:b,commitments:P,kzg:A});p=uR({blobs:b,commitments:P,proofs:R})}}const f=Bd(u),g=[Pe(r),i?Pe(i):"0x",l?Pe(l):"0x",c?Pe(c):"0x",n?Pe(n):"0x",s??"0x",o?Pe(o):"0x",h??"0x",f,a?Pe(a):"0x",d??[],..._u(t,e)],w=[],v=[],C=[];if(p)for(let b=0;b<p.length;b++){const{blob:A,commitment:P,proof:R}=p[b];w.push(A),v.push(P),C.push(R)}return Cu(["0x03",Oa(p?[g,w,v,C]:g)])}function YR(t,e){const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;iy(t);const h=Bd(l),d=[Pe(r),i?Pe(i):"0x",c?Pe(c):"0x",a?Pe(a):"0x",n?Pe(n):"0x",s??"0x",o?Pe(o):"0x",u??"0x",h,..._u(t,e)];return Cu(["0x02",Oa(d)])}function XR(t,e){const{chainId:r,gas:n,data:i,nonce:s,to:o,value:a,accessList:c,gasPrice:l}=t;qR(t);const u=Bd(c),h=[Pe(r),s?Pe(s):"0x",l?Pe(l):"0x",n?Pe(n):"0x",o??"0x",a?Pe(a):"0x",i??"0x",u,..._u(t,e)];return Cu(["0x01",Oa(h)])}function JR(t,e){const{chainId:r=0,gas:n,data:i,nonce:s,to:o,value:a,gasPrice:c}=t;WR(t);let l=[s?Pe(s):"0x",c?Pe(c):"0x",n?Pe(n):"0x",o??"0x",a?Pe(a):"0x",i??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+e.v-27n);const p=27n+(e.v===27n?0n:1n);if(e.v!==p)throw new Rk({v:e.v});return p})(),h=pu(e.r),d=pu(e.s);l=[...l,Pe(u),h==="0x00"?"0x":h,d==="0x00"?"0x":d]}else r>0&&(l=[...l,Pe(r),"0x","0x"]);return Oa(l)}function _u(t,e){const r=e??t,{v:n,yParity:i}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof i>"u")return[];const s=pu(r.r),o=pu(r.s);return[typeof i=="number"?i?Pe(1):"0x":n===0n?"0x":n===1n?Pe(1):n===27n?"0x":Pe(1),s==="0x00"?"0x":s,o==="0x00"?"0x":o]}function QR(t){if(!t||t.length===0)return[];const e=[];for(const r of t){const{chainId:n,nonce:i,...s}=r,o=r.address;e.push([n?gr(n):"0x",o,i?gr(i):"0x",..._u({},s)])}return e}const zf=new kf(8192);function eD(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(zf.get(r))return zf.get(r);const n=t().finally(()=>zf.delete(r));return zf.set(r,n),n}function tD(t,e={}){return async(r,n={})=>{const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=r;if(s?.exclude?.includes(l))throw new Vc(new Error("method not supported"),{method:l});if(s?.include&&!s.include.includes(l))throw new Vc(new Error("method not supported"),{method:l});const u=i?Iv(`${c}.${jc(r)}`):void 0;return eD(()=>UR(async()=>{try{return await t(r)}catch(h){const d=h;switch(d.code){case pd.code:throw new pd(d);case fd.code:throw new fd(d);case gd.code:throw new gd(d,{method:r.method});case md.code:throw new md(d);case Au.code:throw new Au(d);case wd.code:throw new wd(d);case yd.code:throw new yd(d);case bd.code:throw new bd(d);case $u.code:throw new $u(d);case Vc.code:throw new Vc(d,{method:r.method});case xu.code:throw new xu(d);case vd.code:throw new vd(d);case zc.code:throw new zc(d);case Ed.code:throw new Ed(d);case Cd.code:throw new Cd(d);case Ad.code:throw new Ad(d);case $d.code:throw new $d(d);case xd.code:throw new xd(d);case _d.code:throw new _d(d);case Sd.code:throw new Sd(d);case Id.code:throw new Id(d);case Od.code:throw new Od(d);case Pd.code:throw new Pd(d);case Nd.code:throw new Nd(d);case Td.code:throw new Td(d);case 5e3:throw new zc(d);default:throw h instanceof Fe?h:new Uk(d)}}},{delay:({count:h,error:d})=>{if(d&&d instanceof dd){const p=d?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>rD(h)}),{enabled:i,id:u})}}function rD(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===xu.code||t.code===Au.code:t instanceof dd&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Ce(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function nD(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n?a.abort():s(e)},r)),i(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function iD(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const _5=iD();function sD(t,e={}){return{async request(r){const{body:n,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await nD(async({signal:p})=>{const f={...a,body:Array.isArray(n)?jc(n.map(C=>({jsonrpc:"2.0",id:C.id??_5.take(),...C}))):jc({jsonrpc:"2.0",id:n.id??_5.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},g=new Request(t,f),w=await i?.(g,f)??{...f,url:t};return await fetch(w.url??t,w)},{errorInstance:new Qv({body:n,url:t}),timeout:o,signal:!0});s&&await s(h);let d;if(h.headers.get("Content-Type")?.startsWith("application/json"))d=await h.json();else{d=await h.text();try{d=JSON.parse(d||"{}")}catch(p){if(h.ok)throw p;d={error:d}}}if(!h.ok)throw new dd({body:n,details:jc(d.error)||h.statusText,headers:h.headers,status:h.status,url:t});return d}catch(h){throw h instanceof dd||h instanceof Qv?h:new dd({body:n,cause:h,url:t})}}}}function oD(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Tf(ER(t));return r==="Bytes"?n:$5(n)}class aD extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const sy={checksum:new aD(8192)}.checksum,cD=/^0x[a-fA-F0-9]{40}$/;function S5(t,e={}){const{strict:r=!0}=e;if(!cD.test(t))throw new I5({address:t,cause:new uD});if(r){if(t.toLowerCase()===t)return;if(lD(t)!==t)throw new I5({address:t,cause:new hD})}}function lD(t){if(sy.has(t))return sy.get(t);S5(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=oD($R(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return sy.set(t,i),i}class I5 extends Gr{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class uD extends Gr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class hD extends Gr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const dD=/^(.*)\[([0-9]*)\]$/,pD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function oy(t,e){if(t.length!==e.length)throw new mD({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(oy.encode(i,s))}return A5(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return S5(c),Hf(c.toLowerCase(),i?32:0)}if(r==="string")return TR(n);if(r==="bytes")return n;if(r==="bool")return Hf(PR(n),i?32:1);const s=r.match(fD);if(s){const[c,l,u="256"]=s,h=Number.parseInt(u,10)/8;return NR(n,{size:i?32:h,signed:l==="int"})}const o=r.match(pD);if(o){const[c,l]=o;if(Number.parseInt(l,10)!==(n.length-2)/2)throw new gD({expectedSize:Number.parseInt(l,10),value:n});return ey(n,i?32:0)}const a=r.match(dD);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let h=0;h<n.length;h++)u.push(e(l,n[h],!0));return u.length===0?"0x":A5(...u)}throw new wD(r)}t.encode=e})(oy||(oy={}));class gD extends Gr{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${ty(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class mD extends Gr{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class wD extends Gr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class O5 extends Fw{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,kv(e);const n=Nf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),yu(s)}update(e){return wu(this),this.iHash.update(e),this}digestInto(e){wu(this),li(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ay=(t,e,r)=>new O5(t,e).update(r).digest();ay.create=(t,e)=>new O5(t,e);const fn=BigInt(0),Yr=BigInt(1),Zc=BigInt(2),P5=BigInt(3),N5=BigInt(4),T5=BigInt(5),yD=BigInt(7),k5=BigInt(8),bD=BigInt(9),R5=BigInt(16);function jn(t,e){const r=t%e;return r>=fn?r:e+r}function ui(t,e,r){let n=t;for(;e-- >fn;)n*=n,n%=r;return n}function D5(t,e){if(t===fn)throw new Error("invert: expected non-zero number");if(e<=fn)throw new Error("invert: expected positive modulus, got "+e);let r=jn(t,e),n=e,i=fn,s=Yr;for(;r!==fn;){const a=n/r,c=n%r,l=i-s*a;n=r,r=c,i=s,s=l}if(n!==Yr)throw new Error("invert: does not exist");return jn(i,e)}function cy(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function B5(t,e){const r=(t.ORDER+Yr)/N5,n=t.pow(e,r);return cy(t,n,e),n}function vD(t,e){const r=(t.ORDER-T5)/k5,n=t.mul(e,Zc),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,Zc),i),a=t.mul(s,t.sub(o,t.ONE));return cy(t,a,e),a}function ED(t){const e=Md(t),r=M5(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+yD)/R5;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const h=a.mul(l,i),d=a.mul(l,s),p=a.eql(a.sqr(u),c),f=a.eql(a.sqr(h),c);l=a.cmov(l,u,p),u=a.cmov(d,h,f);const g=a.eql(a.sqr(u),c),w=a.cmov(l,u,g);return cy(a,w,c),w}}function M5(t){if(t<P5)throw new Error("sqrt is not defined for small field");let e=t-Yr,r=0;for(;e%Zc===fn;)e/=Zc,r++;let n=Zc;const i=Md(t);for(;L5(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return B5;let s=i.pow(n,e);const o=(e+Yr)/Zc;return function(c,l){if(c.is0(l))return l;if(L5(c,l)!==1)throw new Error("Cannot find square root");let u=r,h=c.mul(c.ONE,s),d=c.pow(l,e),p=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let f=1,g=c.sqr(d);for(;!c.eql(g,c.ONE);)if(f++,g=c.sqr(g),f===u)throw new Error("Cannot find square root");const w=Yr<<BigInt(u-f-1),v=c.pow(h,w);u=f,h=c.sqr(v),d=c.mul(d,h),p=c.mul(p,v)}return p}}function CD(t){return t%N5===P5?B5:t%k5===T5?vD:t%R5===bD?ED(t):M5(t)}const AD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function U5(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=AD.reduce((n,i)=>(n[i]="function",n),e);return Ff(t,r),t}function $D(t,e,r){if(r<fn)throw new Error("invalid exponent, negatives unsupported");if(r===fn)return t.ONE;if(r===Yr)return e;let n=t.ONE,i=e;for(;r>fn;)r&Yr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Yr;return n}function qf(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function L5(t,e){const r=(t.ORDER-Yr)/Zc,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function F5(t,e){e!==void 0&&mu(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Md(t,e,r=!1,n={}){if(t<=fn)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(r=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:l}=F5(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:l,MASK:Rd(c),ZERO:fn,ONE:Yr,allowedLengths:a,create:d=>jn(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return fn<=d&&d<t},is0:d=>d===fn,isValidNot0:d=>!h.is0(d)&&h.isValid(d),isOdd:d=>(d&Yr)===Yr,neg:d=>jn(-d,t),eql:(d,p)=>d===p,sqr:d=>jn(d*d,t),add:(d,p)=>jn(d+p,t),sub:(d,p)=>jn(d-p,t),mul:(d,p)=>jn(d*p,t),pow:(d,p)=>$D(h,d,p),div:(d,p)=>jn(d*D5(p,t),t),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>D5(d,t),sqrt:s||(d=>(u||(u=CD(t)),u(h,d))),toBytes:d=>r?m5(d,l):Lf(d,l),fromBytes:(d,p=!0)=>{if(a){if(!a.includes(d.length)||d.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const g=new Uint8Array(l);g.set(d,r?0:g.length-d.length),d=g}if(d.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+d.length);let f=r?g5(d):Wc(d);if(o&&(f=jn(f,t)),!p&&!h.isValid(f))throw new Error("invalid field element: outside of range 0..ORDER");return f},invertBatch:d=>qf(h,d),cmov:(d,p,f)=>f?p:d});return Object.freeze(h)}function H5(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function j5(t){const e=H5(t);return e+Math.ceil(e/2)}function V5(t,e,r=!1){const n=t.length,i=H5(e),s=j5(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?g5(t):Wc(t),a=jn(o,e-Yr)+Yr;return r?m5(a,i):Lf(a,i)}const Su=BigInt(0),Kc=BigInt(1);function Wf(t,e){const r=e.negate();return t?r:e}function ly(t,e){const r=qf(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function z5(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function uy(t,e){z5(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=Rd(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function q5(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=Kc);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,p=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:l}}function xD(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function _D(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const hy=new WeakMap,W5=new WeakMap;function dy(t){return W5.get(t)||1}function Z5(t){if(t!==Su)throw new Error("invalid wNAF")}class SD{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Su;)r&Kc&&(n=n.add(i)),i=i.double(),r>>=Kc;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=uy(r,this.bits),s=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=uy(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:h,isNegF:d,offsetF:p}=q5(n,a,o);n=c,u?s=s.add(Wf(d,r[p])):i=i.add(Wf(h,r[l]))}return Z5(n),{p:i,f:s}}wNAFUnsafe(e,r,n,i=this.ZERO){const s=uy(e,this.bits);for(let o=0;o<s.windows&&n!==Su;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=q5(n,o,s);if(n=a,!l){const h=r[c];i=i.add(u?h.negate():h)}}return Z5(n),i}getPrecomputes(e,r,n){let i=hy.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),hy.set(r,i))),i}cached(e,r,n){const i=dy(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const s=dy(e);return s===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,i)}createCache(e,r){z5(r,this.bits),W5.set(e,r),hy.delete(e)}hasCache(e){return dy(e)!==1}}function ID(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>Su||n>Su;)r&Kc&&(s=s.add(i)),n&Kc&&(o=o.add(i)),i=i.double(),r>>=Kc,n>>=Kc;return{p1:s,p2:o}}function OD(t,e,r,n){xD(r,t),_D(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=w5(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Rd(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let p=h;p>=0;p-=c){u.fill(o);for(let g=0;g<s;g++){const w=n[g],v=Number(w>>BigInt(p)&l);u[v]=u[v].add(r[g])}let f=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),f=f.add(w);if(d=d.add(f),p!==0)for(let g=0;g<c;g++)d=d.double()}return d}function K5(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return U5(e),e}else return Md(t,{isLE:r})}function PD(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>Su))throw new Error(`CURVE.${c} must be positive bigint`)}const i=K5(e.p,r.Fp,n),s=K5(e.n,r.Fn,n),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}const G5=(t,e)=>(t+(t>=0?e:-e)/os)/e;function ND(t,e,r){const[[n,i],[s,o]]=e,a=G5(o*t,r),c=G5(-i*t,r);let l=t-a*n-c*s,u=-a*i-c*o;const h=l<Fi,d=u<Fi;h&&(l=-l),d&&(u=-u);const p=Rd(Math.ceil(w5(r)/2))+kr;if(l<Fi||l>=p||u<Fi||u>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}function py(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function fy(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Mf(r.lowS,"lowS"),Mf(r.prehash,"prehash"),r.format!==void 0&&py(r.format),r}class TD extends Error{constructor(e=""){super(e)}}const qo={Err:TD,_tlv:{encode:(t,e)=>{const{Err:r}=qo;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Uf(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Uf(i.length/2|128):"";return Uf(t)+s+i+e},decode(t,e){const{Err:r}=qo;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=qo;if(t<Fi)throw new e("integer: negative integers are not allowed");let r=Uf(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=qo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Wc(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=qo,i=Wt("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=qo,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Fi=BigInt(0),kr=BigInt(1),os=BigInt(2),Iu=BigInt(3),gy=BigInt(4);function Gc(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=Wt("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function kD(t,e={}){const r=PD("weierstrass",t,e),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;Ff(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=X5(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(T,x,_){const{x:m,y}=x.toAffine(),E=n.toBytes(m);if(Mf(_,"isCompressed"),_){u();const I=!n.isOdd(y);return mr(Y5(I),E)}else return mr(Uint8Array.of(4),E,n.toBytes(y))}function d(T){qc(T,void 0,"Point");const{publicKey:x,publicKeyUncompressed:_}=l,m=T.length,y=T[0],E=T.subarray(1);if(m===x&&(y===2||y===3)){const I=n.fromBytes(E);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const $=g(I);let O;try{O=n.sqrt($)}catch(K){const V=K instanceof Error?": "+K.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}u();const B=n.isOdd(O);return(y&1)===1!==B&&(O=n.neg(O)),{x:I,y:O}}else if(m===_&&y===4){const I=n.BYTES,$=n.fromBytes(E.subarray(0,I)),O=n.fromBytes(E.subarray(I,I*2));if(!w($,O))throw new Error("bad point: is not on curve");return{x:$,y:O}}else throw new Error(`bad point: got length ${m}, expected compressed=${x} or uncompressed=${_}`)}const p=e.toBytes||h,f=e.fromBytes||d;function g(T){const x=n.sqr(T),_=n.mul(x,T);return n.add(n.add(_,n.mul(T,s.a)),s.b)}function w(T,x){const _=n.sqr(x),m=g(T);return n.eql(_,m)}if(!w(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const v=n.mul(n.pow(s.a,Iu),gy),C=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(v,C)))throw new Error("bad curve params: a or b");function b(T,x,_=!1){if(!n.isValid(x)||_&&n.is0(x))throw new Error(`bad point coordinate ${T}`);return x}function A(T){if(!(T instanceof S))throw new Error("ProjectivePoint expected")}function P(T){if(!c||!c.basises)throw new Error("no endo");return ND(T,c.basises,i.ORDER)}const R=y5((T,x)=>{const{X:_,Y:m,Z:y}=T;if(n.eql(y,n.ONE))return{x:_,y:m};const E=T.is0();x==null&&(x=E?n.ONE:n.inv(y));const I=n.mul(_,x),$=n.mul(m,x),O=n.mul(y,x);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:I,y:$}}),M=y5(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.Y))return;throw new Error("bad point: ZERO")}const{x,y:_}=T.toAffine();if(!n.isValid(x)||!n.isValid(_))throw new Error("bad point: x or y not field elements");if(!w(x,_))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(T,x,_,m,y){return _=new S(n.mul(_.X,T),_.Y,_.Z),x=Wf(m,x),_=Wf(y,_),x.add(_)}class S{constructor(x,_,m){this.X=b("x",x),this.Y=b("y",_,!0),this.Z=b("z",m),Object.freeze(this)}static CURVE(){return s}static fromAffine(x){const{x:_,y:m}=x||{};if(!x||!n.isValid(_)||!n.isValid(m))throw new Error("invalid affine point");if(x instanceof S)throw new Error("projective point not allowed");return n.is0(_)&&n.is0(m)?S.ZERO:new S(_,m,n.ONE)}static fromBytes(x){const _=S.fromAffine(f(qc(x,void 0,"point")));return _.assertValidity(),_}static fromHex(x){return S.fromBytes(Wt("pointHex",x))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(x=8,_=!0){return D.createCache(this,x),_||this.multiply(Iu),this}assertValidity(){M(this)}hasEvenY(){const{y:x}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(x)}equals(x){A(x);const{X:_,Y:m,Z:y}=this,{X:E,Y:I,Z:$}=x,O=n.eql(n.mul(_,$),n.mul(E,y)),B=n.eql(n.mul(m,$),n.mul(I,y));return O&&B}negate(){return new S(this.X,n.neg(this.Y),this.Z)}double(){const{a:x,b:_}=s,m=n.mul(_,Iu),{X:y,Y:E,Z:I}=this;let $=n.ZERO,O=n.ZERO,B=n.ZERO,H=n.mul(y,y),K=n.mul(E,E),V=n.mul(I,I),q=n.mul(y,E);return q=n.add(q,q),B=n.mul(y,I),B=n.add(B,B),$=n.mul(x,B),O=n.mul(m,V),O=n.add($,O),$=n.sub(K,O),O=n.add(K,O),O=n.mul($,O),$=n.mul(q,$),B=n.mul(m,B),V=n.mul(x,V),q=n.sub(H,V),q=n.mul(x,q),q=n.add(q,B),B=n.add(H,H),H=n.add(B,H),H=n.add(H,V),H=n.mul(H,q),O=n.add(O,H),V=n.mul(E,I),V=n.add(V,V),H=n.mul(V,q),$=n.sub($,H),B=n.mul(V,K),B=n.add(B,B),B=n.add(B,B),new S($,O,B)}add(x){A(x);const{X:_,Y:m,Z:y}=this,{X:E,Y:I,Z:$}=x;let O=n.ZERO,B=n.ZERO,H=n.ZERO;const K=s.a,V=n.mul(s.b,Iu);let q=n.mul(_,E),Q=n.mul(m,I),re=n.mul(y,$),he=n.add(_,m),ee=n.add(E,I);he=n.mul(he,ee),ee=n.add(q,Q),he=n.sub(he,ee),ee=n.add(_,y);let de=n.add(E,$);return ee=n.mul(ee,de),de=n.add(q,re),ee=n.sub(ee,de),de=n.add(m,y),O=n.add(I,$),de=n.mul(de,O),O=n.add(Q,re),de=n.sub(de,O),H=n.mul(K,ee),O=n.mul(V,re),H=n.add(O,H),O=n.sub(Q,H),H=n.add(Q,H),B=n.mul(O,H),Q=n.add(q,q),Q=n.add(Q,q),re=n.mul(K,re),ee=n.mul(V,ee),Q=n.add(Q,re),re=n.sub(q,re),re=n.mul(K,re),ee=n.add(ee,re),q=n.mul(Q,ee),B=n.add(B,q),q=n.mul(de,ee),O=n.mul(he,O),O=n.sub(O,q),q=n.mul(he,Q),H=n.mul(de,H),H=n.add(H,q),new S(O,B,H)}subtract(x){return this.add(x.negate())}is0(){return this.equals(S.ZERO)}multiply(x){const{endo:_}=e;if(!i.isValidNot0(x))throw new Error("invalid scalar: out of range");let m,y;const E=I=>D.cached(this,I,$=>ly(S,$));if(_){const{k1neg:I,k1:$,k2neg:O,k2:B}=P(x),{p:H,f:K}=E($),{p:V,f:q}=E(B);y=K.add(q),m=U(_.beta,H,V,I,O)}else{const{p:I,f:$}=E(x);m=I,y=$}return ly(S,[m,y])[0]}multiplyUnsafe(x){const{endo:_}=e,m=this;if(!i.isValid(x))throw new Error("invalid scalar: out of range");if(x===Fi||m.is0())return S.ZERO;if(x===kr)return m;if(D.hasCache(this))return this.multiply(x);if(_){const{k1neg:y,k1:E,k2neg:I,k2:$}=P(x),{p1:O,p2:B}=ID(S,m,E,$);return U(_.beta,O,B,y,I)}else return D.unsafe(m,x)}multiplyAndAddUnsafe(x,_,m){const y=this.multiplyUnsafe(_).add(x.multiplyUnsafe(m));return y.is0()?void 0:y}toAffine(x){return R(this,x)}isTorsionFree(){const{isTorsionFree:x}=e;return o===kr?!0:x?x(S,this):D.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:x}=e;return o===kr?this:x?x(S,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(x=!0){return Mf(x,"isCompressed"),this.assertValidity(),p(S,this,x)}toHex(x=!0){return bu(this.toBytes(x))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(x=!0){return this.toBytes(x)}_setWindowSize(x){this.precompute(x)}static normalizeZ(x){return ly(S,x)}static msm(x,_){return OD(S,i,x,_)}static fromPrivateKey(x){return S.BASE.multiply(Gc(i,x))}}S.BASE=new S(s.Gx,s.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=i;const L=i.BITS,D=new SD(S,e.endo?Math.ceil(L/2):L);return S.BASE.precompute(8),S}function Y5(t){return Uint8Array.of(t?2:3)}function RD(t,e){const r=t.ORDER;let n=Fi;for(let f=r-kr;f%os===Fi;f/=os)n+=kr;const i=n,s=os<<i-kr-kr,o=s*os,a=(r-kr)/o,c=(a-kr)/os,l=o-kr,u=s,h=t.pow(e,a),d=t.pow(e,(a+kr)/os);let p=(f,g)=>{let w=h,v=t.pow(g,l),C=t.sqr(v);C=t.mul(C,g);let b=t.mul(f,C);b=t.pow(b,c),b=t.mul(b,v),v=t.mul(b,g),C=t.mul(b,f);let A=t.mul(C,v);b=t.pow(A,u);let P=t.eql(b,t.ONE);v=t.mul(C,d),b=t.mul(A,w),C=t.cmov(v,C,P),A=t.cmov(b,A,P);for(let R=i;R>kr;R--){let M=R-os;M=os<<M-kr;let U=t.pow(A,M);const S=t.eql(U,t.ONE);v=t.mul(C,w),w=t.mul(w,w),U=t.mul(A,w),C=t.cmov(v,C,S),A=t.cmov(U,A,S)}return{isValid:P,value:C}};if(t.ORDER%gy===Iu){const f=(t.ORDER-Iu)/gy,g=t.sqrt(t.neg(e));p=(w,v)=>{let C=t.sqr(v);const b=t.mul(w,v);C=t.mul(C,b);let A=t.pow(C,f);A=t.mul(A,b);const P=t.mul(A,g),R=t.mul(t.sqr(A),v),M=t.eql(R,w);let U=t.cmov(P,A,M);return{isValid:M,value:U}}}return p}function DD(t,e){U5(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const s=RD(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return o=>{let a,c,l,u,h,d,p,f;a=t.sqr(o),a=t.mul(a,i),c=t.sqr(a),c=t.add(c,a),l=t.add(c,t.ONE),l=t.mul(l,n),u=t.cmov(i,t.neg(c),!t.eql(c,t.ZERO)),u=t.mul(u,r),c=t.sqr(l),d=t.sqr(u),h=t.mul(d,r),c=t.add(c,h),c=t.mul(c,l),d=t.mul(d,u),h=t.mul(d,n),c=t.add(c,h),p=t.mul(a,l);const{isValid:g,value:w}=s(c,d);f=t.mul(a,o),f=t.mul(f,w),p=t.cmov(p,l,g),f=t.cmov(f,w,g);const v=t.isOdd(o)===t.isOdd(f);f=t.cmov(t.neg(f),f,v);const C=qf(t,[u],!0)[0];return p=t.mul(p,C),{x:p,y:f}}}function X5(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function BD(t,e={}){const{Fn:r}=t,n=e.randomBytes||Eu,i=Object.assign(X5(t.Fp,r),{seed:j5(r.ORDER)});function s(p){try{return!!Gc(r,p)}catch{return!1}}function o(p,f){const{publicKey:g,publicKeyUncompressed:w}=i;try{const v=p.length;return f===!0&&v!==g||f===!1&&v!==w?!1:!!t.fromBytes(p)}catch{return!1}}function a(p=n(i.seed)){return V5(qc(p,i.seed,"seed"),r.ORDER)}function c(p,f=!0){return t.BASE.multiply(Gc(r,p)).toBytes(f)}function l(p){const f=a(p);return{secretKey:f,publicKey:c(f)}}function u(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const{secretKey:f,publicKey:g,publicKeyUncompressed:w}=i;if(r.allowedLengths||f===g)return;const v=Wt("key",p).length;return v===g||v===w}function h(p,f,g=!0){if(u(p)===!0)throw new Error("first arg must be private key");if(u(f)===!1)throw new Error("second arg must be public key");const w=Gc(r,p);return t.fromHex(f).multiply(w).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:l,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:p=>Gc(r,p),precompute(p=8,f=t.BASE){return f.precompute(p,!1)}},lengths:i})}function MD(t,e,r={}){kv(e),Ff(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Eu,i=r.hmac||((_,...m)=>ay(e,_,mr(...m))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:p}=BD(t,r),f={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function w(_){const m=a>>kr;return _>m}function v(_,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${_}: out of range 1..Point.Fn.ORDER`);return m}function C(_,m){py(m);const y=p.signature,E=m==="compact"?y:m==="recovered"?y+1:void 0;return qc(_,E,`${m} signature`)}class b{constructor(m,y,E){this.r=v("r",m),this.s=v("s",y),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(m,y=g){C(m,y);let E;if(y==="der"){const{r:B,s:H}=qo.toSig(qc(m));return new b(B,H)}y==="recovered"&&(E=m[0],y="compact",m=m.subarray(1));const I=o.BYTES,$=m.subarray(0,I),O=m.subarray(I,I*2);return new b(o.fromBytes($),o.fromBytes(O),E)}static fromHex(m,y){return this.fromBytes(Pf(m),y)}addRecoveryBit(m){return new b(this.r,this.s,m)}recoverPublicKey(m){const y=s.ORDER,{r:E,s:I,recovery:$}=this;if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");if(a*os<y&&$>1)throw new Error("recovery id is ambiguous for h>1 curve");const B=$===2||$===3?E+a:E;if(!s.isValid(B))throw new Error("recovery id 2 or 3 invalid");const H=s.toBytes(B),K=t.fromBytes(mr(Y5(($&1)===0),H)),V=o.inv(B),q=P(Wt("msgHash",m)),Q=o.create(-q*V),re=o.create(I*V),he=t.BASE.multiplyUnsafe(Q).add(K.multiplyUnsafe(re));if(he.is0())throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return w(this.s)}toBytes(m=g){if(py(m),m==="der")return Pf(qo.hexFromSig(this));const y=o.toBytes(this.r),E=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return mr(Uint8Array.of(this.recovery),y,E)}return mr(y,E)}toHex(m){return bu(this.toBytes(m))}assertValidity(){}static fromCompact(m){return b.fromBytes(Wt("sig",m),"compact")}static fromDER(m){return b.fromBytes(Wt("sig",m),"der")}normalizeS(){return this.hasHighS()?new b(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bu(this.toBytes("compact"))}}const A=r.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const y=Wc(m),E=m.length*8-c;return E>0?y>>BigInt(E):y},P=r.bits2int_modN||function(m){return o.create(A(m))},R=Rd(c);function M(_){return pR("num < 2^"+c,_,Fi,R),o.toBytes(_)}function U(_,m){return qc(_,void 0,"message"),m?qc(e(_),void 0,"prehashed message"):_}function S(_,m,y){if(["recovered","canonical"].some(Q=>Q in y))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:I,extraEntropy:$}=fy(y,f);_=U(_,I);const O=P(_),B=Gc(o,m),H=[M(B),M(O)];if($!=null&&$!==!1){const Q=$===!0?n(p.secretKey):$;H.push(Wt("extraEntropy",Q))}const K=mr(...H),V=O;function q(Q){const re=A(Q);if(!o.isValidNot0(re))return;const he=o.inv(re),ee=t.BASE.multiply(re).toAffine(),de=o.create(ee.x);if(de===Fi)return;const Re=o.create(he*o.create(V+de*B));if(Re===Fi)return;let rt=(ee.x===de?0:2)|Number(ee.y&kr),wt=Re;return E&&w(Re)&&(wt=o.neg(Re),rt^=1),new b(de,wt,rt)}return{seed:K,k2sig:q}}function L(_,m,y={}){_=Wt("message",_);const{seed:E,k2sig:I}=S(_,m,y);return fR(e.outputLen,o.BYTES,i)(E,I)}function D(_){let m;const y=typeof _=="string"||ud(_),E=!y&&_!==null&&typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!y&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)m=new b(_.r,_.s);else if(y){try{m=b.fromBytes(Wt("sig",_),"der")}catch(I){if(!(I instanceof qo.Err))throw I}if(!m)try{m=b.fromBytes(Wt("sig",_),"compact")}catch{return!1}}return m||!1}function T(_,m,y,E={}){const{lowS:I,prehash:$,format:O}=fy(E,f);if(y=Wt("publicKey",y),m=U(Wt("message",m),$),"strict"in E)throw new Error("options.strict was renamed to lowS");const B=O===void 0?D(_):b.fromBytes(Wt("sig",_),O);if(B===!1)return!1;try{const H=t.fromBytes(y);if(I&&B.hasHighS())return!1;const{r:K,s:V}=B,q=P(m),Q=o.inv(V),re=o.create(q*Q),he=o.create(K*Q),ee=t.BASE.multiplyUnsafe(re).add(H.multiplyUnsafe(he));return ee.is0()?!1:o.create(ee.x)===K}catch{return!1}}function x(_,m,y={}){const{prehash:E}=fy(y,f);return m=U(m,E),b.fromBytes(_,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:p,Point:t,sign:L,verify:T,recoverPublicKey:x,Signature:b,hash:e})}function UD(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Md(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function LD(t){const{CURVE:e,curveOpts:r}=UD(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function FD(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,F5(r.Fn.ORDER,r.Fn.BITS))})}function HD(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=LD(t),s=kD(e,r),o=MD(s,n,i);return FD(t,o)}function jD(t,e){const r=n=>HD({...t,hash:n});return{...r(e),create:r}}const VD=Wc;function Ta(t,e){if(Ud(t),Ud(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function zD(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function Ud(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function J5(t){if(!ud(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or string");return typeof t=="string"?vu(t):t}function qD(t,e,r,n){li(t),Ud(r),e=J5(e),e.length>255&&(e=n(mr(vu("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=mr(e,Ta(e.length,1)),c=Ta(0,s),l=Ta(r,2),u=new Array(o),h=n(mr(c,t,l,Ta(0,1),a));u[0]=n(mr(h,Ta(1,1),a));for(let p=1;p<=o;p++){const f=[zD(h,u[p-1]),Ta(p+1,1),a];u[p]=n(mr(...f))}return mr(...u).slice(0,r)}function WD(t,e,r,n,i){if(li(t),Ud(r),e=J5(e),e.length>255){const s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update(vu("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Ta(r,2)).update(e).update(Ta(e.length,1)).digest()}function my(t,e,r){Ff(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:s,hash:o,expand:a,DST:c}=r;if(!gR(r.hash))throw new Error("expected valid hash");li(t),Ud(e);const l=n.toString(2).length,u=Math.ceil((l+i)/8),h=e*s*u;let d;if(a==="xmd")d=qD(t,c,h,o);else if(a==="xof")d=WD(t,c,h,i,o);else if(a==="_internal_pass")d=t;else throw new Error('expand must be "xmd" or "xof"');const p=new Array(e);for(let f=0;f<e;f++){const g=new Array(s);for(let w=0;w<s;w++){const v=u*(w+f*s),C=d.subarray(v,v+u);g[w]=jn(VD(C),n)}p[f]=g}return p}function ZD(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,c]=r.map(h=>h.reduce((d,p)=>t.add(t.mul(d,n),p))),[l,u]=qf(t,[o,c],!0);return n=t.mul(s,l),i=t.mul(i,t.mul(a,u)),{x:n,y:i}}}const KD=vu("HashToScalar-");function GD(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(s){return t.fromAffine(e(s))}function i(s){const o=s.clearCofactor();return o.equals(t.ZERO)?t.ZERO:(o.assertValidity(),o)}return{defaults:r,hashToCurve(s,o){const a=Object.assign({},r,o),c=my(s,2,a),l=n(c[0]),u=n(c[1]);return i(l.add(u))},encodeToCurve(s,o){const a=r.encodeDST?{DST:r.encodeDST}:{},c=Object.assign({},r,a,o),l=my(s,1,c),u=n(l[0]);return i(u)},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(const o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return i(n(s))},hashToScalar(s,o){const a=t.Fn.ORDER,c=Object.assign({},r,{p:a,m:1,DST:KD},o);return my(s,1,c)[0][0]}}}const Ou={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},YD={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},XD=BigInt(0),Q5=BigInt(1),wy=BigInt(2);function JD(t){const e=Ou.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=ui(u,r,e)*u%e,d=ui(h,r,e)*u%e,p=ui(d,wy,e)*l%e,f=ui(p,i,e)*p%e,g=ui(f,s,e)*f%e,w=ui(g,a,e)*g%e,v=ui(w,c,e)*w%e,C=ui(v,a,e)*g%e,b=ui(C,r,e)*u%e,A=ui(b,o,e)*f%e,P=ui(A,n,e)*l%e,R=ui(P,wy,e);if(!Wo.eql(Wo.sqr(R),t))throw new Error("Cannot find square root");return R}const Wo=Md(Ou.p,{sqrt:JD}),Zf=jD({...Ou,Fp:Wo,lowS:!0,endo:YD},Vo),eE={};function Kf(t,...e){let r=eE[t];if(r===void 0){const n=Vo(vu(t));r=mr(n,n),eE[t]=r}return Vo(mr(r,...e))}const yy=t=>t.toBytes(!0).slice(1),Pu=Zf.Point,by=t=>t%wy===XD;function vy(t){const{Fn:e,BASE:r}=Pu,n=Gc(e,t),i=r.multiply(n);return{scalar:by(i.y)?n:e.neg(n),bytes:yy(i)}}function tE(t){const e=Wo;if(!e.isValidNot0(t))throw new Error("invalid x: Fail if x \u2265 p");const r=e.create(t*t),n=e.create(r*t+BigInt(7));let i=e.sqrt(n);by(i)||(i=e.neg(i));const s=Pu.fromAffine({x:t,y:i});return s.assertValidity(),s}const Ld=Wc;function rE(...t){return Pu.Fn.create(Ld(Kf("BIP0340/challenge",...t)))}function nE(t){return vy(t).bytes}function QD(t,e,r=Eu(32)){const{Fn:n}=Pu,i=Wt("message",t),{bytes:s,scalar:o}=vy(e),a=Wt("auxRand",r,32),c=n.toBytes(o^Ld(Kf("BIP0340/aux",a))),l=Kf("BIP0340/nonce",c,s,i),{bytes:u,scalar:h}=vy(l),d=rE(u,s,i),p=new Uint8Array(64);if(p.set(u,0),p.set(n.toBytes(n.create(h+d*o)),32),!iE(p,i,s))throw new Error("sign: Invalid signature produced");return p}function iE(t,e,r){const{Fn:n,BASE:i}=Pu,s=Wt("signature",t,64),o=Wt("message",e),a=Wt("publicKey",r,32);try{const c=tE(Ld(a)),l=Ld(s.subarray(0,32));if(!Jw(l,Q5,Ou.p))return!1;const u=Ld(s.subarray(32,64));if(!Jw(u,Q5,Ou.n))return!1;const h=rE(n.toBytes(l),yy(c),o),d=i.multiplyUnsafe(u).add(c.multiplyUnsafe(n.neg(h))),{x:p,y:f}=d.toAffine();return!(d.is0()||!by(f)||p!==l)}catch{return!1}}const eB=(()=>{const r=(i=Eu(48))=>V5(i,Ou.n);Zf.utils.randomSecretKey;function n(i){const s=r(i);return{secretKey:s,publicKey:nE(s)}}return{keygen:n,getPublicKey:nE,sign:QD,verify:iE,Point:Pu,utils:{randomSecretKey:r,randomPrivateKey:r,taggedHash:Kf,lift_x:tE,pointToBytes:yy,numberToBytesBE:Lf,bytesToNumberBE:Wc,mod:jn},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:32*2,seed:48}}})(),tB=ZD(Wo,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),rB=DD(Wo,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Wo.create(BigInt("-11"))}),Ey=GD(Zf.Point,t=>{const{x:e,y:r}=rB(Wo.create(t[0]));return tB(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Wo.ORDER,m:1,k:128,expand:"xmd",hash:Vo});var nB=Object.freeze({__proto__:null,secp256k1:Zf,schnorr:eB,secp256k1_hasher:Ey,hashToCurve:Ey.hashToCurve,encodeToCurve:Ey.encodeToCurve});function sE({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=jR();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:tD(n,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function oE(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=iB,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=t,p=()=>{};const f=sE({key:r,name:n,async request({method:g,params:w}){let v;const C=async(b=0)=>{const A=d[b]({...h,chain:c,retryCount:0,timeout:u});try{const P=await A.request({method:g,params:w});return p({method:g,params:w,response:P,transport:A,status:"success"}),P}catch(P){if(p({error:P,method:g,params:w,transport:A,status:"error"}),s(P)||b===d.length-1||(v??=d.slice(b+1).some(R=>{const{include:M,exclude:U}=R({chain:c}).config.methods||{};return M?M.includes(g):U?!U.includes(g):!0}),!v))throw P;return C(b+1)}};return C()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>p=g,transports:d.map(g=>g({chain:c,retryCount:0}))});if(i){const g=typeof i=="object"?i:{};sB({chain:c,interval:g.interval??l,onTransports:w=>d=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:d,weights:g.weights})}return f}}function iB(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===$u.code||t.code===zc.code||Ww.nodeMessage.test(t.message)||t.code===5e3))}function sB({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:s}),v=Date.now();let C,b;try{await(n?n({transport:w}):w.request({method:"net_listening"})),b=1}catch{b=0}finally{C=Date.now()}return{latency:C-v,success:b}}));u.push(d),u.length>i&&u.shift();const p=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),f=o.map((g,w)=>{const v=u.map(R=>R[w].latency),b=1-v.reduce((R,M)=>R+M,0)/v.length/p,A=u.map(R=>R[w].success),P=A.reduce((R,M)=>R+M,0)/A.length;return P===0?[0,w]:[l*b+c*P,w]}).sort((g,w)=>w[0]-g[0]);r(f.map(([,g])=>o[g])),await x5(e),h()};h()}class oB extends Fe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Gf(t,e={}){const{batch:r,fetchOptions:n,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:h,retryCount:d,timeout:p})=>{const{batchSize:f=1e3,wait:g=0}=typeof r=="object"?r:{},w=e.retryCount??d,v=p??e.timeout??1e4,C=t||h?.rpcUrls.default.http[0];if(!C)throw new oB;const b=sD(C,{fetchOptions:n,onRequest:a,onResponse:c,timeout:v});return sE({key:i,methods:s,name:o,async request({method:A,params:P}){const R={method:A,params:P},{schedule:M}=MR({id:C,wait:g,shouldSplitBatch(D){return D.length>f},fn:D=>b.request({body:D}),sort:(D,T)=>D.id-T.id}),U=async D=>r?M(D):[await b.request({body:D})],[{error:S,result:L}]=await U(R);if(u)return{error:S,result:L};if(S)throw new Jv({body:R,error:S,url:C});return L},retryCount:w,retryDelay:l,timeout:v,type:"http"},{fetchOptions:n,url:C})}}function aB(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const p=l.length;for(;d!==p&&l[d]===0;)d++,u++;const f=(p-d)*s+1>>>0,g=new Uint8Array(f);for(;d!==p;){let C=l[d],b=0;for(let A=f-1;(C!==0||b<h)&&A!==-1;A--,b++)C+=256*g[A]>>>0,g[A]=C%r>>>0,C=C/r>>>0;if(C!==0)throw new Error("Non-zero carry");h=b,d++}let w=f-h;for(;w!==f&&g[w]===0;)w++;let v=n.repeat(u);for(;w<f;++w)v+=t.charAt(g[w]);return v}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===n;)h++,u++;const p=(l.length-u)*i+1>>>0,f=new Uint8Array(p);for(;u<l.length;){const C=l.charCodeAt(u);if(C>255)return;let b=e[C];if(b===255)return;let A=0;for(let P=p-1;(b!==0||A<d)&&P!==-1;P--,A++)b+=r*f[P]>>>0,f[P]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");d=A,u++}let g=p-d;for(;g!==p&&f[g]===0;)g++;const w=new Uint8Array(h+(p-g));let v=h;for(;g!==p;)w[v++]=f[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var cB="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Hi=aB(cB);function lB(t){const e=t.length;let r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if((i&4294967168)===0){r++;continue}else if((i&4294965248)===0)r+=2;else{if(i>=55296&&i<=56319&&n<e){const s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?r+=3:r+=4}}return r}function uB(t,e,r){const n=t.length;let i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){const a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}const hB=new TextEncoder,dB=50;function pB(t,e,r){hB.encodeInto(t,e.subarray(r))}function fB(t,e,r){t.length>dB?pB(t,e,r):uB(t,e,r)}const gB=4096;function aE(t,e,r){let n=e;const i=n+r,s=[];let o="";for(;n<i;){const a=t[n++];if((a&128)===0)s.push(a);else if((a&224)===192){const c=t[n++]&63;s.push((a&31)<<6|c)}else if((a&240)===224){const c=t[n++]&63,l=t[n++]&63;s.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[n++]&63,l=t[n++]&63,u=t[n++]&63;let h=(a&7)<<18|c<<12|l<<6|u;h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|h&1023),s.push(h)}else s.push(a);s.length>=gB&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const mB=new TextDecoder,wB=200;function yB(t,e,r){const n=t.subarray(e,e+r);return mB.decode(n)}function bB(t,e,r){return r>wB?yB(t,e,r):aE(t,e,r)}class Yf{constructor(e,r){this.type=e,this.data=r}}class Vn extends Error{constructor(e){super(e);const r=Object.create(Vn.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Vn.name})}}const Fd=4294967295;function vB(t,e,r){const n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}function cE(t,e,r){const n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}function lE(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function EB(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const CB=-1,AB=4294967296-1,$B=17179869184-1;function xB({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=$B)if(e===0&&t<=AB){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),cE(n,4,t),r}}function _B(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}function SB(t){if(t instanceof Date){const e=_B(t);return xB(e)}else return null}function IB(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{const r=lE(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new Vn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function OB(t){const e=IB(t);return new Date(e.sec*1e3+e.nsec/1e6)}const PB={type:CB,encode:SB,decode:OB};class Xf{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(PB)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const i=-1-e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const i=this.builtInEncoders[n];if(i!=null){const s=i(e,r);if(s!=null){const o=-1-n;return new Yf(o,s)}}}for(let n=0;n<this.encoders.length;n++){const i=this.encoders[n];if(i!=null){const s=i(e,r);if(s!=null){const o=n;return new Yf(o,s)}}}return e instanceof Yf?e:null}decode(e,r,n){const i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new Yf(r,e)}}Xf.defaultCodec=new Xf;function NB(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Cy(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):NB(t)?new Uint8Array(t):Uint8Array.from(t)}const TB=100,kB=2048;class Ay{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Xf.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??TB,this.initialBufferSize=e?.initialBufferSize??kB,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Ay({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=lB(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),fB(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=Cy(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(const i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of n){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),i=n.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),vB(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),cE(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}function uE(t,e){return new Ay(e).encodeSharedRef(t)}function $y(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const RB=16,DB=16;class BB{constructor(e=RB,r=DB){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const i=this.caches[n-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return s.str}return null}store(e,r){const n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){const i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;const s=aE(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}}const xy="array",Hd="map_key",hE="map_value",MB=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Vn("The type of key must be string or number but "+typeof t)};class UB{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=xy,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=Hd,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===xy){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===Hd||e.type===hE){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const jd=-1,_y=new DataView(new ArrayBuffer(0)),LB=new Uint8Array(_y.buffer);try{_y.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const dE=new RangeError("Insufficient data"),FB=new BB;class Sy{constructor(e){this.totalPos=0,this.pos=0,this.view=_y,this.bytes=LB,this.headByte=jd,this.stack=new UB,this.entered=!1,this.extensionCodec=e?.extensionCodec??Xf.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Fd,this.maxBinLength=e?.maxBinLength??Fd,this.maxArrayLength=e?.maxArrayLength??Fd,this.maxMapLength=e?.maxMapLength??Fd,this.maxExtLength=e?.maxExtLength??Fd,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:FB,this.mapKeyConverter=e?.mapKeyConverter??MB}clone(){return new Sy({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=jd,this.stack.reset()}setBuffer(e){const r=Cy(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===jd&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=Cy(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${$y(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,i=-1;for await(const s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{const i=e-160;r=this.decodeString(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const i=this.lookU8();r=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();r=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();r=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){const i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();r=this.decodeExtension(i,4)}else throw new Vn(`Unrecognized type byte: ${$y(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const i=n.top();if(i.type===xy)if(i.array[i.position]=r,i.position++,i.position===i.size)r=i.array,n.release(i);else continue e;else if(i.type===Hd){if(r==="__proto__")throw new Vn("The key __proto__ is not allowed");i.key=this.mapKeyConverter(r),i.type=hE;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)r=i.map,n.release(i);else{i.key=null,i.type=Hd;continue e}}return r}}readHeadByte(){return this.headByte===jd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=jd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Vn(`Unrecognized array type byte: ${$y(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Vn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Vn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){if(e>this.maxStrLength)throw new Vn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw dE;const n=this.pos+r;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,n,e):i=bB(this.bytes,n,e),this.pos+=r+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Hd:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Vn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw dE;const n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new Vn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=EB(this.view,this.pos);return this.pos+=8,e}readI64(){const e=lE(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}function pE(t,e){return new Sy(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Iy(t,...e){if(!Jf(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fE(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function gE(t){if(typeof t!="function")throw new Error("function expected");return!0}function ka(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Vd(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Qf(t){if(!Array.isArray(t))throw new Error("array expected")}function eg(t,e){if(!fE(!0,e))throw new Error(`${t}: array of strings expected`)}function Oy(t,e){if(!fE(!1,e))throw new Error(`${t}: array of numbers expected`)}function zn(...t){const e=s=>s,r=(s,o)=>a=>s(o(a)),n=t.map(s=>s.encode).reduceRight(r,e),i=t.map(s=>s.decode).reduce(r,e);return{encode:n,decode:i}}function qn(t){const e=typeof t=="string"?t.split(""):t,r=e.length;eg("alphabet",e);const n=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(Qf(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:i=>(Qf(i),i.map(s=>{ka("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return o}))}}function Wn(t=""){return ka("join",t),{encode:e=>(eg("join.decode",e),e.join(t)),decode:e=>(ka("join.decode",e),e.split(t))}}function tg(t,e="="){return Vd(t),ka("padding",e),{encode(r){for(eg("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){eg("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function mE(t){return gE(t),{encode:e=>e,decode:e=>t(e)}}function wE(t,e,r){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(Qf(t),!t.length)return[];let n=0;const i=[],s=Array.from(t,a=>{if(Vd(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let l=n;l<o;l++){const u=s[l],h=e*a,d=h+u;if(!Number.isSafeInteger(d)||h/e!==a||d-u!==h)throw new Error("convertRadix: carry overflow");const p=d/r;a=d%r;const f=Math.floor(p);if(s[l]=f,!Number.isSafeInteger(f)||f*r+a!==d)throw new Error("convertRadix: carry overflow");if(c)f?c=!1:n=l;else continue}if(i.push(a),c)break}for(let a=0;a<t.length-1&&t[a]===0;a++)i.push(0);return i.reverse()}const yE=(t,e)=>e===0?t:yE(e,t%e),rg=(t,e)=>t+(e-yE(t,e)),ng=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Py(t,e,r,n){if(Qf(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(rg(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${rg(e,r)}`);let i=0,s=0;const o=ng[e],a=ng[r]-1,c=[];for(const l of t){if(Vd(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=r;s-=r)c.push((i>>s-r&a)>>>0);const u=ng[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<r-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&c.push(i>>>0),c}function HB(t){Vd(t);const e=2**8;return{encode:r=>{if(!Jf(r))throw new Error("radix.encode input should be Uint8Array");return wE(Array.from(r),e,t)},decode:r=>(Oy("radix.decode",r),Uint8Array.from(wE(r,t,e)))}}function hi(t,e=!1){if(Vd(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(rg(8,t)>32||rg(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!Jf(r))throw new Error("radix2.encode input should be Uint8Array");return Py(Array.from(r),8,t,!e)},decode:r=>(Oy("radix2.decode",r),Uint8Array.from(Py(r,t,8,e)))}}function bE(t){return gE(t),function(...e){try{return t.apply(null,e)}catch{}}}const vE=zn(hi(5),qn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),tg(5),Wn("")),EE=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",CE=(t,e)=>{ka("base64",t);const r=e?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=e?"base64url":"base64";if(t.length>0&&!r.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:n,lastChunkHandling:"strict"})},Ny=t=>zn(HB(58),qn(t),Wn("")),Ty=zn(qn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Wn("")),AE=[996825010,642813549,513874426,1027748829,705979059];function zd(t){const e=t>>25;let r=(t&33554431)<<5;for(let n=0;n<AE.length;n++)(e>>n&1)===1&&(r^=AE[n]);return r}function $E(t,e,r=1){const n=t.length;let i=1;for(let s=0;s<n;s++){const o=t.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);i=zd(i)^o>>5}i=zd(i);for(let s=0;s<n;s++)i=zd(i)^t.charCodeAt(s)&31;for(let s of e)i=zd(i)^s;for(let s=0;s<6;s++)i=zd(i);return i^=r,Ty.encode(Py([i%ng[30]],30,5,!1))}function xE(t){const e=t==="bech32"?1:734539939,r=hi(5),n=r.decode,i=r.encode,s=bE(n);function o(h,d,p=90){ka("bech32.encode prefix",h),Jf(d)&&(d=Array.from(d)),Oy("bech32.encode",d);const f=h.length;if(f===0)throw new TypeError(`Invalid prefix length ${f}`);const g=f+7+d.length;if(p!==!1&&g>p)throw new TypeError(`Length ${g} exceeds limit ${p}`);const w=h.toLowerCase(),v=$E(w,d,e);return`${w}1${Ty.encode(d)}${v}`}function a(h,d=90){ka("bech32.decode input",h);const p=h.length;if(p<8||d!==!1&&p>d)throw new TypeError(`invalid string length: ${p} (${h}). Expected (8..${d})`);const f=h.toLowerCase();if(h!==f&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");const g=f.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const w=f.slice(0,g),v=f.slice(g+1);if(v.length<6)throw new Error("Data must be at least 6 characters long");const C=Ty.decode(v).slice(0,-6),b=$E(w,C,e);if(!v.endsWith(b))throw new Error(`Invalid checksum in ${h}: expected "${b}"`);return{prefix:w,words:C}}const c=bE(a);function l(h){const{prefix:d,words:p}=a(h,!1);return{prefix:d,words:p,bytes:n(p)}}function u(h,d){return o(h,i(d))}return{encode:o,decode:a,encodeFromBytes:u,decodeToBytes:l,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:s,toWords:i}}const jB=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",VB={encode(t){return Iy(t),t.toHex()},decode(t){return ka("hex",t),Uint8Array.fromHex(t)}},zB=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),qB=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Zo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return qB(t)}catch{return t}}function as(t){return typeof t=="string"?t:zB(t)||""}function WB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _E(t,...e){if(!WB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function SE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ZB(t,e){_E(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Nu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ky=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function KB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function IE(t){return typeof t=="string"&&(t=KB(t)),_E(t),t}class GB{clone(){return this._cloneInto()}}function YB(t){const e=n=>t().update(IE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function OE(t=32){if(Nu&&typeof Nu.getRandomValues=="function")return Nu.getRandomValues(new Uint8Array(t));if(Nu&&typeof Nu.randomBytes=="function")return Nu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function XB(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}class JB extends GB{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ky(this.buffer)}update(e){SE(this);const{view:r,buffer:n,blockLen:i}=this;e=IE(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=ky(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){SE(this),ZB(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;XB(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ky(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const ig=BigInt(2**32-1),Ry=BigInt(32);function PE(t,e=!1){return e?{h:Number(t&ig),l:Number(t>>Ry&ig)}:{h:Number(t>>Ry&ig)|0,l:Number(t&ig)|0}}function QB(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=PE(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const eM=(t,e)=>BigInt(t>>>0)<<Ry|BigInt(e>>>0),tM=(t,e,r)=>t>>>r,rM=(t,e,r)=>t<<32-r|e>>>r,nM=(t,e,r)=>t>>>r|e<<32-r,iM=(t,e,r)=>t<<32-r|e>>>r,sM=(t,e,r)=>t<<64-r|e>>>r-32,oM=(t,e,r)=>t>>>r-32|e<<64-r,aM=(t,e)=>e,cM=(t,e)=>t,lM=(t,e,r)=>t<<r|e>>>32-r,uM=(t,e,r)=>e<<r|t>>>32-r,hM=(t,e,r)=>e<<r-32|t>>>64-r,dM=(t,e,r)=>t<<r-32|e>>>64-r;function pM(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const fM=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),gM=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,mM=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),wM=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,yM=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),bM=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Ue={fromBig:PE,split:QB,toBig:eM,shrSH:tM,shrSL:rM,rotrSH:nM,rotrSL:iM,rotrBH:sM,rotrBL:oM,rotr32H:aM,rotr32L:cM,rotlSH:lM,rotlSL:uM,rotlBH:hM,rotlBL:dM,add:pM,add3L:fM,add3H:gM,add4L:mM,add4H:wM,add5H:bM,add5L:yM},[vM,EM]=Ue.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ra=new Uint32Array(80),Da=new Uint32Array(80);class CM extends JB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:p,Gl:f,Hh:g,Hl:w}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w]}set(e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=p|0,this.Gl=f|0,this.Hh=g|0,this.Hl=w|0}process(e,r){for(let b=0;b<16;b++,r+=4)Ra[b]=e.getUint32(r),Da[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const A=Ra[b-15]|0,P=Da[b-15]|0,R=Ue.rotrSH(A,P,1)^Ue.rotrSH(A,P,8)^Ue.shrSH(A,P,7),M=Ue.rotrSL(A,P,1)^Ue.rotrSL(A,P,8)^Ue.shrSL(A,P,7),U=Ra[b-2]|0,S=Da[b-2]|0,L=Ue.rotrSH(U,S,19)^Ue.rotrBH(U,S,61)^Ue.shrSH(U,S,6),D=Ue.rotrSL(U,S,19)^Ue.rotrBL(U,S,61)^Ue.shrSL(U,S,6),T=Ue.add4L(M,D,Da[b-7],Da[b-16]),x=Ue.add4H(T,R,L,Ra[b-7],Ra[b-16]);Ra[b]=x|0,Da[b]=T|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:p,Fl:f,Gh:g,Gl:w,Hh:v,Hl:C}=this;for(let b=0;b<80;b++){const A=Ue.rotrSH(h,d,14)^Ue.rotrSH(h,d,18)^Ue.rotrBH(h,d,41),P=Ue.rotrSL(h,d,14)^Ue.rotrSL(h,d,18)^Ue.rotrBL(h,d,41),R=h&p^~h&g,M=d&f^~d&w,U=Ue.add5L(C,P,M,EM[b],Da[b]),S=Ue.add5H(U,v,A,R,vM[b],Ra[b]),L=U|0,D=Ue.rotrSH(n,i,28)^Ue.rotrBH(n,i,34)^Ue.rotrBH(n,i,39),T=Ue.rotrSL(n,i,28)^Ue.rotrBL(n,i,34)^Ue.rotrBL(n,i,39),x=n&s^n&a^s&a,_=i&o^i&c^o&c;v=g|0,C=w|0,g=p|0,w=f|0,p=h|0,f=d|0,{h,l:d}=Ue.add(l|0,u|0,S|0,L|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const m=Ue.add3L(L,T,_);n=Ue.add3H(m,S,D,x),i=m|0}({h:n,l:i}=Ue.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ue.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Ue.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ue.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Ue.add(this.Eh|0,this.El|0,h|0,d|0),{h:p,l:f}=Ue.add(this.Fh|0,this.Fl|0,p|0,f|0),{h:g,l:w}=Ue.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:v,l:C}=Ue.add(this.Hh|0,this.Hl|0,v|0,C|0),this.set(n,i,s,o,a,c,l,u,h,d,p,f,g,w,v,C)}roundClean(){Ra.fill(0),Da.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const AM=YB(()=>new CM);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dy=BigInt(0),NE=BigInt(1),$M=BigInt(2);function By(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function My(t){if(!By(t))throw new Error("Uint8Array expected")}function Uy(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const xM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ly(t){My(t);let e="";for(let r=0;r<t.length;r++)e+=xM[t[r]];return e}function TE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dy:BigInt("0x"+t)}const Ko={_0:48,_9:57,A:65,F:70,a:97,f:102};function kE(t){if(t>=Ko._0&&t<=Ko._9)return t-Ko._0;if(t>=Ko.A&&t<=Ko.F)return t-(Ko.A-10);if(t>=Ko.a&&t<=Ko.f)return t-(Ko.a-10)}function RE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=kE(t.charCodeAt(s)),a=kE(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function _M(t){return TE(Ly(t))}function sg(t){return My(t),TE(Ly(Uint8Array.from(t).reverse()))}function DE(t,e){return RE(t.toString(16).padStart(e*2,"0"))}function Fy(t,e){return DE(t,e).reverse()}function Go(t,e,r){let n;if(typeof e=="string")try{n=RE(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(By(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function BE(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];My(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const Hy=t=>typeof t=="bigint"&&Dy<=t;function SM(t,e,r){return Hy(t)&&Hy(e)&&Hy(r)&&e<=t&&t<r}function qd(t,e,r,n){if(!SM(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function IM(t){let e;for(e=0;t>Dy;t>>=NE,e+=1);return e}const OM=t=>($M<<BigInt(t-1))-NE,PM={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||By(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jy(t,e,r={}){const n=(i,s,o)=>{const a=PM[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function ME(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const ar=BigInt(0),Dt=BigInt(1),Yc=BigInt(2),NM=BigInt(3),Vy=BigInt(4),UE=BigInt(5),LE=BigInt(8);function Zt(t,e){const r=t%e;return r>=ar?r:e+r}function TM(t,e,r){if(e<ar)throw new Error("invalid exponent, negatives unsupported");if(r<=ar)throw new Error("invalid modulus");if(r===Dt)return ar;let n=Dt;for(;e>ar;)e&Dt&&(n=n*t%r),t=t*t%r,e>>=Dt;return n}function cs(t,e,r){let n=t;for(;e-- >ar;)n*=n,n%=r;return n}function FE(t,e){if(t===ar)throw new Error("invert: expected non-zero number");if(e<=ar)throw new Error("invert: expected positive modulus, got "+e);let r=Zt(t,e),n=e,i=ar,s=Dt;for(;r!==ar;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==Dt)throw new Error("invert: does not exist");return Zt(i,e)}function kM(t){const e=(t-Dt)/Yc;let r,n,i;for(r=t-Dt,n=0;r%Yc===ar;r/=Yc,n++);for(i=Yc;i<t&&TM(i,e,t)!==t-Dt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Dt)/Vy;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+Dt)/Yc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),h=o.pow(a,r);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let f=o.sqr(h);d<c&&!o.eql(f,o.ONE);d++)f=o.sqr(f);const p=o.pow(l,Dt<<BigInt(c-d-1));l=o.sqr(p),u=o.mul(u,p),h=o.mul(h,l),c=d}return u}}function RM(t){if(t%Vy===NM){const e=(t+Dt)/Vy;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%LE===UE){const e=(t-UE)/LE;return function(r,n){const i=r.mul(n,Yc),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,Yc),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return kM(t)}const DM=(t,e)=>(Zt(t,e)&Dt)===Dt,BM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MM(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=BM.reduce((n,i)=>(n[i]="function",n),e);return jy(t,r)}function UM(t,e,r){if(r<ar)throw new Error("invalid exponent, negatives unsupported");if(r===ar)return t.ONE;if(r===Dt)return e;let n=t.ONE,i=e;for(;r>ar;)r&Dt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Dt;return n}function LM(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function HE(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function jE(t,e,r=!1,n={}){if(t<=ar)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=HE(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:OM(i),ZERO:ar,ONE:Dt,create:c=>Zt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ar<=c&&c<t},is0:c=>c===ar,isOdd:c=>(c&Dt)===Dt,neg:c=>Zt(-c,t),eql:(c,l)=>c===l,sqr:c=>Zt(c*c,t),add:(c,l)=>Zt(c+l,t),sub:(c,l)=>Zt(c-l,t),mul:(c,l)=>Zt(c*l,t),pow:(c,l)=>UM(a,c,l),div:(c,l)=>Zt(c*FE(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>FE(c,t),sqrt:n.sqrt||(c=>(o||(o=RM(t)),o(a,c))),invertBatch:c=>LM(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?Fy(c,s):DE(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?sg(c):_M(c)}});return Object.freeze(a)}const VE=BigInt(0),og=BigInt(1);function zy(t,e){const r=e.negate();return t?r:e}function zE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function qy(t,e){zE(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function FM(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function HM(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Wy=new WeakMap,qE=new WeakMap;function Zy(t){return qE.get(t)||1}function jM(t,e){return{constTimeNegate:zy,hasPrecomputes(r){return Zy(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>VE;)n&og&&(i=i.add(s)),s=s.double(),n>>=og;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=qy(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=qy(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let d=0;d<s;d++){const p=d*o;let f=Number(i&l);i>>=h,f>o&&(f-=u,i+=og);const g=p,w=p+Math.abs(f)-1,v=d%2!==0,C=f<0;f===0?c=c.add(zy(v,n[g])):a=a.add(zy(C,n[w]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=qy(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const d=h*a;if(i===VE)break;let p=Number(i&c);if(i>>=u,p>a&&(p-=l,i+=og),p===0)continue;let f=n[d+Math.abs(p)-1];p<0&&(f=f.negate()),s=s.add(f)}return s},getPrecomputes(r,n,i){let s=Wy.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Wy.set(n,i(s))),s},wNAFCached(r,n,i){const s=Zy(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Zy(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){zE(n,e),qE.set(r,n),Wy.delete(r)}}}function VM(t,e,r,n){if(FM(r,t),HM(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=IM(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let p=0;p<n.length;p++){const f=n[p],g=Number(f>>BigInt(h)&BigInt(a));c[g]=c[g].add(r[p])}let d=i;for(let p=c.length-1,f=i;p>0;p--)f=f.add(c[p]),d=d.add(f);if(u=u.add(d),h!==0)for(let p=0;p<o;p++)u=u.double()}return u}function zM(t){return MM(t.Fp),jy(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...HE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ji=BigInt(0),gn=BigInt(1),ag=BigInt(2),qM=BigInt(8),WM={zip215:!0};function ZM(t){const e=zM(t);return jy(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function KM(t){const e=ZM(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=ag<<BigInt(a*8)-gn,u=r.create,h=jE(e.n,e.nBitLength),d=e.uvRatio||((m,y)=>{try{return{isValid:!0,value:r.sqrt(m*r.inv(y))}}catch{return{isValid:!1,value:ji}}}),p=e.adjustScalarBytes||(m=>m),f=e.domain||((m,y,E)=>{if(Uy("phflag",E),y.length||E)throw new Error("Contexts/pre-hash are not supported");return m});function g(m,y){qd("coordinate "+m,y,ji,l)}function w(m){if(!(m instanceof b))throw new Error("ExtendedPoint expected")}const v=ME((m,y)=>{const{ex:E,ey:I,ez:$}=m,O=m.is0();y==null&&(y=O?qM:r.inv($));const B=u(E*y),H=u(I*y),K=u($*y);if(O)return{x:ji,y:gn};if(K!==gn)throw new Error("invZ was invalid");return{x:B,y:H}}),C=ME(m=>{const{a:y,d:E}=e;if(m.is0())throw new Error("bad point: ZERO");const{ex:I,ey:$,ez:O,et:B}=m,H=u(I*I),K=u($*$),V=u(O*O),q=u(V*V),Q=u(H*y),re=u(V*u(Q+K)),he=u(q+u(E*u(H*K)));if(re!==he)throw new Error("bad point: equation left != right (1)");const ee=u(I*$),de=u(O*B);if(ee!==de)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(y,E,I,$){this.ex=y,this.ey=E,this.ez=I,this.et=$,g("x",y),g("y",E),g("z",I),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof b)throw new Error("extended point not allowed");const{x:E,y:I}=y||{};return g("x",E),g("y",I),new b(E,I,gn,u(E*I))}static normalizeZ(y){const E=r.invertBatch(y.map(I=>I.ez));return y.map((I,$)=>I.toAffine(E[$])).map(b.fromAffine)}static msm(y,E){return VM(b,h,y,E)}_setWindowSize(y){R.setWindowSize(this,y)}assertValidity(){C(this)}equals(y){w(y);const{ex:E,ey:I,ez:$}=this,{ex:O,ey:B,ez:H}=y,K=u(E*H),V=u(O*$),q=u(I*H),Q=u(B*$);return K===V&&q===Q}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:y}=e,{ex:E,ey:I,ez:$}=this,O=u(E*E),B=u(I*I),H=u(ag*u($*$)),K=u(y*O),V=E+I,q=u(u(V*V)-O-B),Q=K+B,re=Q-H,he=K-B,ee=u(q*re),de=u(Q*he),Re=u(q*he),rt=u(re*Q);return new b(ee,de,rt,Re)}add(y){w(y);const{a:E,d:I}=e,{ex:$,ey:O,ez:B,et:H}=this,{ex:K,ey:V,ez:q,et:Q}=y;if(E===BigInt(-1)){const UN=u((O-$)*(V+K)),LN=u((O+$)*(V-K)),G3=u(LN-UN);if(G3===ji)return this.double();const FN=u(B*ag*Q),HN=u(H*ag*q),jN=HN+FN,VN=LN+UN,zN=HN-FN,kwe=u(jN*G3),Rwe=u(VN*zN),Dwe=u(jN*zN),Bwe=u(G3*VN);return new b(kwe,Rwe,Bwe,Dwe)}const re=u($*K),he=u(O*V),ee=u(H*I*Q),de=u(B*q),Re=u(($+O)*(K+V)-re-he),rt=de-ee,wt=de+ee,sr=u(he-E*re),Mi=u(Re*rt),Sw=u(wt*sr),Nwe=u(Re*sr),Twe=u(rt*wt);return new b(Mi,Sw,Twe,Nwe)}subtract(y){return this.add(y.negate())}wNAF(y){return R.wNAFCached(this,y,b.normalizeZ)}multiply(y){const E=y;qd("scalar",E,gn,n);const{p:I,f:$}=this.wNAF(E);return b.normalizeZ([I,$])[0]}multiplyUnsafe(y,E=b.ZERO){const I=y;return qd("scalar",I,ji,n),I===ji?P:this.is0()||I===gn?this:R.wNAFCachedUnsafe(this,I,b.normalizeZ,E)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,n).is0()}toAffine(y){return v(this,y)}clearCofactor(){const{h:y}=e;return y===gn?this:this.multiplyUnsafe(y)}static fromHex(y,E=!1){const{d:I,a:$}=e,O=r.BYTES;y=Go("pointHex",y,O),Uy("zip215",E);const B=y.slice(),H=y[O-1];B[O-1]=H&-129;const K=sg(B),V=E?l:r.ORDER;qd("pointHex.y",K,ji,V);const q=u(K*K),Q=u(q-gn),re=u(I*q-$);let{isValid:he,value:ee}=d(Q,re);if(!he)throw new Error("Point.fromHex: invalid y coordinate");const de=(ee&gn)===gn,Re=(H&128)!==0;if(!E&&ee===ji&&Re)throw new Error("Point.fromHex: x=0 and x_0=1");return Re!==de&&(ee=u(-ee)),b.fromAffine({x:ee,y:K})}static fromPrivateKey(y){return S(y).point}toRawBytes(){const{x:y,y:E}=this.toAffine(),I=Fy(E,r.BYTES);return I[I.length-1]|=y&gn?128:0,I}toHex(){return Ly(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,gn,u(e.Gx*e.Gy)),b.ZERO=new b(ji,gn,gn,ji);const{BASE:A,ZERO:P}=b,R=jM(b,a*8);function M(m){return Zt(m,n)}function U(m){return M(sg(m))}function S(m){const y=r.BYTES;m=Go("private key",m,y);const E=Go("hashed private key",s(m),2*y),I=p(E.slice(0,y)),$=E.slice(y,2*y),O=U(I),B=A.multiply(O),H=B.toRawBytes();return{head:I,prefix:$,scalar:O,point:B,pointBytes:H}}function L(m){return S(m).pointBytes}function D(m=new Uint8Array,...y){const E=BE(...y);return U(s(f(E,Go("context",m),!!i)))}function T(m,y,E={}){m=Go("message",m),i&&(m=i(m));const{prefix:I,scalar:$,pointBytes:O}=S(y),B=D(E.context,I,m),H=A.multiply(B).toRawBytes(),K=D(E.context,H,O,m),V=M(B+K*$);qd("signature.s",V,ji,n);const q=BE(H,Fy(V,r.BYTES));return Go("result",q,r.BYTES*2)}const x=WM;function _(m,y,E,I=x){const{context:$,zip215:O}=I,B=r.BYTES;m=Go("signature",m,2*B),y=Go("message",y),E=Go("publicKey",E,B),O!==void 0&&Uy("zip215",O),i&&(y=i(y));const H=sg(m.slice(B,2*B));let K,V,q;try{K=b.fromHex(E,O),V=b.fromHex(m.slice(0,B),O),q=A.multiplyUnsafe(H)}catch{return!1}if(!O&&K.isSmallOrder())return!1;const Q=D($,V.toRawBytes(),K.toRawBytes(),y);return V.add(K.multiplyUnsafe(Q)).subtract(q).clearCofactor().equals(b.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:T,verify:_,ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(r.BYTES),precompute(m=8,y=b.BASE){return y._setWindowSize(m),y.multiply(BigInt(3)),y}}}}BigInt(0),BigInt(1);const Ky=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),WE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const GM=BigInt(1),ZE=BigInt(2);BigInt(3);const YM=BigInt(5),XM=BigInt(8);function JM(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Ky,o=t*t%s*t%s,a=cs(o,ZE,s)*o%s,c=cs(a,GM,s)*t%s,l=cs(c,YM,s)*c%s,u=cs(l,e,s)*l%s,h=cs(u,r,s)*u%s,d=cs(h,n,s)*h%s,p=cs(d,i,s)*d%s,f=cs(p,i,s)*d%s,g=cs(f,e,s)*l%s;return{pow_p_5_8:cs(g,ZE,s)*t%s,b2:o}}function QM(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function eU(t,e){const r=Ky,n=Zt(e*e*e,r),i=Zt(n*n*e,r),s=JM(t*i).pow_p_5_8;let o=Zt(t*n*s,r);const a=Zt(e*o*o,r),c=o,l=Zt(o*WE,r),u=a===t,h=a===Zt(-t,r),d=a===Zt(-t*WE,r);return u&&(o=c),(h||d)&&(o=l),DM(o,r)&&(o=Zt(-o,r)),{isValid:u||h,value:o}}const tU=jE(Ky,void 0,!0),rU={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tU,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:XM,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:AM,randomBytes:OE,adjustScalarBytes:QM,uvRatio:eU},KE=KM(rU),nU="EdDSA",iU="JWT",cg=".",lg="base64url",GE="utf8",YE="utf8",sU=":",oU="did",aU="key",XE="base58btc",cU="z",lU="K36",uU=32;function Gy(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function JE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Gy(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function QE(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=JE(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Gy(r)}function hU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,w=0,v=0,C=f.length;v!==C&&f[v]===0;)v++,g++;for(var b=(C-v)*u+1>>>0,A=new Uint8Array(b);v!==C;){for(var P=f[v],R=0,M=b-1;(P!==0||R<w)&&M!==-1;M--,R++)P+=256*A[M]>>>0,A[M]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");w=R,v++}for(var U=b-w;U!==b&&A[U]===0;)U++;for(var S=c.repeat(g);U<b;++U)S+=t.charAt(A[U]);return S}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var w=0,v=0;f[g]===c;)w++,g++;for(var C=(f.length-g)*l+1>>>0,b=new Uint8Array(C);f[g];){var A=r[f.charCodeAt(g)];if(A===255)return;for(var P=0,R=C-1;(A!==0||P<v)&&R!==-1;R--,P++)A+=a*b[R]>>>0,b[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");v=P,g++}if(f[g]!==" "){for(var M=C-v;M!==C&&b[M]===0;)M++;for(var U=new Uint8Array(w+(C-M)),S=w;M!==C;)U[S++]=b[M++];return U}}}function p(f){var g=d(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var dU=hU,pU=dU;const eC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fU=t=>new TextEncoder().encode(t),gU=t=>new TextDecoder().decode(t);class mU{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class wU{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return tC(this,e)}}class yU{constructor(e){this.decoders=e}or(e){return tC(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const tC=(t,e)=>new yU({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class bU{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new mU(e,r,n),this.decoder=new wU(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ug=({name:t,prefix:e,encode:r,decode:n})=>new bU(t,e,r,n),Wd=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=pU(r,e);return ug({prefix:t,name:e,encode:n,decode:s=>eC(i(s))})},vU=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},EU=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},wr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ug({prefix:e,name:t,encode(i){return EU(i,n,r)},decode(i){return vU(i,n,r,t)}}),CU=ug({prefix:"\0",name:"identity",encode:t=>gU(t),decode:t=>fU(t)});var AU=Object.freeze({__proto__:null,identity:CU});const $U=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xU=Object.freeze({__proto__:null,base2:$U});const _U=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SU=Object.freeze({__proto__:null,base8:_U});const IU=Wd({prefix:"9",name:"base10",alphabet:"0123456789"});var OU=Object.freeze({__proto__:null,base10:IU});const PU=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NU=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var TU=Object.freeze({__proto__:null,base16:PU,base16upper:NU});const kU=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),RU=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),DU=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),BU=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MU=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),UU=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LU=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),FU=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),HU=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var jU=Object.freeze({__proto__:null,base32:kU,base32upper:RU,base32pad:DU,base32padupper:BU,base32hex:MU,base32hexupper:UU,base32hexpad:LU,base32hexpadupper:FU,base32z:HU});const VU=Wd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zU=Wd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qU=Object.freeze({__proto__:null,base36:VU,base36upper:zU});const WU=Wd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ZU=Wd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var KU=Object.freeze({__proto__:null,base58btc:WU,base58flickr:ZU});const GU=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),YU=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),XU=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),JU=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var QU=Object.freeze({__proto__:null,base64:GU,base64pad:YU,base64url:XU,base64urlpad:JU});const rC=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),eL=rC.reduce((t,e,r)=>(t[r]=e,t),[]),tL=rC.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function rL(t){return t.reduce((e,r)=>(e+=eL[r],e),"")}function nL(t){const e=[];for(const r of t){const n=tL[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const iL=ug({prefix:"\u{1F680}",name:"base256emoji",encode:rL,decode:nL});var sL=Object.freeze({__proto__:null,base256emoji:iL}),oL=iC,nC=128,aL=127,cL=~aL,lL=Math.pow(2,31);function iC(t,e,r){e=e||[],r=r||0;for(var n=r;t>=lL;)e[r++]=t&255|nC,t/=128;for(;t&cL;)e[r++]=t&255|nC,t>>>=7;return e[r]=t|0,iC.bytes=r-n+1,e}var uL=Yy,hL=128,sC=127;function Yy(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Yy.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&sC)<<i:(o&sC)*Math.pow(2,i),i+=7}while(o>=hL);return Yy.bytes=s-n,r}var dL=Math.pow(2,7),pL=Math.pow(2,14),fL=Math.pow(2,21),gL=Math.pow(2,28),mL=Math.pow(2,35),wL=Math.pow(2,42),yL=Math.pow(2,49),bL=Math.pow(2,56),vL=Math.pow(2,63),EL=function(t){return t<dL?1:t<pL?2:t<fL?3:t<gL?4:t<mL?5:t<wL?6:t<yL?7:t<bL?8:t<vL?9:10},CL={encode:oL,decode:uL,encodingLength:EL},oC=CL;const aC=(t,e,r=0)=>(oC.encode(t,e,r),e),cC=t=>oC.encodingLength(t),Xy=(t,e)=>{const r=e.byteLength,n=cC(t),i=n+cC(r),s=new Uint8Array(i+r);return aC(t,s,0),aC(r,s,n),s.set(e,i),new AL(t,r,e,s)};class AL{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const lC=({name:t,code:e,encode:r})=>new $L(t,e,r);class $L{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Xy(this.code,r):r.then(n=>Xy(this.code,n))}else throw Error("Unknown type, must be binary type")}}const uC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xL=lC({name:"sha2-256",code:18,encode:uC("SHA-256")}),_L=lC({name:"sha2-512",code:19,encode:uC("SHA-512")});var SL=Object.freeze({__proto__:null,sha256:xL,sha512:_L});const hC=0,IL="identity",dC=eC;var OL=Object.freeze({__proto__:null,identity:{code:hC,name:IL,encode:dC,digest:t=>Xy(hC,dC(t))}});new TextEncoder,new TextDecoder;const pC={...AU,...xU,...SU,...OU,...TU,...jU,...qU,...KU,...QU,...sL};({...SL,...OL});function fC(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const gC=fC("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Jy=fC("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=JE(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),mC={utf8:gC,"utf-8":gC,hex:pC.base16,latin1:Jy,ascii:Jy,binary:Jy,...pC};function hg(t,e="utf8"){const r=mC[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Tu(t,e="utf8"){const r=mC[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Gy(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function wC(t){return Zo(hg(Tu(t,lg),GE))}function dg(t){return hg(Tu(as(t),GE),lg)}function Qy(t){const e=Tu(lU,XE),r=cU+hg(QE([e,t]),XE);return[oU,aU,r].join(sU)}function PL(t){return hg(t,lg)}function NL(t){return Tu(t,lg)}function TL(t){return Tu([dg(t.header),dg(t.payload)].join(cg),YE)}function kL(t){return[dg(t.header),dg(t.payload),PL(t.signature)].join(cg)}function ku(t){const e=t.split(cg),r=wC(e[0]),n=wC(e[1]),i=NL(e[2]),s=Tu(e.slice(0,2).join(cg),YE);return{header:r,payload:n,signature:i,data:s}}function pg(t=OE(uU)){const e=KE.getPublicKey(t);return{secretKey:QE([t,e]),publicKey:e}}async function yC(t,e,r,n,i=Z.fromMiliseconds(Date.now())){const s={alg:nU,typ:iU},o=Qy(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=TL({header:s,payload:c}),u=KE.sign(l,n.secretKey.slice(0,32));return kL({header:s,payload:c,signature:u})}function eb(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function bC(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?eb(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ls(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=bC(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return eb(r)}function RL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,w=0,v=0,C=f.length;v!==C&&f[v]===0;)v++,g++;for(var b=(C-v)*u+1>>>0,A=new Uint8Array(b);v!==C;){for(var P=f[v],R=0,M=b-1;(P!==0||R<w)&&M!==-1;M--,R++)P+=256*A[M]>>>0,A[M]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");w=R,v++}for(var U=b-w;U!==b&&A[U]===0;)U++;for(var S=c.repeat(g);U<b;++U)S+=t.charAt(A[U]);return S}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var w=0,v=0;f[g]===c;)w++,g++;for(var C=(f.length-g)*l+1>>>0,b=new Uint8Array(C);f[g];){var A=r[f.charCodeAt(g)];if(A===255)return;for(var P=0,R=C-1;(A!==0||P<v)&&R!==-1;R--,P++)A+=a*b[R]>>>0,b[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");v=P,g++}if(f[g]!==" "){for(var M=C-v;M!==C&&b[M]===0;)M++;for(var U=new Uint8Array(w+(C-M)),S=w;M!==C;)U[S++]=b[M++];return U}}}function p(f){var g=d(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var DL=RL,BL=DL;const vC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ML=t=>new TextEncoder().encode(t),UL=t=>new TextDecoder().decode(t);class LL{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class FL{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return EC(this,e)}}class HL{constructor(e){this.decoders=e}or(e){return EC(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const EC=(t,e)=>new HL({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class jL{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new LL(e,r,n),this.decoder=new FL(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fg=({name:t,prefix:e,encode:r,decode:n})=>new jL(t,e,r,n),Zd=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=BL(r,e);return fg({prefix:t,name:e,encode:n,decode:s=>vC(i(s))})},VL=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},zL=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},yr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>fg({prefix:e,name:t,encode(i){return zL(i,n,r)},decode(i){return VL(i,n,r,t)}}),qL=fg({prefix:"\0",name:"identity",encode:t=>UL(t),decode:t=>ML(t)});var WL=Object.freeze({__proto__:null,identity:qL});const ZL=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var KL=Object.freeze({__proto__:null,base2:ZL});const GL=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var YL=Object.freeze({__proto__:null,base8:GL});const XL=Zd({prefix:"9",name:"base10",alphabet:"0123456789"});var JL=Object.freeze({__proto__:null,base10:XL});const QL=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eF=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tF=Object.freeze({__proto__:null,base16:QL,base16upper:eF});const rF=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nF=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iF=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sF=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oF=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aF=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cF=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lF=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uF=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hF=Object.freeze({__proto__:null,base32:rF,base32upper:nF,base32pad:iF,base32padupper:sF,base32hex:oF,base32hexupper:aF,base32hexpad:cF,base32hexpadupper:lF,base32z:uF});const dF=Zd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pF=Zd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fF=Object.freeze({__proto__:null,base36:dF,base36upper:pF});const gF=Zd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),mF=Zd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wF=Object.freeze({__proto__:null,base58btc:gF,base58flickr:mF});const yF=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bF=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vF=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EF=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var CF=Object.freeze({__proto__:null,base64:yF,base64pad:bF,base64url:vF,base64urlpad:EF});const CC=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),AF=CC.reduce((t,e,r)=>(t[r]=e,t),[]),$F=CC.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function xF(t){return t.reduce((e,r)=>(e+=AF[r],e),"")}function _F(t){const e=[];for(const r of t){const n=$F[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const SF=fg({prefix:"\u{1F680}",name:"base256emoji",encode:xF,decode:_F});var IF=Object.freeze({__proto__:null,base256emoji:SF}),OF=$C,AC=128,PF=127,NF=~PF,TF=Math.pow(2,31);function $C(t,e,r){e=e||[],r=r||0;for(var n=r;t>=TF;)e[r++]=t&255|AC,t/=128;for(;t&NF;)e[r++]=t&255|AC,t>>>=7;return e[r]=t|0,$C.bytes=r-n+1,e}var kF=tb,RF=128,xC=127;function tb(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw tb.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&xC)<<i:(o&xC)*Math.pow(2,i),i+=7}while(o>=RF);return tb.bytes=s-n,r}var DF=Math.pow(2,7),BF=Math.pow(2,14),MF=Math.pow(2,21),UF=Math.pow(2,28),LF=Math.pow(2,35),FF=Math.pow(2,42),HF=Math.pow(2,49),jF=Math.pow(2,56),VF=Math.pow(2,63),zF=function(t){return t<DF?1:t<BF?2:t<MF?3:t<UF?4:t<LF?5:t<FF?6:t<HF?7:t<jF?8:t<VF?9:10},qF={encode:OF,decode:kF,encodingLength:zF},_C=qF;const SC=(t,e,r=0)=>(_C.encode(t,e,r),e),IC=t=>_C.encodingLength(t),rb=(t,e)=>{const r=e.byteLength,n=IC(t),i=n+IC(r),s=new Uint8Array(i+r);return SC(t,s,0),SC(r,s,n),s.set(e,i),new WF(t,r,e,s)};class WF{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const OC=({name:t,code:e,encode:r})=>new ZF(t,e,r);class ZF{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?rb(this.code,r):r.then(n=>rb(this.code,n))}else throw Error("Unknown type, must be binary type")}}const PC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),KF=OC({name:"sha2-256",code:18,encode:PC("SHA-256")}),GF=OC({name:"sha2-512",code:19,encode:PC("SHA-512")});var YF=Object.freeze({__proto__:null,sha256:KF,sha512:GF});const NC=0,XF="identity",TC=vC;var JF=Object.freeze({__proto__:null,identity:{code:NC,name:XF,encode:TC,digest:t=>rb(NC,TC(t))}});new TextEncoder,new TextDecoder;const kC={...WL,...KL,...YL,...JL,...tF,...hF,...fF,...wF,...CF,...IF};({...YF,...JF});function RC(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const DC=RC("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),nb=RC("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=bC(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BC={utf8:DC,"utf-8":DC,hex:kC.base16,latin1:nb,ascii:nb,binary:nb,...kC};function It(t,e="utf8"){const r=BC[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?eb(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function pt(t,e="utf8"){const r=BC[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const MC={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},QF="Input must be an string, Buffer or Uint8Array";function eH(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(QF);return e}function tH(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function gg(t){return(4294967296+t).toString(16).substring(1)}function rH(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=gg(e[i]).toUpperCase(),n+=" ",n+=gg(e[i+1]).toUpperCase();else if(r===64)n+=gg(e[i+1]).toUpperCase(),n+=gg(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function nH(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var UC={normalizeInput:eH,toHex:tH,debugPrint:rH,testSpeed:nH};const mg=UC;function wg(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function LC(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function FC(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ba(t,e,r,n,i,s){const o=Kd[i],a=Kd[i+1],c=Kd[s],l=Kd[s+1];wg(De,t,e),LC(De,t,o,a);let u=De[n]^De[t],h=De[n+1]^De[t+1];De[n]=h,De[n+1]=u,wg(De,r,n),u=De[e]^De[r],h=De[e+1]^De[r+1],De[e]=u>>>24^h<<8,De[e+1]=h>>>24^u<<8,wg(De,t,e),LC(De,t,c,l),u=De[n]^De[t],h=De[n+1]^De[t+1],De[n]=u>>>16^h<<16,De[n+1]=h>>>16^u<<16,wg(De,r,n),u=De[e]^De[r],h=De[e+1]^De[r+1],De[e]=h>>>31^u<<1,De[e+1]=u>>>31^h<<1}const HC=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),iH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Rr=new Uint8Array(iH.map(function(t){return t*2})),De=new Uint32Array(32),Kd=new Uint32Array(32);function jC(t,e){let r=0;for(r=0;r<16;r++)De[r]=t.h[r],De[r+16]=HC[r];for(De[24]=De[24]^t.t,De[25]=De[25]^t.t/4294967296,e&&(De[28]=~De[28],De[29]=~De[29]),r=0;r<32;r++)Kd[r]=FC(t.b,4*r);for(r=0;r<12;r++)Ba(0,8,16,24,Rr[r*16+0],Rr[r*16+1]),Ba(2,10,18,26,Rr[r*16+2],Rr[r*16+3]),Ba(4,12,20,28,Rr[r*16+4],Rr[r*16+5]),Ba(6,14,22,30,Rr[r*16+6],Rr[r*16+7]),Ba(0,10,20,30,Rr[r*16+8],Rr[r*16+9]),Ba(2,12,22,24,Rr[r*16+10],Rr[r*16+11]),Ba(4,14,16,26,Rr[r*16+12],Rr[r*16+13]),Ba(6,8,18,28,Rr[r*16+14],Rr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^De[r]^De[r+16]}const Ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function VC(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Ma.fill(0),Ma[0]=t,e&&(Ma[1]=e.length),Ma[2]=1,Ma[3]=1,r&&Ma.set(r,32),n&&Ma.set(n,48);for(let s=0;s<16;s++)i.h[s]=HC[s]^FC(Ma,s*4);return e&&(ib(i,e),i.c=128),i}function ib(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,jC(t,!1),t.c=0),t.b[t.c++]=e[r]}function zC(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;jC(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function qC(t,e,r,n,i){r=r||64,t=mg.normalizeInput(t),n&&(n=mg.normalizeInput(n)),i&&(i=mg.normalizeInput(i));const s=VC(r,e,n,i);return ib(s,t),zC(s)}function sH(t,e,r,n,i){const s=qC(t,e,r,n,i);return mg.toHex(s)}var oH={blake2b:qC,blake2bHex:sH,blake2bInit:VC,blake2bUpdate:ib,blake2bFinal:zC};const WC=UC;function aH(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ua(t,e,r,n,i,s){Ke[t]=Ke[t]+Ke[e]+i,Ke[n]=yg(Ke[n]^Ke[t],16),Ke[r]=Ke[r]+Ke[n],Ke[e]=yg(Ke[e]^Ke[r],12),Ke[t]=Ke[t]+Ke[e]+s,Ke[n]=yg(Ke[n]^Ke[t],8),Ke[r]=Ke[r]+Ke[n],Ke[e]=yg(Ke[e]^Ke[r],7)}function yg(t,e){return t>>>e^t<<32-e}const ZC=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ke=new Uint32Array(16),br=new Uint32Array(16);function KC(t,e){let r=0;for(r=0;r<8;r++)Ke[r]=t.h[r],Ke[r+8]=ZC[r];for(Ke[12]^=t.t,Ke[13]^=t.t/4294967296,e&&(Ke[14]=~Ke[14]),r=0;r<16;r++)br[r]=aH(t.b,4*r);for(r=0;r<10;r++)Ua(0,4,8,12,br[Dr[r*16+0]],br[Dr[r*16+1]]),Ua(1,5,9,13,br[Dr[r*16+2]],br[Dr[r*16+3]]),Ua(2,6,10,14,br[Dr[r*16+4]],br[Dr[r*16+5]]),Ua(3,7,11,15,br[Dr[r*16+6]],br[Dr[r*16+7]]),Ua(0,5,10,15,br[Dr[r*16+8]],br[Dr[r*16+9]]),Ua(1,6,11,12,br[Dr[r*16+10]],br[Dr[r*16+11]]),Ua(2,7,8,13,br[Dr[r*16+12]],br[Dr[r*16+13]]),Ua(3,4,9,14,br[Dr[r*16+14]],br[Dr[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=Ke[r]^Ke[r+8]}function GC(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(ZC),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(sb(n,e),n.c=64),n}function sb(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,KC(t,!1),t.c=0),t.b[t.c++]=e[r]}function YC(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;KC(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function XC(t,e,r){r=r||32,t=WC.normalizeInput(t);const n=GC(r,e);return sb(n,t),YC(n)}function cH(t,e,r){const n=XC(t,e,r);return WC.toHex(n)}var lH={blake2s:XC,blake2sHex:cH,blake2sInit:GC,blake2sUpdate:sb,blake2sFinal:YC};const Gd=oH,Yd=lH;var JC={blake2b:Gd.blake2b,blake2bHex:Gd.blake2bHex,blake2bInit:Gd.blake2bInit,blake2bUpdate:Gd.blake2bUpdate,blake2bFinal:Gd.blake2bFinal,blake2s:Yd.blake2s,blake2sHex:Yd.blake2sHex,blake2sInit:Yd.blake2sInit,blake2sUpdate:Yd.blake2sUpdate,blake2sFinal:Yd.blake2sFinal},uH=Object.defineProperty,hH=Object.defineProperties,dH=Object.getOwnPropertyDescriptors,QC=Object.getOwnPropertySymbols,pH=Object.prototype.hasOwnProperty,fH=Object.prototype.propertyIsEnumerable,e7=(t,e,r)=>e in t?uH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ru=(t,e)=>{for(var r in e||(e={}))pH.call(e,r)&&e7(t,r,e[r]);if(QC)for(var r of QC(e))fH.call(e,r)&&e7(t,r,e[r]);return t},Xd=(t,e)=>hH(t,dH(e));const gH=":";function Yo(t){const[e,r]=t.split(gH);return{namespace:e,reference:r}}function t7(t,e=[]){const r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;const i=t[n];r.push(...i.accounts)}),r}function r7(t,e){return t.includes(":")?[t]:e.chains||[]}var mH=Object.defineProperty,wH=Object.defineProperties,yH=Object.getOwnPropertyDescriptors,n7=Object.getOwnPropertySymbols,bH=Object.prototype.hasOwnProperty,vH=Object.prototype.propertyIsEnumerable,ob=(t,e,r)=>e in t?mH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i7=(t,e)=>{for(var r in e||(e={}))bH.call(e,r)&&ob(t,r,e[r]);if(n7)for(var r of n7(e))vH.call(e,r)&&ob(t,r,e[r]);return t},EH=(t,e)=>wH(t,yH(e)),s7=(t,e,r)=>ob(t,typeof e!="symbol"?e+"":e,r);const CH="ReactNative",Zn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},AH="js";function bg(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function La(){return!Fn()&&!!cd()&&navigator.product===CH}function $H(){return La()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function xH(){return La()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Du(){return!bg()&&!!cd()&&!!Fn()}function Jd(){return La()?Zn.reactNative:bg()?Zn.node:Du()?Zn.browser:Zn.unknown}function o7(){var t;try{return La()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function _H(t,e){const r=new URLSearchParams(t);return Object.entries(e).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!=null&&r.set(n,String(i))}),r.toString()}function SH(t){var e,r;const n=a7();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),EH(i7(i7({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function a7(){return Mw()||{name:"",description:"",url:"",icons:[""]}}function IH(){if(Jd()===Zn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=uv();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function OH(){var t;const e=Jd();return e===Zn.browser?[e,((t=Dw())==null?void 0:t.host)||"unknown"].join(":"):e}function c7(t,e,r){const n=IH(),i=OH();return[[t,e].join("-"),[AH,r].join("-"),n,i].join("/")}function PH({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=c7(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},d=_H(l[1]||"",h);return l[0]+"?"+d}function Xc(t,e){return t.filter(r=>e.includes(r)).length===t.length}function ab(t){return Object.fromEntries(t.entries())}function cb(t){return new Map(Object.entries(t))}function Jc(t=Z.FIVE_MINUTES,e){const r=Z.toMiliseconds(t||Z.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function us(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function l7(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function NH(t){return l7("topic",t)}function TH(t){return l7("id",t)}function u7(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Lt(t,e){return Z.fromMiliseconds((e||Date.now())+Z.toMiliseconds(t))}function hs(t){return Date.now()>=Z.toMiliseconds(t)}function nt(t,e){return`${t}${e?`:${e}`:""}`}function ds(t=[],e=[]){return[...new Set([...t,...e])]}async function kH({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i?.href;if(typeof s!="string")return;const o=RH(s,t,e),a=Jd();if(a===Zn.browser){if(!((n=Fn())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}DH(o)}else a===Zn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function RH(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${LH(n,!0)}`}else i=`${i}/wc?${n}`;return i}function DH(t){let e="_self";UH()?e="_top":(MH()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function BH(t,e){let r="";try{if(Du()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function h7(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function d7(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function lb(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function MH(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function UH(){try{return window.self!==window.top}catch{return!1}}function LH(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function p7(t){return Buffer.from(t,"base64").toString("utf-8")}function FH(t){return new Promise(e=>setTimeout(e,t))}class HH{constructor({limit:e}){s7(this,"limit"),s7(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}}const vg=BigInt(2**32-1),f7=BigInt(32);function g7(t,e=!1){return e?{h:Number(t&vg),l:Number(t>>f7&vg)}:{h:Number(t>>f7&vg)|0,l:Number(t&vg)|0}}function m7(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=g7(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const w7=(t,e,r)=>t>>>r,y7=(t,e,r)=>t<<32-r|e>>>r,Fa=(t,e,r)=>t>>>r|e<<32-r,Ha=(t,e,r)=>t<<32-r|e>>>r,Qd=(t,e,r)=>t<<64-r|e>>>r-32,e0=(t,e,r)=>t>>>r-32|e<<64-r,jH=(t,e)=>e,VH=(t,e)=>t,zH=(t,e,r)=>t<<r|e>>>32-r,qH=(t,e,r)=>e<<r|t>>>32-r,WH=(t,e,r)=>e<<r-32|t>>>64-r,ZH=(t,e,r)=>t<<r-32|e>>>64-r;function Vi(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const ub=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),hb=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,KH=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),GH=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,YH=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),XH=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Bu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Eg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function zi(t,...e){if(!Eg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Cg(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xo(t.outputLen),Xo(t.blockLen)}function ja(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function db(t,e){zi(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function t0(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function di(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function pb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ps(t,e){return t<<32-e|t>>>e}const b7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function v7(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Jo=b7?t=>t:t=>v7(t);function JH(t){for(let e=0;e<t.length;e++)t[e]=v7(t[e]);return t}const Va=b7?t=>t:JH,E7=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",QH=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mu(t){if(zi(t),E7)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=QH[t[r]];return e}const Qo={_0:48,_9:57,A:65,F:70,a:97,f:102};function C7(t){if(t>=Qo._0&&t<=Qo._9)return t-Qo._0;if(t>=Qo.A&&t<=Qo.F)return t-(Qo.A-10);if(t>=Qo.a&&t<=Qo.f)return t-(Qo.a-10)}function Ag(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(E7)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=C7(t.charCodeAt(s)),a=C7(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function A7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function qi(t){return typeof t=="string"&&(t=A7(t)),zi(t),t}function za(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];zi(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class $g{}function r0(t){const e=n=>t().update(qi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ej(t){const e=(n,i)=>t(i).update(qi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Qc(t=32){if(Bu&&typeof Bu.getRandomValues=="function")return Bu.getRandomValues(new Uint8Array(t));if(Bu&&typeof Bu.randomBytes=="function")return Uint8Array.from(Bu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const tj=BigInt(0),n0=BigInt(1),rj=BigInt(2),nj=BigInt(7),ij=BigInt(256),sj=BigInt(113),$7=[],x7=[],_7=[];for(let t=0,e=n0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],$7.push(2*(5*n+r)),x7.push((t+1)*(t+2)/2%64);let i=tj;for(let s=0;s<7;s++)e=(e<<n0^(e>>nj)*sj)%ij,e&rj&&(i^=n0<<(n0<<BigInt(s))-n0);_7.push(i)}const S7=m7(_7,!0),oj=S7[0],aj=S7[1],I7=(t,e,r)=>r>32?WH(t,e,r):zH(t,e,r),O7=(t,e,r)=>r>32?ZH(t,e,r):qH(t,e,r);function cj(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=I7(l,u,1)^r[a],d=O7(l,u,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=h,t[o+p+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=x7[o],c=I7(i,s,a),l=O7(i,s,a),u=$7[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=oj[n],t[1]^=aj[n]}di(r)}class fb extends $g{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,Xo(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=t0(this.state)}clone(){return this._cloneInto()}keccak(){Va(this.state32),cj(this.state32,this.rounds),Va(this.state32),this.posOut=0,this.pos=0}update(e){ja(this),e=qi(e),zi(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ja(this,!1),zi(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(db(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,di(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new fb(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const lj=(t,e,r)=>r0(()=>new fb(e,t,r)),uj=lj(1,136,256/8);function hj(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function dj(t,e,r){return t&e^~t&r}function pj(t,e,r){return t&e^t&r^e&r}class P7 extends $g{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=pb(this.buffer)}update(e){ja(this),e=qi(e),zi(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=pb(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ja(this),db(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,di(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;hj(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=pb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const qa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Br=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Mr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),fj=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wa=new Uint32Array(64);class gj extends P7{constructor(e=32){super(64,e,8,!1),this.A=qa[0]|0,this.B=qa[1]|0,this.C=qa[2]|0,this.D=qa[3]|0,this.E=qa[4]|0,this.F=qa[5]|0,this.G=qa[6]|0,this.H=qa[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Wa[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=Wa[h-15],p=Wa[h-2],f=ps(d,7)^ps(d,18)^d>>>3,g=ps(p,17)^ps(p,19)^p>>>10;Wa[h]=g+Wa[h-7]+f+Wa[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=ps(a,6)^ps(a,11)^ps(a,25),p=u+d+dj(a,c,l)+fj[h]+Wa[h]|0,f=(ps(n,2)^ps(n,13)^ps(n,22))+pj(n,i,s)|0;u=l,l=c,c=a,a=o+p|0,o=s,s=i,i=n,n=p+f|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){di(Wa)}destroy(){this.set(0,0,0,0,0,0,0,0),di(this.buffer)}}const N7=m7(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),mj=N7[0],wj=N7[1],Za=new Uint32Array(80),Ka=new Uint32Array(80);class gb extends P7{constructor(e=64){super(128,e,16,!1),this.Ah=Mr[0]|0,this.Al=Mr[1]|0,this.Bh=Mr[2]|0,this.Bl=Mr[3]|0,this.Ch=Mr[4]|0,this.Cl=Mr[5]|0,this.Dh=Mr[6]|0,this.Dl=Mr[7]|0,this.Eh=Mr[8]|0,this.El=Mr[9]|0,this.Fh=Mr[10]|0,this.Fl=Mr[11]|0,this.Gh=Mr[12]|0,this.Gl=Mr[13]|0,this.Hh=Mr[14]|0,this.Hl=Mr[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:p,Gl:f,Hh:g,Hl:w}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w]}set(e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=p|0,this.Gl=f|0,this.Hh=g|0,this.Hl=w|0}process(e,r){for(let b=0;b<16;b++,r+=4)Za[b]=e.getUint32(r),Ka[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const A=Za[b-15]|0,P=Ka[b-15]|0,R=Fa(A,P,1)^Fa(A,P,8)^w7(A,P,7),M=Ha(A,P,1)^Ha(A,P,8)^y7(A,P,7),U=Za[b-2]|0,S=Ka[b-2]|0,L=Fa(U,S,19)^Qd(U,S,61)^w7(U,S,6),D=Ha(U,S,19)^e0(U,S,61)^y7(U,S,6),T=KH(M,D,Ka[b-7],Ka[b-16]),x=GH(T,R,L,Za[b-7],Za[b-16]);Za[b]=x|0,Ka[b]=T|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:p,Fl:f,Gh:g,Gl:w,Hh:v,Hl:C}=this;for(let b=0;b<80;b++){const A=Fa(h,d,14)^Fa(h,d,18)^Qd(h,d,41),P=Ha(h,d,14)^Ha(h,d,18)^e0(h,d,41),R=h&p^~h&g,M=d&f^~d&w,U=YH(C,P,M,wj[b],Ka[b]),S=XH(U,v,A,R,mj[b],Za[b]),L=U|0,D=Fa(n,i,28)^Qd(n,i,34)^Qd(n,i,39),T=Ha(n,i,28)^e0(n,i,34)^e0(n,i,39),x=n&s^n&a^s&a,_=i&o^i&c^o&c;v=g|0,C=w|0,g=p|0,w=f|0,p=h|0,f=d|0,{h,l:d}=Vi(l|0,u|0,S|0,L|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const m=ub(L,T,_);n=hb(m,S,D,x),i=m|0}({h:n,l:i}=Vi(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Vi(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Vi(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Vi(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Vi(this.Eh|0,this.El|0,h|0,d|0),{h:p,l:f}=Vi(this.Fh|0,this.Fl|0,p|0,f|0),{h:g,l:w}=Vi(this.Gh|0,this.Gl|0,g|0,w|0),{h:v,l:C}=Vi(this.Hh|0,this.Hl|0,v|0,C|0),this.set(n,i,s,o,a,c,l,u,h,d,p,f,g,w,v,C)}roundClean(){di(Za,Ka)}destroy(){di(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class yj extends gb{constructor(){super(48),this.Ah=Br[0]|0,this.Al=Br[1]|0,this.Bh=Br[2]|0,this.Bl=Br[3]|0,this.Ch=Br[4]|0,this.Cl=Br[5]|0,this.Dh=Br[6]|0,this.Dl=Br[7]|0,this.Eh=Br[8]|0,this.El=Br[9]|0,this.Fh=Br[10]|0,this.Fl=Br[11]|0,this.Gh=Br[12]|0,this.Gl=Br[13]|0,this.Hh=Br[14]|0,this.Hl=Br[15]|0}}const Ur=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class bj extends gb{constructor(){super(32),this.Ah=Ur[0]|0,this.Al=Ur[1]|0,this.Bh=Ur[2]|0,this.Bl=Ur[3]|0,this.Ch=Ur[4]|0,this.Cl=Ur[5]|0,this.Dh=Ur[6]|0,this.Dl=Ur[7]|0,this.Eh=Ur[8]|0,this.El=Ur[9]|0,this.Fh=Ur[10]|0,this.Fl=Ur[11]|0,this.Gh=Ur[12]|0,this.Gl=Ur[13]|0,this.Hh=Ur[14]|0,this.Hl=Ur[15]|0}}const xg=r0(()=>new gj),vj=r0(()=>new gb),Ej=r0(()=>new yj),Cj=r0(()=>new bj),Aj=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Kt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),fe=new Uint32Array(32);function Ga(t,e,r,n,i,s){const o=i[s],a=i[s+1];let c=fe[2*t],l=fe[2*t+1],u=fe[2*e],h=fe[2*e+1],d=fe[2*r],p=fe[2*r+1],f=fe[2*n],g=fe[2*n+1],w=ub(c,u,o);l=hb(w,l,h,a),c=w|0,{Dh:g,Dl:f}={Dh:g^l,Dl:f^c},{Dh:g,Dl:f}={Dh:jH(g,f),Dl:VH(g)},{h:p,l:d}=Vi(p,d,g,f),{Bh:h,Bl:u}={Bh:h^p,Bl:u^d},{Bh:h,Bl:u}={Bh:Fa(h,u,24),Bl:Ha(h,u,24)},fe[2*t]=c,fe[2*t+1]=l,fe[2*e]=u,fe[2*e+1]=h,fe[2*r]=d,fe[2*r+1]=p,fe[2*n]=f,fe[2*n+1]=g}function Ya(t,e,r,n,i,s){const o=i[s],a=i[s+1];let c=fe[2*t],l=fe[2*t+1],u=fe[2*e],h=fe[2*e+1],d=fe[2*r],p=fe[2*r+1],f=fe[2*n],g=fe[2*n+1],w=ub(c,u,o);l=hb(w,l,h,a),c=w|0,{Dh:g,Dl:f}={Dh:g^l,Dl:f^c},{Dh:g,Dl:f}={Dh:Fa(g,f,16),Dl:Ha(g,f,16)},{h:p,l:d}=Vi(p,d,g,f),{Bh:h,Bl:u}={Bh:h^p,Bl:u^d},{Bh:h,Bl:u}={Bh:Qd(h,u,63),Bl:e0(h,u,63)},fe[2*t]=c,fe[2*t+1]=l,fe[2*e]=u,fe[2*e+1]=h,fe[2*r]=d,fe[2*r+1]=p,fe[2*n]=f,fe[2*n+1]=g}function $j(t,e={},r,n,i){if(Xo(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class xj extends $g{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Xo(e),Xo(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=t0(this.buffer)}update(e){ja(this),e=qi(e),zi(e);const{blockLen:r,buffer:n,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<s;){this.pos===r&&(Va(i),this.compress(i,0,!1),Va(i),this.pos=0);const l=Math.min(r-this.pos,s-c),u=o+c;if(l===r&&!(u%4)&&c+l<s){const h=new Uint32Array(a,u,Math.floor((s-c)/4));Va(h);for(let d=0;c+r<s;d+=i.length,c+=r)this.length+=r,this.compress(h,d,!1);Va(h);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){ja(this),db(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,di(this.buffer.subarray(r)),Va(n),this.compress(n,0,!0),Va(n);const i=t0(e);this.get().forEach((s,o)=>i[o]=Jo(s))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class _j extends xj{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Kt[0]|0,this.v0h=Kt[1]|0,this.v1l=Kt[2]|0,this.v1h=Kt[3]|0,this.v2l=Kt[4]|0,this.v2h=Kt[5]|0,this.v3l=Kt[6]|0,this.v3h=Kt[7]|0,this.v4l=Kt[8]|0,this.v4h=Kt[9]|0,this.v5l=Kt[10]|0,this.v5h=Kt[11]|0,this.v6l=Kt[12]|0,this.v6h=Kt[13]|0,this.v7l=Kt[14]|0,this.v7h=Kt[15]|0,$j(r,e,64,16,16);let{key:n,personalization:i,salt:s}=e,o=0;if(n!==void 0&&(n=qi(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=qi(s);const a=t0(s);this.v4l^=Jo(a[0]),this.v4h^=Jo(a[1]),this.v5l^=Jo(a[2]),this.v5h^=Jo(a[3])}if(i!==void 0){i=qi(i);const a=t0(i);this.v6l^=Jo(a[0]),this.v6h^=Jo(a[1]),this.v7l^=Jo(a[2]),this.v7h^=Jo(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:h,v5h:d,v6l:p,v6h:f,v7l:g,v7h:w}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w]}set(e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=h|0,this.v5h=d|0,this.v6l=p|0,this.v6h=f|0,this.v7l=g|0,this.v7h=w|0}compress(e,r,n){this.get().forEach((c,l)=>fe[l]=c),fe.set(Kt,16);let{h:i,l:s}=g7(BigInt(this.length));fe[24]=Kt[8]^s,fe[25]=Kt[9]^i,n&&(fe[28]=~fe[28],fe[29]=~fe[29]);let o=0;const a=Aj;for(let c=0;c<12;c++)Ga(0,4,8,12,e,r+2*a[o++]),Ya(0,4,8,12,e,r+2*a[o++]),Ga(1,5,9,13,e,r+2*a[o++]),Ya(1,5,9,13,e,r+2*a[o++]),Ga(2,6,10,14,e,r+2*a[o++]),Ya(2,6,10,14,e,r+2*a[o++]),Ga(3,7,11,15,e,r+2*a[o++]),Ya(3,7,11,15,e,r+2*a[o++]),Ga(0,5,10,15,e,r+2*a[o++]),Ya(0,5,10,15,e,r+2*a[o++]),Ga(1,6,11,12,e,r+2*a[o++]),Ya(1,6,11,12,e,r+2*a[o++]),Ga(2,7,8,13,e,r+2*a[o++]),Ya(2,7,8,13,e,r+2*a[o++]),Ga(3,4,9,14,e,r+2*a[o++]),Ya(3,4,9,14,e,r+2*a[o++]);this.v0l^=fe[0]^fe[16],this.v0h^=fe[1]^fe[17],this.v1l^=fe[2]^fe[18],this.v1h^=fe[3]^fe[19],this.v2l^=fe[4]^fe[20],this.v2h^=fe[5]^fe[21],this.v3l^=fe[6]^fe[22],this.v3h^=fe[7]^fe[23],this.v4l^=fe[8]^fe[24],this.v4h^=fe[9]^fe[25],this.v5l^=fe[10]^fe[26],this.v5h^=fe[11]^fe[27],this.v6l^=fe[12]^fe[28],this.v6h^=fe[13]^fe[29],this.v7l^=fe[14]^fe[30],this.v7h^=fe[15]^fe[31],di(fe)}destroy(){this.destroyed=!0,di(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Sj=ej(t=>new _j(t)),Ij="https://rpc.walletconnect.org/v1";function T7(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(uj(r)).toString("hex")}async function Oj(t,e,r,n,i,s){switch(r.t){case"eip191":return await Pj(t,e,r.s);case"eip1271":return await Nj(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function Pj(t,e,r){return(await Hk({hash:T7(e),signature:r})).toLowerCase()===t.toLowerCase()}async function Nj(t,e,r,n,i,s){const o=Yo(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=r.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),h=(e.startsWith("0x")?e:T7(e)).substring(2),d=a+h+c+u+l,p=await fetch(`${s||Ij}/?chainId=${n}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Tj(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:f}=await p.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Tj(){return Date.now()+Math.floor(Math.random()*1e3)}function kj(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return Hi.encode(s)}function Rj(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const i=Sj(n,{dkLen:32});return Hi.encode(i)}function k7(t){const e=new Uint8Array(xg(Dj(t)));return Hi.encode(e)}function Dj(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function R7(t){const e=Buffer.from(t,"base64"),r=pE(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=uE(r),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(n)]),o=Cj(s);return vE.encode(o).replace(/=+$/,"")}function mb(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function Bj(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(mb(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(mb(r.length)),i.push(r),i.push(Buffer.from([26])),i.push(mb(n.length)),i.push(n);const s=Buffer.concat(i),o=xg(s);return Buffer.from(o).toString("hex").toUpperCase()}function Mj(t){var e,r;const n=[];try{if(typeof t=="string")return n.push(t),n;if(typeof t!="object")return n;t!=null&&t.id&&n.push(t.id);const i=(r=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:r.transactionHashes;i&&n.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return n}var Uj=Object.defineProperty,Lj=Object.defineProperties,Fj=Object.getOwnPropertyDescriptors,D7=Object.getOwnPropertySymbols,Hj=Object.prototype.hasOwnProperty,jj=Object.prototype.propertyIsEnumerable,B7=(t,e,r)=>e in t?Uj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vj=(t,e)=>{for(var r in e||(e={}))Hj.call(e,r)&&B7(t,r,e[r]);if(D7)for(var r of D7(e))jj.call(e,r)&&B7(t,r,e[r]);return t},zj=(t,e)=>Lj(t,Fj(e));const qj="did:pkh:",wb=t=>t?.split(":"),Wj=t=>{const e=t&&wb(t);if(e)return t.includes(qj)?e[3]:e[1]},yb=t=>{const e=t&&wb(t);if(e)return e[2]+":"+e[3]},_g=t=>{const e=t&&wb(t);if(e)return e.pop()};async function M7(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=U7(i,i.iss),o=_g(i.iss);return await Oj(o,s,n,yb(i.iss),r)}const U7=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=_g(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Wj(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,f=Sg(t.resources);if(f){const g=i0(f);i=tV(i,g)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,p].filter(g=>g!=null).join(`
`)};function Zj(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Kj(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function el(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Gj(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:Yj(e,r,n)}}}function Yj(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function L7(t){return el(t),`urn:recap:${Zj(t).replace(/=/g,"")}`}function i0(t){const e=Kj(t.replace("urn:recap:",""));return el(e),e}function Xj(t,e,r){const n=Gj(t,e,r);return L7(n)}function Jj(t){return t&&t.includes("urn:recap:")}function Qj(t,e){const r=i0(t),n=i0(e),i=eV(r,n);return L7(i)}function eV(t,e){el(t),el(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=zj(Vj({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function tV(t="",e){el(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function F7(t){var e;const r=i0(t);el(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function H7(t){const e=i0(t);el(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function Sg(t){if(!t)return;const e=t?.[t.length-1];return Jj(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function j7(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function vb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function mn(t,...e){if(!j7(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function V7(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rV(t,e){mn(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Xa(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Uu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function nV(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const iV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sV(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Eb(t){if(typeof t=="string")t=sV(t);else if(j7(t))t=Cb(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function oV(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function aV(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const cV=(t,e)=>{function r(n,...i){if(mn(n),!iV)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?mn(l):mn(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&mn(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");mn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,mn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(mn(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function z7(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!uV(e))throw new Error("invalid output, must be aligned");return e}function q7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function lV(t,e,r){bb(r);const n=new Uint8Array(16),i=nV(n);return q7(i,0,BigInt(e),r),q7(i,8,BigInt(t),r),n}function uV(t){return t.byteOffset%4===0}function Cb(t){return Uint8Array.from(t)}const W7=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),hV=W7("expand 16-byte k"),dV=W7("expand 32-byte k"),pV=Xa(hV),fV=Xa(dV);function Ge(t,e){return t<<e|t>>>32-e}function Ab(t){return t.byteOffset%4===0}const Ig=64,gV=16,Z7=2**32-1,K7=new Uint32Array;function mV(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(Ig),u=Xa(l),h=Ab(i)&&Ab(s),d=h?Xa(i):K7,p=h?Xa(s):K7;for(let f=0;f<c;o++){if(t(e,r,n,u,o,a),o>=Z7)throw new Error("arx: counter overflow");const g=Math.min(Ig,c-f);if(h&&g===Ig){const w=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let v=0,C;v<gV;v++)C=w+v,p[C]=d[C]^u[v];f+=Ig;continue}for(let w=0,v;w<g;w++)v=f+w,s[v]=i[v]^l[w];f+=g}}function wV(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=oV({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return vb(i),vb(o),bb(s),bb(r),(a,c,l,u,h=0)=>{mn(a),mn(c),mn(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),mn(u),vb(h),h<0||h>=Z7)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const p=[];let f=a.length,g,w;if(f===32)p.push(g=Cb(a)),w=fV;else if(f===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),w=pV,p.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);Ab(c)||p.push(c=Cb(c));const v=Xa(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(w,v,Xa(c.subarray(0,16)),v),c=c.subarray(16)}const C=16-i;if(C!==c.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){const A=new Uint8Array(12);A.set(c,s?0:12-c.length),c=A,p.push(c)}const b=Xa(c);return mV(t,w,v,b,l,u,h,o),Uu(...p),u}}const vr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class yV{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Eb(e),mn(e,32);const r=vr(e,0),n=vr(e,2),i=vr(e,4),s=vr(e,6),o=vr(e,8),a=vr(e,10),c=vr(e,12),l=vr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=vr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],p=o[6],f=o[7],g=o[8],w=o[9],v=vr(e,r+0),C=vr(e,r+2),b=vr(e,r+4),A=vr(e,r+6),P=vr(e,r+8),R=vr(e,r+10),M=vr(e,r+12),U=vr(e,r+14);let S=s[0]+(v&8191),L=s[1]+((v>>>13|C<<3)&8191),D=s[2]+((C>>>10|b<<6)&8191),T=s[3]+((b>>>7|A<<9)&8191),x=s[4]+((A>>>4|P<<12)&8191),_=s[5]+(P>>>1&8191),m=s[6]+((P>>>14|R<<2)&8191),y=s[7]+((R>>>11|M<<5)&8191),E=s[8]+((M>>>8|U<<8)&8191),I=s[9]+(U>>>5|i),$=0,O=$+S*a+L*(5*w)+D*(5*g)+T*(5*f)+x*(5*p);$=O>>>13,O&=8191,O+=_*(5*d)+m*(5*h)+y*(5*u)+E*(5*l)+I*(5*c),$+=O>>>13,O&=8191;let B=$+S*c+L*a+D*(5*w)+T*(5*g)+x*(5*f);$=B>>>13,B&=8191,B+=_*(5*p)+m*(5*d)+y*(5*h)+E*(5*u)+I*(5*l),$+=B>>>13,B&=8191;let H=$+S*l+L*c+D*a+T*(5*w)+x*(5*g);$=H>>>13,H&=8191,H+=_*(5*f)+m*(5*p)+y*(5*d)+E*(5*h)+I*(5*u),$+=H>>>13,H&=8191;let K=$+S*u+L*l+D*c+T*a+x*(5*w);$=K>>>13,K&=8191,K+=_*(5*g)+m*(5*f)+y*(5*p)+E*(5*d)+I*(5*h),$+=K>>>13,K&=8191;let V=$+S*h+L*u+D*l+T*c+x*a;$=V>>>13,V&=8191,V+=_*(5*w)+m*(5*g)+y*(5*f)+E*(5*p)+I*(5*d),$+=V>>>13,V&=8191;let q=$+S*d+L*h+D*u+T*l+x*c;$=q>>>13,q&=8191,q+=_*a+m*(5*w)+y*(5*g)+E*(5*f)+I*(5*p),$+=q>>>13,q&=8191;let Q=$+S*p+L*d+D*h+T*u+x*l;$=Q>>>13,Q&=8191,Q+=_*c+m*a+y*(5*w)+E*(5*g)+I*(5*f),$+=Q>>>13,Q&=8191;let re=$+S*f+L*p+D*d+T*h+x*u;$=re>>>13,re&=8191,re+=_*l+m*c+y*a+E*(5*w)+I*(5*g),$+=re>>>13,re&=8191;let he=$+S*g+L*f+D*p+T*d+x*h;$=he>>>13,he&=8191,he+=_*u+m*l+y*c+E*a+I*(5*w),$+=he>>>13,he&=8191;let ee=$+S*w+L*g+D*f+T*p+x*d;$=ee>>>13,ee&=8191,ee+=_*h+m*u+y*l+E*c+I*a,$+=ee>>>13,ee&=8191,$=($<<2)+$|0,$=$+O|0,O=$&8191,$=$>>>13,B+=$,s[0]=O,s[1]=B,s[2]=H,s[3]=K,s[4]=V,s[5]=q,s[6]=Q,s[7]=re,s[8]=he,s[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Uu(n)}update(e){V7(this),e=Eb(e),mn(e);const{buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Uu(this.h,this.r,this.buffer,this.pad)}digestInto(e){V7(this),rV(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function bV(t){const e=(n,i)=>t(i).update(Eb(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const vV=bV(t=>new yV(t));function EV(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],p=e[3],f=e[4],g=e[5],w=e[6],v=e[7],C=i,b=r[0],A=r[1],P=r[2],R=o,M=a,U=c,S=l,L=u,D=h,T=d,x=p,_=f,m=g,y=w,E=v,I=C,$=b,O=A,B=P;for(let K=0;K<s;K+=2)R=R+L|0,I=Ge(I^R,16),_=_+I|0,L=Ge(L^_,12),R=R+L|0,I=Ge(I^R,8),_=_+I|0,L=Ge(L^_,7),M=M+D|0,$=Ge($^M,16),m=m+$|0,D=Ge(D^m,12),M=M+D|0,$=Ge($^M,8),m=m+$|0,D=Ge(D^m,7),U=U+T|0,O=Ge(O^U,16),y=y+O|0,T=Ge(T^y,12),U=U+T|0,O=Ge(O^U,8),y=y+O|0,T=Ge(T^y,7),S=S+x|0,B=Ge(B^S,16),E=E+B|0,x=Ge(x^E,12),S=S+x|0,B=Ge(B^S,8),E=E+B|0,x=Ge(x^E,7),R=R+D|0,B=Ge(B^R,16),y=y+B|0,D=Ge(D^y,12),R=R+D|0,B=Ge(B^R,8),y=y+B|0,D=Ge(D^y,7),M=M+T|0,I=Ge(I^M,16),E=E+I|0,T=Ge(T^E,12),M=M+T|0,I=Ge(I^M,8),E=E+I|0,T=Ge(T^E,7),U=U+x|0,$=Ge($^U,16),_=_+$|0,x=Ge(x^_,12),U=U+x|0,$=Ge($^U,8),_=_+$|0,x=Ge(x^_,7),S=S+L|0,O=Ge(O^S,16),m=m+O|0,L=Ge(L^m,12),S=S+L|0,O=Ge(O^S,8),m=m+O|0,L=Ge(L^m,7);let H=0;n[H++]=o+R|0,n[H++]=a+M|0,n[H++]=c+U|0,n[H++]=l+S|0,n[H++]=u+L|0,n[H++]=h+D|0,n[H++]=d+T|0,n[H++]=p+x|0,n[H++]=f+_|0,n[H++]=g+m|0,n[H++]=w+y|0,n[H++]=v+E|0,n[H++]=C+I|0,n[H++]=b+$|0,n[H++]=A+O|0,n[H++]=P+B|0}const CV=wV(EV,{counterRight:!1,counterLength:4,allowShortKeys:!1}),AV=new Uint8Array(16),G7=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(AV.subarray(r))},$V=new Uint8Array(32);function Y7(t,e,r,n,i){const s=t(e,r,$V),o=vV.create(s);i&&G7(o,i),G7(o,n);const a=lV(n.length,i?i.length:0,!0);o.update(a);const c=o.digest();return Uu(s,a),c}const xV=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=z7(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=Y7(t,e,r,a,n);return s.set(c,o),Uu(c),s},decrypt(i,s){s=z7(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=Y7(t,e,r,o,n);if(!aV(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),Uu(c),s}}),X7=cV({blockSize:64,nonceLength:12,tagLength:16},xV(CV));class J7 extends $g{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Cg(e);const n=qi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),di(s)}update(e){return ja(this),this.iHash.update(e),this}digestInto(e){ja(this),zi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Og=(t,e,r)=>new J7(t,e).update(r).digest();Og.create=(t,e)=>new J7(t,e);function _V(t,e,r){return Cg(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Og(t,qi(r),qi(e))}const $b=Uint8Array.from([0]),Q7=Uint8Array.of();function SV(t,e,r,n=32){Cg(t),Xo(n);const i=t.outputLen;if(n>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/i);r===void 0&&(r=Q7);const o=new Uint8Array(s*i),a=Og.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)$b[0]=u+1,c.update(u===0?Q7:l).update(r).update($b).digestInto(l),o.set(l,i*u),a._cloneInto(c);return a.destroy(),c.destroy(),di(l,$b),o.slice(0,n)}const IV=(t,e,r,n,i)=>SV(t,_V(t,e,r),n,i),Pg=xg,xb=BigInt(0),_b=BigInt(1);function Ng(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function tl(t,e,r=""){const n=Eg(t),i=t?.length,s=e!==void 0;if(!n||s&&i!==e){const o=r&&`"${r}" `,a=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Tg(t){const e=t.toString(16);return e.length&1?"0"+e:e}function eA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?xb:BigInt("0x"+t)}function kg(t){return eA(Mu(t))}function Rg(t){return zi(t),eA(Mu(Uint8Array.from(t).reverse()))}function Sb(t,e){return Ag(t.toString(16).padStart(e*2,"0"))}function Ib(t,e){return Sb(t,e).reverse()}function Lr(t,e,r){let n;if(typeof e=="string")try{n=Ag(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Eg(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Ob=t=>typeof t=="bigint"&&xb<=t;function OV(t,e,r){return Ob(t)&&Ob(e)&&Ob(r)&&e<=t&&t<r}function Pb(t,e,r,n){if(!OV(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function tA(t){let e;for(e=0;t>xb;t>>=_b,e+=1);return e}const s0=t=>(_b<<BigInt(t))-_b;function PV(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=d=>new Uint8Array(d),i=d=>Uint8Array.of(d);let s=n(t),o=n(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...d)=>r(o,s,...d),u=(d=n(0))=>{o=l(i(0),d),s=l(),d.length!==0&&(o=l(i(1),d),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){s=l();const f=s.slice();p.push(f),d+=s.length}return za(...p)};return(d,p)=>{c(),u(d);let f;for(;!(f=p(h()));)u();return c(),f}}function Dg(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function rA(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const wn=BigInt(0),Xr=BigInt(1),rl=BigInt(2),nA=BigInt(3),iA=BigInt(4),sA=BigInt(5),NV=BigInt(7),oA=BigInt(8),TV=BigInt(9),aA=BigInt(16);function Kn(t,e){const r=t%e;return r>=wn?r:e+r}function Wi(t,e,r){let n=t;for(;e-- >wn;)n*=n,n%=r;return n}function cA(t,e){if(t===wn)throw new Error("invert: expected non-zero number");if(e<=wn)throw new Error("invert: expected positive modulus, got "+e);let r=Kn(t,e),n=e,i=wn,s=Xr;for(;r!==wn;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==Xr)throw new Error("invert: does not exist");return Kn(i,e)}function Nb(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function lA(t,e){const r=(t.ORDER+Xr)/iA,n=t.pow(e,r);return Nb(t,n,e),n}function kV(t,e){const r=(t.ORDER-sA)/oA,n=t.mul(e,rl),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,rl),i),a=t.mul(s,t.sub(o,t.ONE));return Nb(t,a,e),a}function RV(t){const e=Ja(t),r=uA(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+NV)/aA;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const h=a.mul(l,i),d=a.mul(l,s),p=a.eql(a.sqr(u),c),f=a.eql(a.sqr(h),c);l=a.cmov(l,u,p),u=a.cmov(d,h,f);const g=a.eql(a.sqr(u),c),w=a.cmov(l,u,g);return Nb(a,w,c),w}}function uA(t){if(t<nA)throw new Error("sqrt is not defined for small field");let e=t-Xr,r=0;for(;e%rl===wn;)e/=rl,r++;let n=rl;const i=Ja(t);for(;dA(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return lA;let s=i.pow(n,e);const o=(e+Xr)/rl;return function(a,c){if(a.is0(c))return c;if(dA(a,c)!==1)throw new Error("Cannot find square root");let l=r,u=a.mul(a.ONE,s),h=a.pow(c,e),d=a.pow(c,o);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let p=1,f=a.sqr(h);for(;!a.eql(f,a.ONE);)if(p++,f=a.sqr(f),p===l)throw new Error("Cannot find square root");const g=Xr<<BigInt(l-p-1),w=a.pow(u,g);l=p,u=a.sqr(w),h=a.mul(h,u),d=a.mul(d,w)}return d}}function DV(t){return t%iA===nA?lA:t%oA===sA?kV:t%aA===TV?RV(t):uA(t)}const BV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MV(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=BV.reduce((n,i)=>(n[i]="function",n),e);return Dg(t,r),t}function UV(t,e,r){if(r<wn)throw new Error("invalid exponent, negatives unsupported");if(r===wn)return t.ONE;if(r===Xr)return e;let n=t.ONE,i=e;for(;r>wn;)r&Xr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Xr;return n}function hA(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function dA(t,e){const r=(t.ORDER-Xr)/rl,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function pA(t,e){e!==void 0&&Xo(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ja(t,e,r=!1,n={}){if(t<=wn)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(r=d.isLE),typeof d.modFromBytes=="boolean"&&(o=d.modFromBytes),a=d.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:l}=pA(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:l,MASK:s0(c),ZERO:wn,ONE:Xr,allowedLengths:a,create:d=>Kn(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return wn<=d&&d<t},is0:d=>d===wn,isValidNot0:d=>!h.is0(d)&&h.isValid(d),isOdd:d=>(d&Xr)===Xr,neg:d=>Kn(-d,t),eql:(d,p)=>d===p,sqr:d=>Kn(d*d,t),add:(d,p)=>Kn(d+p,t),sub:(d,p)=>Kn(d-p,t),mul:(d,p)=>Kn(d*p,t),pow:(d,p)=>UV(h,d,p),div:(d,p)=>Kn(d*cA(p,t),t),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>cA(d,t),sqrt:s||(d=>(u||(u=DV(t)),u(h,d))),toBytes:d=>r?Ib(d,l):Sb(d,l),fromBytes:(d,p=!0)=>{if(a){if(!a.includes(d.length)||d.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const g=new Uint8Array(l);g.set(d,r?0:g.length-d.length),d=g}if(d.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+d.length);let f=r?Rg(d):kg(d);if(o&&(f=Kn(f,t)),!p&&!h.isValid(f))throw new Error("invalid field element: outside of range 0..ORDER");return f},invertBatch:d=>hA(h,d),cmov:(d,p,f)=>f?p:d});return Object.freeze(h)}function fA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function gA(t){const e=fA(t);return e+Math.ceil(e/2)}function LV(t,e,r=!1){const n=t.length,i=fA(e),s=gA(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Rg(t):kg(t),a=Kn(o,e-Xr)+Xr;return r?Ib(a,i):Sb(a,i)}const Lu=BigInt(0),nl=BigInt(1);function Bg(t,e){const r=e.negate();return t?r:e}function Tb(t,e){const r=hA(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function mA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kb(t,e){mA(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=s0(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function wA(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=nl);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,p=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:l}}function FV(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function HV(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Rb=new WeakMap,yA=new WeakMap;function Db(t){return yA.get(t)||1}function bA(t){if(t!==Lu)throw new Error("invalid wNAF")}class jV{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Lu;)r&nl&&(n=n.add(i)),i=i.double(),r>>=nl;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=kb(r,this.bits),s=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=kb(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:h,isNegF:d,offsetF:p}=wA(n,a,o);n=c,u?s=s.add(Bg(d,r[p])):i=i.add(Bg(h,r[l]))}return bA(n),{p:i,f:s}}wNAFUnsafe(e,r,n,i=this.ZERO){const s=kb(e,this.bits);for(let o=0;o<s.windows&&n!==Lu;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=wA(n,o,s);if(n=a,!l){const h=r[c];i=i.add(u?h.negate():h)}}return bA(n),i}getPrecomputes(e,r,n){let i=Rb.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Rb.set(r,i))),i}cached(e,r,n){const i=Db(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const s=Db(e);return s===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,i)}createCache(e,r){mA(r,this.bits),yA.set(e,r),Rb.delete(e)}hasCache(e){return Db(e)!==1}}function VV(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>Lu||n>Lu;)r&nl&&(s=s.add(i)),n&nl&&(o=o.add(i)),i=i.double(),r>>=nl,n>>=nl;return{p1:s,p2:o}}function zV(t,e,r,n){FV(r,t),HV(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=tA(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=s0(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let p=h;p>=0;p-=c){u.fill(o);for(let g=0;g<s;g++){const w=n[g],v=Number(w>>BigInt(p)&l);u[v]=u[v].add(r[g])}let f=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),f=f.add(w);if(d=d.add(f),p!==0)for(let g=0;g<c;g++)d=d.double()}return d}function vA(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return MV(e),e}else return Ja(t,{isLE:r})}function qV(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Lu))throw new Error(`CURVE.${a} must be positive bigint`)}const i=vA(e.p,r.Fp,n),s=vA(e.n,r.Fn,n),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of o)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),A7("HashToScalar-");const o0=BigInt(0),Fu=BigInt(1),Mg=BigInt(2);function WV(t){return Dg(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze(Ru({},t))}function ZV(t){const e=WV(t),{P:r,type:n,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||Qc,l=a?255:448,u=a?32:56,h=BigInt(a?9:5),d=BigInt(a?121665:39081),p=a?Mg**BigInt(254):Mg**BigInt(447),f=a?BigInt(8)*Mg**BigInt(251)-Fu:BigInt(4)*Mg**BigInt(445)-Fu,g=p+f+Fu,w=T=>Kn(T,r),v=C(h);function C(T){return Ib(w(T),u)}function b(T){const x=Lr("u coordinate",T,u);return a&&(x[31]&=127),w(Rg(x))}function A(T){return Rg(i(Lr("scalar",T,u)))}function P(T,x){const _=U(b(x),A(T));if(_===o0)throw new Error("invalid private or public key received");return C(_)}function R(T){return P(T,v)}function M(T,x,_){const m=w(T*(x-_));return x=w(x-m),_=w(_+m),{x_2:x,x_3:_}}function U(T,x){Pb("u",T,o0,r),Pb("scalar",x,p,g);const _=x,m=T;let y=Fu,E=o0,I=T,$=Fu,O=o0;for(let H=BigInt(l-1);H>=o0;H--){const K=_>>H&Fu;O^=K,{x_2:y,x_3:I}=M(O,y,I),{x_2:E,x_3:$}=M(O,E,$),O=K;const V=y+E,q=w(V*V),Q=y-E,re=w(Q*Q),he=q-re,ee=I+$,de=I-$,Re=w(de*V),rt=w(ee*Q),wt=Re+rt,sr=Re-rt;I=w(wt*wt),$=w(m*w(sr*sr)),y=w(q*re),E=w(he*(q+w(d*he)))}({x_2:y,x_3:I}=M(O,y,I)),{x_2:E,x_3:$}=M(O,E,$);const B=s(E);return w(y*B)}const S={secretKey:u,publicKey:u,seed:u},L=(T=c(u))=>(zi(T,S.seed),T);function D(T){const x=L(T);return{secretKey:x,publicKey:R(x)}}return{keygen:D,getSharedSecret:(T,x)=>P(T,x),getPublicKey:T=>R(T),scalarMult:P,scalarMultBase:R,utils:{randomSecretKey:L,randomPrivateKey:L},GuBytes:v.slice(),lengths:S}}const KV=BigInt(1),EA=BigInt(2),GV=BigInt(3),YV=BigInt(5),XV=BigInt(8),CA=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),JV={p:CA,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:XV,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function QV(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=CA,o=t*t%s*t%s,a=Wi(o,EA,s)*o%s,c=Wi(a,KV,s)*t%s,l=Wi(c,YV,s)*c%s,u=Wi(l,e,s)*l%s,h=Wi(u,r,s)*u%s,d=Wi(h,n,s)*h%s,p=Wi(d,i,s)*d%s,f=Wi(p,i,s)*d%s,g=Wi(f,e,s)*l%s;return{pow_p_5_8:Wi(g,EA,s)*t%s,b2:o}}function ez(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const tz=Ja(JV.p,{isLE:!0}),Bb=(()=>{const t=tz.ORDER;return ZV({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=QV(e);return Kn(Wi(r,GV,t)*n,t)},adjustScalarBytes:ez})})(),AA=(t,e)=>(t+(t>=0?e:-e)/$A)/e;function rz(t,e,r){const[[n,i],[s,o]]=e,a=AA(o*t,r),c=AA(-i*t,r);let l=t-a*n-c*s,u=-a*i-c*o;const h=l<ta,d=u<ta;h&&(l=-l),d&&(u=-u);const p=s0(Math.ceil(tA(r)/2))+Hu;if(l<ta||l>=p||u<ta||u>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}function Mb(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Ub(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Ng(r.lowS,"lowS"),Ng(r.prehash,"prehash"),r.format!==void 0&&Mb(r.format),r}class nz extends Error{constructor(e=""){super(e)}}const ea={Err:nz,_tlv:{encode:(t,e)=>{const{Err:r}=ea;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Tg(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Tg(i.length/2|128):"";return Tg(t)+s+i+e},decode(t,e){const{Err:r}=ea;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=ea;if(t<ta)throw new e("integer: negative integers are not allowed");let r=Tg(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=ea;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return kg(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=ea,i=Lr("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=ea,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},ta=BigInt(0),Hu=BigInt(1),$A=BigInt(2),Ug=BigInt(3),iz=BigInt(4);function ju(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=Lr("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function sz(t,e={}){const r=qV("weierstrass",t,e),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;Dg(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=_A(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(T,x,_){const{x:m,y}=x.toAffine(),E=n.toBytes(m);if(Ng(_,"isCompressed"),_){u();const I=!n.isOdd(y);return za(xA(I),E)}else return za(Uint8Array.of(4),E,n.toBytes(y))}function d(T){tl(T,void 0,"Point");const{publicKey:x,publicKeyUncompressed:_}=l,m=T.length,y=T[0],E=T.subarray(1);if(m===x&&(y===2||y===3)){const I=n.fromBytes(E);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const $=g(I);let O;try{O=n.sqrt($)}catch(H){const K=H instanceof Error?": "+H.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}u();const B=n.isOdd(O);return(y&1)===1!==B&&(O=n.neg(O)),{x:I,y:O}}else if(m===_&&y===4){const I=n.BYTES,$=n.fromBytes(E.subarray(0,I)),O=n.fromBytes(E.subarray(I,I*2));if(!w($,O))throw new Error("bad point: is not on curve");return{x:$,y:O}}else throw new Error(`bad point: got length ${m}, expected compressed=${x} or uncompressed=${_}`)}const p=e.toBytes||h,f=e.fromBytes||d;function g(T){const x=n.sqr(T),_=n.mul(x,T);return n.add(n.add(_,n.mul(T,s.a)),s.b)}function w(T,x){const _=n.sqr(x),m=g(T);return n.eql(_,m)}if(!w(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const v=n.mul(n.pow(s.a,Ug),iz),C=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(v,C)))throw new Error("bad curve params: a or b");function b(T,x,_=!1){if(!n.isValid(x)||_&&n.is0(x))throw new Error(`bad point coordinate ${T}`);return x}function A(T){if(!(T instanceof S))throw new Error("ProjectivePoint expected")}function P(T){if(!c||!c.basises)throw new Error("no endo");return rz(T,c.basises,i.ORDER)}const R=rA((T,x)=>{const{X:_,Y:m,Z:y}=T;if(n.eql(y,n.ONE))return{x:_,y:m};const E=T.is0();x==null&&(x=E?n.ONE:n.inv(y));const I=n.mul(_,x),$=n.mul(m,x),O=n.mul(y,x);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:I,y:$}}),M=rA(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.Y))return;throw new Error("bad point: ZERO")}const{x,y:_}=T.toAffine();if(!n.isValid(x)||!n.isValid(_))throw new Error("bad point: x or y not field elements");if(!w(x,_))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(T,x,_,m,y){return _=new S(n.mul(_.X,T),_.Y,_.Z),x=Bg(m,x),_=Bg(y,_),x.add(_)}class S{constructor(x,_,m){this.X=b("x",x),this.Y=b("y",_,!0),this.Z=b("z",m),Object.freeze(this)}static CURVE(){return s}static fromAffine(x){const{x:_,y:m}=x||{};if(!x||!n.isValid(_)||!n.isValid(m))throw new Error("invalid affine point");if(x instanceof S)throw new Error("projective point not allowed");return n.is0(_)&&n.is0(m)?S.ZERO:new S(_,m,n.ONE)}static fromBytes(x){const _=S.fromAffine(f(tl(x,void 0,"point")));return _.assertValidity(),_}static fromHex(x){return S.fromBytes(Lr("pointHex",x))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(x=8,_=!0){return D.createCache(this,x),_||this.multiply(Ug),this}assertValidity(){M(this)}hasEvenY(){const{y:x}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(x)}equals(x){A(x);const{X:_,Y:m,Z:y}=this,{X:E,Y:I,Z:$}=x,O=n.eql(n.mul(_,$),n.mul(E,y)),B=n.eql(n.mul(m,$),n.mul(I,y));return O&&B}negate(){return new S(this.X,n.neg(this.Y),this.Z)}double(){const{a:x,b:_}=s,m=n.mul(_,Ug),{X:y,Y:E,Z:I}=this;let $=n.ZERO,O=n.ZERO,B=n.ZERO,H=n.mul(y,y),K=n.mul(E,E),V=n.mul(I,I),q=n.mul(y,E);return q=n.add(q,q),B=n.mul(y,I),B=n.add(B,B),$=n.mul(x,B),O=n.mul(m,V),O=n.add($,O),$=n.sub(K,O),O=n.add(K,O),O=n.mul($,O),$=n.mul(q,$),B=n.mul(m,B),V=n.mul(x,V),q=n.sub(H,V),q=n.mul(x,q),q=n.add(q,B),B=n.add(H,H),H=n.add(B,H),H=n.add(H,V),H=n.mul(H,q),O=n.add(O,H),V=n.mul(E,I),V=n.add(V,V),H=n.mul(V,q),$=n.sub($,H),B=n.mul(V,K),B=n.add(B,B),B=n.add(B,B),new S($,O,B)}add(x){A(x);const{X:_,Y:m,Z:y}=this,{X:E,Y:I,Z:$}=x;let O=n.ZERO,B=n.ZERO,H=n.ZERO;const K=s.a,V=n.mul(s.b,Ug);let q=n.mul(_,E),Q=n.mul(m,I),re=n.mul(y,$),he=n.add(_,m),ee=n.add(E,I);he=n.mul(he,ee),ee=n.add(q,Q),he=n.sub(he,ee),ee=n.add(_,y);let de=n.add(E,$);return ee=n.mul(ee,de),de=n.add(q,re),ee=n.sub(ee,de),de=n.add(m,y),O=n.add(I,$),de=n.mul(de,O),O=n.add(Q,re),de=n.sub(de,O),H=n.mul(K,ee),O=n.mul(V,re),H=n.add(O,H),O=n.sub(Q,H),H=n.add(Q,H),B=n.mul(O,H),Q=n.add(q,q),Q=n.add(Q,q),re=n.mul(K,re),ee=n.mul(V,ee),Q=n.add(Q,re),re=n.sub(q,re),re=n.mul(K,re),ee=n.add(ee,re),q=n.mul(Q,ee),B=n.add(B,q),q=n.mul(de,ee),O=n.mul(he,O),O=n.sub(O,q),q=n.mul(he,Q),H=n.mul(de,H),H=n.add(H,q),new S(O,B,H)}subtract(x){return this.add(x.negate())}is0(){return this.equals(S.ZERO)}multiply(x){const{endo:_}=e;if(!i.isValidNot0(x))throw new Error("invalid scalar: out of range");let m,y;const E=I=>D.cached(this,I,$=>Tb(S,$));if(_){const{k1neg:I,k1:$,k2neg:O,k2:B}=P(x),{p:H,f:K}=E($),{p:V,f:q}=E(B);y=K.add(q),m=U(_.beta,H,V,I,O)}else{const{p:I,f:$}=E(x);m=I,y=$}return Tb(S,[m,y])[0]}multiplyUnsafe(x){const{endo:_}=e,m=this;if(!i.isValid(x))throw new Error("invalid scalar: out of range");if(x===ta||m.is0())return S.ZERO;if(x===Hu)return m;if(D.hasCache(this))return this.multiply(x);if(_){const{k1neg:y,k1:E,k2neg:I,k2:$}=P(x),{p1:O,p2:B}=VV(S,m,E,$);return U(_.beta,O,B,y,I)}else return D.unsafe(m,x)}multiplyAndAddUnsafe(x,_,m){const y=this.multiplyUnsafe(_).add(x.multiplyUnsafe(m));return y.is0()?void 0:y}toAffine(x){return R(this,x)}isTorsionFree(){const{isTorsionFree:x}=e;return o===Hu?!0:x?x(S,this):D.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:x}=e;return o===Hu?this:x?x(S,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(x=!0){return Ng(x,"isCompressed"),this.assertValidity(),p(S,this,x)}toHex(x=!0){return Mu(this.toBytes(x))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(x=!0){return this.toBytes(x)}_setWindowSize(x){this.precompute(x)}static normalizeZ(x){return Tb(S,x)}static msm(x,_){return zV(S,i,x,_)}static fromPrivateKey(x){return S.BASE.multiply(ju(i,x))}}S.BASE=new S(s.Gx,s.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO),S.Fp=n,S.Fn=i;const L=i.BITS,D=new jV(S,e.endo?Math.ceil(L/2):L);return S.BASE.precompute(8),S}function xA(t){return Uint8Array.of(t?2:3)}function _A(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function oz(t,e={}){const{Fn:r}=t,n=e.randomBytes||Qc,i=Object.assign(_A(t.Fp,r),{seed:gA(r.ORDER)});function s(d){try{return!!ju(r,d)}catch{return!1}}function o(d,p){const{publicKey:f,publicKeyUncompressed:g}=i;try{const w=d.length;return p===!0&&w!==f||p===!1&&w!==g?!1:!!t.fromBytes(d)}catch{return!1}}function a(d=n(i.seed)){return LV(tl(d,i.seed,"seed"),r.ORDER)}function c(d,p=!0){return t.BASE.multiply(ju(r,d)).toBytes(p)}function l(d){const p=a(d);return{secretKey:p,publicKey:c(p)}}function u(d){if(typeof d=="bigint")return!1;if(d instanceof t)return!0;const{secretKey:p,publicKey:f,publicKeyUncompressed:g}=i;if(r.allowedLengths||p===f)return;const w=Lr("key",d).length;return w===f||w===g}function h(d,p,f=!0){if(u(d)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");const g=ju(r,d);return t.fromHex(p).multiply(g).toBytes(f)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:l,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:d=>ju(r,d),precompute(d=8,p=t.BASE){return p.precompute(d,!1)}},lengths:i})}function az(t,e,r={}){Cg(e),Dg(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Qc,i=r.hmac||((_,...m)=>Og(e,_,za(...m))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:p}=oz(t,r),f={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function w(_){const m=a>>Hu;return _>m}function v(_,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${_}: out of range 1..Point.Fn.ORDER`);return m}function C(_,m){Mb(m);const y=p.signature,E=m==="compact"?y:m==="recovered"?y+1:void 0;return tl(_,E,`${m} signature`)}class b{constructor(m,y,E){this.r=v("r",m),this.s=v("s",y),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(m,y=g){C(m,y);let E;if(y==="der"){const{r:B,s:H}=ea.toSig(tl(m));return new b(B,H)}y==="recovered"&&(E=m[0],y="compact",m=m.subarray(1));const I=o.BYTES,$=m.subarray(0,I),O=m.subarray(I,I*2);return new b(o.fromBytes($),o.fromBytes(O),E)}static fromHex(m,y){return this.fromBytes(Ag(m),y)}addRecoveryBit(m){return new b(this.r,this.s,m)}recoverPublicKey(m){const y=s.ORDER,{r:E,s:I,recovery:$}=this;if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");if(a*$A<y&&$>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=$===2||$===3?E+a:E;if(!s.isValid(O))throw new Error("recovery id 2 or 3 invalid");const B=s.toBytes(O),H=t.fromBytes(za(xA(($&1)===0),B)),K=o.inv(O),V=P(Lr("msgHash",m)),q=o.create(-V*K),Q=o.create(I*K),re=t.BASE.multiplyUnsafe(q).add(H.multiplyUnsafe(Q));if(re.is0())throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return w(this.s)}toBytes(m=g){if(Mb(m),m==="der")return Ag(ea.hexFromSig(this));const y=o.toBytes(this.r),E=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return za(Uint8Array.of(this.recovery),y,E)}return za(y,E)}toHex(m){return Mu(this.toBytes(m))}assertValidity(){}static fromCompact(m){return b.fromBytes(Lr("sig",m),"compact")}static fromDER(m){return b.fromBytes(Lr("sig",m),"der")}normalizeS(){return this.hasHighS()?new b(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Mu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Mu(this.toBytes("compact"))}}const A=r.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const m=kg(_),y=_.length*8-c;return y>0?m>>BigInt(y):m},P=r.bits2int_modN||function(_){return o.create(A(_))},R=s0(c);function M(_){return Pb("num < 2^"+c,_,ta,R),o.toBytes(_)}function U(_,m){return tl(_,void 0,"message"),m?tl(e(_),void 0,"prehashed message"):_}function S(_,m,y){if(["recovered","canonical"].some(Q=>Q in y))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:I,extraEntropy:$}=Ub(y,f);_=U(_,I);const O=P(_),B=ju(o,m),H=[M(B),M(O)];if($!=null&&$!==!1){const Q=$===!0?n(p.secretKey):$;H.push(Lr("extraEntropy",Q))}const K=za(...H),V=O;function q(Q){const re=A(Q);if(!o.isValidNot0(re))return;const he=o.inv(re),ee=t.BASE.multiply(re).toAffine(),de=o.create(ee.x);if(de===ta)return;const Re=o.create(he*o.create(V+de*B));if(Re===ta)return;let rt=(ee.x===de?0:2)|Number(ee.y&Hu),wt=Re;return E&&w(Re)&&(wt=o.neg(Re),rt^=1),new b(de,wt,rt)}return{seed:K,k2sig:q}}function L(_,m,y={}){_=Lr("message",_);const{seed:E,k2sig:I}=S(_,m,y);return PV(e.outputLen,o.BYTES,i)(E,I)}function D(_){let m;const y=typeof _=="string"||Eg(_),E=!y&&_!==null&&typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!y&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)m=new b(_.r,_.s);else if(y){try{m=b.fromBytes(Lr("sig",_),"der")}catch(I){if(!(I instanceof ea.Err))throw I}if(!m)try{m=b.fromBytes(Lr("sig",_),"compact")}catch{return!1}}return m||!1}function T(_,m,y,E={}){const{lowS:I,prehash:$,format:O}=Ub(E,f);if(y=Lr("publicKey",y),m=U(Lr("message",m),$),"strict"in E)throw new Error("options.strict was renamed to lowS");const B=O===void 0?D(_):b.fromBytes(Lr("sig",_),O);if(B===!1)return!1;try{const H=t.fromBytes(y);if(I&&B.hasHighS())return!1;const{r:K,s:V}=B,q=P(m),Q=o.inv(V),re=o.create(q*Q),he=o.create(K*Q),ee=t.BASE.multiplyUnsafe(re).add(H.multiplyUnsafe(he));return ee.is0()?!1:o.create(ee.x)===K}catch{return!1}}function x(_,m,y={}){const{prehash:E}=Ub(y,f);return m=U(m,E),b.fromBytes(_,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:h,utils:d,lengths:p,Point:t,sign:L,verify:T,recoverPublicKey:x,Signature:b,hash:e})}function cz(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Ja(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function lz(t){const{CURVE:e,curveOpts:r}=cz(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function uz(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,pA(r.Fn.ORDER,r.Fn.BITS))})}function hz(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=lz(t),s=sz(e,r),o=az(s,n,i);return uz(t,o)}function Lb(t,e){const r=n=>hz(Xd(Ru({},t),{hash:n}));return Xd(Ru({},r(e)),{create:r})}const SA={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},IA={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},OA={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},dz=Ja(SA.p),pz=Ja(IA.p),fz=Ja(OA.p),gz=Lb(Xd(Ru({},SA),{Fp:dz,lowS:!1}),xg);Lb(Xd(Ru({},IA),{Fp:pz,lowS:!1}),Ej),Lb(Xd(Ru({},OA),{Fp:fz,lowS:!1,allowedPrivateKeyLengths:[130,131,132]}),vj);const mz=gz,PA="base10",Jr="base16",yn="base64pad",Qa="base64url",a0="utf8",NA=0,ra=1,c0=2,wz=0,TA=1,l0=12,Fb=32;function yz(){const t=Bb.utils.randomPrivateKey(),e=Bb.getPublicKey(t);return{privateKey:pt(t,Jr),publicKey:pt(e,Jr)}}function Hb(){const t=Qc(Fb);return pt(t,Jr)}function bz(t,e){const r=Bb.getSharedSecret(It(t,Jr),It(e,Jr)),n=IV(Pg,r,void 0,void 0,Fb);return pt(n,Jr)}function Lg(t){const e=Pg(It(t,Jr));return pt(e,Jr)}function pi(t){const e=Pg(It(t,a0));return pt(e,Jr)}function kA(t){return It(`${t}`,PA)}function il(t){return Number(pt(t,PA))}function RA(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function DA(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function vz(t){const e=kA(typeof t.type<"u"?t.type:NA);if(il(e)===ra&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?It(t.senderPublicKey,Jr):void 0,n=typeof t.iv<"u"?It(t.iv,Jr):Qc(l0),i=It(t.symKey,Jr),s=X7(i,n).encrypt(It(t.message,a0)),o=BA({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===Qa?RA(o):o}function Ez(t){const e=It(t.symKey,Jr),{sealed:r,iv:n}=u0({encoded:t.encoded,encoding:t.encoding}),i=X7(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return pt(i,a0)}function Cz(t,e){const r=kA(c0),n=Qc(l0),i=It(t,a0),s=BA({type:r,sealed:i,iv:n});return e===Qa?RA(s):s}function Az(t,e){const{sealed:r}=u0({encoded:t,encoding:e});return pt(r,a0)}function BA(t){if(il(t.type)===c0)return pt(ls([t.type,t.sealed]),yn);if(il(t.type)===ra){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return pt(ls([t.type,t.senderPublicKey,t.iv,t.sealed]),yn)}return pt(ls([t.type,t.iv,t.sealed]),yn)}function u0(t){const e=(t.encoding||yn)===Qa?DA(t.encoded):t.encoded,r=It(e,yn),n=r.slice(wz,TA),i=TA;if(il(n)===ra){const c=i+Fb,l=c+l0,u=r.slice(i,c),h=r.slice(c,l),d=r.slice(l);return{type:n,sealed:d,iv:h,senderPublicKey:u}}if(il(n)===c0){const c=r.slice(i),l=Qc(l0);return{type:n,sealed:c,iv:l}}const s=i+l0,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function $z(t,e){const r=u0({encoded:t,encoding:e?.encoding});return MA({type:il(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?pt(r.senderPublicKey,Jr):void 0,receiverPublicKey:e?.receiverPublicKey})}function MA(t){const e=t?.type||NA;if(e===ra){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function UA(t){return t.type===ra&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function LA(t){return t.type===c0}function xz(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return ls([new Uint8Array([4]),e,r])}function _z(t,e){const[r,n,i]=t.split("."),s=Buffer.from(DA(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,l=Pg(c),u=xz(e);if(!mz.verify(ls([o,a]),l,u))throw new Error("Invalid signature");return ku(t).payload}const Sz="irn";function Fg(t){return t?.relay||{protocol:Sz}}function Vu(t){const e=MC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Iz=Object.defineProperty,Oz=Object.defineProperties,Pz=Object.getOwnPropertyDescriptors,FA=Object.getOwnPropertySymbols,Nz=Object.prototype.hasOwnProperty,Tz=Object.prototype.propertyIsEnumerable,HA=(t,e,r)=>e in t?Iz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jb=(t,e)=>{for(var r in e||(e={}))Nz.call(e,r)&&HA(t,r,e[r]);if(FA)for(var r of FA(e))Tz.call(e,r)&&HA(t,r,e[r]);return t},kz=(t,e)=>Oz(t,Pz(e));function Rz(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function jA(t){if(!t.includes("wc:")){const l=p7(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Dz(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Rz(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Dz(t){return t.startsWith("//")?t.substring(2):t}function Bz(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function VA(t){const e=new URLSearchParams,r=jb(jb(kz(jb({},Bz(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(r).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!==void 0&&e.append(n,String(i))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Hg(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var Mz=Object.defineProperty,Uz=Object.defineProperties,Lz=Object.getOwnPropertyDescriptors,zA=Object.getOwnPropertySymbols,Fz=Object.prototype.hasOwnProperty,Hz=Object.prototype.propertyIsEnumerable,qA=(t,e,r)=>e in t?Mz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jz=(t,e)=>{for(var r in e||(e={}))Fz.call(e,r)&&qA(t,r,e[r]);if(zA)for(var r of zA(e))Hz.call(e,r)&&qA(t,r,e[r]);return t},Vz=(t,e)=>Uz(t,Lz(e));function zu(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function zz(t){const e=[];return Object.values(t).forEach(r=>{e.push(...zu(r.accounts))}),e}function qz(t,e){const r=[];return Object.values(t).forEach(n=>{zu(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Wz(t,e){const r=[];return Object.values(t).forEach(n=>{zu(n.accounts).includes(e)&&r.push(...n.events)}),r}function jg(t){return t.includes(":")}function qu(t){return jg(t)?t.split(":")[0]:t}function WA(t){var e,r,n;const i={};if(!fs(t))return i;for(const[s,o]of Object.entries(t)){const a=jg(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=qu(s);i[u]=Vz(jz({},i[u]),{chains:ds(a,(e=i[u])==null?void 0:e.chains),methods:ds(c,(r=i[u])==null?void 0:r.methods),events:ds(l,(n=i[u])==null?void 0:n.events)})}return i}function Zz(t){const e={};return t?.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function ZA(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=Zz(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=ds(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}function Kz(t,e){var r,n,i,s,o,a;const c=WA(t),l=WA(e),u={},h=Object.keys(c).concat(Object.keys(l));for(const d of h)u[d]={chains:ds((r=c[d])==null?void 0:r.chains,(n=l[d])==null?void 0:n.chains),methods:ds((i=c[d])==null?void 0:i.methods,(s=l[d])==null?void 0:s.methods),events:ds((o=c[d])==null?void 0:o.events,(a=l[d])==null?void 0:a.events)};return u}const Gz={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Yz={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(t,e){const{message:r,code:n}=Yz[t];return{message:e?`${r} ${e}`:r,code:n}}function xt(t,e){const{message:r,code:n}=Gz[t];return{message:e?`${r} ${e}`:r,code:n}}function fi(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function fs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Gt(t){return typeof t>"u"}function Ft(t,e){return e&&Gt(t)?!0:typeof t=="string"&&!!t.trim().length}function Vb(t,e){return e&&Gt(t)?!0:typeof t=="number"&&!isNaN(t)}function Xz(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Xc(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=zu(a),h=r[o];(!Xc(r7(o,h),u)||!Xc(h.methods,c)||!Xc(h.events,l))&&(s=!1)}),s):!1}function Vg(t){return Ft(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Jz(t){if(Ft(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Vg(r)}}return!1}function Qz(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Ft(t,!1)){if(e(t))return!0;const r=p7(t);return e(r)}}catch{}return!1}function eq(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function tq(t){return t?.topic}function rq(t,e){let r=null;return Ft(t?.publicKey,!1)||(r=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function KA(t){let e=!0;return fi(t)?t.length&&(e=t.every(r=>Ft(r,!1))):e=!1,e}function nq(t,e,r){let n=null;return fi(e)&&e.length?e.forEach(i=>{n||Vg(i)||(n=xt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Vg(t)||(n=xt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function iq(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=nq(i,r7(i,s),`${e} ${r}`);o&&(n=o)}),n}function sq(t,e){let r=null;return fi(t)?t.forEach(n=>{r||Jz(n)||(r=xt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=xt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function oq(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=sq(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function aq(t,e){let r=null;return KA(t?.methods)?KA(t?.events)||(r=xt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=xt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function GA(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=aq(n,`${e}, namespace`);i&&(r=i)}),r}function cq(t,e,r){let n=null;if(t&&fs(t)){const i=GA(t,e);i&&(n=i);const s=iq(t,e,r);s&&(n=s)}else n=le("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function zb(t,e){let r=null;if(t&&fs(t)){const n=GA(t,e);n&&(r=n);const i=oq(t,e);i&&(r=i)}else r=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function YA(t){return Ft(t.protocol,!0)}function lq(t,e){let r=!1;return e&&!t?r=!0:t&&fi(t)&&t.length&&t.forEach(n=>{r=YA(n)}),r}function uq(t){return typeof t=="number"}function bn(t){return typeof t<"u"&&typeof t!==null}function hq(t){return!(!t||typeof t!="object"||!t.code||!Vb(t.code,!1)||!t.message||!Ft(t.message,!1))}function dq(t){return!(Gt(t)||!Ft(t.method,!1))}function pq(t){return!(Gt(t)||Gt(t.result)&&Gt(t.error)||!Vb(t.id,!1)||!Ft(t.jsonrpc,!1))}function fq(t){return!(Gt(t)||!Ft(t.name,!1))}function XA(t,e){return!(!Vg(e)||!zz(t).includes(e))}function gq(t,e,r){return Ft(r,!1)?qz(t,e).includes(r):!1}function mq(t,e,r){return Ft(r,!1)?Wz(t,e).includes(r):!1}function JA(t,e,r){let n=null;const i=wq(t),s=yq(e),o=Object.keys(i),a=Object.keys(s),c=QA(Object.keys(t)),l=QA(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Xc(o,a)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=zu(e[h].accounts);d.includes(h)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(Xc(i[h].methods,s[h].methods)?Xc(i[h].events,s[h].events)||(n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=le("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function wq(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function QA(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function yq(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=zu(t[r].accounts);n?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function bq(t,e){return Vb(t,!1)&&t<=e.max&&t>=e.min}function e$(){const t=Jd();return new Promise(e=>{switch(t){case Zn.browser:e(vq());break;case Zn.reactNative:e(Eq());break;case Zn.node:e(Cq());break;default:e(!0)}})}function vq(){return Du()&&navigator?.onLine}async function Eq(){if(La()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function Cq(){return!0}function Aq(t){switch(Jd()){case Zn.browser:$q(t);break;case Zn.reactNative:xq(t);break}}function $q(t){!La()&&Du()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function xq(t){La()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function _q(){var t;return Du()&&Fn()?((t=Fn())==null?void 0:t.visibilityState)==="visible":!0}const qb={};class h0{static get(e){return qb[e]}static set(e,r){qb[e]=r}static delete(e){delete qb[e]}}function Sq(t){const e=Hi.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Iq({publicKey:t,signature:e,payload:r}){var n;const i=Wb(r.method),s=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=Nq(r.address),a=r.era==="00"?new Uint8Array([0]):Wb(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Pq(r.tip)}`),h=kq(u),d=new Uint8Array([0,...t,o,...e,...a,...l,...h,...i]),p=Tq(d.length+1);return new Uint8Array([...p,s,...d])}function Oq(t){const e=Wb(t),r=JC.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function Wb(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Pq(t){return t.startsWith("0x")?t.slice(2):t}function Nq(t){const e=Hi.decode(t)[0];return e===42?0:e===60?2:1}function Tq(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function kq(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Rq(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=Sq(t.transaction.address),n=Iq({publicKey:r,signature:e,payload:t.transaction}),i=Buffer.from(n).toString("hex");return Oq(i)}class Gn{}class Dq extends Gn{constructor(e){super()}}const t$=Z.FIVE_SECONDS,Yn={pulse:"heartbeat_pulse"};class zg extends Dq{constructor(e){super(e),this.events=new yt.exports.EventEmitter,this.interval=t$,this.interval=e?.interval||t$}static async init(e){const r=new zg(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(Yn.pulse)}}const Bq=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Mq=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Uq=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Lq(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Fq(t);return}return e}function Fq(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function qg(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Uq.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Bq.test(t)||Mq.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Lq)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function Hq(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function cr(t,...e){try{return Hq(t(...e))}catch(r){return Promise.reject(r)}}function jq(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Vq(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Wg(t){if(jq(t))return String(t);if(Vq(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Wg(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Zb="base64:";function zq(t){return typeof t=="string"?t:Zb+Zq(t)}function qq(t){return typeof t!="string"||!t.startsWith(Zb)?t:Wq(t.slice(Zb.length))}function Wq(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Zq(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function vn(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Kq(...t){return vn(t.join(":"))}function Zg(t){return t=vn(t),t?t+":":""}function Gq(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function Yq(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}function zwe(t){return t}const Xq="memory",Jq=()=>{const t=new Map;return{name:Xq,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Qq(t={}){const e={mounts:{"":t.driver||Jq()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=vn(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await r$(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,p=f=>{let g=d.get(f.base);return g||(g={driver:f.driver,base:f.base,items:[]},d.set(f.base,g)),g};for(const f of l){const g=typeof f=="string",w=vn(g?f:f.key),v=g?void 0:f.value,C=g||!f.options?u:{...u,...f.options},b=r(w);p(b).items.push({key:w,value:v,relativeKey:b.relativeKey,options:C})}return Promise.all([...d.values()].map(f=>h(f))).then(f=>f.flat())},c={hasItem(l,u={}){l=vn(l);const{relativeKey:h,driver:d}=r(l);return cr(d.hasItem,h,u)},getItem(l,u={}){l=vn(l);const{relativeKey:h,driver:d}=r(l);return cr(d.getItem,h,u).then(p=>qg(p))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?cr(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(p=>({key:Kq(h.base,p.key),value:qg(p.value)}))):Promise.all(h.items.map(d=>cr(h.driver.getItem,d.relativeKey,d.options).then(p=>({key:d.key,value:qg(p)})))))},getItemRaw(l,u={}){l=vn(l);const{relativeKey:h,driver:d}=r(l);return d.getItemRaw?cr(d.getItemRaw,h,u):cr(d.getItem,h,u).then(p=>qq(p))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=vn(l);const{relativeKey:d,driver:p}=r(l);p.setItem&&(await cr(p.setItem,d,Wg(u),h),p.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return cr(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:Wg(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>cr(h.driver.setItem,d.relativeKey,Wg(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=vn(l);const{relativeKey:d,driver:p}=r(l);if(p.setItemRaw)await cr(p.setItemRaw,d,u,h);else if(p.setItem)await cr(p.setItem,d,zq(u),h);else return;p.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=vn(l);const{relativeKey:h,driver:d}=r(l);d.removeItem&&(await cr(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await cr(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=vn(l);const{relativeKey:h,driver:d}=r(l),p=Object.create(null);if(d.getMeta&&Object.assign(p,await cr(d.getMeta,h,u)),!u.nativeOnly){const f=await cr(d.getItem,h+"$",u).then(g=>qg(g));f&&typeof f=="object"&&(typeof f.atime=="string"&&(f.atime=new Date(f.atime)),typeof f.mtime=="string"&&(f.mtime=new Date(f.mtime)),Object.assign(p,f))}return p},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=Zg(l);const h=n(l,!0);let d=[];const p=[];let f=!0;for(const w of h){w.driver.flags?.maxDepth||(f=!1);const v=await cr(w.driver.getKeys,w.relativeBase,u);for(const C of v){const b=w.mountpoint+vn(C);d.some(A=>b.startsWith(A))||p.push(b)}d=[w.mountpoint,...d.filter(C=>!C.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!f;return p.filter(w=>(!g||Gq(w,u.maxDepth))&&Yq(w,l))},async clear(l,u={}){l=Zg(l),await Promise.all(n(l,!1).map(async h=>{if(h.driver.clear)return cr(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(p=>h.driver.removeItem(p,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>n$(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Zg(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(r$(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){l=Zg(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await n$(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=vn(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=vn(l),n(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function r$(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function n$(t){typeof t.dispose=="function"&&await cr(t.dispose)}function sl(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function i$(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=sl(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let Kb;function d0(){return Kb||(Kb=i$("keyval-store","keyval")),Kb}function s$(t,e=d0()){return e("readonly",r=>sl(r.get(t)))}function eW(t,e,r=d0()){return r("readwrite",n=>(n.put(e,t),sl(n.transaction)))}function tW(t,e=d0()){return e("readwrite",r=>(r.delete(t),sl(r.transaction)))}function rW(t=d0()){return t("readwrite",e=>(e.clear(),sl(e.transaction)))}function nW(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},sl(t.transaction)}function iW(t=d0()){return t("readonly",e=>{if(e.getAllKeys)return sl(e.getAllKeys());const r=[];return nW(e,n=>r.push(n.key)).then(()=>r)})}const sW="idb-keyval";var oW=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=i$(t.dbName,t.storeName)),{name:sW,options:t,async hasItem(i){return!(typeof await s$(r(i),n)>"u")},async getItem(i){return await s$(r(i),n)??null},setItem(i,s){return eW(r(i),s,n)},removeItem(i){return tW(r(i),n)},getKeys(){return iW(n)},clear(){return rW(n)}}};const aW="WALLET_CONNECT_V2_INDEXED_DB",cW="keyvaluestorage";class lW{constructor(){this.indexedDb=Qq({driver:oW({dbName:aW,storeName:cW})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,as(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kg={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Gb<"u"&&Gb.localStorage?Kg.exports=Gb.localStorage:typeof window<"u"&&window.localStorage?Kg.exports=window.localStorage:Kg.exports=new e})();function uW(t){var e;return[t[0],Zo((e=t[1])!=null?e:"")]}class hW{constructor(){this.localStorage=Kg.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(uW)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Zo(r)}async setItem(e,r){this.localStorage.setItem(e,as(r))}async removeItem(e){this.localStorage.removeItem(e)}}const dW="wc_storage_version",o$=1,pW=async(t,e,r)=>{const n=dW,i=await e.getItem(n);if(i&&i>=o$){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,o$),r(e),fW(t,o)},fW=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};class a${constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new hW;this.storage=e;try{const r=new lW;pW(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}function gW(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var mW=wW;function wW(t,e,r){var n=r&&r.stringify||gW,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,h=-1,d=t&&t.length||0,p=0;p<d;){if(t.charCodeAt(p)===37&&p+1<d){switch(h=h>-1?h:0,t.charCodeAt(p+1)){case 100:case 102:if(u>=c||e[u]==null)break;h<p&&(l+=t.slice(h,p)),l+=Number(e[u]),h=p+2,p++;break;case 105:if(u>=c||e[u]==null)break;h<p&&(l+=t.slice(h,p)),l+=Math.floor(Number(e[u])),h=p+2,p++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;h<p&&(l+=t.slice(h,p));var f=typeof e[u];if(f==="string"){l+="'"+e[u]+"'",h=p+2,p++;break}if(f==="function"){l+=e[u].name||"<anonymous>",h=p+2,p++;break}l+=n(e[u]),h=p+2,p++;break;case 115:if(u>=c)break;h<p&&(l+=t.slice(h,p)),l+=String(e[u]),h=p+2,p++;break;case 37:h<p&&(l+=t.slice(h,p)),l+="%",h=p+2,p++,u--;break}++u}++p}return h===-1?t:(h<d&&(l+=t.slice(h)),l)}const c$=mW;var Xn=gs;const p0=SW().console||{},yW={mapHttpRequest:Yg,mapHttpResponse:Yg,wrapRequestSerializer:Xb,wrapResponseSerializer:Xb,wrapErrorSerializer:Xb,req:Yg,res:Yg,err:AW};function bW(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function gs(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||p0;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=bW(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=f0),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:h,set:d});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:$W(t)};c.levels=gs.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=f0,c.serializers=n,c._serialize=i,c._stdErrSerialize=s,c.child=p,e&&(c._logEvent=Yb());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function d(f){if(f!=="silent"&&!this.levels.values[f])throw Error("unknown level "+f);this._level=f,Wu(l,c,"error","log"),Wu(l,c,"fatal","error"),Wu(l,c,"warn","error"),Wu(l,c,"info","log"),Wu(l,c,"debug","log"),Wu(l,c,"trace","log")}function p(f,g){if(!f)throw new Error("missing bindings for child Pino");g=g||{},i&&f.serializers&&(g.serializers=f.serializers);const w=g.serializers;if(i&&w){var v=Object.assign({},n,w),C=t.browser.serialize===!0?Object.keys(v):i;delete f.serializers,Gg([f],C,v,this._stdErrSerialize)}function b(A){this._childLevel=(A._childLevel|0)+1,this.error=Zu(A,f,"error"),this.fatal=Zu(A,f,"fatal"),this.warn=Zu(A,f,"warn"),this.info=Zu(A,f,"info"),this.debug=Zu(A,f,"debug"),this.trace=Zu(A,f,"trace"),v&&(this.serializers=v,this._serialize=C),e&&(this._logEvent=Yb([].concat(A._logEvent.bindings,f)))}return b.prototype=this,new b(this)}return c}gs.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},gs.stdSerializers=yW,gs.stdTimeFunctions=Object.assign({},{nullTime:l$,epochTime:u$,unixTime:xW,isoTime:_W});function Wu(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?f0:i[r]?i[r]:p0[r]||p0[n]||f0,vW(t,e,r)}function vW(t,e,r){!t.transmit&&e[r]===f0||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===p0?p0:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Gg(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,EW(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=gs.levels.values[l],h=gs.levels.values[r];if(h<u)return;CW(this,{ts:s,methodLevel:r,methodValue:h,transmitLevel:l,transmitValue:gs.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function EW(t,e,r,n){t._serialize&&Gg(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=gs.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?c$(i.shift(),i):void 0}else typeof s=="string"&&(s=c$(i.shift(),i));return s!==void 0&&(o.msg=s),o}function Gg(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=gs.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function Zu(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function CW(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Gg(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=Yb(c)}function Yb(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function AW(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function $W(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?l$:u$}function Yg(){return{}}function Xb(t){return t}function f0(){}function l$(){return!1}function u$(){return Date.now()}function xW(){return Math.round(Date.now()/1e3)}function _W(){return new Date(Date.now()).toISOString()}function SW(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const IW={level:"info"},g0="custom_context",Jb=1e3*1024;class OW{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class h${constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new OW(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}}class d${constructor(e,r=Jb){this.level=e??"error",this.levelValue=Xn.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new h$(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Xn.levels.values.error?console.error(e):r===Xn.levels.values.warn?console.warn(e):r===Xn.levels.values.debug?console.debug(e):r===Xn.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(as({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new h$(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(as({extraMetadata:e})),new Blob(r,{type:"application/json"})}}class PW{constructor(e,r=Jb){this.baseChunkLogger=new d$(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class NW{constructor(e,r=Jb){this.baseChunkLogger=new d$(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var TW=Object.defineProperty,kW=Object.defineProperties,RW=Object.getOwnPropertyDescriptors,p$=Object.getOwnPropertySymbols,DW=Object.prototype.hasOwnProperty,BW=Object.prototype.propertyIsEnumerable,f$=(t,e,r)=>e in t?TW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xg=(t,e)=>{for(var r in e||(e={}))DW.call(e,r)&&f$(t,r,e[r]);if(p$)for(var r of p$(e))BW.call(e,r)&&f$(t,r,e[r]);return t},Jg=(t,e)=>kW(t,RW(e));function na(t){return Jg(Xg({},t),{level:t?.level||IW.level})}function MW(t,e=g0){return t[e]||""}function UW(t,e,r=g0){return t[r]=e,t}function bt(t,e=g0){let r="";return typeof t.bindings>"u"?r=MW(t,e):r=t.bindings().context||"",r}function LW(t,e,r=g0){const n=bt(t,r);return n.trim()?`${n}/${e}`:e}function it(t,e,r=g0){const n=LW(t,e,r),i=t.child({context:n});return UW(i,n,r)}function FW(t){var e,r;const n=new PW((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Xn(Jg(Xg({},t.opts),{level:"trace",browser:Jg(Xg({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function HW(t){var e;const r=new NW((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Xn(Jg(Xg({},t.opts),{level:"trace"})),chunkLoggerController:r}}function Qb(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?FW(t):HW(t)}var jW=Object.defineProperty,VW=(t,e,r)=>e in t?jW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g$=(t,e,r)=>VW(t,typeof e!="symbol"?e+"":e,r);class zW extends Gn{constructor(e){super(),this.opts=e,g$(this,"protocol","wc"),g$(this,"version",2)}}var qW=Object.defineProperty,WW=(t,e,r)=>e in t?qW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ZW=(t,e,r)=>WW(t,typeof e!="symbol"?e+"":e,r);class KW extends Gn{constructor(e,r){super(),this.core=e,this.logger=r,ZW(this,"records",new Map)}}class GW{constructor(e,r){this.logger=e,this.core=r}}class YW extends Gn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class XW extends Gn{constructor(e){super()}}class JW{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class QW extends Gn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class eZ extends Gn{constructor(e,r){super(),this.core=e,this.logger=r}}class tZ{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}}class rZ{constructor(e,r){this.projectId=e,this.logger=r}}class nZ{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}}var iZ=Object.defineProperty,sZ=(t,e,r)=>e in t?iZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m$=(t,e,r)=>sZ(t,typeof e!="symbol"?e+"":e,r);class oZ{constructor(e){this.opts=e,m$(this,"protocol","wc"),m$(this,"version",2)}}class aZ{constructor(e){this.client=e}}const cZ="PARSE_ERROR",lZ="INVALID_REQUEST",uZ="METHOD_NOT_FOUND",hZ="INVALID_PARAMS",w$="INTERNAL_ERROR",e8="SERVER_ERROR",dZ=[-32700,-32600,-32601,-32602,-32603],m0={[cZ]:{code:-32700,message:"Parse error"},[lZ]:{code:-32600,message:"Invalid Request"},[uZ]:{code:-32601,message:"Method not found"},[hZ]:{code:-32602,message:"Invalid params"},[w$]:{code:-32603,message:"Internal error"},[e8]:{code:-32e3,message:"Server error"}},y$=e8;function pZ(t){return dZ.includes(t)}function b$(t){return Object.keys(m0).includes(t)?m0[t]:m0[y$]}function fZ(t){const e=Object.values(m0).find(r=>r.code===t);return e||m0[y$]}function v$(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var E$={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var t8=function(t,e){return t8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},t8(t,e)};function gZ(t,e){t8(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var r8=function(){return r8=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},r8.apply(this,arguments)};function mZ(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function wZ(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function yZ(t,e){return function(r,n){e(r,n,t)}}function bZ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vZ(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function EZ(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function CZ(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function AZ(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function n8(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function C$(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function $Z(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C$(arguments[e]));return t}function xZ(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function w0(t){return this instanceof w0?(this.v=t,this):new w0(t)}function _Z(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){n[d]&&(i[d]=function(p){return new Promise(function(f,g){s.push([d,p,f,g])>1||a(d,p)})})}function a(d,p){try{c(n[d](p))}catch(f){h(s[0][3],f)}}function c(d){d.value instanceof w0?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,p){d(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function SZ(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:w0(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function IZ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof n8=="function"?n8(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function OZ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function PZ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function NZ(t){return t&&t.__esModule?t:{default:t}}function TZ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function kZ(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var RZ=Object.freeze({__proto__:null,__extends:gZ,get __assign(){return r8},__rest:mZ,__decorate:wZ,__param:yZ,__metadata:bZ,__awaiter:vZ,__generator:EZ,__createBinding:CZ,__exportStar:AZ,__values:n8,__read:C$,__spread:$Z,__spreadArrays:xZ,__await:w0,__asyncGenerator:_Z,__asyncDelegator:SZ,__asyncValues:IZ,__makeTemplateObject:OZ,__importStar:PZ,__importDefault:NZ,__classPrivateFieldGet:TZ,__classPrivateFieldSet:kZ}),DZ=Y3(RZ),ia={},A$;function BZ(){if(A$)return ia;A$=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.isBrowserCryptoAvailable=ia.getSubtleCrypto=ia.getBrowerCrypto=void 0;function t(){return or?.crypto||or?.msCrypto||{}}ia.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}ia.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ia.isBrowserCryptoAvailable=r,ia}var sa={},$$;function MZ(){if($$)return sa;$$=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.isBrowser=sa.isNode=sa.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}sa.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}sa.isNode=e;function r(){return!t()&&!e()}return sa.isBrowser=r,sa}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=DZ;e.__exportStar(BZ(),t),e.__exportStar(MZ(),t)})(E$);function lr(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Qr(t=6){return BigInt(lr(t))}function Ht(t,e,r){return{id:r||lr(),jsonrpc:"2.0",method:t,params:e}}function ms(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ku(t,e,r){return{id:t,jsonrpc:"2.0",error:UZ(e,r)}}function UZ(t,e){return typeof t>"u"?b$(w$):(typeof t=="string"&&(t=Object.assign(Object.assign({},b$(e8)),{message:t})),typeof e<"u"&&(t.data=e),pZ(t.code)&&(t=fZ(t.code)),t)}class LZ{}class FZ extends LZ{constructor(){super()}}class HZ extends FZ{constructor(e){super()}}const jZ="^https?:",VZ="^wss?:";function zZ(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function x$(t,e){const r=zZ(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function _$(t){return x$(t,jZ)}function S$(t){return x$(t,VZ)}function qZ(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function I$(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Gu(t){return I$(t)&&"method"in t}function ol(t){return I$(t)&&(Yt(t)||Tt(t))}function Yt(t){return"result"in t}function Tt(t){return"error"in t}class en extends HZ{constructor(e){super(e),this.events=new yt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ht(e.method,e.params||[],e.id||Qr().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Tt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ol(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const WZ=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ZZ=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",O$=t=>t.split("?")[0],P$=10,KZ=WZ();class N${constructor(e){if(this.url=e,this.events=new yt.exports.EventEmitter,this.registering=!1,!S$(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(as(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!S$(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=E$.isReactNative()?void 0:{rejectUnauthorized:!qZ(e)},s=new KZ(e,[],i);ZZ()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Zo(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Ku(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return v$(e,O$(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>P$&&this.events.setMaxListeners(P$)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${O$(this.url)}`));return this.events.emit("register_error",r),r}}var GZ=Object.defineProperty,T$=Object.getOwnPropertySymbols,YZ=Object.prototype.hasOwnProperty,XZ=Object.prototype.propertyIsEnumerable,k$=(t,e,r)=>e in t?GZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tn=(t,e)=>{for(var r in e||(e={}))YZ.call(e,r)&&k$(t,r,e[r]);if(T$)for(var r of T$(e))XZ.call(e,r)&&k$(t,r,e[r]);return t};const R$="wc",D$=2,Qg="core",ws=`${R$}@2:${Qg}:`,JZ={name:Qg,logger:"error"},QZ={database:":memory:"},eK="crypto",B$="client_ed25519_seed",tK=Z.ONE_DAY,rK="keychain",nK="0.3",iK="messages",sK="0.3",oK=Z.SIX_HOURS,aK="publisher",M$="irn",cK="error",U$="wss://relay.walletconnect.org",lK="relayer",Bt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uK="_subscription",gi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},hK=.1,i8="2.21.9",_t={link_mode:"link_mode",relay:"relay"},e2={inbound:"inbound",outbound:"outbound"},dK="0.3",pK="WALLETCONNECT_CLIENT_ID",L$="WALLETCONNECT_LINK_MODE_APPS",Jn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},fK="subscription",gK="0.3",mK="pairing",wK="0.3",y0={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},al={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Zi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},yK="history",bK="0.3",vK="expirer",mi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},EK="0.3",CK="verify-api",AK="https://verify.walletconnect.com",F$="https://verify.walletconnect.org",b0=F$,$K=`${b0}/v3`,xK=[AK,F$],_K="echo",SK="https://echo.walletconnect.com",ys={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},oa={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ec={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},v0={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},cl={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},E0={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},IK=.1,OK="event-client",PK=86400,NK="https://pulse.walletconnect.org/batch";function TK(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,w=0,v=0,C=f.length;v!==C&&f[v]===0;)v++,g++;for(var b=(C-v)*u+1>>>0,A=new Uint8Array(b);v!==C;){for(var P=f[v],R=0,M=b-1;(P!==0||R<w)&&M!==-1;M--,R++)P+=256*A[M]>>>0,A[M]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");w=R,v++}for(var U=b-w;U!==b&&A[U]===0;)U++;for(var S=c.repeat(g);U<b;++U)S+=t.charAt(A[U]);return S}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var w=0,v=0;f[g]===c;)w++,g++;for(var C=(f.length-g)*l+1>>>0,b=new Uint8Array(C);f[g];){var A=r[f.charCodeAt(g)];if(A===255)return;for(var P=0,R=C-1;(A!==0||P<v)&&R!==-1;R--,P++)A+=a*b[R]>>>0,b[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");v=P,g++}if(f[g]!==" "){for(var M=C-v;M!==C&&b[M]===0;)M++;for(var U=new Uint8Array(w+(C-M)),S=w;M!==C;)U[S++]=b[M++];return U}}}function p(f){var g=d(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var kK=TK,RK=kK;const H$=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},DK=t=>new TextEncoder().encode(t),BK=t=>new TextDecoder().decode(t);class MK{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class UK{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return j$(this,e)}}class LK{constructor(e){this.decoders=e}or(e){return j$(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const j$=(t,e)=>new LK(tn(tn({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class FK{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new MK(e,r,n),this.decoder=new UK(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const t2=({name:t,prefix:e,encode:r,decode:n})=>new FK(t,e,r,n),C0=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=RK(r,e);return t2({prefix:t,name:e,encode:n,decode:s=>H$(i(s))})},HK=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},jK=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Er=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>t2({prefix:e,name:t,encode(i){return jK(i,n,r)},decode(i){return HK(i,n,r,t)}}),VK=t2({prefix:"\0",name:"identity",encode:t=>BK(t),decode:t=>DK(t)});var zK=Object.freeze({__proto__:null,identity:VK});const qK=Er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var WK=Object.freeze({__proto__:null,base2:qK});const ZK=Er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var KK=Object.freeze({__proto__:null,base8:ZK});const GK=C0({prefix:"9",name:"base10",alphabet:"0123456789"});var YK=Object.freeze({__proto__:null,base10:GK});const XK=Er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),JK=Er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var QK=Object.freeze({__proto__:null,base16:XK,base16upper:JK});const eG=Er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tG=Er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rG=Er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nG=Er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iG=Er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sG=Er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oG=Er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),aG=Er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cG=Er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lG=Object.freeze({__proto__:null,base32:eG,base32upper:tG,base32pad:rG,base32padupper:nG,base32hex:iG,base32hexupper:sG,base32hexpad:oG,base32hexpadupper:aG,base32z:cG});const uG=C0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hG=C0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var dG=Object.freeze({__proto__:null,base36:uG,base36upper:hG});const pG=C0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fG=C0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var gG=Object.freeze({__proto__:null,base58btc:pG,base58flickr:fG});const mG=Er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wG=Er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yG=Er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bG=Er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var vG=Object.freeze({__proto__:null,base64:mG,base64pad:wG,base64url:yG,base64urlpad:bG});const V$=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),EG=V$.reduce((t,e,r)=>(t[r]=e,t),[]),CG=V$.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function AG(t){return t.reduce((e,r)=>(e+=EG[r],e),"")}function $G(t){const e=[];for(const r of t){const n=CG[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const xG=t2({prefix:"\u{1F680}",name:"base256emoji",encode:AG,decode:$G});var _G=Object.freeze({__proto__:null,base256emoji:xG}),SG=q$,z$=128,IG=127,OG=~IG,PG=Math.pow(2,31);function q$(t,e,r){e=e||[],r=r||0;for(var n=r;t>=PG;)e[r++]=t&255|z$,t/=128;for(;t&OG;)e[r++]=t&255|z$,t>>>=7;return e[r]=t|0,q$.bytes=r-n+1,e}var NG=s8,TG=128,W$=127;function s8(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw s8.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&W$)<<i:(o&W$)*Math.pow(2,i),i+=7}while(o>=TG);return s8.bytes=s-n,r}var kG=Math.pow(2,7),RG=Math.pow(2,14),DG=Math.pow(2,21),BG=Math.pow(2,28),MG=Math.pow(2,35),UG=Math.pow(2,42),LG=Math.pow(2,49),FG=Math.pow(2,56),HG=Math.pow(2,63),jG=function(t){return t<kG?1:t<RG?2:t<DG?3:t<BG?4:t<MG?5:t<UG?6:t<LG?7:t<FG?8:t<HG?9:10},VG={encode:SG,decode:NG,encodingLength:jG},Z$=VG;const K$=(t,e,r=0)=>(Z$.encode(t,e,r),e),G$=t=>Z$.encodingLength(t),o8=(t,e)=>{const r=e.byteLength,n=G$(t),i=n+G$(r),s=new Uint8Array(i+r);return K$(t,s,0),K$(r,s,n),s.set(e,i),new zG(t,r,e,s)};class zG{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Y$=({name:t,code:e,encode:r})=>new qG(t,e,r);class qG{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?o8(this.code,r):r.then(n=>o8(this.code,n))}else throw Error("Unknown type, must be binary type")}}const X$=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),WG=Y$({name:"sha2-256",code:18,encode:X$("SHA-256")}),ZG=Y$({name:"sha2-512",code:19,encode:X$("SHA-512")});var KG=Object.freeze({__proto__:null,sha256:WG,sha512:ZG});const J$=0,GG="identity",Q$=H$;var YG=Object.freeze({__proto__:null,identity:{code:J$,name:GG,encode:Q$,digest:t=>o8(J$,Q$(t))}});new TextEncoder,new TextDecoder;const e9=tn(tn(tn(tn(tn(tn(tn(tn(tn(tn({},zK),WK),KK),YK),QK),lG),dG),gG),vG),_G);tn(tn({},KG),YG);function t9(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function XG(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?t9(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function r9(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const n9=r9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),a8=r9("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=XG(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),JG=tn({utf8:n9,"utf-8":n9,hex:e9.base16,latin1:a8,ascii:a8,binary:a8},e9);function QG(t,e="utf8"){const r=JG[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?t9(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var eY=Object.defineProperty,tY=(t,e,r)=>e in t?eY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bs=(t,e,r)=>tY(t,typeof e!="symbol"?e+"":e,r);class rY{constructor(e,r){this.core=e,this.logger=r,bs(this,"keychain",new Map),bs(this,"name",rK),bs(this,"version",nK),bs(this,"initialized",!1),bs(this,"storagePrefix",ws),bs(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),bs(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),bs(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),bs(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=le("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),bs(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ab(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?cb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nY=Object.defineProperty,iY=(t,e,r)=>e in t?nY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cr=(t,e,r)=>iY(t,typeof e!="symbol"?e+"":e,r);class sY{constructor(e,r,n){this.core=e,this.logger=r,Cr(this,"name",eK),Cr(this,"keychain"),Cr(this,"randomSessionIdentifier",Hb()),Cr(this,"initialized",!1),Cr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Cr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Cr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=pg(i);return Qy(s.publicKey)}),Cr(this,"generateKeyPair",()=>{this.isInitialized();const i=yz();return this.setPrivateKey(i.publicKey,i.privateKey)}),Cr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=pg(s),a=this.randomSessionIdentifier;return await yC(a,i,tK,o)}),Cr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=bz(a,s);return this.setSymKey(c,o)}),Cr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Lg(i);return await this.keychain.set(o,i),o}),Cr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Cr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Cr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=MA(o),c=as(s);if(LA(a))return Cz(c,o?.encoding);if(UA(a)){const d=a.senderPublicKey,p=a.receiverPublicKey;i=await this.generateSharedKey(d,p)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return vz({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o?.encoding})}),Cr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=$z(s,o);if(LA(a)){const c=Az(s,o?.encoding);return Zo(c)}if(UA(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Ez({symKey:c,encoded:s,encoding:o?.encoding});return Zo(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Cr(this,"getPayloadType",(i,s=yn)=>{const o=u0({encoded:i,encoding:s});return il(o.type)}),Cr(this,"getPayloadSenderPublicKey",(i,s=yn)=>{const o=u0({encoded:i,encoding:s});return o.senderPublicKey?pt(o.senderPublicKey,Jr):void 0}),this.core=e,this.logger=it(r,this.name),this.keychain=n||new rY(this.core,this.logger)}get context(){return bt(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(B$)}catch{e=Hb(),await this.keychain.set(B$,e)}return QG(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oY=Object.defineProperty,aY=Object.defineProperties,cY=Object.getOwnPropertyDescriptors,i9=Object.getOwnPropertySymbols,lY=Object.prototype.hasOwnProperty,uY=Object.prototype.propertyIsEnumerable,c8=(t,e,r)=>e in t?oY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hY=(t,e)=>{for(var r in e||(e={}))lY.call(e,r)&&c8(t,r,e[r]);if(i9)for(var r of i9(e))uY.call(e,r)&&c8(t,r,e[r]);return t},dY=(t,e)=>aY(t,cY(e)),Qn=(t,e,r)=>c8(t,typeof e!="symbol"?e+"":e,r);class pY extends GW{constructor(e,r){super(e,r),this.logger=e,this.core=r,Qn(this,"messages",new Map),Qn(this,"messagesWithoutClientAck",new Map),Qn(this,"name",iK),Qn(this,"version",sK),Qn(this,"initialized",!1),Qn(this,"storagePrefix",ws),Qn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Qn(this,"set",async(n,i,s)=>{this.isInitialized();const o=pi(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===e2.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,dY(hY({},c),{[o]:i}))}return await this.persist(),o}),Qn(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),Qn(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Qn(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=pi(i);return typeof s[o]<"u"}),Qn(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=pi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),Qn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=it(e,this.name),this.core=r}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ab(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ab(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?cb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?cb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fY=Object.defineProperty,gY=Object.defineProperties,mY=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,wY=Object.prototype.hasOwnProperty,yY=Object.prototype.propertyIsEnumerable,l8=(t,e,r)=>e in t?fY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yu=(t,e)=>{for(var r in e||(e={}))wY.call(e,r)&&l8(t,r,e[r]);if(s9)for(var r of s9(e))yY.call(e,r)&&l8(t,r,e[r]);return t},o9=(t,e)=>gY(t,mY(e)),wi=(t,e,r)=>l8(t,typeof e!="symbol"?e+"":e,r);class bY extends YW{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,wi(this,"events",new yt.exports.EventEmitter),wi(this,"name",aK),wi(this,"queue",new Map),wi(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),wi(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),wi(this,"needsTransportRestart",!1),wi(this,"publish",async(n,i,s)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const h=s?.ttl||oK,d=s?.prompt||!1,p=s?.tag||0,f=s?.id||Qr().toString(),g=Vu(Fg().protocol),w={id:f,method:s?.publishMethod||g.publish,params:Yu({topic:n,message:i,ttl:h,prompt:d,tag:p,attestation:s?.attestation},s?.tvf)},v=`Failed to publish payload, please try again. id:${f} tag:${p}`;try{Gt((o=w.params)==null?void 0:o.prompt)&&((a=w.params)==null||delete a.prompt),Gt((c=w.params)==null?void 0:c.tag)&&((l=w.params)==null||delete l.tag);const C=new Promise(async b=>{const A=({id:R})=>{var M;((M=w.id)==null?void 0:M.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(Bt.publish,A),b())};this.relayer.events.on(Bt.publish,A);const P=us(new Promise((R,M)=>{this.rpcPublish(w,s).then(R).catch(U=>{this.logger.warn(U,U?.message),M(U)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${f} tag:${p}`);try{await P,this.events.removeListener(Bt.publish,A)}catch(R){this.queue.set(f,{request:w,opts:s,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:f,topic:n,message:i,opts:s}}),await us(C,this.publishTimeout,v)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),(u=s?.internal)!=null&&u.throwOnFailedPublish)throw C}finally{this.queue.delete(f)}}),wi(this,"publishCustom",async n=>{var i,s,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:l,opts:u={}}=n,{attestation:h,tvf:d,publishMethod:p,prompt:f,tag:g,ttl:w=Z.FIVE_MINUTES}=u,v=u.id||Qr().toString(),C=Vu(Fg().protocol),b=p||C.publish,A={id:v,method:b,params:Yu(o9(Yu({},l),{ttl:w,prompt:f,tag:g,attestation:h}),d)},P=`Failed to publish custom payload, please try again. id:${v} tag:${g}`;try{Gt((i=A.params)==null?void 0:i.prompt)&&((s=A.params)==null||delete s.prompt),Gt((o=A.params)==null?void 0:o.tag)&&((a=A.params)==null||delete a.tag);const R=new Promise(async M=>{const U=({id:L})=>{var D;((D=A.id)==null?void 0:D.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(Bt.publish,U),M())};this.relayer.events.on(Bt.publish,U);const S=us(new Promise((L,D)=>{this.rpcPublish(A,u).then(L).catch(T=>{this.logger.warn(T,T?.message),D(T)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${v} tag:${g}`);try{await S,this.events.removeListener(Bt.publish,U)}catch(L){this.queue.set(v,{request:A,opts:u,attempt:1}),this.logger.warn(L,L?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,payload:l,opts:u}}),await us(R,this.publishTimeout,P)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(c=u?.internal)!=null&&c.throwOnFailedPublish)throw R}finally{this.queue.delete(v)}}),wi(this,"on",(n,i)=>{this.events.on(n,i)}),wi(this,"once",(n,i)=>{this.events.once(n,i)}),wi(this,"off",(n,i)=>{this.events.off(n,i)}),wi(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=it(r,this.name),this.registerEventListeners()}get context(){return bt(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Bt.publish,Yu(Yu({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const i=e.attempt+1;this.queue.set(r,o9(Yu({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Yn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Bt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Bt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var vY=Object.defineProperty,EY=(t,e,r)=>e in t?vY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xu=(t,e,r)=>EY(t,typeof e!="symbol"?e+"":e,r);class CY{constructor(){Xu(this,"map",new Map),Xu(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),Xu(this,"get",e=>this.map.get(e)||[]),Xu(this,"exists",(e,r)=>this.get(e).includes(r)),Xu(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Xu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var AY=Object.defineProperty,$Y=Object.defineProperties,xY=Object.getOwnPropertyDescriptors,a9=Object.getOwnPropertySymbols,_Y=Object.prototype.hasOwnProperty,SY=Object.prototype.propertyIsEnumerable,u8=(t,e,r)=>e in t?AY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A0=(t,e)=>{for(var r in e||(e={}))_Y.call(e,r)&&u8(t,r,e[r]);if(a9)for(var r of a9(e))SY.call(e,r)&&u8(t,r,e[r]);return t},h8=(t,e)=>$Y(t,xY(e)),vt=(t,e,r)=>u8(t,typeof e!="symbol"?e+"":e,r);class IY extends QW{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,vt(this,"subscriptions",new Map),vt(this,"topicMap",new CY),vt(this,"events",new yt.exports.EventEmitter),vt(this,"name",fK),vt(this,"version",gK),vt(this,"pending",new Map),vt(this,"cached",[]),vt(this,"initialized",!1),vt(this,"storagePrefix",ws),vt(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),vt(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),vt(this,"clientId"),vt(this,"batchSubscribeTopicsLimit",500),vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),vt(this,"subscribe",async(n,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=Fg(i),a={topic:n,relay:o,transportType:i?.transportType};(s=i?.internal)!=null&&s.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,i);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),vt(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),vt(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),vt(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),vt(this,"on",(n,i)=>{this.events.on(n,i)}),vt(this,"once",(n,i)=>{this.events.once(n,i)}),vt(this,"off",(n,i)=>{this.events.off(n,i)}),vt(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),vt(this,"start",async()=>{await this.onConnect()}),vt(this,"stop",async()=>{await this.onDisconnect()}),vt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),vt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),vt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Yn.pulse,async()=>{await this.checkPending()}),this.events.on(Jn.created,async n=>{const i=Jn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Jn.deleted,async n=>{const i=Jn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=it(r,this.name),this.clientId=""}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Fg(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=xt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i,s;const o=await this.getSubscriptionId(e);if((i=n?.internal)!=null&&i.skipSubscribe)return o;(!n||n?.transportType===_t.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:Vu(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(s=n?.internal)==null?void 0:s.throwOnFailedPublish;try{if(n?.transportType===_t.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(h=>this.logger.warn(h))},Z.toMiliseconds(Z.ONE_SECOND)),o;const l=new Promise(async h=>{const d=p=>{p.topic===e&&(this.events.removeListener(Jn.created,d),h(p.id))};this.events.on(Jn.created,d);try{const p=await us(new Promise((f,g)=>{this.relayer.request(a).catch(w=>{this.logger.warn(w,w?.message),g(w)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Jn.created,d),h(p)}catch{}}),u=await us(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Bt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Vu(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await us(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Bt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Vu(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await us(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Bt.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:Vu(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,h8(A0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,A0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,A0({},r)),this.topicMap.set(r.topic,e),this.events.emit(Jn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Jn.deleted,h8(A0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Jn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Jn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>h8(A0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await FH(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return pi(e+await this.getClientId())}}var OY=Object.defineProperty,c9=Object.getOwnPropertySymbols,PY=Object.prototype.hasOwnProperty,NY=Object.prototype.propertyIsEnumerable,d8=(t,e,r)=>e in t?OY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l9=(t,e)=>{for(var r in e||(e={}))PY.call(e,r)&&d8(t,r,e[r]);if(c9)for(var r of c9(e))NY.call(e,r)&&d8(t,r,e[r]);return t},Ye=(t,e,r)=>d8(t,typeof e!="symbol"?e+"":e,r);class TY extends XW{constructor(e){super(e),Ye(this,"protocol","wc"),Ye(this,"version",2),Ye(this,"core"),Ye(this,"logger"),Ye(this,"events",new yt.exports.EventEmitter),Ye(this,"provider"),Ye(this,"messages"),Ye(this,"subscriber"),Ye(this,"publisher"),Ye(this,"name",lK),Ye(this,"transportExplicitlyClosed",!1),Ye(this,"initialized",!1),Ye(this,"connectionAttemptInProgress",!1),Ye(this,"relayUrl"),Ye(this,"projectId"),Ye(this,"packageName"),Ye(this,"bundleId"),Ye(this,"hasExperiencedNetworkDisruption",!1),Ye(this,"pingTimeout"),Ye(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),Ye(this,"reconnectTimeout"),Ye(this,"connectPromise"),Ye(this,"reconnectInProgress",!1),Ye(this,"requestsInFlight",[]),Ye(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Ye(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Qr().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Ye(this,"resetPingTimeout",()=>{bg()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Ye(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Ye(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Bt.connect)}),Ye(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ye(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Bt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ye(this,"registerProviderListeners",()=>{this.provider.on(gi.payload,this.onPayloadHandler),this.provider.on(gi.connect,this.onConnectHandler),this.provider.on(gi.disconnect,this.onDisconnectHandler),this.provider.on(gi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?it(e.logger,this.name):Xn(na({level:e.logger||cK})),this.messages=new pY(this.logger,e.core),this.subscriber=new IY(this,this.logger),this.publisher=new bY(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||U$,$H()?this.packageName=o7():xH()&&(this.bundleId=o7()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return bt(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:_t.relay},e2.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Jn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Jn.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,l9({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await us(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await e$())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Lt(Z.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Bt.message,e),await this.recordMessageEvent(e,e2.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(gi.disconnect,s),await us(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(gi.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(gi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(gi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,Z.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(bg())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new en(new N$(PH({sdkVersion:i8,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gu(e)){if(!e.method.endsWith(uK))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:_t.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(l9({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ol(e)&&this.events.emit(Bt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,e2.inbound),this.events.emit(Bt.message,e))}async acknowledgePayload(e){const r=ms(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(gi.payload,this.onPayloadHandler),this.provider.off(gi.connect,this.onConnectHandler),this.provider.off(gi.disconnect,this.onDisconnectHandler),this.provider.off(gi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await e$();Aq(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Yn.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&_q())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Bt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(hK)))))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function kY(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function u9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function h9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const RY="[object RegExp]",DY="[object String]",BY="[object Number]",MY="[object Boolean]",d9="[object Arguments]",UY="[object Symbol]",LY="[object Date]",FY="[object Map]",HY="[object Set]",jY="[object Array]",VY="[object Function]",zY="[object ArrayBuffer]",p8="[object Object]",qY="[object Error]",WY="[object DataView]",ZY="[object Uint8Array]",KY="[object Uint8ClampedArray]",GY="[object Uint16Array]",YY="[object Uint32Array]",XY="[object BigUint64Array]",JY="[object Int8Array]",QY="[object Int16Array]",eX="[object Int32Array]",tX="[object BigInt64Array]",rX="[object Float32Array]",nX="[object Float64Array]";function iX(){}function p9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function sX(t,e,r){return $0(t,e,void 0,void 0,void 0,void 0,r)}function $0(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return x0(t,e,s,o)}return x0(t,e,s,o)}function x0(t,e,r,n){if(Object.is(t,e))return!0;let i=h9(t),s=h9(e);if(i===d9&&(i=p8),s===d9&&(s=p8),i!==s)return!1;switch(i){case DY:return t.toString()===e.toString();case BY:{const c=t.valueOf(),l=e.valueOf();return kY(c,l)}case MY:case LY:case UY:return Object.is(t.valueOf(),e.valueOf());case RY:return t.source===e.source&&t.flags===e.flags;case VY:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case FY:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!$0(l,e.get(c),c,t,e,r,n))return!1;return!0}case HY:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(p=>$0(h,p,void 0,t,e,r,n));if(d===-1)return!1;l.splice(d,1)}return!0}case jY:case ZY:case KY:case GY:case YY:case XY:case JY:case QY:case eX:case tX:case rX:case nX:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!$0(t[c],e[c],c,t,e,r,n))return!1;return!0}case zY:return t.byteLength!==e.byteLength?!1:x0(new Uint8Array(t),new Uint8Array(e),r,n);case WY:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:x0(new Uint8Array(t),new Uint8Array(e),r,n);case qY:return t.name===e.name&&t.message===e.message;case p8:{if(!(x0(t.constructor,e.constructor,r,n)||p9(t)&&p9(e)))return!1;const c=[...Object.keys(t),...u9(t)],l=[...Object.keys(e),...u9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=t[h];if(!Object.hasOwn(e,h))return!1;const p=e[h];if(!$0(d,p,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function oX(t,e){return sX(t,e,iX)}var aX=Object.defineProperty,f9=Object.getOwnPropertySymbols,cX=Object.prototype.hasOwnProperty,lX=Object.prototype.propertyIsEnumerable,f8=(t,e,r)=>e in t?aX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g9=(t,e)=>{for(var r in e||(e={}))cX.call(e,r)&&f8(t,r,e[r]);if(f9)for(var r of f9(e))lX.call(e,r)&&f8(t,r,e[r]);return t},En=(t,e,r)=>f8(t,typeof e!="symbol"?e+"":e,r);class ll extends JW{constructor(e,r,n,i=ws,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,En(this,"map",new Map),En(this,"version",dK),En(this,"cached",[]),En(this,"initialized",!1),En(this,"getKey"),En(this,"storagePrefix",ws),En(this,"recentlyDeleted",[]),En(this,"recentlyDeletedLimit",200),En(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Gt(o)?this.map.set(this.getKey(o),o):eq(o)?this.map.set(o.id,o):tq(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),En(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),En(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),En(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>oX(a[c],o[c]))):this.values)),En(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=g9(g9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),En(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=it(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=le("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uX=Object.defineProperty,hX=(t,e,r)=>e in t?uX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,He=(t,e,r)=>hX(t,typeof e!="symbol"?e+"":e,r);class dX{constructor(e,r){this.core=e,this.logger=r,He(this,"name",mK),He(this,"version",wK),He(this,"events",new yt.exports),He(this,"pairings"),He(this,"initialized",!1),He(this,"storagePrefix",ws),He(this,"ignoredPayloadTypes",[ra]),He(this,"registeredMethods",[]),He(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),He(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),He(this,"create",async n=>{this.isInitialized();const i=Hb(),s=await this.core.crypto.setSymKey(i),o=Lt(Z.FIVE_MINUTES),a={protocol:M$},c={topic:s,expiry:o,relay:a,active:!1,methods:n?.methods},l=VA({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(al.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n?.transportType,internal:n?.internal}),{topic:s,uri:l}}),He(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[ys.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=jA(n.uri);i.props.properties.topic=s,i.addTrace(ys.pairing_uri_validation_success),i.addTrace(ys.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(ys.existing_pairing),u.active)throw i.setError(oa.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(ys.pairing_not_expired)}const h=c||Lt(Z.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(ys.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(al.create,d),i.addTrace(ys.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(ys.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(oa.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(p){throw i.setError(oa.subscribe_pairing_topic_failure),p}return i.addTrace(ys.subscribe_pairing_topic_success),d}),He(this,"activate",async({topic:n})=>{this.isInitialized();const i=Lt(Z.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),He(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Jc();this.events.once(nt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),He(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),He(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),He(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),He(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",xt("USER_DISCONNECTED")),await this.deletePairing(i))}),He(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return VA({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),He(this,"sendRequest",async(n,i,s)=>{const o=Ht(i,s),a=await this.core.crypto.encode(n,o),c=y0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),He(this,"sendResult",async(n,i,s)=>{const o=ms(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=y0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),He(this,"sendError",async(n,i,s)=>{const o=Ku(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=y0[c]?y0[c].res:y0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),He(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,xt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),He(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>hs(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),He(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),He(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),He(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(al.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),He(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Yt(i)?this.events.emit(nt("pairing_ping",s),{}):Tt(i)&&this.events.emit(nt("pairing_ping",s),{error:i.error})},500)}),He(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(al.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),He(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=xt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),He(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(xt("WC_METHOD_UNSUPPORTED",n))}),He(this,"isValidPair",(n,i)=>{var s;if(!bn(n)){const{message:a}=le("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(oa.malformed_pairing_uri),new Error(a)}if(!Qz(n.uri)){const{message:a}=le("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(oa.malformed_pairing_uri),new Error(a)}const o=jA(n?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=le("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(oa.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=le("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(oa.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(oa.pairing_expired);const{message:a}=le("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),He(this,"isValidPing",async n=>{if(!bn(n)){const{message:s}=le("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),He(this,"isValidDisconnect",async n=>{if(!bn(n)){const{message:s}=le("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),He(this,"isValidPairingTopic",async n=>{if(!Ft(n,!1)){const{message:i}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(hs(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=le("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=it(r,this.name),this.pairings=new ll(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Bt.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==_t.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);Gu(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):ol(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(mi.expired,async e=>{const{topic:r}=u7(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(al.expire,{topic:r}))})}}var pX=Object.defineProperty,fX=(t,e,r)=>e in t?pX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ar=(t,e,r)=>fX(t,typeof e!="symbol"?e+"":e,r);class gX extends KW{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ar(this,"records",new Map),Ar(this,"events",new yt.exports.EventEmitter),Ar(this,"name",yK),Ar(this,"version",bK),Ar(this,"cached",[]),Ar(this,"initialized",!1),Ar(this,"storagePrefix",ws),Ar(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ar(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Lt(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Zi.created,o)}),Ar(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Tt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Zi.updated,i))}),Ar(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Ar(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Zi.deleted,s)}}),this.persist()}),Ar(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Ar(this,"on",(n,i)=>{this.events.on(n,i)}),Ar(this,"once",(n,i)=>{this.events.once(n,i)}),Ar(this,"off",(n,i)=>{this.events.off(n,i)}),Ar(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ht(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zi.created,e=>{const r=Zi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Zi.updated,e=>{const r=Zi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Zi.deleted,e=>{const r=Zi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Yn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{Z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Zi.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mX=Object.defineProperty,wX=(t,e,r)=>e in t?mX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fr=(t,e,r)=>wX(t,typeof e!="symbol"?e+"":e,r);class yX extends eZ{constructor(e,r){super(e,r),this.core=e,this.logger=r,Fr(this,"expirations",new Map),Fr(this,"events",new yt.exports.EventEmitter),Fr(this,"name",vK),Fr(this,"version",EK),Fr(this,"cached",[]),Fr(this,"initialized",!1),Fr(this,"storagePrefix",ws),Fr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Fr(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Fr(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(mi.created,{target:s,expiration:o})}),Fr(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Fr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(mi.deleted,{target:i,expiration:s})}}),Fr(this,"on",(n,i)=>{this.events.on(n,i)}),Fr(this,"once",(n,i)=>{this.events.once(n,i)}),Fr(this,"off",(n,i)=>{this.events.off(n,i)}),Fr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return NH(e);if(typeof e=="number")return TH(e);const{message:r}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(mi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;Z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(mi.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Yn.pulse,()=>this.checkExpirations()),this.events.on(mi.created,e=>{const r=mi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mi.expired,e=>{const r=mi.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(mi.deleted,e=>{const r=mi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bX=Object.defineProperty,vX=(t,e,r)=>e in t?bX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jt=(t,e,r)=>vX(t,typeof e!="symbol"?e+"":e,r);class EX extends tZ{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,jt(this,"name",CK),jt(this,"abortController"),jt(this,"isDevEnv"),jt(this,"verifyUrlV3",$K),jt(this,"storagePrefix",ws),jt(this,"version",D$),jt(this,"publicKey"),jt(this,"fetchPromise"),jt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),jt(this,"register",async i=>{if(!Du()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Fn(),u=this.startAbortTimer(Z.ONE_SECOND*5),h=await new Promise((d,p)=>{const f=()=>{window.removeEventListener("message",w),l.body.removeChild(g),p("attestation aborted")};this.abortController.signal.addEventListener("abort",f);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",f,{signal:this.abortController.signal});const w=v=>{if(v.data&&typeof v.data=="string")try{const C=JSON.parse(v.data);if(C.type==="verify_attestation"){if(ku(C.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",w),d(C.attestation===null?"":C.attestation)}}catch(C){this.logger.warn(C)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),jt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(ku(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),jt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),jt(this,"getVerifyUrl",i=>{let s=i||b0;return xK.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${b0}`),s=b0),s}),jt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),jt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),jt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),jt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),jt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),jt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),jt(this,"validateAttestation",(i,s)=>{const o=_z(i,s.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=it(r,this.name),this.abortController=new AbortController,this.isDevEnv=lb(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(e))}}var CX=Object.defineProperty,AX=(t,e,r)=>e in t?CX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m9=(t,e,r)=>AX(t,typeof e!="symbol"?e+"":e,r);class $X extends rZ{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,m9(this,"context",_K),m9(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${SK}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=it(r,this.context)}}var xX=Object.defineProperty,w9=Object.getOwnPropertySymbols,_X=Object.prototype.hasOwnProperty,SX=Object.prototype.propertyIsEnumerable,g8=(t,e,r)=>e in t?xX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_0=(t,e)=>{for(var r in e||(e={}))_X.call(e,r)&&g8(t,r,e[r]);if(w9)for(var r of w9(e))SX.call(e,r)&&g8(t,r,e[r]);return t},ur=(t,e,r)=>g8(t,typeof e!="symbol"?e+"":e,r);class IX extends nZ{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,ur(this,"context",OK),ur(this,"storagePrefix",ws),ur(this,"storageVersion",IK),ur(this,"events",new Map),ur(this,"shouldPersist",!1),ur(this,"init",async()=>{if(!lb())try{const i={eventId:d7(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:c7(this.core.relayer.protocol,this.core.relayer.version,i8)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),ur(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=d7(),u=this.core.projectId||"",h=Date.now(),d=_0({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),ur(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return _0(_0({},a),this.setMethods(a.eventId))}),ur(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),ur(this,"setEventListeners",()=>{this.core.heartbeat.on(Yn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(i.timestamp)>PK&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),ur(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),ur(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),ur(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),ur(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ur(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,_0(_0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),ur(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),ur(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${NK}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${i8}${s}`,{method:"POST",body:JSON.stringify(i)})}),ur(this,"getAppDomain",()=>a7().url),this.logger=it(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var OX=Object.defineProperty,y9=Object.getOwnPropertySymbols,PX=Object.prototype.hasOwnProperty,NX=Object.prototype.propertyIsEnumerable,m8=(t,e,r)=>e in t?OX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b9=(t,e)=>{for(var r in e||(e={}))PX.call(e,r)&&m8(t,r,e[r]);if(y9)for(var r of y9(e))NX.call(e,r)&&m8(t,r,e[r]);return t},At=(t,e,r)=>m8(t,typeof e!="symbol"?e+"":e,r);class w8 extends zW{constructor(e){var r;super(e),At(this,"protocol",R$),At(this,"version",D$),At(this,"name",Qg),At(this,"relayUrl"),At(this,"projectId"),At(this,"customStoragePrefix"),At(this,"events",new yt.exports.EventEmitter),At(this,"logger"),At(this,"heartbeat"),At(this,"relayer"),At(this,"crypto"),At(this,"storage"),At(this,"history"),At(this,"expirer"),At(this,"pairing"),At(this,"verify"),At(this,"echoClient"),At(this,"linkModeSupportedApps"),At(this,"eventClient"),At(this,"initialized",!1),At(this,"logChunkController"),At(this,"on",(a,c)=>this.events.on(a,c)),At(this,"once",(a,c)=>this.events.once(a,c)),At(this,"off",(a,c)=>this.events.off(a,c)),At(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),At(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:_t.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||U$,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=na({level:typeof e?.logger=="string"&&e.logger?e.logger:JZ.logger,name:Qg}),{logger:s,chunkLoggerController:o}=Qb({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=it(s,this.name),this.heartbeat=new zg,this.crypto=new sY(this,this.logger,e?.keychain),this.history=new gX(this,this.logger),this.expirer=new yX(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new a$(b9(b9({},QZ),e?.storageOptions)),this.relayer=new TY({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new dX(this,this.logger),this.verify=new EX(this,this.logger,this.storage),this.echoClient=new $X(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new IX(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new w8(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(pK,n),r}get context(){return bt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(L$,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(L$)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const TX=w8,v9="wc",E9=2,C9="client",y8=`${v9}@${E9}:${C9}:`,b8={name:C9,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},A9="WALLETCONNECT_DEEPLINK_CHOICE",kX="proposal",$9="Proposal expired",RX="session",Ju=Z.SEVEN_DAYS,DX="engine",$r={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},v8={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},vs={idle:"IDLE",active:"ACTIVE"},BX={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},MX="request",UX=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],LX="wc",FX="auth",HX="authKeys",jX="pairingTopics",VX="requests",r2=`${LX}@${1.5}:${FX}:`,n2=`${r2}:PUB_KEY`;var zX=Object.defineProperty,qX=Object.defineProperties,WX=Object.getOwnPropertyDescriptors,x9=Object.getOwnPropertySymbols,ZX=Object.prototype.hasOwnProperty,KX=Object.prototype.propertyIsEnumerable,E8=(t,e,r)=>e in t?zX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ct=(t,e)=>{for(var r in e||(e={}))ZX.call(e,r)&&E8(t,r,e[r]);if(x9)for(var r of x9(e))KX.call(e,r)&&E8(t,r,e[r]);return t},Hr=(t,e)=>qX(t,WX(e)),ie=(t,e,r)=>E8(t,typeof e!="symbol"?e+"":e,r);class GX extends aZ{constructor(e){super(e),ie(this,"name",DX),ie(this,"events",new yt.exports),ie(this,"initialized",!1),ie(this,"requestQueue",{state:vs.idle,queue:[]}),ie(this,"sessionRequestQueue",{state:vs.idle,queue:[]}),ie(this,"emittedSessionRequests",new HH({limit:500})),ie(this,"requestQueueDelay",Z.ONE_SECOND),ie(this,"expectedPairingMethodMap",new Map),ie(this,"recentlyDeletedMap",new Map),ie(this,"recentlyDeletedLimit",200),ie(this,"relayMessageCache",[]),ie(this,"pendingSessions",new Map),ie(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys($r)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),ie(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Hr(ct({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n),n.optionalNamespaces=Kz(n.requiredNamespaces,n.optionalNamespaces),n.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,h,d=!1;try{if(u){const R=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),R}if(!u||!d){const{topic:R,uri:M}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=R,h=M}if(!u){const{message:R}=le("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(R)}const p=await this.client.core.crypto.generateKeyPair(),f=$r.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES,g=Lt(f),w=Hr(ct(ct({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:M$}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:lr()}),v=nt("session_connect",w.id),{reject:C,resolve:b,done:A}=Jc(f,$9),P=({id:R})=>{R===w.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(w.id),this.events.emit(v,{error:{message:$9,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(v,({error:R,session:M})=>{this.client.events.off("proposal_expire",P),R?C(R):M&&b(M)}),await this.sendProposeSession({proposal:w,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:w.id}}}),await this.setProposal(w.id,w),{uri:h,approval:A}}),ie(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),ie(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[ec.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(v0.no_internet_connection),S}try{await this.isValidProposalId(r?.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(v0.proposal_not_found),S}try{await this.isValidApprove(r)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(v0.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:f,proposer:g,requiredNamespaces:w,optionalNamespaces:v}=p;let C=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:f});C||(C=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ec.session_approve_started,properties:{topic:f,trace:[ec.session_approve_started,ec.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,P=await this.client.core.crypto.generateSharedKey(b,A),R=ct(ct(ct({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Lt(Ju)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),M=_t.relay;C.addTrace(ec.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:M,internal:{skipSubscribe:!0}})}catch(S){throw C.setError(v0.subscribe_session_topic_failure),S}C.addTrace(ec.subscribe_session_topic_success);const U=Hr(ct({},R),{topic:P,requiredNamespaces:w,optionalNamespaces:v,pairingTopic:f,acknowledged:!1,self:R.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:_t.relay});await this.client.session.set(P,U),C.addTrace(ec.store_session);try{await this.sendApproveSession({sessionTopic:P,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:b},sessionSettleRequest:R,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),C.addTrace(ec.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(P,xt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),S}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(P,Lt(Ju)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),ie(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&await this.sendError({id:n,topic:s,error:i,rpcOpts:$r.wc_sessionPropose.reject}),await this.deleteProposal(n)}),ie(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=Jc(),c=lr(),l=Qr().toString(),u=this.client.session.get(n).namespaces;return this.events.once(nt("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),ie(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=lr(),{done:s,resolve:o,reject:a}=Jc();return this.events.once(nt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Lt(Ju)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),ie(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:n,request:i,topic:s,expiry:o=$r.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===_t.relay&&await this.confirmOnlineStateOrThrow();const c=lr(),l=Qr().toString(),{done:u,resolve:h,reject:d}=Jc(o,"Request expired. Please try again.");this.events.once(nt("session_request",c),({error:w,result:v})=>{w?d(w):h(v)});const p="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:p,params:{request:Hr(ct({},i),{expiryTimestamp:Lt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const g={request:Hr(ct({},i),{expiryTimestamp:Lt(o)}),chainId:n};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:p,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),w()}),new Promise(async w=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const C=await BH(this.client.core.storage,A9);await kH({id:c,topic:s,wcDeepLink:C})}w()}),u()]).then(w=>w[2])}),ie(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===_t.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Yt(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Tt(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),ie(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=lr(),s=Qr().toString(),{done:o,resolve:a,reject:c}=Jc();this.events.once(nt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),ie(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Qr().toString(),a=lr();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ie(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:xt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=le("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),ie(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Xz(n,r)))),ie(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ie(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?_t.link_mode:_t.relay;o===_t.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:p,nbf:f,methods:g=[],expiry:w}=r,v=[...r.resources||[]],{topic:C,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:C,uri:b}});const A=await this.client.core.crypto.generateKeyPair(),P=Lg(A);if(await Promise.all([this.client.auth.authKeys.set(n2,{responseTopic:P,publicKey:A}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:C})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${C}`),g.length>0){const{namespace:$}=Yo(a[0]);let O=Xj($,"request",g);Sg(v)&&(O=Qj(O,v.pop())),v.push(O)}const R=w&&w>$r.wc_sessionAuthenticate.req.ttl?w:$r.wc_sessionAuthenticate.req.ttl,M={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:f,resources:v},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Lt(R)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:C,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Lt($r.wc_sessionPropose.req.ttl),id:lr()},{done:L,resolve:D,reject:T}=Jc(R,"Request expired"),x=lr(),_=nt("session_connect",S.id),m=nt("session_request",x),y=async({error:$,session:O})=>{this.events.off(m,E),$?T($):O&&D({session:O})},E=async $=>{var O,B,H;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),$.error){const ee=xt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===ee.code?void 0:(this.events.off(_,y),T($.error.message))}await this.deleteProposal(S.id),this.events.off(_,y);const{cacaos:K,responder:V}=$.result,q=[],Q=[];for(const ee of K){await M7({cacao:ee,projectId:this.client.core.projectId})||(this.client.logger.error(ee,"Signature verification failed"),T(xt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=ee,Re=Sg(de.resources),rt=[yb(de.iss)],wt=_g(de.iss);if(Re){const sr=F7(Re),Mi=H7(Re);q.push(...sr),rt.push(...Mi)}for(const sr of rt)Q.push(`${sr}:${wt}`)}const re=await this.client.core.crypto.generateSharedKey(A,V.publicKey);let he;q.length>0&&(he={topic:re,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:V,controller:V.publicKey,expiry:Lt(Ju),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:C,namespaces:ZA([...new Set(q)],[...new Set(Q)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,he),C&&await this.client.core.pairing.updateMetadata({topic:C,metadata:V.metadata}),he=this.client.session.get(re)),(O=this.client.metadata.redirect)!=null&&O.linkMode&&(B=V.metadata.redirect)!=null&&B.linkMode&&(H=V.metadata.redirect)!=null&&H.universal&&n&&(this.client.core.addLinkModeSupportedApp(V.metadata.redirect.universal),this.client.session.update(re,{transportType:_t.link_mode})),D({auths:K,session:he})};this.events.once(_,y),this.events.once(m,E);let I;try{if(s){const $=Ht("wc_sessionAuthenticate",M,x);this.client.core.history.set(C,$);const O=await this.client.core.crypto.encode("",$,{type:c0,encoding:Qa});I=Hg(n,C,O)}else await Promise.all([this.sendRequest({topic:C,method:"wc_sessionAuthenticate",params:M,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:C,method:"wc_sessionPropose",params:S,expiry:$r.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch($){throw this.events.off(_,y),this.events.off(m,E),$}return await this.setProposal(S.id,S),await this.setAuthRequest(x,{request:Hr(ct({},M),{verifyContext:{}}),pairingTopic:C,transportType:o}),{uri:I??b,response:L}}),ie(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[cl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw s.setError(E0.no_internet_connection),w}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(E0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||_t.relay;a===_t.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Lg(c),h={type:ra,receiverPublicKey:c,senderPublicKey:l},d=[],p=[];for(const w of i){if(!await M7({cacao:w,projectId:this.client.core.projectId})){s.setError(E0.invalid_cacao);const P=xt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:P,encodeOpts:h}),new Error(P.message)}s.addTrace(cl.cacaos_verified);const{p:v}=w,C=Sg(v.resources),b=[yb(v.iss)],A=_g(v.iss);if(C){const P=F7(C),R=H7(C);d.push(...P),b.push(...R)}for(const P of b)p.push(`${P}:${A}`)}const f=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(cl.create_authenticated_session_topic);let g;if(d?.length>0){g={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Lt(Ju),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ZA([...new Set(d)],[...new Set(p)]),transportType:a},s.addTrace(cl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(w){throw s.setError(E0.subscribe_authenticated_session_topic_failure),w}s.addTrace(cl.subscribe_authenticated_session_topic_success),await this.client.session.set(f,g),s.addTrace(cl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(cl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw s.setError(E0.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),ie(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===_t.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Lg(o),l={type:ra,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:$r.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),ie(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return U7(n,i)}),ie(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),ie(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),ie(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,xt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(A9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,xt("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=vs.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),ie(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s?.setError(v0.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,xt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),ie(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=vs.idle,this.client.events.emit("session_request_expire",{id:r}))}),ie(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),ie(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),ie(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Lt($r.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),ie(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=_t.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),ie(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Lt($r.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),ie(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h,publishOpts:d={}}=r,p=Ht(i,s,c);let f;const g=!!u;try{const C=g?Qa:yn;f=await this.client.core.crypto.encode(n,p,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),C}let w;if(UX.includes(i)){const C=pi(JSON.stringify(p)),b=pi(f);w=await this.client.core.verify.register({id:b,decryptedId:C})}const v=ct(ct({},$r[i].req),d);if(v.attestation=w,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(n,p),g){const C=Hg(u,n,f);await global.Linking.openURL(C,this.client.name)}else v.tvf=Hr(ct({},h),{correlationId:p.id}),l?(v.internal=Hr(ct({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,v)):this.client.core.relayer.publish(n,f,v).catch(C=>this.client.logger.error(C));return p.id}),ie(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:i}=r,s=Ht("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,s);const o=await this.client.core.crypto.encode(n.pairingTopic,s,{encoding:yn}),a=pi(JSON.stringify(s)),c=pi(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:Hr(ct({},i),{publishMethod:"wc_proposeSession",attestation:l})})}),ie(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:a}=r,c=ms(s.id,i),l=await this.client.core.crypto.encode(s.pairingTopic,c,{encoding:yn}),u=Ht("wc_sessionSettle",o,a?.id),h=await this.client.core.crypto.encode(n,u,{encoding:yn});this.client.core.history.set(n,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:s.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:h},opts:Hr(ct({},a),{publishMethod:"wc_approveSession"})})}),ie(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=ms(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=h?Qa:yn;u=await this.client.core.crypto.encode(i,l,Hr(ct({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),f}let d,p;try{d=await this.client.core.history.get(i,n);const f=d.request;try{p=this.getTVFParams(n,f.params,s)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g?.message}`)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),f}if(h){const f=Hg(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=d.request.method,g=$r[f].res;g.tvf=Hr(ct({},p),{correlationId:n}),o?(g.internal=Hr(ct({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),ie(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Ku(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=h?Qa:yn;u=await this.client.core.crypto.encode(i,l,Hr(ct({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),p}let d;try{d=await this.client.core.history.get(i,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),p}if(h){const p=Hg(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=d.request.method,f=a||$r[p].res;this.client.core.relayer.publish(i,u,f)}await this.client.core.history.resolve(l)}),ie(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;hs(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{hs(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),ie(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),ie(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),ie(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===vs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=vs.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=vs.idle}),ie(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ie(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ie(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=le("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ie(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ie(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(oa.proposal_listener_not_found)),this.isValidConnect(ct({},i.params));const u=a.expiryTimestamp||Lt($r.wc_sessionPropose.req.ttl),h=ct({id:c,pairingTopic:n,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:pi(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l?.addTrace(ys.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:$r.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ie(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Yt(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(Tt(n)){await this.deleteProposal(s);const o=nt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),ie(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,p=[...this.pendingSessions.values()].find(w=>w.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const f=this.client.proposal.get(p.proposalId),g=Hr(ct(ct(ct({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:_t.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(nt("session_connect",p.proposalId),{session:g}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:r,result:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Yt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(nt("session_approve",i),{})):Tt(n)&&(await this.client.session.delete(r,xt("USER_DISCONNECTED")),this.events.emit(nt("session_approve",i),{error:n.error}))}),ie(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=h0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:xt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ct({topic:r},i));try{h0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0})}catch(c){throw h0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),ie(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=nt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(nt("session_update",i),{}):Tt(n)&&this.events.emit(nt("session_update",i),{error:n.error})}),ie(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Lt(Ju)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ie(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=nt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(nt("session_extend",i),{}):Tt(n)&&this.events.emit(nt("session_extend",i),{error:n.error})}),ie(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),ie(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=nt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Yt(n)?this.events.emit(nt("session_ping",i),{}):Tt(n)&&this.events.emit(nt("session_ping",i),{error:n.error})},500)}),ie(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Bt.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:xt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),ie(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(ct({topic:o},d));const p=this.client.session.get(o),f=await this.getVerifyContext({attestationId:c,hash:pi(JSON.stringify(Ht("wc_sessionRequest",d,h))),encryptedId:l,metadata:p.peer.metadata,transportType:u}),g={id:h,topic:o,params:d,verifyContext:f};await this.setPendingSessionRequest(g),u===_t.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=p.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(p){await this.sendError({id:h,topic:o,error:p}),this.client.logger.error(p)}}),ie(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=nt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(nt("session_request",i),{result:n.result}):Tt(n)&&this.events.emit(nt("session_request",i),{error:n.error})}),ie(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=h0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ct({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),h0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ie(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Yt(n)?this.events.emit(nt("session_request",i),{result:n.result}):Tt(n)&&this.events.emit(nt("session_request",i),{error:n.error})}),ie(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:pi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),p={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:p,pairingTopic:i,transportType:c}),c===_t.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),p={type:ra,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:p,rpcOpts:$r.wc_sessionAuthenticate.autoReject,appLink:d})}}),ie(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),ie(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=vs.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),ie(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=nt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(nt("session_request",s.request.id),{error:n})})}),ie(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===vs.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),ie(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=vs.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),ie(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ht("wc_sessionPropose",Hr(ct({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),ie(this,"isValidConnect",async r=>{if(!bn(r)){const{message:l}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Gt(n)||await this.isValidPairingTopic(n),!lq(c,!0)){const{message:l}=le("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Gt(i)&&fs(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!Gt(s)&&fs(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Gt(o)||this.validateSessionProps(o,"sessionProperties"),!Gt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ie(this,"validateNamespaces",(r,n)=>{const i=cq(r,"connect()",n);if(i)throw new Error(i.message)}),ie(this,"isValidApprove",async r=>{if(!bn(r))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=zb(i,"approve()");if(l)throw new Error(l.message);const u=JA(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Ft(s,!0)){const{message:h}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(Gt(o)||this.validateSessionProps(o,"sessionProperties"),!Gt(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),ie(this,"isValidReject",async r=>{if(!bn(r)){const{message:s}=le("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!hq(i)){const{message:s}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),ie(this,"isValidSessionSettleRequest",r=>{if(!bn(r)){const{message:l}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!YA(n)){const{message:l}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=rq(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=zb(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(hs(o)){const{message:l}=le("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ie(this,"isValidUpdate",async r=>{if(!bn(r)){const{message:c}=le("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=zb(i,"update()");if(o)throw new Error(o.message);const a=JA(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),ie(this,"isValidExtend",async r=>{if(!bn(r)){const{message:i}=le("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),ie(this,"isValidRequest",async r=>{if(!bn(r)){const{message:c}=le("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!XA(a,s)){const{message:c}=le("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!dq(i)){const{message:c}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!gq(a,s,i.method)){const{message:c}=le("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!bq(o,v8)){const{message:c}=le("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${v8.min} and ${v8.max}`);throw new Error(c)}}),ie(this,"isValidRespond",async r=>{var n;if(!bn(r)){const{message:o}=le("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!pq(s)){const{message:o}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),ie(this,"isValidPing",async r=>{if(!bn(r)){const{message:i}=le("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ie(this,"isValidEmit",async r=>{if(!bn(r)){const{message:a}=le("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!XA(o,s)){const{message:a}=le("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!fq(i)){const{message:a}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!mq(o,s,i.name)){const{message:a}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),ie(this,"isValidDisconnect",async r=>{if(!bn(r)){const{message:i}=le("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ie(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Ft(i,!1))throw new Error("uri is required parameter");if(!Ft(s,!1))throw new Error("domain is required parameter");if(!Ft(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Yo(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yo(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ie(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||b0,validation:"UNKNOWN",origin:o.url||""}};try{if(a===_t.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ie(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=le("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),ie(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),ie(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),ie(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=le("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),ie(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==_t.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((h=r?.redirect)==null?void 0:h.universal)!==""&&((d=r?.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ie(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r?.redirect)==null?void 0:i.universal:void 0}),ie(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=h7(r,"topic")||"",i=decodeURIComponent(h7(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:_t.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),ie(this,"registerLinkModeListeners",async()=>{var r;if(lb()||La()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ie(this,"getTVFParams",(r,n,i)=>{var s,o,a;if(!((s=n.request)!=null&&s.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const l=this.extractTxHashesFromResult(n.request,i);c.txHashes=l,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),ie(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=r?.data||((n=r?.[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),ie(this,"extractTxHashesFromResult",(r,n)=>{var i;try{if(!n)return[];const s=r.method,o=BX[s];if(s==="sui_signTransaction")return[Rj(n.transactionBytes)];if(s==="near_signTransaction")return[k7(n)];if(s==="near_signTransactions")return n.map(c=>k7(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=n.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[Rq({transaction:r.params.transactionPayload,signature:n.signature})];if(s==="algo_signTxn")return fi(n)?n.map(c=>R7(c)):[R7(n)];if(s==="cosmos_signDirect")return[Bj(n)];if(s==="wallet_sendCalls")return Mj(n);if(typeof n=="string")return[n];const a=n[o.key];if(fi(a))return s==="solana_signAllTransactions"?a.map(c=>kj(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Bt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(n2)?this.client.auth.authKeys.get(n2):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===_t.link_mode?Qa:yn});Gu(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:pi(n)})):ol(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(mi.expired,async e=>{const{topic:r,id:n}=u7(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,le("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,le("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(al.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(al.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Ft(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(hs(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Ft(e,!1)){const{message:r}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(hs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=le("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=le("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ft(e,!1)){const{message:r}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!uq(e)){const{message:r}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(hs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=le("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class YX extends ll{constructor(e,r){super(e,r,kX,y8),this.core=e,this.logger=r}}class XX extends ll{constructor(e,r){super(e,r,RX,y8),this.core=e,this.logger=r}}class JX extends ll{constructor(e,r){super(e,r,MX,y8,n=>n.id),this.core=e,this.logger=r}}class QX extends ll{constructor(e,r){super(e,r,HX,r2,()=>n2),this.core=e,this.logger=r}}class eJ extends ll{constructor(e,r){super(e,r,jX,r2),this.core=e,this.logger=r}}class tJ extends ll{constructor(e,r){super(e,r,VX,r2,n=>n.id),this.core=e,this.logger=r}}var rJ=Object.defineProperty,nJ=(t,e,r)=>e in t?rJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C8=(t,e,r)=>nJ(t,typeof e!="symbol"?e+"":e,r);class iJ{constructor(e,r){this.core=e,this.logger=r,C8(this,"authKeys"),C8(this,"pairingTopics"),C8(this,"requests"),this.authKeys=new QX(this.core,this.logger),this.pairingTopics=new eJ(this.core,this.logger),this.requests=new tJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var sJ=Object.defineProperty,oJ=(t,e,r)=>e in t?sJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,je=(t,e,r)=>oJ(t,typeof e!="symbol"?e+"":e,r);class A8 extends oZ{constructor(e){super(e),je(this,"protocol",v9),je(this,"version",E9),je(this,"name",b8.name),je(this,"metadata"),je(this,"core"),je(this,"logger"),je(this,"events",new yt.exports.EventEmitter),je(this,"engine"),je(this,"session"),je(this,"proposal"),je(this,"pendingRequest"),je(this,"auth"),je(this,"signConfig"),je(this,"on",(n,i)=>this.events.on(n,i)),je(this,"once",(n,i)=>this.events.once(n,i)),je(this,"off",(n,i)=>this.events.off(n,i)),je(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),je(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),je(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),je(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),je(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),je(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||b8.name,this.metadata=SH(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Xn(na({level:e?.logger||b8.logger}));this.core=e?.core||new TX(e),this.logger=it(r,this.name),this.session=new XX(this.core,this.logger),this.proposal=new YX(this.core,this.logger),this.pendingRequest=new JX(this.core,this.logger),this.engine=new GX(this),this.auth=new iJ(this.core,this.logger)}static async init(e){const r=new A8(e);return await r.initialize(),r}get context(){return bt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var $8={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof or<"u"&&or,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof or<"u"&&or||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(m){return m&&DataView.prototype.isPrototypeOf(m)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(m){return m&&u.indexOf(Object.prototype.toString.call(m))>-1};function d(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(m)||m==="")throw new TypeError('Invalid character in header field name: "'+m+'"');return m.toLowerCase()}function p(m){return typeof m!="string"&&(m=String(m)),m}function f(m){var y={next:function(){var E=m.shift();return{done:E===void 0,value:E}}};return c.iterable&&(y[Symbol.iterator]=function(){return y}),y}function g(m){this.map={},m instanceof g?m.forEach(function(y,E){this.append(E,y)},this):Array.isArray(m)?m.forEach(function(y){if(y.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+y.length);this.append(y[0],y[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(y){this.append(y,m[y])},this)}g.prototype.append=function(m,y){m=d(m),y=p(y);var E=this.map[m];this.map[m]=E?E+", "+y:y},g.prototype.delete=function(m){delete this.map[d(m)]},g.prototype.get=function(m){return m=d(m),this.has(m)?this.map[m]:null},g.prototype.has=function(m){return this.map.hasOwnProperty(d(m))},g.prototype.set=function(m,y){this.map[d(m)]=p(y)},g.prototype.forEach=function(m,y){for(var E in this.map)this.map.hasOwnProperty(E)&&m.call(y,this.map[E],E,this)},g.prototype.keys=function(){var m=[];return this.forEach(function(y,E){m.push(E)}),f(m)},g.prototype.values=function(){var m=[];return this.forEach(function(y){m.push(y)}),f(m)},g.prototype.entries=function(){var m=[];return this.forEach(function(y,E){m.push([E,y])}),f(m)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(m){if(!m._noBody){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}}function v(m){return new Promise(function(y,E){m.onload=function(){y(m.result)},m.onerror=function(){E(m.error)}})}function C(m){var y=new FileReader,E=v(y);return y.readAsArrayBuffer(m),E}function b(m){var y=new FileReader,E=v(y),I=/charset=([A-Za-z0-9_-]+)/.exec(m.type),$=I?I[1]:"utf-8";return y.readAsText(m,$),E}function A(m){for(var y=new Uint8Array(m),E=new Array(y.length),I=0;I<y.length;I++)E[I]=String.fromCharCode(y[I]);return E.join("")}function P(m){if(m.slice)return m.slice(0);var y=new Uint8Array(m.byteLength);return y.set(new Uint8Array(m)),y.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(m){this.bodyUsed=this.bodyUsed,this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:c.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:c.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():c.arrayBuffer&&c.blob&&l(m)?(this._bodyArrayBuffer=P(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||h(m))?this._bodyArrayBuffer=P(m):this._bodyText=m=Object.prototype.toString.call(m):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var m=w(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var m=w(this);return m||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(C);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var m=w(this);if(m)return m;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var M=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(m){var y=m.toUpperCase();return M.indexOf(y)>-1?y:m}function S(m,y){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');y=y||{};var E=y.body;if(m instanceof S){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,y.headers||(this.headers=new g(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!E&&m._bodyInit!=null&&(E=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=y.credentials||this.credentials||"same-origin",(y.headers||!this.headers)&&(this.headers=new g(y.headers)),this.method=U(y.method||this.method||"GET"),this.mode=y.mode||this.mode||null,this.signal=y.signal||this.signal||function(){if("AbortController"in a){var O=new AbortController;return O.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(y.cache==="no-store"||y.cache==="no-cache")){var I=/([?&])_=[^&]*/;if(I.test(this.url))this.url=this.url.replace(I,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function L(m){var y=new FormData;return m.trim().split("&").forEach(function(E){if(E){var I=E.split("="),$=I.shift().replace(/\+/g," "),O=I.join("=").replace(/\+/g," ");y.append(decodeURIComponent($),decodeURIComponent(O))}}),y}function D(m){var y=new g,E=m.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(I){return I.indexOf(`
`)===0?I.substr(1,I.length):I}).forEach(function(I){var $=I.split(":"),O=$.shift().trim();if(O){var B=$.join(":").trim();try{y.append(O,B)}catch(H){console.warn("Response "+H.message)}}}),y}R.call(S.prototype);function T(m,y){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(y||(y={}),this.type="default",this.status=y.status===void 0?200:y.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=y.statusText===void 0?"":""+y.statusText,this.headers=new g(y.headers),this.url=y.url||"",this._initBody(m)}R.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},T.error=function(){var m=new T(null,{status:200,statusText:""});return m.ok=!1,m.status=0,m.type="error",m};var x=[301,302,303,307,308];T.redirect=function(m,y){if(x.indexOf(y)===-1)throw new RangeError("Invalid status code");return new T(null,{status:y,headers:{location:m}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(y,E){this.message=y,this.name=E;var I=Error(y);this.stack=I.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function _(m,y){return new Promise(function(E,I){var $=new S(m,y);if($.signal&&$.signal.aborted)return I(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function B(){O.abort()}O.onload=function(){var V={statusText:O.statusText,headers:D(O.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(O.status<200||O.status>599)?V.status=200:V.status=O.status,V.url="responseURL"in O?O.responseURL:V.headers.get("X-Request-URL");var q="response"in O?O.response:O.responseText;setTimeout(function(){E(new T(q,V))},0)},O.onerror=function(){setTimeout(function(){I(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){I(new TypeError("Network request timed out"))},0)},O.onabort=function(){setTimeout(function(){I(new o.DOMException("Aborted","AbortError"))},0)};function H(V){try{return V===""&&a.location.href?a.location.href:V}catch{return V}}if(O.open($.method,H($.url),!0),$.credentials==="include"?O.withCredentials=!0:$.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(c.blob?O.responseType="blob":c.arrayBuffer&&(O.responseType="arraybuffer")),y&&typeof y.headers=="object"&&!(y.headers instanceof g||a.Headers&&y.headers instanceof a.Headers)){var K=[];Object.getOwnPropertyNames(y.headers).forEach(function(V){K.push(d(V)),O.setRequestHeader(V,p(y.headers[V]))}),$.headers.forEach(function(V,q){K.indexOf(q)===-1&&O.setRequestHeader(q,V)})}else $.headers.forEach(function(V,q){O.setRequestHeader(q,V)});$.signal&&($.signal.addEventListener("abort",B),O.onreadystatechange=function(){O.readyState===4&&$.signal.removeEventListener("abort",B)}),O.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return _.polyfill=!0,a.fetch||(a.fetch=_,a.Headers=g,a.Request=S,a.Response=T),o.Headers=g,o.Request=S,o.Response=T,o.fetch=_,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})($8,$8.exports);var _9=qN($8.exports),aJ=Object.defineProperty,cJ=Object.defineProperties,lJ=Object.getOwnPropertyDescriptors,S9=Object.getOwnPropertySymbols,uJ=Object.prototype.hasOwnProperty,hJ=Object.prototype.propertyIsEnumerable,I9=(t,e,r)=>e in t?aJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O9=(t,e)=>{for(var r in e||(e={}))uJ.call(e,r)&&I9(t,r,e[r]);if(S9)for(var r of S9(e))hJ.call(e,r)&&I9(t,r,e[r]);return t},P9=(t,e)=>cJ(t,lJ(e));const dJ={Accept:"application/json","Content-Type":"application/json"},pJ="POST",N9={headers:dJ,method:pJ},T9=10;class ei{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new yt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!_$(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=as(e),n=await(await _9(this.url,P9(O9({},N9),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!_$(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=as({id:1,jsonrpc:"2.0",method:"test",params:[]});await _9(e,P9(O9({},N9),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Zo(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Ku(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return v$(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>T9&&this.events.setMaxListeners(T9)}}var fJ=Object.defineProperty,k9=Object.getOwnPropertySymbols,gJ=Object.prototype.hasOwnProperty,mJ=Object.prototype.propertyIsEnumerable,R9=(t,e,r)=>e in t?fJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D9=(t,e)=>{for(var r in e||(e={}))gJ.call(e,r)&&R9(t,r,e[r]);if(k9)for(var r of k9(e))mJ.call(e,r)&&R9(t,r,e[r]);return t};const B9="error",wJ="wss://relay.walletconnect.org",yJ="wc",bJ="universal_provider",i2=`${yJ}@2:${bJ}:`,M9="https://rpc.walletconnect.org/v1/",U9="generic",vJ=`${M9}bundler`,Qu="call_status",EJ=86400,x8={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function _8(t){return t==null||typeof t!="object"&&typeof t!="function"}function L9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function F9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const CJ="[object RegExp]",H9="[object String]",j9="[object Number]",V9="[object Boolean]",z9="[object Arguments]",AJ="[object Symbol]",$J="[object Date]",xJ="[object Map]",_J="[object Set]",SJ="[object Array]",IJ="[object ArrayBuffer]",OJ="[object Object]",PJ="[object DataView]",NJ="[object Uint8Array]",TJ="[object Uint8ClampedArray]",kJ="[object Uint16Array]",RJ="[object Uint32Array]",DJ="[object Int8Array]",BJ="[object Int16Array]",MJ="[object Int32Array]",UJ="[object Float32Array]",LJ="[object Float64Array]";function S8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function FJ(t,e){return eh(t,void 0,t,new Map,e)}function eh(t,e,r,n=new Map,i=void 0){const s=i?.(t,e,r,n);if(s!=null)return s;if(_8(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=eh(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,eh(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(eh(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(S8(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=eh(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),ul(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),ul(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),ul(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ul(o,t,r,n,i),o}if(typeof t=="object"&&HJ(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),ul(o,t,r,n,i),o}return t}function ul(t,e,r=t,n,i){const s=[...Object.keys(e),...L9(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=eh(e[a],a,r,n,i))}}function HJ(t){switch(F9(t)){case z9:case SJ:case IJ:case PJ:case V9:case $J:case UJ:case LJ:case DJ:case BJ:case MJ:case xJ:case j9:case OJ:case CJ:case _J:case H9:case AJ:case NJ:case TJ:case kJ:case RJ:return!0;default:return!1}}function jJ(t,e){return FJ(t,(r,n,i,s)=>{const o=e?.(r,n,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case j9:case H9:case V9:{const a=new t.constructor(t?.valueOf());return ul(a,t),a}case z9:{const a={};return ul(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function q9(t){return jJ(t)}function W9(t){return t!==null&&typeof t=="object"&&F9(t)==="[object Arguments]"}function Z9(t){return typeof t=="object"&&t!==null}function VJ(){}function zJ(t){return S8(t)}function qJ(t){var e;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((e=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&e.writable)?!1:t.toString()===`[object ${n}]`}let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function WJ(t){if(_8(t))return t;if(Array.isArray(t)||S8(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function ZJ(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=I8(i,o,n,new Map)}return i}function I8(t,e,r,n){var i;if(_8(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return WJ(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]=(i=e[o])!=null?i:void 0}const s=[...Object.keys(e),...L9(e)];for(let o=0;o<s.length;o++){const a=s[o];let c=e[a],l=t[a];if(W9(c)&&(c=D9({},c)),W9(l)&&(l=D9({},l)),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=q9(c)),Array.isArray(c))if(typeof l=="object"&&l!=null){const h=[],d=Reflect.ownKeys(l);for(let p=0;p<d.length;p++){const f=d[p];h[f]=l[f]}l=h}else l=[];const u=r(l,c,a,t,e,n);u!=null?t[a]=u:Array.isArray(c)||Z9(l)&&Z9(c)?t[a]=I8(l,c,r,n):l==null&&qJ(c)?t[a]=I8({},c,r,n):l==null&&zJ(c)?t[a]=q9(c):(l===void 0||c!==void 0)&&(t[a]=c)}return t}function KJ(t,...e){return ZJ(t,...e,VJ)}var GJ=Object.defineProperty,YJ=Object.defineProperties,XJ=Object.getOwnPropertyDescriptors,K9=Object.getOwnPropertySymbols,JJ=Object.prototype.hasOwnProperty,QJ=Object.prototype.propertyIsEnumerable,G9=(t,e,r)=>e in t?GJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,s2=(t,e)=>{for(var r in e||(e={}))JJ.call(e,r)&&G9(t,r,e[r]);if(K9)for(var r of K9(e))QJ.call(e,r)&&G9(t,r,e[r]);return t},eQ=(t,e)=>YJ(t,XJ(e));function Y9(t,e,r){var n;const i=Yo(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${M9}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function tQ(t){return t.includes(":")?t.split(":")[1]:t}function X9(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function rQ(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function J9(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,i;return((n=r?.chains)==null?void 0:n.length)&&((i=r?.chains)==null?void 0:i.length)>0}))}function o2(t={},e={}){const r=J9(Q9(t)),n=J9(Q9(e));return KJ(r,n)}function Q9(t){var e,r,n,i,s;const o={};if(!fs(t))return o;for(const[a,c]of Object.entries(t)){const l=jg(a)?[a]:c.chains,u=c.methods||[],h=c.events||[],d=c.rpcMap||{},p=qu(a);o[p]=eQ(s2(s2({},o[p]),c),{chains:ds(l,(e=o[p])==null?void 0:e.chains),methods:ds(u,(r=o[p])==null?void 0:r.methods),events:ds(h,(n=o[p])==null?void 0:n.events)}),(fs(d)||fs(((i=o[p])==null?void 0:i.rpcMap)||{}))&&(o[p].rpcMap=s2(s2({},d),(s=o[p])==null?void 0:s.rpcMap))}return o}function ex(t){return t.includes(":")?t.split(":")[2]:t}function tx(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=jg(r)?[r]:n.chains?n.chains:X9(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function O8(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function nQ(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const rx={},th=t=>rx[t],P8=(t,e)=>{rx[t]=e};var iQ=Object.defineProperty,nx=Object.getOwnPropertySymbols,sQ=Object.prototype.hasOwnProperty,oQ=Object.prototype.propertyIsEnumerable,ix=(t,e,r)=>e in t?iQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sx=(t,e)=>{for(var r in e||(e={}))sQ.call(e,r)&&ix(t,r,e[r]);if(nx)for(var r of nx(e))oQ.call(e,r)&&ix(t,r,e[r]);return t};const ox="eip155",aQ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],cQ=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,N8=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,ax=t=>Object.keys(t).filter(e=>aQ.includes(e)).reduce((e,r)=>(e[r]=lQ(t[r]),e),{}),lQ=t=>typeof t=="string"&&nQ(t)?JSON.parse(t):t,uQ=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:i={}}=t,s={};if(!fs(i)&&!fs(n))return;const o=ax(n);for(const a of r){const c=cQ(a);if(!c)continue;s[N8(c)]=o;const l=i?.[`${ox}:${c}`];if(l){const u=l?.[`${ox}:${c}:${e}`];s[N8(c)]=sx(sx({},s[N8(c)]),ax(u||l))}}for(const[a,c]of Object.entries(s))Object.keys(c).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var hQ=Object.defineProperty,dQ=(t,e,r)=>e in t?hQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pQ=(t,e,r)=>dQ(t,typeof e!="symbol"?e+"":e,r);let T8;class k8{constructor(e){pQ(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,r){return await this.storage.setItem(e,r)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return T8||(T8=new k8(e)),T8}}var fQ=Object.defineProperty,gQ=Object.defineProperties,mQ=Object.getOwnPropertyDescriptors,cx=Object.getOwnPropertySymbols,wQ=Object.prototype.hasOwnProperty,yQ=Object.prototype.propertyIsEnumerable,lx=(t,e,r)=>e in t?fQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bQ=(t,e)=>{for(var r in e||(e={}))wQ.call(e,r)&&lx(t,r,e[r]);if(cx)for(var r of cx(e))yQ.call(e,r)&&lx(t,r,e[r]);return t},vQ=(t,e)=>gQ(t,mQ(e));async function EQ(t,e){const r=Yo(t.result.capabilities.caip345.caip2),n=t.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(n.map(h=>CQ(r.reference,h,e))),s=i.filter(h=>h.status==="fulfilled").map(h=>h.value).filter(h=>h);i.filter(h=>h.status==="rejected").forEach(h=>console.warn("Failed to fetch transaction receipt:",h.reason));const o=!s.length||s.some(h=>!h),a=s.every(h=>h?.status==="0x1"),c=s.every(h=>h?.status==="0x0"),l=s.some(h=>h?.status==="0x0");let u;return o?u=100:a?u=200:c?u=500:l&&(u=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:s,status:u}}async function CQ(t,e,r){return await r(parseInt(t)).request(Ht("eth_getTransactionReceipt",[e]))}async function AQ({sendCalls:t,storage:e}){const r=await e.getItem(Qu);await e.setItem(Qu,vQ(bQ({},r),{[t.result.id]:{request:t.request,result:t.result,expiry:Lt(EJ)}}))}async function $Q({resultId:t,storage:e}){const r=await e.getItem(Qu);if(r){delete r[t],await e.setItem(Qu,r);for(const n in r)hs(r[n].expiry)&&delete r[n];await e.setItem(Qu,r)}}async function xQ({resultId:t,storage:e}){const r=await e.getItem(Qu),n=r?.[t];if(n&&!hs(n.expiry))return n;await $Q({resultId:t,storage:e})}var _Q=Object.defineProperty,SQ=Object.defineProperties,IQ=Object.getOwnPropertyDescriptors,ux=Object.getOwnPropertySymbols,OQ=Object.prototype.hasOwnProperty,PQ=Object.prototype.propertyIsEnumerable,R8=(t,e,r)=>e in t?_Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D8=(t,e)=>{for(var r in e||(e={}))OQ.call(e,r)&&R8(t,r,e[r]);if(ux)for(var r of ux(e))PQ.call(e,r)&&R8(t,r,e[r]);return t},B8=(t,e)=>SQ(t,IQ(e)),hl=(t,e,r)=>R8(t,typeof e!="symbol"?e+"":e,r);class NQ{constructor(e){hl(this,"name","eip155"),hl(this,"client"),hl(this,"chainId"),hl(this,"namespace"),hl(this,"httpProviders"),hl(this,"events"),hl(this,"storage"),this.namespace=e.namespace,this.events=th("events"),this.client=th("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=k8.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r);const n=this.chainId;this.chainId=parseInt(e),this.events.emit(x8.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Y9(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,th("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(tQ(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(e){const r=e||this.chainId;return this.httpProviders[r]||(this.httpProviders=B8(D8({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i,s,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l?.sessionProperties)==null?void 0:o.capabilities)||{},h=`${a}${c.join(",")}`,d=u?.[h];if(d)return d;let p;try{p=uQ(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(p)return p;const f=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:B8(D8({},l.sessionProperties||{}),{capabilities:B8(D8({},u||{}),{[h]:f})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return f}async getCallStatus(e){var r,n,i;const s=this.client.session.get(e.topic),o=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(o){const l=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const a=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,a)}const c=await xQ({resultId:(i=e.request.params)==null?void 0:i[0],storage:this.storage});if(c)try{return await EQ(c,this.getHttpProvider.bind(this))}catch(l){console.warn("Failed to fetch call status from stored send calls",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ht("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${vJ}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}async sendCalls(e){var r,n,i;const s=await this.client.request(e),o=(r=e.request.params)==null?void 0:r[0],a=s?.id,c=s?.capabilities||{},l=(n=c?.caip345)==null?void 0:n.caip2,u=(i=c?.caip345)==null?void 0:i.transactionHashes;return!a||!l||!(u!=null&&u.length)||await AQ({sendCalls:{request:o,result:s},storage:this.storage}),s}}var TQ=Object.defineProperty,kQ=(t,e,r)=>e in t?TQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rh=(t,e,r)=>kQ(t,typeof e!="symbol"?e+"":e,r);class RQ{constructor(e){rh(this,"name",U9),rh(this,"client"),rh(this,"httpProviders"),rh(this,"events"),rh(this,"namespace"),rh(this,"chainId"),this.namespace=e.namespace,this.events=th("events"),this.client=th("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r);const n=this.chainId;this.chainId=e,this.events.emit(x8.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Yo(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{var s,o;const a=Yo(i),c=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(i,c)}),n}getHttpProvider(e){const r=Yo(e).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Y9(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,th("disableProviderPing")))}}var DQ=Object.defineProperty,BQ=Object.defineProperties,MQ=Object.getOwnPropertyDescriptors,hx=Object.getOwnPropertySymbols,UQ=Object.prototype.hasOwnProperty,LQ=Object.prototype.propertyIsEnumerable,M8=(t,e,r)=>e in t?DQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S0=(t,e)=>{for(var r in e||(e={}))UQ.call(e,r)&&M8(t,r,e[r]);if(hx)for(var r of hx(e))LQ.call(e,r)&&M8(t,r,e[r]);return t},a2=(t,e)=>BQ(t,MQ(e)),yi=(t,e,r)=>M8(t,typeof e!="symbol"?e+"":e,r);class U8{constructor(e){yi(this,"client"),yi(this,"namespaces"),yi(this,"optionalNamespaces"),yi(this,"sessionProperties"),yi(this,"scopedProperties"),yi(this,"events",new yt.exports),yi(this,"rpcProviders",{}),yi(this,"session"),yi(this,"providerOpts"),yi(this,"logger"),yi(this,"uri"),yi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Xn(na({level:e?.logger||B9})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new U8(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:S0({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,ms(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:xt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=tx(this.session.namespaces);this.namespaces=o2(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=tx(i.namespaces);return this.namespaces=o2(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!fi(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn("Failed to cleanup pending pairings",r)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await A8.init({core:this.providerOpts.core,logger:this.providerOpts.logger||B9,relayUrl:this.providerOpts.relayUrl||wJ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>qu(r)))];P8("client",this.client),P8("events",this.events),P8("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=rQ(r,this.session);if(n?.length===0)return;const i=X9(n),s=o2(this.namespaces,this.optionalNamespaces),o=a2(S0({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new NQ({namespace:o});break;default:this.rpcProviders[r]=new RQ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&fi(o)&&this.events.emit("accountsChanged",o.map(ex))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=qu(o),l=O8(o)!==O8(a)?`${c}:${O8(a)}`:o;this.onChainChanged({currentCaipChainId:l})}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=a2(S0({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",a2(S0({},xt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(x8.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(a2(S0({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[U9]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=o2(r,n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>qu(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=qu(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(this.updateNamespaceChain(i,s),n?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:e,previousCaipChainId:r})):this.getProvider(i).setDefaultChain(s),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:r,previousCaipChainId:n}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(ex);if(!fi(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${i2}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${i2}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${i2}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(i2)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const FQ=U8,HQ="wc",jQ="ethereum_provider",VQ=`${HQ}@2:${jQ}:`,zQ="https://rpc.walletconnect.org/v1/",c2=["eth_sendTransaction","personal_sign"],dx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],l2=["chainChanged","accountsChanged"],px=["chainChanged","accountsChanged","message","disconnect","connect"],qQ=async()=>{const{createAppKit:t}=await Promise.resolve().then(function(){return n1e});return t};var WQ=Object.defineProperty,ZQ=Object.defineProperties,KQ=Object.getOwnPropertyDescriptors,fx=Object.getOwnPropertySymbols,GQ=Object.prototype.hasOwnProperty,YQ=Object.prototype.propertyIsEnumerable,L8=(t,e,r)=>e in t?WQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dl=(t,e)=>{for(var r in e||(e={}))GQ.call(e,r)&&L8(t,r,e[r]);if(fx)for(var r of fx(e))YQ.call(e,r)&&L8(t,r,e[r]);return t},I0=(t,e)=>ZQ(t,KQ(e)),ti=(t,e,r)=>L8(t,typeof e!="symbol"?e+"":e,r);function u2(t){return Number(t[0].split(":")[1])}function h2(t){return`0x${t.toString(16)}`}function XQ(t){const{chains:e,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!fi(e))throw new Error("Invalid chains");const c={chains:e,methods:n||c2,events:s||l2,rpcMap:dl({},e.length?{[u2(e)]:a[u2(e)]}:{})},l=s?.filter(p=>!l2.includes(p)),u=n?.filter(p=>!c2.includes(p));if(!r&&!o&&!i&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const h=l?.length&&u?.length||!r,d={chains:[...new Set(h?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(i!=null&&i.length?i:dx))],events:[...new Set(c.events.concat(o!=null&&o.length?o:px))],rpcMap:a};return{required:e.length?c:void 0,optional:r.length?d:void 0}}class d2{constructor(){ti(this,"events",new yt.exports.EventEmitter),ti(this,"namespace","eip155"),ti(this,"accounts",[]),ti(this,"signer"),ti(this,"chainId",1),ti(this,"modal"),ti(this,"rpc"),ti(this,"STORAGE_KEY",VQ),ti(this,"on",(e,r)=>(this.events.on(e,r),this)),ti(this,"once",(e,r)=>(this.events.once(e,r),this)),ti(this,"removeListener",(e,r)=>(this.events.removeListener(e,r),this)),ti(this,"off",(e,r)=>(this.events.off(e,r),this)),ti(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const r=new d2;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,n){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),n)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:n,optional:i}=XQ(this.rpc);try{const s=await new Promise(async(a,c)=>{var l,u;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(u=this.modal)==null||u.subscribeState(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const h=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(I0(dl({namespaces:dl({},n&&{[this.namespace]:n})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic,scopedProperties:h})).then(d=>{a(d)}).catch(d=>{var p;(p=this.modal)==null||p.showErrorMessage("Unable to connect"),c(new Error(d.message))})});if(!s)return;const o=t7(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:h2(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(r=this.modal)==null||r.close()}}async authenticate(e,r){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(o,a)=>{var c,l;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(l=this.modal)==null||l.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(I0(dl({},e),{chains:this.rpc.chains}),r).then(u=>{o(u)}).catch(u=>{var h;(h=this.modal)==null||h.showErrorMessage("Unable to connect"),a(new Error(u.message))})}),s=i.session;if(s){const o=t7(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:h2(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(n=this.modal)==null||n.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",h2(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",I0(dl({},xt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",h2(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,n,i]=e.split(":");return{chainId:`${r}:${n}`,address:i}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,n;const i=(r=e?.chains)!=null?r:[],s=(n=e?.optionalChains)!=null?n:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=i.length?e?.methods||c2:[],c=i.length?e?.events||l2:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],h=e?.rpcMap||this.buildRpcMap(o,e.projectId),d=e?.qrModalOptions||void 0;return{chains:i?.map(p=>this.formatChainId(p)),optionalChains:s.map(p=>this.formatChainId(p)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:h,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:d,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const n={};return e.forEach(i=>{n[i]=this.getRpcUrl(i,r)}),n}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?u2(this.rpc.chains):u2(this.rpc.optionalChains),this.signer=await FQ.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const n=await qQ(),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return p1e}),s=i(I0(dl({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!s.networks.length)throw new Error("No networks found for WalletConnect\xB7");r=n(I0(dl({},s),{universalProvider:this.signer,manualWCControl:!0}))}catch(n){throw console.warn(n),new Error("To use QR modal, please install @reown/appkit package")}if(r)try{this.modal=r}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:n,rpcMap:i}=e;r&&fi(r)&&(this.rpc.chains=r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)})),n&&fi(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n?.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[e])||`${zQ}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const JQ=d2;var gx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(or,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",l="day",u="week",h="month",d="quarter",p="year",f="date",g="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var m=["th","st","nd","rd"],y=_%100;return"["+_+(m[(y-20)%10]||m[y]||m[0])+"]"}},b=function(_,m,y){var E=String(_);return!E||E.length>=m?_:""+Array(m+1-E.length).join(y)+_},A={s:b,z:function(_){var m=-_.utcOffset(),y=Math.abs(m),E=Math.floor(y/60),I=y%60;return(m<=0?"+":"-")+b(E,2,"0")+":"+b(I,2,"0")},m:function _(m,y){if(m.date()<y.date())return-_(y,m);var E=12*(y.year()-m.year())+(y.month()-m.month()),I=m.clone().add(E,h),$=y-I<0,O=m.clone().add(E+($?-1:1),h);return+(-(E+(y-I)/($?I-O:O-I))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:h,y:p,w:u,d:l,D:f,h:c,m:a,s:o,ms:s,Q:d}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},P="en",R={};R[P]=C;var M="$isDayjsObject",U=function(_){return _ instanceof T||!(!_||!_[M])},S=function _(m,y,E){var I;if(!m)return P;if(typeof m=="string"){var $=m.toLowerCase();R[$]&&(I=$),y&&(R[$]=y,I=$);var O=m.split("-");if(!I&&O.length>1)return _(O[0])}else{var B=m.name;R[B]=m,I=B}return!E&&I&&(P=I),I||!E&&P},L=function(_,m){if(U(_))return _.clone();var y=typeof m=="object"?m:{};return y.date=_,y.args=arguments,new T(y)},D=A;D.l=S,D.i=U,D.w=function(_,m){return L(_,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var T=function(){function _(y){this.$L=S(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[M]=!0}var m=_.prototype;return m.parse=function(y){this.$d=function(E){var I=E.date,$=E.utc;if(I===null)return new Date(NaN);if(D.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var O=I.match(w);if(O){var B=O[2]-1||0,H=(O[7]||"0").substring(0,3);return $?new Date(Date.UTC(O[1],B,O[3]||1,O[4]||0,O[5]||0,O[6]||0,H)):new Date(O[1],B,O[3]||1,O[4]||0,O[5]||0,O[6]||0,H)}}return new Date(I)}(y),this.init()},m.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},m.$utils=function(){return D},m.isValid=function(){return this.$d.toString()!==g},m.isSame=function(y,E){var I=L(y);return this.startOf(E)<=I&&I<=this.endOf(E)},m.isAfter=function(y,E){return L(y)<this.startOf(E)},m.isBefore=function(y,E){return this.endOf(E)<L(y)},m.$g=function(y,E,I){return D.u(y)?this[E]:this.set(I,y)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(y,E){var I=this,$=!!D.u(E)||E,O=D.p(y),B=function(ee,de){var Re=D.w(I.$u?Date.UTC(I.$y,de,ee):new Date(I.$y,de,ee),I);return $?Re:Re.endOf(l)},H=function(ee,de){return D.w(I.toDate()[ee].apply(I.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(de)),I)},K=this.$W,V=this.$M,q=this.$D,Q="set"+(this.$u?"UTC":"");switch(O){case p:return $?B(1,0):B(31,11);case h:return $?B(1,V):B(0,V+1);case u:var re=this.$locale().weekStart||0,he=(K<re?K+7:K)-re;return B($?q-he:q+(6-he),V);case l:case f:return H(Q+"Hours",0);case c:return H(Q+"Minutes",1);case a:return H(Q+"Seconds",2);case o:return H(Q+"Milliseconds",3);default:return this.clone()}},m.endOf=function(y){return this.startOf(y,!1)},m.$set=function(y,E){var I,$=D.p(y),O="set"+(this.$u?"UTC":""),B=(I={},I[l]=O+"Date",I[f]=O+"Date",I[h]=O+"Month",I[p]=O+"FullYear",I[c]=O+"Hours",I[a]=O+"Minutes",I[o]=O+"Seconds",I[s]=O+"Milliseconds",I)[$],H=$===l?this.$D+(E-this.$W):E;if($===h||$===p){var K=this.clone().set(f,1);K.$d[B](H),K.init(),this.$d=K.set(f,Math.min(this.$D,K.daysInMonth())).$d}else B&&this.$d[B](H);return this.init(),this},m.set=function(y,E){return this.clone().$set(y,E)},m.get=function(y){return this[D.p(y)]()},m.add=function(y,E){var I,$=this;y=Number(y);var O=D.p(E),B=function(V){var q=L($);return D.w(q.date(q.date()+Math.round(V*y)),$)};if(O===h)return this.set(h,this.$M+y);if(O===p)return this.set(p,this.$y+y);if(O===l)return B(1);if(O===u)return B(7);var H=(I={},I[a]=n,I[c]=i,I[o]=r,I)[O]||1,K=this.$d.getTime()+y*H;return D.w(K,this)},m.subtract=function(y,E){return this.add(-1*y,E)},m.format=function(y){var E=this,I=this.$locale();if(!this.isValid())return I.invalidDate||g;var $=y||"YYYY-MM-DDTHH:mm:ssZ",O=D.z(this),B=this.$H,H=this.$m,K=this.$M,V=I.weekdays,q=I.months,Q=I.meridiem,re=function(de,Re,rt,wt){return de&&(de[Re]||de(E,$))||rt[Re].slice(0,wt)},he=function(de){return D.s(B%12||12,de,"0")},ee=Q||function(de,Re,rt){var wt=de<12?"AM":"PM";return rt?wt.toLowerCase():wt};return $.replace(v,function(de,Re){return Re||function(rt){switch(rt){case"YY":return String(E.$y).slice(-2);case"YYYY":return D.s(E.$y,4,"0");case"M":return K+1;case"MM":return D.s(K+1,2,"0");case"MMM":return re(I.monthsShort,K,q,3);case"MMMM":return re(q,K);case"D":return E.$D;case"DD":return D.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return re(I.weekdaysMin,E.$W,V,2);case"ddd":return re(I.weekdaysShort,E.$W,V,3);case"dddd":return V[E.$W];case"H":return String(B);case"HH":return D.s(B,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return ee(B,H,!0);case"A":return ee(B,H,!1);case"m":return String(H);case"mm":return D.s(H,2,"0");case"s":return String(E.$s);case"ss":return D.s(E.$s,2,"0");case"SSS":return D.s(E.$ms,3,"0");case"Z":return O}return null}(de)||O.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(y,E,I){var $,O=this,B=D.p(E),H=L(y),K=(H.utcOffset()-this.utcOffset())*n,V=this-H,q=function(){return D.m(O,H)};switch(B){case p:$=q()/12;break;case h:$=q();break;case d:$=q()/3;break;case u:$=(V-K)/6048e5;break;case l:$=(V-K)/864e5;break;case c:$=V/i;break;case a:$=V/n;break;case o:$=V/r;break;default:$=V}return I?$:D.a($)},m.daysInMonth=function(){return this.endOf(h).$D},m.$locale=function(){return R[this.$L]},m.locale=function(y,E){if(!y)return this.$L;var I=this.clone(),$=S(y,E,!0);return $&&(I.$L=$),I},m.clone=function(){return D.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},_}(),x=T.prototype;return L.prototype=x,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",l],["$M",h],["$y",p],["$D",f]].forEach(function(_){x[_[1]]=function(m){return this.$g(m,_[0],_[1])}}),L.extend=function(_,m){return _.$i||(_(m,T,L),_.$i=!0),L},L.locale=S,L.isDayjs=U,L.unix=function(_){return L(1e3*_)},L.en=R[P],L.Ls=R,L.p={},L})})(gx);var F8=gx.exports,mx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(or,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var n=["th","st","nd","rd"],i=r%100;return"["+r+(n[(i-20)%10]||n[i]||n[0])+"]"}}})})(mx);var QQ=mx.exports,wx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(or,function(){return function(r,n,i){r=r||{};var s=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(l,u,h,d){return s.fromToBase(l,u,h,d)}i.en.relativeTime=o,s.fromToBase=function(l,u,h,d,p){for(var f,g,w,v=h.$locale().relativeTime||o,C=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=C.length,A=0;A<b;A+=1){var P=C[A];P.d&&(f=d?i(l).diff(h,P.d,!0):h.diff(l,P.d,!0));var R=(r.rounding||Math.round)(Math.abs(f));if(w=f>0,R<=P.r||!P.r){R<=1&&A>0&&(P=C[A-1]);var M=v[P.l];p&&(R=p(""+R)),g=typeof M=="string"?M.replace("%d",R):M(R,u,P.l,w);break}}if(u)return g;var U=w?v.future:v.past;return typeof U=="function"?U(g):U.replace("%s",g)},s.to=function(l,u){return a(l,u,this,!0)},s.from=function(l,u){return a(l,u,this)};var c=function(l){return l.$u?i.utc():i()};s.toNow=function(l){return this.to(c(this),l)},s.fromNow=function(l){return this.from(c(this),l)}}})})(wx);var eee=wx.exports,yx={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(or,function(){return function(r,n,i){i.updateLocale=function(s,o){var a=i.Ls[s];if(a)return(o?Object.keys(o):[]).forEach(function(c){a[c]=o[c]}),a}}})})(yx);var tee=yx.exports;F8.extend(eee),F8.extend(tee);const ree={...QQ,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}};F8.locale("en-web3-modal",ree);const G={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},H8={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(i=>i.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return G.CHAIN_NAME_MAP?.[n]||void 0}},bx=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var nee=20,iee=1,pl=1e6,vx=1e6,see=-7,oee=21,aee=!1,O0="[big.js] ",fl=O0+"Invalid ",p2=fl+"decimal places",cee=fl+"rounding mode",Ex=O0+"Division by zero",lt={},Es=void 0,lee=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Cx(){function t(e){var r=this;if(!(r instanceof t))return e===Es?Cx():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(fl+"value");e=e===0&&1/e<0?"-0":String(e)}uee(r,e)}r.constructor=t}return t.prototype=lt,t.DP=nee,t.RM=iee,t.NE=see,t.PE=oee,t.strict=aee,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function uee(t,e){var r,n,i;if(!lee.test(e))throw Error(fl+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function gl(t,e,r,n){var i=t.c;if(r===Es&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(cee);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==Es))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==Es||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function ml(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}lt.abs=function(){var t=new this.constructor(this);return t.s=1,t},lt.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1},lt.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>pl)throw Error(p2);if(!i[0])throw Error(Ex);if(!n[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,h,d=i.slice(),p=a=i.length,f=n.length,g=n.slice(0,a),w=g.length,v=t,C=v.c=[],b=0,A=o+(v.e=e.e-t.e)+1;for(v.s=s,s=A<0?0:A,d.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=g[h]){u=i[h]>g[h]?1:-1;break}if(u<0){for(c=w==a?i:d;w;){if(g[--w]<c[w]){for(h=w;h&&!g[--h];)g[h]=9;--g[h],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}C[b++]=u?l:++l,g[0]&&u?g[w]=n[p]||0:g=[n[p]]}while((p++<f||g[0]!==Es)&&s--);return!C[0]&&b!=1&&(C.shift(),v.e--,A--),b>A&&gl(v,A,r.RM,g[0]!==Es),v},lt.eq=function(t){return this.cmp(t)===0},lt.gt=function(t){return this.cmp(t)>0},lt.gte=function(t){return this.cmp(t)>-1},lt.lt=function(t){return this.cmp(t)<0},lt.lte=function(t){return this.cmp(t)<1},lt.minus=lt.sub=function(t){var e,r,n,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,h=t.c,d=t.e;if(!l[0]||!h[0])return h[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-d){for((i=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(n=l,l=h,h=n,t.s=-t.s),(c=(r=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>a;){if(l[--r]<h[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=h[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(t.s=1,l=[d=0]),t.c=l,t.e=d,t},lt.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(Ex);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))},lt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},lt.plus=lt.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+l[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t},lt.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-vx||t>vx)throw Error(fl+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n},lt.prec=function(t,e){if(t!==~~t||t<1||t>pl)throw Error(fl+"precision");return gl(new this.constructor(this),t,e)},lt.round=function(t,e){if(t===Es)t=0;else if(t!==~~t||t<-pl||t>pl)throw Error(p2);return gl(new this.constructor(this),t+this.e+1,e)},lt.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(O0+"No square root");s=Math.sqrt(+ml(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return gl(t,(i.DP-=4)+t.e+1,i.RM)},lt.times=lt.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,a=s.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},lt.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Es){if(t!==~~t||t<0||t>pl)throw Error(p2);for(r=gl(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return ml(r,!0,!!n)},lt.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Es){if(t!==~~t||t<0||t>pl)throw Error(p2);for(r=gl(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return ml(r,!1,!!n)},lt[Symbol.for("nodejs.util.inspect.custom")]=lt.toJSON=lt.toString=function(){var t=this,e=t.constructor;return ml(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},lt.toNumber=function(){var t=+ml(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(O0+"Imprecise conversion");return t},lt.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==Es){if(t!==~~t||t<1||t>pl)throw Error(fl+"precision");for(r=gl(new n(r),t,e);r.c.length<t;)r.c.push(0)}return ml(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)},lt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(O0+"valueOf disallowed");return ml(t,t.e<=e.NE||t.e>=e.PE,!0)};var tc=Cx();const Vt={bigNumber(t){return t?new tc(t):new tc(0)},multiply(t,e){if(t===void 0||e===void 0)return new tc(0);const r=new tc(t),n=new tc(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new tc(0).toFixed(e):new tc(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new tc(e).toNumber()}},hee=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],dee=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],pee=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],fee={getERC20Abi:t=>G.USDT_CONTRACT_ADDRESSES.includes(t)?pee:hee,getSwapAbi:()=>dee},Cn={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},xe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function j8(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ve={setItem(t,e){nh()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(nh())return localStorage.getItem(t)||void 0},removeItem(t){nh()&&localStorage.removeItem(t)},clear(){nh()&&localStorage.clear()}};function nh(){return typeof window<"u"&&typeof localStorage<"u"}function f2(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}const gee=Symbol(),Ax=Object.getPrototypeOf,V8=new WeakMap,mee=t=>t&&(V8.has(t)?V8.get(t):Ax(t)===Object.prototype||Ax(t)===Array.prototype),wee=t=>mee(t)&&t[gee]||null,$x=(t,e=!0)=>{V8.set(t,e)},z8=t=>typeof t=="object"&&t!==null,yee=t=>z8(t)&&!P0.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),xx=(t,e)=>{const r=q8.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return $x(n,!0),q8.set(t,[e,n]),Reflect.ownKeys(t).forEach(i=>{if(Object.getOwnPropertyDescriptor(n,i))return;const s=Reflect.get(t,i),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,i),a={value:s,enumerable:o,configurable:!0};if(P0.has(s))$x(s,!1);else if(rc.has(s)){const[c,l]=rc.get(s);a.value=xx(c,l())}Object.defineProperty(n,i,a)}),Object.preventExtensions(n)},bee=(t,e,r,n)=>({deleteProperty(i,s){const o=Reflect.get(i,s);r(s);const a=Reflect.deleteProperty(i,s);return a&&n(["delete",[s],o]),a},set(i,s,o,a){const c=!t()&&Reflect.has(i,s),l=Reflect.get(i,s,a);if(c&&(_x(l,o)||T0.has(o)&&_x(l,T0.get(o))))return!0;r(s),z8(o)&&(o=wee(o)||o);const u=!rc.has(o)&&Eee(o)?st(o):o;return e(s,u),Reflect.set(i,s,u,a),n(["set",[s],o,l]),!0}}),rc=new WeakMap,P0=new WeakSet,q8=new WeakMap,N0=[1,1],T0=new WeakMap;let _x=Object.is,vee=(t,e)=>new Proxy(t,e),Eee=yee,Cee=xx,Aee=bee;function st(t={}){if(!z8(t))throw new Error("object required");const e=T0.get(t);if(e)return e;let r=N0[0];const n=new Set,i=(w,v=++N0[0])=>{r!==v&&(r=v,n.forEach(C=>C(w,v)))};let s=N0[1];const o=(w=++N0[1])=>(s!==w&&!n.size&&(s=w,c.forEach(([v])=>{const C=v[1](w);C>r&&(r=C)})),r),a=w=>(v,C)=>{const b=[...v];b[1]=[w,...b[1]],i(b,C)},c=new Map,l=(w,v)=>{const C=!P0.has(v)&&rc.get(v);if(C){if(c.has(w))throw new Error("prop listener already exists");if(n.size){const b=C[2](a(w));c.set(w,[C,b])}else c.set(w,[C])}},u=w=>{var v;const C=c.get(w);C&&(c.delete(w),(v=C[1])==null||v.call(C))},h=w=>(n.add(w),n.size===1&&c.forEach(([C,b],A)=>{if(b)throw new Error("remove already exists");const P=C[2](a(A));c.set(A,[C,P])}),()=>{n.delete(w),n.size===0&&c.forEach(([C,b],A)=>{b&&(b(),c.set(A,[C]))})});let d=!0;const p=Aee(()=>d,l,u,i),f=vee(t,p);T0.set(t,f);const g=[t,o,h];return rc.set(f,g),Reflect.ownKeys(t).forEach(w=>{const v=Object.getOwnPropertyDescriptor(t,w);"value"in v&&v.writable&&(f[w]=t[w])}),d=!1,f}function Xt(t,e,r){const n=rc.get(t);n||console.warn("Please use proxy object");let i;const s=[],o=n[2];let a=!1;const l=o(u=>{if(s.push(u),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function k0(t){const e=rc.get(t);e||console.warn("Please use proxy object");const[r,n]=e;return Cee(r,n())}function wl(t){return P0.add(t),t}function $ee(){return{proxyStateMap:rc,refSet:P0,snapCache:q8,versionHolder:N0,proxyCache:T0}}function hr(t,e,r,n){let i=t[e];return Xt(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)},n)}const{proxyStateMap:xee,snapCache:_ee}=$ee(),g2=t=>xee.has(t);function See(t){const e=[];let r=0;const n=new Map,i=new WeakMap,s=()=>{const l=_ee.get(a),u=l?.[1];if(u&&!i.has(u)){const h=new Map(n);i.set(u,h)}},o=l=>i.get(l)||n;if(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(const[l,u]of t)n.set(l,r),e[r++]=u}const a={data:e,index:r,epoch:0,get size(){return g2(this)||s(),o(this).size},get(l){const h=o(this).get(l);if(h===void 0){this.epoch;return}return this.data[h]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!g2(this))throw new Error("Cannot perform mutations on a snapshot");const h=n.get(l);return h===void 0?(n.set(l,this.index),this.data[this.index++]=u):this.data[h]=u,this.epoch++,this},delete(l){if(!g2(this))throw new Error("Cannot perform mutations on a snapshot");const u=n.get(l);return u===void 0?!1:(delete this.data[u],n.delete(l),this.epoch++,!0)},clear(){if(!g2(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(l){this.epoch,o(this).forEach((h,d)=>{l(this.data[h],d,this)})},*entries(){this.epoch;const l=o(this);for(const[u,h]of l)yield[u,this.data[h]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=st(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const W8=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Sx=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Iee="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Le={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:W8,SECURE_SITE_DASHBOARD:`${W8}/dashboard`,SECURE_SITE_FAVICON:`${W8}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[G.CHAIN.EVM,G.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[G.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[G.CHAIN.EVM,G.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[G.CHAIN.EVM,G.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[G.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[G.CHAIN.EVM,G.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},oe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=oe.getActiveNamespace(),e=oe.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ve.setItem(xe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ve.getItem(xe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ve.removeItem(xe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ve.setItem(xe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ve.setItem(xe.ACTIVE_CAIP_NETWORK_ID,t),oe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ve.getItem(xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ve.removeItem(xe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=j8(t);ve.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=oe.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ve.setItem(xe.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ve.getItem(xe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=j8(t);ve.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ve.getItem(xe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=j8(t);return ve.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ve.setItem(xe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ve.getItem(xe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ve.removeItem(xe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ve.getItem(xe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return ve.getItem(xe.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{ve.setItem(xe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ve.getItem(xe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ve.getItem(xe.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ve.setItem(xe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=oe.getConnectedNamespaces();e.includes(t)||(e.push(t),oe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=oe.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),oe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ve.getItem(xe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ve.setItem(xe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ve.removeItem(xe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ve.getItem(xe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=oe.getBalanceCache();ve.setItem(xe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=oe.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=oe.getBalanceCache();e[t.caipAddress]=t,ve.setItem(xe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ve.getItem(xe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=oe.getBalanceCache();ve.setItem(xe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=oe.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),oe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=oe.getNativeBalanceCache();e[t.caipAddress]=t,ve.setItem(xe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ve.getItem(xe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=oe.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;oe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=oe.getEnsCache();e[t.address]=t,ve.setItem(xe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=oe.getEnsCache();ve.setItem(xe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ve.getItem(xe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=oe.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;oe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=oe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ve.setItem(xe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=oe.getIdentityCache();ve.setItem(xe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ve.removeItem(xe.PORTFOLIO_CACHE),ve.removeItem(xe.NATIVE_BALANCE_CACHE),ve.removeItem(xe.ENS_CACHE),ve.removeItem(xe.IDENTITY_CACHE),ve.removeItem(xe.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ve.setItem(xe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ve.getItem(xe.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=oe.getConnections(),n=r[e]??[],i=new Map;for(const o of n)i.set(o.connectorId,{...o});for(const o of t){const a=i.get(o.connectorId),c=o.connectorId===G.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(h=>h.address.toLowerCase())),u=o.accounts.filter(h=>!l.has(h.address.toLowerCase()));a.accounts.push(...u)}else i.set(o.connectorId,{...o})}const s={...r,[e]:Array.from(i.values())};ve.setItem(xe.CONNECTIONS,JSON.stringify(s))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=ve.getItem(xe.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=oe.getConnections(),i=n[r]??[],s=new Map(i.map(a=>[a.connectorId,a])),o=s.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?s.delete(t):s.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ve.setItem(xe.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(s.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=ve.getItem(xe.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=oe.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),ve.setItem(xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=oe.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(i=>i.toLowerCase()!==t.toLowerCase()),ve.setItem(xe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(oe.getDisconnectedConnectorIds()[e]??[]).some(i=>i.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ve.getItem(xe.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=oe.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;oe.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const i=oe.getTransactionsCache();i[t]={...i[t],[e]:{timestamp:r,transactions:n}},ve.setItem(xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(i))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=oe.getTransactionsCache(),n=r?.[t]||{},{[e]:i,...s}=n;ve.setItem(xe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:s}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ve.getItem(xe.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=oe.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;oe.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=oe.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ve.setItem(xe.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=oe.getTokenPriceCache();ve.setItem(xe.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},ne={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ne.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Le.TEN_SEC_MS:!0},isAllowedRetry(t,e=Le.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ne.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Le.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(ne.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,i=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),i&&!i?.endsWith("/")&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const s=encodeURIComponent(e);return{redirect:`${n}wc?uri=${s}`,redirectUniversalLink:i?`${i}wc?uri=${s}`:void 0,href:n}},formatUniversalUrl(t,e){if(!ne.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?oe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ne.wait(2e3)])},parseBalance(t,e){let r="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const l=(Math.floor(c*1e3)/1e3).toFixed(3);l&&(r=l)}}const[n,i]=r.split("."),s=n||"0",o=i||"000";return{formattedText:`${s}.${o}${e?` ${e}`:""}`,value:s,decimals:o,symbol:e}},getApiUrl(){return G.W3M_API_URL},getBlockchainApiUrl(){return G.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return G.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?Le.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in G.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,n+s),c=t.substring(n+s,o),l=t.substring(i),u=c+r;return a+u+l}};async function R0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class D0{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await R0(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await R0(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await R0(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await R0(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await R0(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const Oee={getFeatureValue(t,e){const r=e?.[t];return r===void 0?Le.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ne.isTelegram()){if(ne.isIos())return t.filter(e=>e!=="google");if(ne.isMac())return t.filter(e=>e!=="x");if(ne.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ee=st({features:Le.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Le.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Y={state:Ee,subscribeKey(t,e){return hr(Ee,t,e)},setOptions(t){Object.assign(Ee,t)},setRemoteFeatures(t){if(!t)return;const e={...Ee.remoteFeatures,...t};Ee.remoteFeatures=e,Ee.remoteFeatures?.socials&&(Ee.remoteFeatures.socials=Oee.filterSocialsByPlatform(Ee.remoteFeatures.socials)),Ee.features?.pay&&(Ee.remoteFeatures.email=!1,Ee.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;Ee.features||(Ee.features=Le.DEFAULT_FEATURES);const e={...Ee.features,...t};Ee.features=e,Ee.features?.pay&&Ee.remoteFeatures&&(Ee.remoteFeatures.email=!1,Ee.remoteFeatures.socials=!1)},setProjectId(t){Ee.projectId=t},setCustomRpcUrls(t){Ee.customRpcUrls=t},setAllWallets(t){Ee.allWallets=t},setIncludeWalletIds(t){Ee.includeWalletIds=t},setExcludeWalletIds(t){Ee.excludeWalletIds=t},setFeaturedWalletIds(t){Ee.featuredWalletIds=t},setTokens(t){Ee.tokens=t},setTermsConditionsUrl(t){Ee.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ee.privacyPolicyUrl=t},setCustomWallets(t){Ee.customWallets=t},setIsSiweEnabled(t){Ee.isSiweEnabled=t},setIsUniversalProvider(t){Ee.isUniversalProvider=t},setSdkVersion(t){Ee.sdkVersion=t},setMetadata(t){Ee.metadata=t},setDisableAppend(t){Ee.disableAppend=t},setEIP6963Enabled(t){Ee.enableEIP6963=t},setDebug(t){Ee.debug=t},setEnableWalletConnect(t){Ee.enableWalletConnect=t},setEnableWalletGuide(t){Ee.enableWalletGuide=t},setEnableAuthLogger(t){Ee.enableAuthLogger=t},setEnableWallets(t){Ee.enableWallets=t},setPreferUniversalLinks(t){Ee.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(Le.SIWX_DEFAULTS))t[e]??=r;Ee.siwx=t},setConnectMethodsOrder(t){Ee.features={...Ee.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ee.features={...Ee.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ee.remoteFeatures={...Ee.remoteFeatures,socials:t}},setCollapseWallets(t){Ee.features={...Ee.features,collapseWallets:t}},setEnableEmbedded(t){Ee.enableEmbedded=t},setAllowUnsupportedChain(t){Ee.allowUnsupportedChain=t},setManualWCControl(t){Ee.manualWCControl=t},setEnableNetworkSwitch(t){Ee.enableNetworkSwitch=t},setEnableReconnect(t){Ee.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(Ee.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){Ee.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ee.universalProviderConfigOverride},getSnapshot(){return k0(Ee)}},Pee=Object.freeze({enabled:!0,events:[]}),Nee=new D0({baseUrl:ne.getAnalyticsUrl(),clientId:null}),Tee=5,kee=60*1e3,nc=st({...Pee}),Ree={state:nc,subscribeKey(t,e){return hr(nc,t,e)},async sendError(t,e){if(!nc.enabled)return;const r=Date.now();if(nc.events.filter(s=>{const o=new Date(s.properties.timestamp||"").getTime();return r-o<kee}).length>=Tee)return;const i={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};nc.events.push(i);try{if(typeof window>"u")return;const{projectId:s,sdkType:o,sdkVersion:a}=Y.state;await Nee.post({path:"/e",params:{projectId:s,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ne.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){nc.enabled=!0},disable(){nc.enabled=!1},clearEvents(){nc.events=[]}};class ih extends Error{constructor(e,r,n){super(e),this.name="AppKitError",this.category=r,this.originalError=n,Object.setPrototypeOf(this,ih.prototype);let i=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const s=n.stack,o=s.indexOf(`
`);if(o>-1){const a=s.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,ih):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Ix(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?r=JSON.stringify(t):r=String(t)}catch(i){r="Unknown error",console.error("Error parsing error message",i)}const n=t instanceof ih?t:new ih(r,e,t);throw Ree.sendError(n,n.category),n}function rn(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const i=t[n];if(typeof i=="function"){let s=i;i.constructor.name==="AsyncFunction"?s=async(...o)=>{try{return await i(...o)}catch(a){return Ix(a,e)}}:s=(...o)=>{try{return i(...o)}catch(a){return Ix(a,e)}},r[n]=s}else r[n]=i}),r}const Dee="https://secure.walletconnect.org/sdk";typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;const Ki={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},nn={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},Bee={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===nn.PHANTOM.id&&!("phantom"in window)){const i=r.startsWith("https")?"https":"http",s=r.split("/")[2],o=encodeURIComponent(`${i}://${s}`);window.location.href=`${nn.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===nn.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${nn.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===G.CHAIN.SOLANA&&t===nn.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${nn.COINBASE.url}/dapp?cb_url=${n}`),e===G.CHAIN.BITCOIN&&t===nn.BINANCE.id&&!("binancew3w"in window)){const i=k.state.activeCaipNetwork,s=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${i?.id??1}`),a=new URL(nn.BINANCE.deeplink);a.searchParams.set("appId",nn.BINANCE.appId),a.searchParams.set("startPagePath",s),a.searchParams.set("startPageQuery",o);const c=new URL(nn.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},ri=st({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),An=rn({state:ri,subscribeNetworkImages(t){return Xt(ri.networkImages,()=>t(ri.networkImages))},subscribeKey(t,e){return hr(ri,t,e)},subscribe(t){return Xt(ri,()=>t(ri))},setWalletImage(t,e){ri.walletImages[t]=e},setNetworkImage(t,e){ri.networkImages[t]=e},setChainImage(t,e){ri.chainImages[t]=e},setConnectorImage(t,e){ri.connectorImages={...ri.connectorImages,[t]:e}},setTokenImage(t,e){ri.tokenImages[t]=e},setCurrencyImage(t,e){ri.currencyImages[t]=e}}),Mee={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},Z8=st({networkImagePromises:{}}),Jt={async fetchWalletImage(t){if(t)return await ce._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Z8.networkImagePromises[t]||(Z8.networkImagePromises[t]=ce._fetchNetworkImage(t)),await Z8.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return An.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return An.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return An.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return An.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return An.state.connectorImages[t.imageId]},getChainImage(t){return An.state.networkImages[Mee[t]]}},Gi=st({message:"",variant:"info",open:!1}),Qt=rn({state:Gi,subscribeKey(t,e){return hr(Gi,t,e)},open(t,e){const{debug:r}=Y.state,{code:n,displayMessage:i,debugMessage:s}=t;i&&r&&(Gi.message=i,Gi.variant=e,Gi.open=!0),s&&console.error(typeof s=="function"?s():s,n?{code:n}:void 0)},warn(t,e,r){Gi.open=!0,Gi.message=t,Gi.variant="warning",e&&console.warn(e,r)},close(){Gi.open=!1,Gi.message="",Gi.variant="info"}}),Uee=ne.getAnalyticsUrl(),Lee=new D0({baseUrl:Uee,clientId:null}),Fee=["MODAL_CREATED"],aa=st({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Te={state:aa,subscribe(t){return Xt(aa,()=>t(aa))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Y.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{let e=be.state.address;if("address"in t.data&&t.data.address&&(e=t.data.address),Fee.includes(t.data.event)||typeof window>"u")return;const r=k.getActiveCaipNetwork()?.caipNetworkId;await Lee.post({path:"/e",params:Te.getSdkProperties(),body:{eventId:ne.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}}),aa.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===G.HTTP_STATUS_CODES.FORBIDDEN&&!aa.reportedErrors.FORBIDDEN&&(Qt.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${nh()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),aa.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){aa.timestamp=Date.now(),aa.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(Y.state.features?.analytics||e.includes(t.event))&&Te._sendAnalyticsEvent(aa)}},Hee=ne.getApiUrl(),$n=new D0({baseUrl:Hee,clientId:null}),jee=40,Ox=4,Vee=20,Be=st({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ce={state:Be,subscribeKey(t,e){return hr(Be,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Y.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Y.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${$n.baseUrl}/getWalletImage/${t}`,r=await $n.getBlob({path:e,params:ce._getSdkProperties()});An.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${$n.baseUrl}/public/getAssetImage/${t}`,r=await $n.getBlob({path:e,params:ce._getSdkProperties()});An.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${$n.baseUrl}/public/getAssetImage/${t}`,r=await $n.getBlob({path:e,params:ce._getSdkProperties()});An.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${$n.baseUrl}/public/getCurrencyImage/${t}`,r=await $n.getBlob({path:e,params:ce._getSdkProperties()});An.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${$n.baseUrl}/public/getTokenImage/${t}`,r=await $n.getBlob({path:e,params:ce._getSdkProperties()});An.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){return ne.isMobile()?t?.filter(r=>r.mobile_link||r.id===nn.COINBASE.id||r.id===nn.BINANCE.id?!0:k.state.activeChain==="solana"&&(r.id===nn.SOLFLARE.id||r.id===nn.PHANTOM.id)):t},async fetchProjectConfig(){return(await $n.get({path:"/appkit/v1/config",params:ce._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await $n.get({path:"/projects/v1/origins",params:ce._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===G.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=G.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=k.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!Jt.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>ce._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=te.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>ce._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ce._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ce._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];ce._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(nn).map(s=>s.id));const n=await $n.get({path:"/getWallets",params:{...ce._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:ce._filterWalletsByPlatform(n?.data)||[],count:n?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Y.state;if(t?.length){const e={...ce._getSdkProperties(),page:1,entries:t?.length??Ox,include:t},{data:r}=await ce.fetchWallets(e),n=[...r].sort((s,o)=>t.indexOf(s.id)-t.indexOf(o.id)),i=n.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(i.map(s=>ce._fetchWalletImage(s))),Be.featured=n,Be.allFeatured=n}},async fetchRecommendedWallets(){try{Be.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=Y.state,n=[...e??[],...r??[]].filter(Boolean),i=k.getRequestedCaipNetworkIds().join(","),s={page:1,entries:Ox,include:t,exclude:n,chains:i},{data:o,count:a}=await ce.fetchWallets(s),c=oe.getRecentWallets(),l=o.map(h=>h.image_id).filter(Boolean),u=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(h=>ce._fetchWalletImage(h))),Be.recommended=o,Be.allRecommended=o,Be.count=a??0}catch{}finally{Be.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=Y.state,i=k.getRequestedCaipNetworkIds().join(","),s=[...Be.recommended.map(({id:u})=>u),...r??[],...n??[]].filter(Boolean),o={page:t,entries:jee,include:e,exclude:s,chains:i},{data:a,count:c}=await ce.fetchWallets(o),l=a.slice(0,Vee).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ce._fetchWalletImage(u))),Be.wallets=ne.uniqueBy([...Be.wallets,...ce._filterOutExtensions(a)],"id").filter(u=>u.chains?.some(h=>i.includes(h))),Be.count=c>Be.count?c:Be.count,Be.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await ce.fetchWallets(e);r&&r.forEach(n=>{Be.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=Y.state,i=k.getRequestedCaipNetworkIds().join(",");Be.search=[];const s={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:i},{data:o}=await ce.fetchWallets(s);Te.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ce._fetchWalletImage(c)),ne.wait(300)]),Be.search=ce._filterOutExtensions(o)},initPromise(t,e){const r=Be.promises[t];return r||(Be.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&ce.initPromise("connectorImages",ce.fetchConnectorImages),e&&ce.initPromise("featuredWallets",ce.fetchFeaturedWallets),r&&ce.initPromise("recommendedWallets",ce.fetchRecommendedWallets),n&&ce.initPromise("networkImages",ce.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){Y.state.features?.analytics&&ce.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await $n.get({path:"/getAnalyticsConfig",params:ce._getSdkProperties()});Y.setFeatures({analytics:t})}catch{Y.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=k.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Be.recommended=Be.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Be.filteredWallets=Be.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Be.filteredWallets=[]},setFilterByNamespace(t){if(!t){Be.featured=Be.allFeatured,Be.recommended=Be.allRecommended;return}const e=k.getRequestedCaipNetworkIds().join(",");Be.featured=Be.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Be.recommended=Be.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Be.filteredWallets=Be.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},ft=st({view:"Connect",history:["Connect"],transactionStack:[]}),J=rn({state:ft,subscribeKey(t,e){return hr(ft,t,e)},pushTransactionStack(t){ft.transactionStack.push(t)},popTransactionStack(t){const e=ft.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:i}=e;switch(t){case"success":r?.();break;case"error":n?.(),J.goBack();break;case"cancel":i?.(),J.goBack();break}},push(t,e){t!==ft.view&&(ft.view=t,ft.history.push(t),ft.data=e)},reset(t,e){ft.view=t,ft.history=[t],ft.data=e},replace(t,e){ft.history.at(-1)===t||(ft.view=t,ft.history[ft.history.length-1]=t,ft.data=e)},goBack(){const t=k.state.activeCaipAddress,e=J.state.view==="ConnectingFarcaster",r=!t&&e;if(ft.history.length>1){ft.history.pop();const[n]=ft.history.slice(-1);n&&(t&&n==="Connect"?ft.view="Account":ft.view=n)}else ke.close();ft.data?.wallet&&(ft.data.wallet=void 0),setTimeout(()=>{if(r){be.setFarcasterUrl(void 0,k.state.activeChain);const n=te.getAuthConnector();n?.provider?.reload();const i=k0(Y.state);n?.provider?.syncDappData?.({metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType})}},100)},goBackToIndex(t){if(ft.history.length>1){ft.history=ft.history.slice(0,t+1);const[e]=ft.history.slice(-1);e&&(ft.view=e)}},goBackOrCloseModal(){J.state.history.length>1?J.goBack():ke.close()}}),ca=st({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),K8={state:ca,subscribe(t){return Xt(ca,()=>t(ca))},setThemeMode(t){ca.themeMode=t;try{const e=te.getAuthConnector();if(e){const r=K8.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:f2(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ca.themeVariables={...ca.themeVariables,...t};try{const e=te.getAuthConnector();if(e){const r=K8.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:f2(ca.themeVariables,ca.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return k0(ca)}},xr=rn(K8),Px=Object.fromEntries(bx.map(t=>[t,void 0])),zee=Object.fromEntries(bx.map(t=>[t,!0])),Xe=st({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:Px,filterByNamespaceMap:zee}),te=rn({state:Xe,subscribe(t){return Xt(Xe,()=>{t(Xe)})},subscribeKey(t,e){return hr(Xe,t,e)},initialize(t){t.forEach(e=>{const r=oe.getConnectedConnectorId(e);r&&te.setConnectorId(r,e)})},setActiveConnector(t){t&&(Xe.activeConnector=wl(t))},setConnectors(t){t.filter(i=>!Xe.allConnectors.some(s=>s.id===i.id&&te.getConnectorName(s.name)===te.getConnectorName(i.name)&&s.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&Xe.allConnectors.push(wl(i))});const r=te.getEnabledNamespaces(),n=te.getEnabledConnectors(r);Xe.connectors=te.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(Xe.filterByNamespaceMap).forEach(e=>{Xe.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Xe.filterByNamespaceMap[e]=!0}),te.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Xe.filterByNamespaceMap[t]=e,te.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=te.getEnabledNamespaces(),e=te.getEnabledConnectors(t),r=te.areAllNamespacesEnabled();Xe.connectors=te.mergeMultiChainConnectors(e),r?ce.clearFilterByNamespaces():ce.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Xe.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Xe.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Xe.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=te.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=i?.id===G.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=te.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===G.CONNECTOR_ID.AUTH){const e=t,r=k0(Y.state),n=xr.getSnapshot().themeMode,i=xr.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:f2(i,n)}),te.setConnectors([t])}else te.setConnectors([t])},getAuthConnector(t){const e=t||k.state.activeChain,r=Xe.connectors.find(n=>n.id===G.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return Xe.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return Xe.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||k.state.activeChain;return Xe.allConnectors.filter(s=>s.chain===n).find(s=>s.explorerId===t||s.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,r=k0(Y.state),n=xr.getSnapshot().themeMode,i=xr.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:f2(i,n)})},getConnectorsByNamespace(t){const e=Xe.allConnectors.filter(r=>r.chain===t);return te.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return k.checkIfSmartAccountEnabled()&&xn(t)===Ki.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=te.getConnector({id:t.id,rdns:t.rdns});Bee.handleMobileDeeplinkRedirect(e?.explorerId||t.id,k.state.activeChain),e?J.push("ConnectingExternal",{connector:e,wallet:t}):J.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?te.getConnectorsByNamespace(t):te.mergeMultiChainConnectors(Xe.allConnectors)},setFilterByNamespace(t){Xe.filterByNamespace=t,Xe.connectors=te.getConnectors(t),ce.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Xe.activeConnectorIds={...Xe.activeConnectorIds,[e]:t},oe.setConnectedConnectorId(e,t))},removeConnectorId(t){Xe.activeConnectorIds={...Xe.activeConnectorIds,[t]:void 0},oe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Xe.activeConnectorIds[t]},isConnected(t){return t?!!Xe.activeConnectorIds[t]:Object.values(Xe.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Xe.activeConnectorIds={...Px}}}),qee=1e3,B0={checkNamespaceConnectorId(t,e){return te.getConnectorId(t)===e},isSocialProvider(t){return Le.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:i,onConnect:s}){return new Promise((o,a)=>{if(t&&te.setActiveConnector(e),i?.(ne.isMobile()&&t),n){const l=ke.subscribeKey("open",u=>{u||(J.state.view!==n&&J.replace(n),l(),a(new Error("Modal closed")))})}const c=k.subscribeKey("activeCaipAddress",l=>{l&&(s?.(),r&&ke.close(),c(),o(Cn.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,r)=>{const n=k.subscribeKey("activeCaipAddress",i=>{i&&(ke.close(),n(),e(Cn.parseCaipAddress(i)))});X.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:i}){let s=be.state.socialWindow,o=be.state.socialProvider,a=!1,c=null;const l=e||k.state.activeChain,u=k.subscribeKey("activeCaipAddress",h=>{h&&(r&&ke.close(),u())});return new Promise((h,d)=>{async function p(g){if(g.data?.resultUri)if(g.origin===G.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",p,!1);try{const w=te.getAuthConnector(l);if(w&&!a){s&&(s.close(),be.setSocialWindow(void 0,l),s=be.state.socialWindow),a=!0;const v=g.data.resultUri;if(o&&Te.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){oe.setConnectedSocialProvider(o),await X.connectExternal({id:w.id,type:w.type,socialUri:v},w.chain);const C=k.state.activeCaipAddress;if(!C){d(new Error("Failed to connect"));return}h(Cn.parseCaipAddress(C)),Te.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&Te.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),d(new Error("Failed to connect"))}}else o&&Te.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function f(){if(t&&(be.setSocialProvider(t,l),o=be.state.socialProvider,Te.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){n?.();const g=ke.subscribeKey("open",v=>{!v&&t==="farcaster"&&(d(new Error("Popup closed")),i?.(),g())}),w=te.getAuthConnector();if(w&&!be.state.farcasterUrl)try{const{url:v}=await w.provider.getFarcasterUri();be.setFarcasterUrl(v,l)}catch{d(new Error("Failed to connect to farcaster"))}}else{const g=te.getAuthConnector();c=ne.returnOpenHref(`${G.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g&&o){const{uri:w}=await g.provider.getSocialRedirectUri({provider:o});if(c&&w){be.setSocialWindow(c,l),s=be.state.socialWindow,c.location.href=w;const v=setInterval(()=>{s?.closed&&!a&&(d(new Error("Popup closed")),clearInterval(v))},1e3);window.addEventListener("message",p,!1)}else c?.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),c?.close()}}}f()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((i,s)=>{if(r?.(),e){const a=ke.subscribeKey("open",c=>{c||(J.state.view!==e&&J.replace(e),a(),s(new Error("Modal closed")))})}const o=k.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&ke.close(),o(),i(Cn.parseCaipAddress(a)))})})},async updateEmail(){const t=oe.getConnectedConnectorId(k.state.activeChain),e=te.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==G.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await ke.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,i)=>{const s=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(ke.close(),clearInterval(s),o(),n({email:a}))},qee),o=ke.subscribeKey("open",a=>{a||(J.state.view!=="Connect"&&J.push("Connect"),clearInterval(s),o(),i(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return k.checkIfSmartAccountEnabled()&&xn(t)===Ki.ACCOUNT_TYPES.EOA}};function G8(){const t=k.state.activeCaipNetwork?.chainNamespace||"eip155",e=k.state.activeCaipNetwork?.id||1,r=Le.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function xn(t){return k.getAccountData(t)?.preferredAccountType}function M0(t){return t?k.state.chains.get(t)?.networkState?.caipNetwork:k.state.activeCaipNetwork}const m2={getConnectionStatus(t,e){const r=te.state.activeConnectorIds[e],n=X.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const s=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:s}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!Y.state.remoteFeatures?.multiWallet,r=te.state.activeConnectorIds[t],n=X.getConnections(t),s=(X.state.recentConnections.get(t)??[]).filter(a=>te.getConnectorById(a.connectorId)),o=m2.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],s);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},yl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),er=st({...yl}),We={state:er,subscribeKey(t,e){return hr(er,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ne.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){er.message=yl.message,er.variant=yl.variant,er.svg=yl.svg,er.open=yl.open,er.autoClose=yl.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=yl.autoClose}){er.open?(er.open=!1,setTimeout(()=>{er.message=t,er.variant=r,er.svg=e,er.open=!0,er.autoClose=n},150)):(er.message=t,er.variant=r,er.svg=e,er.open=!0,er.autoClose=n)}},Ot=st({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),w2=rn({state:Ot,subscribe(t){return Xt(Ot,()=>t(Ot))},setLastNetworkInView(t){Ot.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Ot.loading=!0;try{const e=await Ae.fetchTransactions({account:t,cursor:Ot.next,chainId:k.state.activeCaipNetwork?.caipNetworkId}),r=w2.filterSpamTransactions(e.data),n=w2.filterByConnectedChain(r),i=[...Ot.transactions,...n];Ot.loading=!1,Ot.transactions=i,Ot.transactionsByYear=w2.groupTransactionsByYearAndMonth(Ot.transactionsByYear,n),Ot.empty=i.length===0,Ot.next=e.next?e.next:void 0}catch{const r=k.state.activeChain;Te.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Y.state.projectId,cursor:Ot.next,isSmartAccount:xn(r)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}}),We.showError("Failed to fetch transactions"),Ot.loading=!1,Ot.empty=!0,Ot.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},c=(o[s]??[]).filter(l=>l.id!==n.id);r[i]={...o,[s]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=k.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Ot.next=void 0},resetTransactions(){Ot.transactions=[],Ot.transactionsByYear={},Ot.lastNetworkInView=void 0,Ot.loading=!1,Ot.empty=!1,Ot.next=void 0}},"API_ERROR"),Je=st({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let bl;const X=rn({state:Je,subscribe(t){return Xt(Je,()=>t(Je))},subscribeKey(t,e){return hr(Je,t,e)},_getClient(){return Je._client},setClient(t){Je._client=wl(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);X.syncStorageConnections(e)},syncStorageConnections(t){const e=oe.getConnections(),r=t??Array.from(k.state.chains.keys());for(const n of r){const i=e[n]??[],s=new Map(Je.recentConnections);s.set(n,i),Je.recentConnections=s}},getConnections(t){return t?Je.connections.get(t)??[]:[]},hasAnyConnection(t){const e=X.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=ne.isTelegram()||ne.isSafari()&&ne.isIos();if(t==="always"||t==="auto"&&e){if(bl){await bl,bl=void 0;return}if(!ne.isPairingExpired(Je?.wcPairingExpiry)){const r=Je.wcUri;Je.wcUri=r;return}bl=X._getClient()?.connectWalletConnect?.().catch(()=>{}),X.state.status="connecting",await bl,bl=void 0,Je.wcPairingExpiry=void 0,X.state.status="connected"}else await X._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await X._getClient()?.connectExternal?.(t);return r&&k.setActiveNamespace(e),n},async reconnectExternal(t){await X._getClient()?.reconnectExternal?.(t);const e=t.chain||k.state.activeChain;e&&te.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;ke.setLoading(!0,k.state.activeChain);const r=te.getAuthConnector();r&&(be.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),oe.setPreferredAccountTypes(Object.entries(k.state.chains).reduce((n,[i,s])=>{const o=i,a=xn(o);return a!==void 0&&(n[o]=a),n},{})),await X.reconnectExternal(r),ke.setLoading(!1,k.state.activeChain),Te.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:k.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return X._getClient()?.signMessage(t)},parseUnits(t,e){return X._getClient()?.parseUnits(t,e)},formatUnits(t,e){return X._getClient()?.formatUnits(t,e)},updateBalance(t){return X._getClient()?.updateBalance(t)},async sendTransaction(t){return X._getClient()?.sendTransaction(t)},async getCapabilities(t){return X._getClient()?.getCapabilities(t)},async grantPermissions(t){return X._getClient()?.grantPermissions(t)},async walletGetAssets(t){return X._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return X._getClient()?.estimateGas(t)},async writeContract(t){return X._getClient()?.writeContract(t)},async getEnsAddress(t){return X._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return X._getClient()?.getEnsAvatar(t)},checkInstalled(t){return X._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Je.wcUri=void 0,Je.wcPairingExpiry=void 0,Je.wcLinking=void 0,Je.recentWallet=void 0,Je.status="disconnected",w2.resetTransactions(),oe.deleteWalletConnectDeepLink()},resetUri(){Je.wcUri=void 0,Je.wcPairingExpiry=void 0,bl=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=X.state;e&&oe.setWalletConnectDeepLink(e),r&&oe.setAppKitRecent(r),t&&Te.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:J.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){Je.wcBasic=t},setUri(t){Je.wcUri=t,Je.wcPairingExpiry=ne.getPairingExpiry()},setWcLinking(t){Je.wcLinking=t},setWcError(t){Je.wcError=t,Je.buffering=!1},setRecentWallet(t){Je.recentWallet=t},setBuffering(t){Je.buffering=t},setStatus(t){Je.status=t},setIsSwitchingConnection(t){Je.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await X._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new ih("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){const r=new Map(Je.connections);r.set(e,t),Je.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const r=be.state.user?.accounts?.find(i=>i.type==="smartAccount"),n=r&&r.address.toLowerCase()===t.toLowerCase()&&B0.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await X.setPreferredAccountType(n,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=te.getConnectorById(t.connectorId),i=t.connectorId===G.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(i)i&&r&&await X.handleAuthAccountSwitch({address:r,namespace:e});else return(await X.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const i=te.getConnectorById(t.connectorId),s=t.auth?.name?.toLowerCase(),o=t.connectorId===G.CONNECTOR_ID.AUTH,a=t.connectorId===G.CONNECTOR_ID.WALLET_CONNECT;if(!i)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(s&&B0.isSocialProvider(s)){const{address:l}=await B0.connectSocial({social:s,closeModalOnConnect:n,onOpenFarcaster(){ke.open({view:"ConnectingFarcaster"})},onConnect(){J.replace("ProfileWallets")}});c=l}else{const{address:l}=await B0.connectEmail({closeModalOnConnect:n,onOpen(){ke.open({view:"EmailLogin"})},onConnect(){J.replace("ProfileWallets")}});c=l}else if(a){const{address:l}=await B0.connectWalletConnect({walletConnect:!0,connector:i,closeModalOnConnect:n,onOpen(u){const h=u?"AllWallets":"ConnectingWalletConnect";ke.state.open?J.push(h):ke.open({view:h})},onConnect(){J.replace("ProfileWallets")}});c=l}else{const l=await X.connectExternal({id:i.id,type:i.type,provider:i.provider,chain:e},e);l&&(c=l.address)}return o&&r&&await X.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:i}){let s;const o=be.getCaipAddress(r);if(o){const{address:c}=Cn.parseCaipAddress(o);s=c}const a=m2.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await X.handleActiveConnection({connection:t,namespace:r,address:e});if(s&&c){const l=c.toLowerCase()!==s.toLowerCase();i?.({address:c,namespace:r,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await X.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&i?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}}),sh=st({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),la={state:sh,subscribe(t){return Xt(sh,()=>t(sh))},subscribeOpen(t){return hr(sh,"open",t)},set(t){Object.assign(sh,{...sh,...t})}},U0={async getTokenList(t){return(await Ae.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=k.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await X?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await Ae.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const i=await Ae.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(i?.allowance&&r&&n){const s=X.parseUnits(r,n)||0;return BigInt(i.allowance)>=s}return!1},async getMyTokensWithBalance(t){const e=await b2.getMyTokensWithBalance(t);return be.setTokenBalance(e,k.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:G8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},ut=st({tokenBalances:[],loading:!1}),qe=rn({state:ut,subscribe(t){return Xt(ut,()=>t(ut))},subscribeKey(t,e){return hr(ut,t,e)},setToken(t){t&&(ut.token=wl(t))},setTokenAmount(t){ut.sendTokenAmount=t},setReceiverAddress(t){ut.receiverAddress=t},setReceiverProfileImageUrl(t){ut.receiverProfileImageUrl=t},setReceiverProfileName(t){ut.receiverProfileName=t},setNetworkBalanceInUsd(t){ut.networkBalanceInUSD=t},setLoading(t){ut.loading=t},async sendToken(){try{switch(qe.setLoading(!0),k.state.activeCaipNetwork?.chainNamespace){case"eip155":await qe.sendEvmToken();return;case"solana":await qe.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{qe.setLoading(!1)}},async sendEvmToken(){const t=k.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=xn(t);if(!qe.state.sendTokenAmount||!qe.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!qe.state.token)throw new Error("A token is required");qe.state.token?.address?(Te.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ki.ACCOUNT_TYPES.SMART_ACCOUNT,token:qe.state.token.address,amount:qe.state.sendTokenAmount,network:k.state.activeCaipNetwork?.caipNetworkId||""}}),await qe.sendERC20Token({receiverAddress:qe.state.receiverAddress,tokenAddress:qe.state.token.address,sendTokenAmount:qe.state.sendTokenAmount,decimals:qe.state.token.quantity.decimals})):(Te.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ki.ACCOUNT_TYPES.SMART_ACCOUNT,token:qe.state.token.symbol||"",amount:qe.state.sendTokenAmount,network:k.state.activeCaipNetwork?.caipNetworkId||""}}),await qe.sendNativeToken({receiverAddress:qe.state.receiverAddress,sendTokenAmount:qe.state.sendTokenAmount,decimals:qe.state.token.quantity.decimals}))},async fetchTokenBalance(t){ut.loading=!0;const e=k.state.activeChain,r=k.state.activeCaipNetwork?.caipNetworkId,n=k.state.activeCaipNetwork?.chainNamespace,i=be.getCaipAddress(e)??k.state.activeCaipAddress,s=i?ne.getPlainAddress(i):void 0;if(ut.lastRetry&&!ne.isAllowedRetry(ut.lastRetry,30*Le.ONE_SEC_MS))return ut.loading=!1,[];try{if(s&&r&&n){const o=await b2.getMyTokensWithBalance();return ut.tokenBalances=o,ut.lastRetry=void 0,o}}catch(o){ut.lastRetry=Date.now(),t?.(o),We.showError("Token Balance Unavailable")}finally{ut.loading=!1}return[]},fetchNetworkBalance(){if(ut.tokenBalances.length===0)return;const t=U0.mapBalancesToSwapTokens(ut.tokenBalances);if(!t)return;const e=t.find(r=>r.address===G8());e&&(ut.networkBalanceInUSD=e?Vt.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){J.pushTransactionStack({});const e=t.receiverAddress,r=be.state.address,n=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await X.sendTransaction({chainNamespace:G.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)}),Te.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:xn("eip155")===Ki.ACCOUNT_TYPES.SMART_ACCOUNT,token:qe.state.token?.symbol||"",amount:t.sendTokenAmount,network:k.state.activeCaipNetwork?.caipNetworkId||""}}),X._getClient()?.updateBalance("eip155"),qe.resetSend()},async sendERC20Token(t){J.pushTransactionStack({onSuccess(){J.replace("Account")}});const e=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(be.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=ne.getPlainAddress(t.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");await X.writeContract({fromAddress:be.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:fee.getERC20Abi(r),chainNamespace:G.CHAIN.EVM}),qe.resetSend()}},async sendSolanaToken(){if(!qe.state.sendTokenAmount||!qe.state.receiverAddress)throw new Error("An amount and receiver address are required");J.pushTransactionStack({onSuccess(){J.replace("Account")}});let t;if(qe.state.token&&ne.isCaipAddress(qe.state.token.address)){const[,,e]=qe.state.token.address.split(":");t=e}await X.sendTransaction({chainNamespace:"solana",tokenMint:t,to:qe.state.receiverAddress,value:qe.state.sendTokenAmount}),X._getClient()?.updateBalance("solana"),qe.resetSend()},resetSend(){ut.token=void 0,ut.sendTokenAmount=void 0,ut.receiverAddress=void 0,ut.receiverProfileImageUrl=void 0,ut.receiverProfileName=void 0,ut.loading=!1,ut.tokenBalances=[]}}),Y8={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},y2={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ge=st({chains:See(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),k=rn({state:ge,subscribe(t){return Xt(ge,()=>{t(ge)})},subscribeKey(t,e){return hr(ge,t,e)},subscribeChainProp(t,e,r){let n;return Xt(ge.chains,()=>{const i=r||ge.activeChain;if(i){const s=ge.chains.get(i)?.[t];n!==s&&(n=s,e(s))}})},initialize(t,e,r){const{chainId:n,namespace:i}=oe.getActiveNetworkProps(),s=e?.find(u=>u.id.toString()===n?.toString()),a=t.find(u=>u?.namespace===i)||t?.[0],c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Y.state.enableEmbedded?new Set([...c]):new Set([...e?.map(u=>u.chainNamespace)??[]]);(t?.length===0||!a)&&(ge.noAdapters=!0),ge.noAdapters||(ge.activeChain=a?.namespace,ge.activeCaipNetwork=s,k.setChainNetworkData(a?.namespace,{caipNetwork:s}),ge.activeChain&&la.set({activeChain:a?.namespace})),l.forEach(u=>{const h=e?.filter(f=>f.chainNamespace===u),d=oe.getPreferredAccountTypes()||{},p={...Y.state.defaultAccountTypes,...d};k.state.chains.set(u,{namespace:u,networkState:st({...y2,caipNetwork:h?.[0]}),accountState:st({...Y8,preferredAccountType:p[u]}),caipNetworks:h??[],...r}),k.setRequestedCaipNetworks(h??[],u)})},removeAdapter(t){if(ge.activeChain===t){const e=Array.from(ge.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&k.setActiveCaipNetwork(r)}}ge.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ge.chains.set(t.namespace,{namespace:t.namespace,networkState:{...y2,caipNetwork:n[0]},accountState:Y8,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),k.setRequestedCaipNetworks(n?.filter(i=>i.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=ge.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),ge.chains.set(t.chainNamespace,{...e,caipNetworks:r}),k.setRequestedCaipNetworks(r,t.chainNamespace),te.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=ge.chains.get(t);if(r){const n=ge.activeCaipNetwork?.id===e,i=[...r.caipNetworks?.filter(s=>s.id!==e)||[]];n&&r?.caipNetworks?.[0]&&k.setActiveCaipNetwork(r.caipNetworks[0]),ge.chains.set(t,{...r,caipNetworks:i}),k.setRequestedCaipNetworks(i||[],t),i.length===0&&te.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=ge.chains.get(t);r&&(r.networkState={...r.networkState||y2,...e},ge.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ge.chains.get(t);if(n){const i={...n.accountState||Y8,...e};ge.chains.set(t,{...n,accountState:i}),(ge.chains.size===1||ge.activeChain===t)&&(e.caipAddress&&(ge.activeCaipAddress=e.caipAddress),be.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=ge.chains.get(t);if(r){const n={...r.networkState||y2,...e};ge.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){k.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){ge.activeChain=t;const e=t?ge.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(ge.activeCaipAddress=e?.accountState?.caipAddress,ge.activeCaipNetwork=r,k.setChainNetworkData(t,{caipNetwork:r}),oe.setActiveCaipNetworkId(r?.caipNetworkId),la.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;ge.activeChain!==t.chainNamespace&&k.setIsSwitchingNamespace(!0);const e=ge.chains.get(t.chainNamespace);ge.activeChain=t.chainNamespace,ge.activeCaipNetwork=t,k.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?ge.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:ge.activeCaipAddress=void 0,k.setAccountProp("caipAddress",ge.activeCaipAddress,t.chainNamespace),e&&be.replaceState(e.accountState),qe.resetSend(),la.set({activeChain:ge.activeChain,selectedNetworkId:ge.activeCaipNetwork?.caipNetworkId}),oe.setActiveCaipNetworkId(t.caipNetworkId),!k.checkIfSupportedNetwork(t.chainNamespace)&&Y.state.enableNetworkSwitch&&!Y.state.allowUnsupportedChain&&!X.state.wcBasic&&k.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=ge.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==k.state.activeChain,r=k.getNetworkData(t)?.caipNetwork,n=k.getCaipNetworkByNamespace(t,r?.id);e&&n&&await k.switchActiveNetwork(n)},async switchActiveNetwork(t){const e=k.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=!k.state.chains.get(e)?.caipNetworks?.some(s=>s.id===ge.activeCaipNetwork?.id),i=k.getNetworkControllerClient(t.chainNamespace);if(i){try{await i.switchCaipNetwork(t),n&&ke.close()}catch{J.goBack()}Te.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ge.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const r=ge.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ge.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ge.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=ge.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ge.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return ne.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return ge.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=k.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){k.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=k.getAllRequestedCaipNetworks().map(s=>s.chainNamespace),i=Array.from(new Set(n));te.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const t=[];return ge.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=k.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?ge.chains.get(t)?.networkState?.caipNetwork:ge.activeCaipNetwork},getActiveCaipAddress(){return ge.activeCaipAddress},getApprovedCaipNetworkIds(t){return ge.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const r=await k.getNetworkControllerClient()?.getApprovedCaipNetworksData();k.setAdapterNetworkState(t,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||ge.activeCaipNetwork?.caipNetworkId,n=k.getRequestedCaipNetworks(t);return n.length?n?.some(i=>i.caipNetworkId===r):!0},checkIfSupportedChainId(t){return ge.activeChain?k.getRequestedCaipNetworks(ge.activeChain)?.some(r=>r.id===t):!0},setSmartAccountEnabledNetworks(t,e){k.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=H8.caipNetworkIdToNumber(ge.activeCaipNetwork?.caipNetworkId),e=ge.activeChain;return!e||!t?!1:!!k.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){ke.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ge.activeCaipNetwork;return!!(t?.chainNamespace&&Le.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){k.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=k.state.chains.get(e)?.accountState?.preferredAccountType,n=Y.state.defaultAccountTypes[e];ge.activeCaipAddress=void 0,k.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),te.removeConnectorId(e)},setIsSwitchingNamespace(t){ge.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(ge.chains.forEach(r=>{G.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?ge.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||ge.activeChain;if(e)return k.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||ge.activeChain;if(e)return k.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=k.state.chains.get(t),n=r?.caipNetworks?.find(i=>i.id===e);return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=te.state.filterByNamespace;return(t?[ge.chains.get(t)]:Array.from(ge.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?k.getRequestedCaipNetworks(t):k.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ge.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ge.lastConnectedSIWECaipNetwork}}),Wee={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Nx=ne.getBlockchainApiUrl(),_n=st({clientId:null,api:new D0({baseUrl:Nx,clientId:null}),supportedChains:{http:[],ws:[]}}),Ae={state:_n,async get(t){const{st:e,sv:r}=Ae.getSdkProperties(),n=Y.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return _n.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Y.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{_n.supportedChains.http.length||await Ae.getSupportedNetworks()}catch{return!1}return _n.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ae.get({path:"v1/supported-chains"});return _n.supportedChains=t,t}catch{return _n.supportedChains}},async fetchIdentity({address:t}){const e=oe.getIdentityFromCacheForAddress(t);if(e)return e;const r=await Ae.get({path:`/v1/identity/${t}`,params:{sender:k.state.activeCaipAddress?ne.getPlainAddress(k.state.activeCaipAddress):void 0}});return oe.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:i}){if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=oe.getTransactionsCacheForAddress({address:t,chainId:i});if(o)return o;const a=await Ae.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:i},signal:r,cache:n});return oe.updateTransactionsCache({address:t,chainId:i,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=oe.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await _n.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Y.state.projectId},headers:{"Content-Type":"application/json"}});return oe.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=Ae.getSdkProperties();if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ae.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return _n.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Le.CONVERT_SLIPPAGE_TOLERANCE},projectId:Y.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:i}=Ae.getSdkProperties();if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Ae.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){const{st:n,sv:i}=Ae.getSdkProperties();if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))return We.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=oe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ae.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return oe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:`/v1/profile/reverse/${t}`,params:{sender:be.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?_n.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?(await _n.api.post({path:"/v1/generators/onrampurl",params:{projectId:Y.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ae.get({path:"/v1/onramp/options"})}catch{return Wee}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?await _n.api.post({path:"/v1/onramp/quote",params:{projectId:Y.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?Ae.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await Ae.isNetworkSupported(k.state.activeCaipNetwork?.caipNetworkId)?_n.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Y.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){_n.clientId=t,_n.api=new D0({baseUrl:Nx,clientId:t})}},X8={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Xv(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},b2={async getMyTokensWithBalance(t){const e=be.state.address,r=k.state.activeCaipNetwork,n=te.getConnectorId("eip155")===G.CONNECTOR_ID.AUTH;if(!e||!r)return[];const i=`${r.caipNetworkId}:${e}`,s=oe.getBalanceCacheForCaipAddress(i);if(s)return s.balances;if(r.chainNamespace===G.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await Ae.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=X8.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await X.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const i=await X.walletGetAssets({account:t,chainFilter:[r]});if(!X8.isWalletGetAssetsResponse(i))return null;const o=(i[r]||[]).map(a=>X8.createBalance(a,e.caipNetworkId));return oe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Cs=st({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),be=rn({state:Cs,replaceState(t){t&&Object.assign(Cs,wl(t))},subscribe(t){return k.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return k.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){k.setAccountProp("status",t,e)},getCaipAddress(t){if(t)return k.state.chains.get(t)?.accountState?.caipAddress},setCaipAddress(t,e){const r=t?ne.getPlainAddress(t):void 0;e===k.state.activeChain&&(k.state.activeCaipAddress=t),k.setAccountProp("caipAddress",t,e),k.setAccountProp("address",r,e)},setBalance(t,e,r){k.setAccountProp("balance",t,r),k.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){k.setAccountProp("profileName",t,e)},setProfileImage(t,e){k.setAccountProp("profileImage",t,e)},setUser(t,e){k.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){k.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){k.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){k.setAccountProp("currentTab",t,k.state.activeChain)},setTokenBalance(t,e){t&&k.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){k.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,r){if(!r)return;const n=k.state.chains.get(r)?.accountState?.addressLabels||new Map;n.set(t,e),k.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){if(!e)return;const r=k.state.chains.get(e)?.accountState?.addressLabels||new Map;r.delete(t),k.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){k.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){k.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&k.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){k.setAccountProp("socialWindow",t?wl(t):void 0,e)},setFarcasterUrl(t,e){k.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Cs.balanceLoading=!0;const e=k.state.activeCaipNetwork?.caipNetworkId,r=k.state.activeCaipNetwork?.chainNamespace,n=k.state.activeCaipAddress,i=n?ne.getPlainAddress(n):void 0;if(Cs.lastRetry&&!ne.isAllowedRetry(Cs.lastRetry,30*Le.ONE_SEC_MS))return Cs.balanceLoading=!1,[];try{if(i&&e&&r){const s=await b2.getMyTokensWithBalance();return be.setTokenBalance(s,r),Cs.lastRetry=void 0,Cs.balanceLoading=!1,s}}catch(s){Cs.lastRetry=Date.now(),t?.(s),We.showError("Token Balance Unavailable")}finally{Cs.balanceLoading=!1}return[]},resetAccount(t){k.resetAccount(t)}}),Zee={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=k.state.activeCaipNetwork,n=J.state.data;if(t.id===r?.id)return;const s=be.getCaipAddress(k.state.activeChain),o=t.chainNamespace!==k.state.activeChain,a=be.getCaipAddress(t.chainNamespace),l=te.getConnectorId(k.state.activeChain)===G.CONNECTOR_ID.AUTH,u=G.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(h=>h===t.chainNamespace);e||l&&u?J.push("SwitchNetwork",{...n,network:t}):s&&o&&!a?J.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):J.push("SwitchNetwork",{...n,network:t})}},Sn=st({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ke=rn({state:Sn,subscribe(t){return Xt(Sn,()=>t(Sn))},subscribeKey(t,e){return hr(Sn,t,e)},async open(t){const e=t?.namespace,r=k.state.activeChain,n=e&&e!==r,i=k.getAccountData(t?.namespace)?.caipAddress,s=k.state.noAdapters;if(X.state.wcBasic?ce.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ce.prefetch(),te.setFilterByNamespace(t?.namespace),ke.setLoading(!0,e),e&&n){const o=k.getNetworkData(e)?.caipNetwork||k.getRequestedCaipNetworks(e)[0];o&&(s?(await k.switchActiveNetwork(o),J.push("ConnectingWalletConnectBasic")):Zee.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else Y.state.manualWCControl||s&&!i?ne.isMobile()?J.reset("AllWallets"):J.reset("ConnectingWalletConnectBasic"):t?.view?J.reset(t.view,t.data):i?J.reset("Account"):J.reset("Connect");Sn.open=!0,la.set({open:!0}),Te.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=Y.state.enableEmbedded,e=!!k.state.activeCaipAddress;Sn.open&&Te.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Sn.open=!1,J.reset("Connect"),ke.clearLoading(),t?e?J.replace("Account"):J.push("Connect"):la.set({open:!1}),X.resetUri()},setLoading(t,e){e&&Sn.loadingNamespaceMap.set(e,t),Sn.loading=t,la.set({loading:t})},clearLoading(){Sn.loadingNamespaceMap.clear(),Sn.loading=!1,la.set({loading:!1})},shake(){Sn.shake||(Sn.shake=!0,setTimeout(()=>{Sn.shake=!1},500))}}),L0={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},J8={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Ze=st({providers:Sx,selectedProvider:null,error:null,purchaseCurrency:L0,paymentCurrency:J8,purchaseCurrencies:[L0],paymentCurrencies:[],quotesLoading:!1}),Q8=rn({state:Ze,subscribe(t){return Xt(Ze,()=>t(Ze))},subscribeKey(t,e){return hr(Ze,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=k.state.activeChain,r=e===G.CHAIN.SOLANA?"SOL":"USDC",n=e?k.state.chains.get(e)?.accountState?.address??"":"",i=new URL(t.url);i.searchParams.append("publicKey",Iee),i.searchParams.append("destinationCurrencyCode",r),i.searchParams.append("walletAddress",n),i.searchParams.append("externalCustomerId",Y.state.projectId),Ze.selectedProvider={...t,url:i.toString()}}else Ze.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=Sx.filter(n=>e.includes(n.name));Ze.providers=r}else Ze.providers=[]},setPurchaseCurrency(t){Ze.purchaseCurrency=t},setPaymentCurrency(t){Ze.paymentCurrency=t},setPurchaseAmount(t){Q8.state.purchaseAmount=t},setPaymentAmount(t){Q8.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ae.getOnrampOptions();Ze.purchaseCurrencies=t.purchaseCurrencies,Ze.paymentCurrencies=t.paymentCurrencies,Ze.paymentCurrency=t.paymentCurrencies[0]||J8,Ze.purchaseCurrency=t.purchaseCurrencies[0]||L0,await ce.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ce.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Ze.quotesLoading=!0;try{const t=await Ae.getOnrampQuote({purchaseCurrency:Ze.purchaseCurrency,paymentCurrency:Ze.paymentCurrency,amount:Ze.paymentAmount?.toString()||"0",network:Ze.purchaseCurrency?.symbol});return Ze.quotesLoading=!1,Ze.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Ze.error=t.message,Ze.quotesLoading=!1,null}finally{Ze.quotesLoading=!1}},resetState(){Ze.selectedProvider=null,Ze.error=null,Ze.purchaseCurrency=L0,Ze.paymentCurrency=J8,Ze.purchaseCurrencies=[L0],Ze.paymentCurrencies=[],Ze.paymentAmount=void 0,Ze.purchaseAmount=void 0,Ze.quotesLoading=!1}}),ic={getGasPriceInEther(t,e){const r=e*t;return Number(r)/1e18},getGasPriceInUSD(t,e,r){const n=ic.getGasPriceInEther(e,r);return Vt.bigNumber(t).times(n).toNumber()},getPriceImpact({sourceTokenAmount:t,sourceTokenPriceInUSD:e,toTokenPriceInUSD:r,toTokenAmount:n}){const i=Vt.bigNumber(t).times(e),s=Vt.bigNumber(n).times(r);return i.minus(s).div(i).times(100).toNumber()},getMaxSlippage(t,e){const r=Vt.bigNumber(t).div(100);return Vt.multiply(e,r).toNumber()},getProviderFee(t,e=.0085){return Vt.bigNumber(t).times(e).toString()},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return Vt.bigNumber(t).eq(0)?!0:Vt.bigNumber(Vt.bigNumber(r)).gt(t)},isInsufficientSourceTokenForSwap(t,e,r){const n=r?.find(s=>s.address===e)?.quantity?.numeric;return Vt.bigNumber(n||"0").lt(t)}},Tx=15e4,Kee=6,sn={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:Le.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0},W=st({...sn}),v2={state:W,subscribe(t){return Xt(W,()=>t(W))},subscribeKey(t,e){return hr(W,t,e)},getParams(){const t=k.state.activeChain,e=be.getCaipAddress(t)??k.state.activeCaipAddress,r=ne.getPlainAddress(e),n=G8(),i=te.getConnectorId(k.state.activeChain);if(!r)throw new Error("No address found to swap the tokens from.");const s=!W.toToken?.address||!W.toToken?.decimals,o=!W.sourceToken?.address||!W.sourceToken?.decimals||!Vt.bigNumber(W.sourceTokenAmount).gt(0),a=!W.sourceTokenAmount;return{networkAddress:n,fromAddress:r,fromCaipAddress:e,sourceTokenAddress:W.sourceToken?.address,toTokenAddress:W.toToken?.address,toTokenAmount:W.toTokenAmount,toTokenDecimals:W.toToken?.decimals,sourceTokenAmount:W.sourceTokenAmount,sourceTokenDecimals:W.sourceToken?.decimals,invalidToToken:s,invalidSourceToken:o,invalidSourceTokenAmount:a,availableToSwap:e&&!s&&!o&&!a,isAuthConnector:i===G.CONNECTOR_ID.AUTH}},setSourceToken(t){if(!t){W.sourceToken=t,W.sourceTokenAmount="",W.sourceTokenPriceInUSD=0;return}W.sourceToken=t,Oe.setTokenPrice(t.address,"sourceToken")},setSourceTokenAmount(t){W.sourceTokenAmount=t},setToToken(t){if(!t){W.toToken=t,W.toTokenAmount="",W.toTokenPriceInUSD=0;return}W.toToken=t,Oe.setTokenPrice(t.address,"toToken")},setToTokenAmount(t){W.toTokenAmount=t?Vt.toFixed(t,Kee):""},async setTokenPrice(t,e){let r=W.tokensPriceMap[t]||0;r||(W.loadingPrices=!0,r=await Oe.getAddressPrice(t)),e==="sourceToken"?W.sourceTokenPriceInUSD=r:e==="toToken"&&(W.toTokenPriceInUSD=r),W.loadingPrices&&(W.loadingPrices=!1),Oe.getParams().availableToSwap&&Oe.swapTokens()},switchTokens(){if(W.initializing||!W.initialized)return;const t=W.toToken?{...W.toToken}:void 0,e=W.sourceToken?{...W.sourceToken}:void 0,r=t&&W.toTokenAmount===""?"1":W.toTokenAmount;Oe.setSourceToken(t),Oe.setToToken(e),Oe.setSourceTokenAmount(r),Oe.setToTokenAmount(""),Oe.swapTokens()},resetState(){W.myTokensWithBalance=sn.myTokensWithBalance,W.tokensPriceMap=sn.tokensPriceMap,W.initialized=sn.initialized,W.initializing=sn.initializing,W.sourceToken=sn.sourceToken,W.sourceTokenAmount=sn.sourceTokenAmount,W.sourceTokenPriceInUSD=sn.sourceTokenPriceInUSD,W.toToken=sn.toToken,W.toTokenAmount=sn.toTokenAmount,W.toTokenPriceInUSD=sn.toTokenPriceInUSD,W.networkPrice=sn.networkPrice,W.networkTokenSymbol=sn.networkTokenSymbol,W.networkBalanceInUSD=sn.networkBalanceInUSD,W.inputError=sn.inputError},resetValues(){const{networkAddress:t}=Oe.getParams(),e=W.tokens?.find(r=>r.address===t);Oe.setSourceToken(e),Oe.setToToken(void 0)},getApprovalLoadingState(){return W.loadingApprovalTransaction},clearError(){W.transactionError=void 0},async initializeState(){if(!W.initializing){if(W.initializing=!0,!W.initialized)try{await Oe.fetchTokens(),W.initialized=!0}catch{W.initialized=!1,We.showError("Failed to initialize swap"),J.goBack()}W.initializing=!1}},async fetchTokens(){const{networkAddress:t}=Oe.getParams();await Oe.getNetworkTokenPrice(),await Oe.getMyTokensWithBalance();const e=W.myTokensWithBalance?.find(r=>r.address===t);e&&(W.networkTokenSymbol=e.symbol,Oe.setSourceToken(e),Oe.setSourceTokenAmount("0"))},async getTokenList(){const t=k.state.activeCaipNetwork?.caipNetworkId;if(!(W.caipNetworkId===t&&W.tokens))try{W.tokensLoading=!0;const e=await U0.getTokenList(t);W.tokens=e,W.caipNetworkId=t,W.popularTokens=e.sort((r,n)=>r.symbol<n.symbol?-1:r.symbol>n.symbol?1:0),W.suggestedTokens=e.filter(r=>!!Le.SWAP_SUGGESTED_TOKENS.includes(r.symbol))}catch{W.tokens=[],W.popularTokens=[],W.suggestedTokens=[]}finally{W.tokensLoading=!1}},async getAddressPrice(t){const e=W.tokensPriceMap[t];if(e)return e;const n=(await Ae.fetchTokenPrice({addresses:[t]}))?.fungibles||[],s=[...W.tokens||[],...W.myTokensWithBalance||[]]?.find(c=>c.address===t)?.symbol,o=n.find(c=>c.symbol.toLowerCase()===s?.toLowerCase())?.price||0,a=parseFloat(o.toString());return W.tokensPriceMap[t]=a,a},async getNetworkTokenPrice(){const{networkAddress:t}=Oe.getParams(),r=(await Ae.fetchTokenPrice({addresses:[t]}).catch(()=>(We.showError("Failed to fetch network token price"),{fungibles:[]}))).fungibles?.[0],n=r?.price.toString()||"0";W.tokensPriceMap[t]=parseFloat(n),W.networkTokenSymbol=r?.symbol||"",W.networkPrice=n},async getMyTokensWithBalance(t){const e=await b2.getMyTokensWithBalance(t),r=U0.mapBalancesToSwapTokens(e);r&&(await Oe.getInitialGasPrice(),Oe.setBalances(r))},setBalances(t){const{networkAddress:e}=Oe.getParams(),r=k.state.activeCaipNetwork;if(!r)return;const n=t.find(i=>i.address===e);t.forEach(i=>{W.tokensPriceMap[i.address]=i.price||0}),W.myTokensWithBalance=t.filter(i=>i.address.startsWith(r.caipNetworkId)),W.networkBalanceInUSD=n?Vt.multiply(n.quantity.numeric,n.price).toString():"0"},async getInitialGasPrice(){const t=await U0.fetchGasPrice();if(!t)return{gasPrice:null,gasPriceInUSD:null};switch(k.state?.activeCaipNetwork?.chainNamespace){case G.CHAIN.SOLANA:return W.gasFee=t.standard??"0",W.gasPriceInUSD=Vt.multiply(t.standard,W.networkPrice).div(1e9).toNumber(),{gasPrice:BigInt(W.gasFee),gasPriceInUSD:Number(W.gasPriceInUSD)};case G.CHAIN.EVM:default:const e=t.standard??"0",r=BigInt(e),n=BigInt(Tx),i=ic.getGasPriceInUSD(W.networkPrice,n,r);return W.gasFee=e,W.gasPriceInUSD=i,{gasPrice:r,gasPriceInUSD:i}}},async swapTokens(){const t=be.state.address,e=W.sourceToken,r=W.toToken,n=Vt.bigNumber(W.sourceTokenAmount).gt(0);if(n||Oe.setToTokenAmount(""),!r||!e||W.loadingPrices||!n)return;W.loadingQuote=!0;const i=Vt.bigNumber(W.sourceTokenAmount).times(10**e.decimals).round(0);try{const s=await Ae.fetchSwapQuote({userAddress:t,from:e.address,to:r.address,gasPrice:W.gasFee,amount:i.toString()});W.loadingQuote=!1;const o=s?.quotes?.[0]?.toAmount;if(!o){Qt.open({displayMessage:"Incorrect amount",debugMessage:"Please enter a valid amount"},"error");return}const a=Vt.bigNumber(o).div(10**r.decimals).toString();Oe.setToTokenAmount(a),Oe.hasInsufficientToken(W.sourceTokenAmount,e.address)?W.inputError="Insufficient balance":(W.inputError=void 0,Oe.setTransactionDetails())}catch{W.loadingQuote=!1,W.inputError="Insufficient balance"}},async getTransaction(){const{fromCaipAddress:t,availableToSwap:e}=Oe.getParams(),r=W.sourceToken,n=W.toToken;if(!(!t||!e||!r||!n||W.loadingQuote))try{W.loadingBuildTransaction=!0;const i=await U0.fetchSwapAllowance({userAddress:t,tokenAddress:r.address,sourceTokenAmount:W.sourceTokenAmount,sourceTokenDecimals:r.decimals});let s;return i?s=await Oe.createSwapTransaction():s=await Oe.createAllowanceTransaction(),W.loadingBuildTransaction=!1,W.fetchError=!1,s}catch{J.goBack(),We.showError("Failed to check allowance"),W.loadingBuildTransaction=!1,W.approvalTransaction=void 0,W.swapTransaction=void 0,W.fetchError=!0;return}},async createAllowanceTransaction(){const{fromCaipAddress:t,sourceTokenAddress:e,toTokenAddress:r}=Oe.getParams();if(!(!t||!r)){if(!e)throw new Error("createAllowanceTransaction - No source token address found.");try{const n=await Ae.generateApproveCalldata({from:e,to:r,userAddress:t}),i=ne.getPlainAddress(n.tx.from);if(!i)throw new Error("SwapController:createAllowanceTransaction - address is required");const s={data:n.tx.data,to:i,gasPrice:BigInt(n.tx.eip155.gasPrice),value:BigInt(n.tx.value),toAmount:W.toTokenAmount};return W.swapTransaction=void 0,W.approvalTransaction={data:s.data,to:s.to,gasPrice:s.gasPrice,value:s.value,toAmount:s.toAmount},{data:s.data,to:s.to,gasPrice:s.gasPrice,value:s.value,toAmount:s.toAmount}}catch{J.goBack(),We.showError("Failed to create approval transaction"),W.approvalTransaction=void 0,W.swapTransaction=void 0,W.fetchError=!0;return}}},async createSwapTransaction(){const{networkAddress:t,fromCaipAddress:e,sourceTokenAmount:r}=Oe.getParams(),n=W.sourceToken,i=W.toToken;if(!e||!r||!n||!i)return;const s=X.parseUnits(r,n.decimals)?.toString();try{const o=await Ae.generateSwapCalldata({userAddress:e,from:n.address,to:i.address,amount:s,disableEstimate:!0}),a=n.address===t,c=BigInt(o.tx.eip155.gas),l=BigInt(o.tx.eip155.gasPrice),u=ne.getPlainAddress(o.tx.to);if(!u)throw new Error("SwapController:createSwapTransaction - address is required");const h={data:o.tx.data,to:u,gas:c,gasPrice:l,value:BigInt(a?s??"0":"0"),toAmount:W.toTokenAmount};return W.gasPriceInUSD=ic.getGasPriceInUSD(W.networkPrice,c,l),W.approvalTransaction=void 0,W.swapTransaction=h,h}catch{J.goBack(),We.showError("Failed to create transaction"),W.approvalTransaction=void 0,W.swapTransaction=void 0,W.fetchError=!0;return}},onEmbeddedWalletApprovalSuccess(){We.showLoading("Approve limit increase in your wallet"),J.replace("SwapPreview")},async sendTransactionForApproval(t){const{fromAddress:e,isAuthConnector:r}=Oe.getParams();W.loadingApprovalTransaction=!0,r?J.pushTransactionStack({onSuccess:Oe.onEmbeddedWalletApprovalSuccess}):We.showLoading("Approve limit increase in your wallet");try{await X.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:G.CHAIN.EVM}),await Oe.swapTokens(),await Oe.getTransaction(),W.approvalTransaction=void 0,W.loadingApprovalTransaction=!1}catch(i){const s=i;W.transactionError=s?.displayMessage,W.loadingApprovalTransaction=!1,We.showError(s?.displayMessage||"Transaction error"),Te.sendEvent({type:"track",event:"SWAP_APPROVAL_ERROR",properties:{message:s?.displayMessage||s?.message||"Unknown",network:k.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Oe.state.sourceToken?.symbol||"",swapToToken:Oe.state.toToken?.symbol||"",swapFromAmount:Oe.state.sourceTokenAmount||"",swapToAmount:Oe.state.toTokenAmount||"",isSmartAccount:xn(G.CHAIN.EVM)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}})}},async sendTransactionForSwap(t){if(!t)return;const{fromAddress:e,toTokenAmount:r,isAuthConnector:n}=Oe.getParams();W.loadingTransaction=!0;const i=`Swapping ${W.sourceToken?.symbol} to ${Vt.formatNumberToLocalString(r,3)} ${W.toToken?.symbol}`,s=`Swapped ${W.sourceToken?.symbol} to ${Vt.formatNumberToLocalString(r,3)} ${W.toToken?.symbol}`;n?J.pushTransactionStack({onSuccess(){J.replace("Account"),We.showLoading(i),v2.resetState()}}):We.showLoading("Confirm transaction in your wallet");try{const o=[W.sourceToken?.address,W.toToken?.address].join(","),a=await X.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:G.CHAIN.EVM});return W.loadingTransaction=!1,We.showSuccess(s),Te.sendEvent({type:"track",event:"SWAP_SUCCESS",properties:{network:k.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Oe.state.sourceToken?.symbol||"",swapToToken:Oe.state.toToken?.symbol||"",swapFromAmount:Oe.state.sourceTokenAmount||"",swapToAmount:Oe.state.toTokenAmount||"",isSmartAccount:xn(G.CHAIN.EVM)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}}),v2.resetState(),n||J.replace("Account"),v2.getMyTokensWithBalance(o),a}catch(o){const a=o;W.transactionError=a?.displayMessage,W.loadingTransaction=!1,We.showError(a?.displayMessage||"Transaction error"),Te.sendEvent({type:"track",event:"SWAP_ERROR",properties:{message:a?.displayMessage||a?.message||"Unknown",network:k.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Oe.state.sourceToken?.symbol||"",swapToToken:Oe.state.toToken?.symbol||"",swapFromAmount:Oe.state.sourceTokenAmount||"",swapToAmount:Oe.state.toTokenAmount||"",isSmartAccount:xn(G.CHAIN.EVM)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}});return}},hasInsufficientToken(t,e){return ic.isInsufficientSourceTokenForSwap(t,e,W.myTokensWithBalance)},setTransactionDetails(){const{toTokenAddress:t,toTokenDecimals:e}=Oe.getParams();!t||!e||(W.gasPriceInUSD=ic.getGasPriceInUSD(W.networkPrice,BigInt(W.gasFee),BigInt(Tx)),W.priceImpact=ic.getPriceImpact({sourceTokenAmount:W.sourceTokenAmount,sourceTokenPriceInUSD:W.sourceTokenPriceInUSD,toTokenPriceInUSD:W.toTokenPriceInUSD,toTokenAmount:W.toTokenAmount}),W.maxSlippage=ic.getMaxSlippage(W.slippage,W.toTokenAmount),W.providerFee=ic.getProviderFee(W.sourceTokenAmount))}},Oe=rn(v2),Yi=st({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),F0=rn({state:Yi,subscribe(t){return Xt(Yi,()=>t(Yi))},subscribeKey(t,e){return hr(Yi,t,e)},showTooltip({message:t,triggerRect:e,variant:r}){Yi.open=!0,Yi.message=t,Yi.triggerRect=e,Yi.variant=r},hide(){Yi.open=!1,Yi.message="",Yi.triggerRect={width:0,height:0,top:0,left:0}}}),kx=2147483648,Gee={convertEVMChainIdToCoinType(t){if(t>=kx)throw new Error("Invalid chainId");return(kx|t)>>>0}},bi=st({suggestions:[],loading:!1}),H0=rn({state:bi,subscribe(t){return Xt(bi,()=>t(bi))},subscribeKey(t,e){return hr(bi,t,e)},async resolveName(t){try{return await Ae.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await Ae.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{bi.loading=!0,bi.suggestions=[];const e=await Ae.getEnsNameSuggestions(t);return bi.suggestions=e.suggestions||[],bi.suggestions}catch(e){const r=H0.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{bi.loading=!1}},async getNamesForAddress(t){try{if(!k.state.activeCaipNetwork)return[];const r=oe.getEnsFromCacheForAddress(t);if(r)return r;const n=await Ae.reverseLookupEnsName({address:t});return oe.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=H0.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=k.state.activeCaipNetwork,r=be.state.address,n=te.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");bi.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});J.pushTransactionStack({onCancel(){J.replace("RegisterAccountName")}});const s=await X.signMessage(i);bi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Gee.convertEVMChainIdToCoinType(Number(o));await Ae.registerEnsName({coinType:a,address:r,signature:s,message:i}),be.setProfileName(t,e.chainNamespace),oe.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),J.replace("RegisterAccountNameSuccess")}catch(i){const s=H0.parseEnsApiError(i,`Error registering name ${t}`);throw J.replace("RegisterAccountName"),new Error(s)}finally{bi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}});st({isLegalCheckboxChecked:!1}),st({paymentAsset:null,amount:10,tokenAmount:0,priceLoading:!1,error:null,exchanges:[],isLoading:!1,currentPayment:void 0,isPaymentInProgress:!1,paymentId:"",assets:[]});var Yee=Object.defineProperty,Xee=(t,e,r)=>e in t?Yee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rx=(t,e,r)=>Xee(t,typeof e!="symbol"?e+"":e,r);class Jee extends Gn{constructor(e){super(),this.opts=e,Rx(this,"protocol","wc"),Rx(this,"version",2)}}var Qee=Object.defineProperty,ete=(t,e,r)=>e in t?Qee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tte=(t,e,r)=>ete(t,typeof e!="symbol"?e+"":e,r);class rte extends Gn{constructor(e,r){super(),this.core=e,this.logger=r,tte(this,"records",new Map)}}class nte{constructor(e,r){this.logger=e,this.core=r}}class ite extends Gn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class ste extends Gn{constructor(e){super()}}class ote{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class ate extends Gn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class cte extends Gn{constructor(e,r){super(),this.core=e,this.logger=r}}class lte{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}}class ute{constructor(e,r){this.projectId=e,this.logger=r}}class hte{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}}var dte=Object.defineProperty,pte=(t,e,r)=>e in t?dte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dx=(t,e,r)=>pte(t,typeof e!="symbol"?e+"":e,r);class fte{constructor(e){this.opts=e,Dx(this,"protocol","wc"),Dx(this,"version",2)}}class gte{constructor(e){this.client=e}}function j0(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function e6(t){return j0(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Bx="2.31.0";let t6={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${Bx}`};class vl extends Error{constructor(e,r={}){const n=r.cause instanceof vl?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof vl&&r.cause.docsPath||r.docsPath,s=t6.getDocsUrl?.({...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...t6.version?[`Version: ${t6.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=Bx}walk(e){return Mx(this,e)}}function Mx(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Mx(t.cause,e):e?null:t}class Ux extends vl{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function oh(t,{dir:e,size:r=32}={}){return typeof t=="string"?mte(t,{dir:e,size:r}):wte(t,{dir:e,size:r})}function mte(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new Ux({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function wte(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new Ux({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class yte extends vl{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class bte extends vl{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ah(t,{size:e}){if(e6(t)>e)throw new bte({givenSize:e6(t),maxSize:e})}function r6(t,e={}){const{signed:r}=e;e.size&&ah(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function vte(t,e={}){return Number(r6(t,e))}const Ete=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function n6(t,e={}){return typeof t=="number"||typeof t=="bigint"?i6(t,e):typeof t=="string"?$te(t,e):typeof t=="boolean"?Cte(t,e):Lx(t,e)}function Cte(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(ah(r,{size:e.size}),oh(r,{size:e.size})):r}function Lx(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Ete[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(ah(n,{size:e.size}),oh(n,{dir:"right",size:e.size})):n}function i6(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new yte({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?oh(a,{size:n}):a}const Ate=new TextEncoder;function $te(t,e={}){const r=Ate.encode(t);return Lx(r,e)}const xte=new TextEncoder;function _te(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ite(t,e):typeof t=="boolean"?Ste(t,e):j0(t)?Hx(t,e):jx(t,e)}function Ste(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(ah(r,{size:e.size}),oh(r,{size:e.size})):r}const ua={zero:48,nine:57,A:65,F:70,a:97,f:102};function Fx(t){if(t>=ua.zero&&t<=ua.nine)return t-ua.zero;if(t>=ua.A&&t<=ua.F)return t-(ua.A-10);if(t>=ua.a&&t<=ua.f)return t-(ua.a-10)}function Hx(t,e={}){let r=t;e.size&&(ah(r,{size:e.size}),r=oh(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=Fx(n.charCodeAt(a++)),l=Fx(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new vl(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function Ite(t,e){const r=i6(t,e);return Hx(r)}function jx(t,e={}){const r=xte.encode(t);return typeof e.size=="number"?(ah(r,{size:e.size}),oh(r,{dir:"right",size:e.size})):r}function Vx(t,e){const r=e||"hex",n=Tf(j0(t,{strict:!1})?_te(t):t);return r==="bytes"?n:n6(n)}class zx extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const s6=new zx(8192);function Ote(t,e){if(s6.has(`${t}.${e}`))return s6.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=Vx(jx(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return s6.set(`${t}.${e}`,s),s}function Pte(t){const e=Vx(`0x${t.substring(4)}`).substring(26);return Ote(`0x${e}`)}async function Nte({hash:t,signature:e}){const r=j0(t)?t:n6(t),{secp256k1:n}=await Promise.resolve().then(function(){return Zre});return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,p=Number(d??h),f=qx(p);return new n.Signature(r6(l),r6(u)).addRecoveryBit(f)}const o=j0(e)?e:n6(e);if(e6(o)!==65)throw new Error("invalid signature length");const a=vte(`0x${o.slice(130)}`),c=qx(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function qx(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Tte({hash:t,signature:e}){return Pte(await Nte({hash:t,signature:e}))}const kte="0.1.1";function Rte(){return kte}class on extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof on){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof on&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Rte()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return Wx(this,e)}}function Wx(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Wx(t.cause,e):e?null:t}function Dte(t,e){if(Gx(t)>e)throw new Vte({givenSize:Gx(t),maxSize:e})}const ha={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zx(t){if(t>=ha.zero&&t<=ha.nine)return t-ha.zero;if(t>=ha.A&&t<=ha.F)return t-(ha.A-10);if(t>=ha.a&&t<=ha.f)return t-(ha.a-10)}function Bte(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new zte({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function o6(t,e){if(c6(t)>e)throw new Xte({givenSize:c6(t),maxSize:e})}function Kx(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new Jte({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const Mte=new TextEncoder;function Ute(t){return t instanceof Uint8Array?t:typeof t=="string"?Fte(t):Lte(t)}function Lte(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Fte(t,e={}){const{size:r}=e;let n=t;r&&(o6(t,r),n=a6(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=Zx(i.charCodeAt(c++)),u=Zx(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new on(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function Hte(t,e={}){const{size:r}=e,n=Mte.encode(t);return typeof r=="number"?(Dte(n,r),jte(n,r)):n}function jte(t,e){return Bte(t,{dir:"right",size:e})}function Gx(t){return t.length}class Vte extends on{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class zte extends on{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const qte=new TextEncoder,Wte=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yx(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function Zte(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(o6(r,e.size),E2(r,e.size)):r}function Xx(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Wte[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(o6(n,e.size),a6(n,e.size)):n}function Kte(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new Yte({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?E2(c,n):c}function Gte(t,e={}){return Xx(qte.encode(t),e)}function E2(t,e){return Kx(t,{dir:"left",size:e})}function a6(t,e){return Kx(t,{dir:"right",size:e})}function c6(t){return Math.ceil((t.length-2)/2)}class Yte extends on{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Xte extends on{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Jte extends on{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}new zx(128),i6(0,{size:32});function Qte(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Tf(Ute(t));return r==="Bytes"?n:Xx(n)}class ere extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const l6={checksum:new ere(8192)}.checksum,tre=/^0x[a-fA-F0-9]{40}$/;function Jx(t,e={}){const{strict:r=!0}=e;if(!tre.test(t))throw new Qx({address:t,cause:new nre});if(r){if(t.toLowerCase()===t)return;if(rre(t)!==t)throw new Qx({address:t,cause:new ire})}}function rre(t){if(l6.has(t))return l6.get(t);Jx(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=Qte(Hte(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return l6.set(t,i),i}class Qx extends on{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class nre extends on{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class ire extends on{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const sre=/^(.*)\[([0-9]*)\]$/,ore=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,are=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function u6(t,e){if(t.length!==e.length)throw new lre({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(u6.encode(i,s))}return Yx(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return Jx(c),E2(c.toLowerCase(),i?32:0)}if(r==="string")return Gte(n);if(r==="bytes")return n;if(r==="bool")return E2(Zte(n),i?32:1);const s=r.match(are);if(s){const[c,l,u="256"]=s,h=Number.parseInt(u)/8;return Kte(n,{size:i?32:h,signed:l==="int"})}const o=r.match(ore);if(o){const[c,l]=o;if(Number.parseInt(l)!==(n.length-2)/2)throw new cre({expectedSize:Number.parseInt(l),value:n});return a6(n,i?32:0)}const a=r.match(sre);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let h=0;h<n.length;h++)u.push(e(l,n[h],!0));return u.length===0?"0x":Yx(...u)}throw new ure(r)}t.encode=e})(u6||(u6={}));class cre extends on{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${c6(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class lre extends on{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ure extends on{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h6=BigInt(0),d6=BigInt(1);function V0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sc(t){if(!V0(t))throw new Error("Uint8Array expected")}function z0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function C2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function e_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?h6:BigInt("0x"+t)}const t_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function q0(t){if(sc(t),t_)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=hre[t[r]];return e}const da={_0:48,_9:57,A:65,F:70,a:97,f:102};function r_(t){if(t>=da._0&&t<=da._9)return t-da._0;if(t>=da.A&&t<=da.F)return t-(da.A-10);if(t>=da.a&&t<=da.f)return t-(da.a-10)}function A2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(t_)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=r_(t.charCodeAt(s)),a=r_(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function As(t){return e_(q0(t))}function n_(t){return sc(t),e_(q0(Uint8Array.from(t).reverse()))}function El(t,e){return A2(t.toString(16).padStart(e*2,"0"))}function i_(t,e){return El(t,e).reverse()}function _r(t,e,r){let n;if(typeof e=="string")try{n=A2(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(V0(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function vi(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];sc(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function p6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const f6=t=>typeof t=="bigint"&&h6<=t;function W0(t,e,r){return f6(t)&&f6(e)&&f6(r)&&e<=t&&t<r}function Cl(t,e,r,n){if(!W0(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function dre(t){let e;for(e=0;t>h6;t>>=d6,e+=1);return e}const $2=t=>(d6<<BigInt(t))-d6,g6=t=>new Uint8Array(t),s_=t=>Uint8Array.from(t);function pre(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=g6(t),i=g6(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...h)=>r(i,n,...h),c=(h=g6(0))=>{i=a(s_([0]),h),n=a(),h.length!==0&&(i=a(s_([1]),h),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){n=a();const p=n.slice();d.push(p),h+=n.length}return vi(...d)};return(h,d)=>{o(),c(h);let p;for(;!(p=d(l()));)c();return o(),p}}const fre={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||V0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Z0(t,e,r={}){const n=(i,s,o)=>{const a=fre[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function o_(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const In=BigInt(0),an=BigInt(1),Al=BigInt(2),gre=BigInt(3),a_=BigInt(4),c_=BigInt(5),l_=BigInt(8);function dr(t,e){const r=t%e;return r>=In?r:e+r}function Ei(t,e,r){let n=t;for(;e-- >In;)n*=n,n%=r;return n}function m6(t,e){if(t===In)throw new Error("invert: expected non-zero number");if(e<=In)throw new Error("invert: expected positive modulus, got "+e);let r=dr(t,e),n=e,i=In,s=an;for(;r!==In;){const a=n/r,c=n%r,l=i-s*a;n=r,r=c,i=s,s=l}if(n!==an)throw new Error("invert: does not exist");return dr(i,e)}function u_(t,e){const r=(t.ORDER+an)/a_,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function mre(t,e){const r=(t.ORDER-c_)/l_,n=t.mul(e,Al),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,Al),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function wre(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-an,r=0;for(;e%Al===In;)e/=Al,r++;let n=Al;const i=w6(t);for(;d_(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return u_;let s=i.pow(n,e);const o=(e+an)/Al;return function(c,l){if(c.is0(l))return l;if(d_(c,l)!==1)throw new Error("Cannot find square root");let u=r,h=c.mul(c.ONE,s),d=c.pow(l,e),p=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let f=1,g=c.sqr(d);for(;!c.eql(g,c.ONE);)if(f++,g=c.sqr(g),f===u)throw new Error("Cannot find square root");const w=an<<BigInt(u-f-1),v=c.pow(h,w);u=f,h=c.sqr(v),d=c.mul(d,h),p=c.mul(p,v)}return p}}function yre(t){return t%a_===gre?u_:t%l_===c_?mre:wre(t)}const bre=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function h_(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=bre.reduce((n,i)=>(n[i]="function",n),e);return Z0(t,r)}function vre(t,e,r){if(r<In)throw new Error("invalid exponent, negatives unsupported");if(r===In)return t.ONE;if(r===an)return e;let n=t.ONE,i=e;for(;r>In;)r&an&&(n=t.mul(n,i)),i=t.sqr(i),r>>=an;return n}function x2(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function d_(t,e){const r=(t.ORDER-an)/Al,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function p_(t,e){e!==void 0&&mu(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function w6(t,e,r=!1,n={}){if(t<=In)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=p_(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:$2(i),ZERO:In,ONE:an,create:c=>dr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return In<=c&&c<t},is0:c=>c===In,isOdd:c=>(c&an)===an,neg:c=>dr(-c,t),eql:(c,l)=>c===l,sqr:c=>dr(c*c,t),add:(c,l)=>dr(c+l,t),sub:(c,l)=>dr(c-l,t),mul:(c,l)=>dr(c*l,t),pow:(c,l)=>vre(a,c,l),div:(c,l)=>dr(c*m6(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>m6(c,t),sqrt:n.sqrt||(c=>(o||(o=yre(t)),o(a,c))),toBytes:c=>r?i_(c,s):El(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?n_(c):As(c)},invertBatch:c=>x2(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function f_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function g_(t){const e=f_(t);return e+Math.ceil(e/2)}function Ere(t,e,r=!1){const n=t.length,i=f_(e),s=g_(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?n_(t):As(t),a=dr(o,e-an)+an;return r?i_(a,i):El(a,i)}const m_=BigInt(0),y6=BigInt(1);function b6(t,e){const r=e.negate();return t?r:e}function w_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function v6(t,e){w_(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=$2(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function y_(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=y6);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,p=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:l}}function Cre(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Are(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const E6=new WeakMap,b_=new WeakMap;function C6(t){return b_.get(t)||1}function $re(t,e){return{constTimeNegate:b6,hasPrecomputes(r){return C6(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>m_;)n&y6&&(i=i.add(s)),s=s.double(),n>>=y6;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=v6(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){let s=t.ZERO,o=t.BASE;const a=v6(r,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:f}=y_(i,c,a);i=l,h?o=o.add(b6(p,n[f])):s=s.add(b6(d,n[u]))}return{p:s,f:o}},wNAFUnsafe(r,n,i,s=t.ZERO){const o=v6(r,e);for(let a=0;a<o.windows&&i!==m_;a++){const{nextN:c,offset:l,isZero:u,isNeg:h}=y_(i,a,o);if(i=c,!u){const d=n[l];s=s.add(h?d.negate():d)}}return s},getPrecomputes(r,n,i){let s=E6.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&E6.set(n,i(s))),s},wNAFCached(r,n,i){const s=C6(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=C6(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){w_(n,e),b_.set(r,n),E6.delete(r)}}}function xre(t,e,r,n){Cre(r,t),Are(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=dre(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=$2(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let p=h;p>=0;p-=c){u.fill(o);for(let g=0;g<s;g++){const w=n[g],v=Number(w>>BigInt(p)&l);u[v]=u[v].add(r[g])}let f=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),f=f.add(w);if(d=d.add(f),p!==0)for(let g=0;g<c;g++)d=d.double()}return d}function v_(t){return h_(t.Fp),Z0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...p_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function E_(t){t.lowS!==void 0&&z0("lowS",t.lowS),t.prehash!==void 0&&z0("prehash",t.prehash)}function _re(t){const e=v_(t);Z0(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class Sre extends Error{constructor(e=""){super(e)}}const pa={Err:Sre,_tlv:{encode:(t,e)=>{const{Err:r}=pa;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=C2(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?C2(i.length/2|128):"";return C2(t)+s+i+e},decode(t,e){const{Err:r}=pa;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=pa;if(t<Xi)throw new e("integer: negative integers are not allowed");let r=C2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=pa;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return As(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=pa,i=_r("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=pa,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}};function A6(t,e){return q0(El(t,e))}const Xi=BigInt(0),gt=BigInt(1),oc=BigInt(2),K0=BigInt(3),$6=BigInt(4);function Ire(t){const e=_re(t),{Fp:r}=e,n=w6(e.n,e.nBitLength),i=e.toBytes||((b,A,P)=>{const R=A.toAffine();return vi(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),s=e.fromBytes||(b=>{const A=b.subarray(1),P=r.fromBytes(A.subarray(0,r.BYTES)),R=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:P,y:R}});function o(b){const{a:A,b:P}=e,R=r.sqr(b),M=r.mul(R,b);return r.add(r.add(M,r.mul(b,A)),P)}function a(b,A){const P=r.sqr(A),R=o(b);return r.eql(P,R)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=r.mul(r.pow(e.a,K0),$6),l=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(c,l)))throw new Error("bad curve params: a or b");function u(b){return W0(b,gt,e.n)}function h(b){const{allowedPrivateKeyLengths:A,nByteLength:P,wrapPrivateKey:R,n:M}=e;if(A&&typeof b!="bigint"){if(V0(b)&&(b=q0(b)),typeof b!="string"||!A.includes(b.length))throw new Error("invalid private key");b=b.padStart(P*2,"0")}let U;try{U=typeof b=="bigint"?b:As(_r("private key",b,P))}catch{throw new Error("invalid private key, expected hex or "+P+" bytes, got "+typeof b)}return R&&(U=dr(U,M)),Cl("private key",U,gt,M),U}function d(b){if(!(b instanceof g))throw new Error("ProjectivePoint expected")}const p=o_((b,A)=>{const{px:P,py:R,pz:M}=b;if(r.eql(M,r.ONE))return{x:P,y:R};const U=b.is0();A==null&&(A=U?r.ONE:r.inv(M));const S=r.mul(P,A),L=r.mul(R,A),D=r.mul(M,A);if(U)return{x:r.ZERO,y:r.ZERO};if(!r.eql(D,r.ONE))throw new Error("invZ was invalid");return{x:S,y:L}}),f=o_(b=>{if(b.is0()){if(e.allowInfinityPoint&&!r.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:A,y:P}=b.toAffine();if(!r.isValid(A)||!r.isValid(P))throw new Error("bad point: x or y not FE");if(!a(A,P))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(A,P,R){if(A==null||!r.isValid(A))throw new Error("x required");if(P==null||!r.isValid(P)||r.is0(P))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required");this.px=A,this.py=P,this.pz=R,Object.freeze(this)}static fromAffine(A){const{x:P,y:R}=A||{};if(!A||!r.isValid(P)||!r.isValid(R))throw new Error("invalid affine point");if(A instanceof g)throw new Error("projective point not allowed");const M=U=>r.eql(U,r.ZERO);return M(P)&&M(R)?g.ZERO:new g(P,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const P=x2(r,A.map(R=>R.pz));return A.map((R,M)=>R.toAffine(P[M])).map(g.fromAffine)}static fromHex(A){const P=g.fromAffine(s(_r("pointHex",A)));return P.assertValidity(),P}static fromPrivateKey(A){return g.BASE.multiply(h(A))}static msm(A,P){return xre(g,n,A,P)}_setWindowSize(A){C.setWindowSize(this,A)}assertValidity(){f(this)}hasEvenY(){const{y:A}=this.toAffine();if(r.isOdd)return!r.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){d(A);const{px:P,py:R,pz:M}=this,{px:U,py:S,pz:L}=A,D=r.eql(r.mul(P,L),r.mul(U,M)),T=r.eql(r.mul(R,L),r.mul(S,M));return D&&T}negate(){return new g(this.px,r.neg(this.py),this.pz)}double(){const{a:A,b:P}=e,R=r.mul(P,K0),{px:M,py:U,pz:S}=this;let L=r.ZERO,D=r.ZERO,T=r.ZERO,x=r.mul(M,M),_=r.mul(U,U),m=r.mul(S,S),y=r.mul(M,U);return y=r.add(y,y),T=r.mul(M,S),T=r.add(T,T),L=r.mul(A,T),D=r.mul(R,m),D=r.add(L,D),L=r.sub(_,D),D=r.add(_,D),D=r.mul(L,D),L=r.mul(y,L),T=r.mul(R,T),m=r.mul(A,m),y=r.sub(x,m),y=r.mul(A,y),y=r.add(y,T),T=r.add(x,x),x=r.add(T,x),x=r.add(x,m),x=r.mul(x,y),D=r.add(D,x),m=r.mul(U,S),m=r.add(m,m),x=r.mul(m,y),L=r.sub(L,x),T=r.mul(m,_),T=r.add(T,T),T=r.add(T,T),new g(L,D,T)}add(A){d(A);const{px:P,py:R,pz:M}=this,{px:U,py:S,pz:L}=A;let D=r.ZERO,T=r.ZERO,x=r.ZERO;const _=e.a,m=r.mul(e.b,K0);let y=r.mul(P,U),E=r.mul(R,S),I=r.mul(M,L),$=r.add(P,R),O=r.add(U,S);$=r.mul($,O),O=r.add(y,E),$=r.sub($,O),O=r.add(P,M);let B=r.add(U,L);return O=r.mul(O,B),B=r.add(y,I),O=r.sub(O,B),B=r.add(R,M),D=r.add(S,L),B=r.mul(B,D),D=r.add(E,I),B=r.sub(B,D),x=r.mul(_,O),D=r.mul(m,I),x=r.add(D,x),D=r.sub(E,x),x=r.add(E,x),T=r.mul(D,x),E=r.add(y,y),E=r.add(E,y),I=r.mul(_,I),O=r.mul(m,O),E=r.add(E,I),I=r.sub(y,I),I=r.mul(_,I),O=r.add(O,I),y=r.mul(E,O),T=r.add(T,y),y=r.mul(B,O),D=r.mul($,D),D=r.sub(D,y),y=r.mul($,E),x=r.mul(B,x),x=r.add(x,y),new g(D,T,x)}subtract(A){return this.add(A.negate())}is0(){return this.equals(g.ZERO)}wNAF(A){return C.wNAFCached(this,A,g.normalizeZ)}multiplyUnsafe(A){const{endo:P,n:R}=e;Cl("scalar",A,Xi,R);const M=g.ZERO;if(A===Xi)return M;if(this.is0()||A===gt)return this;if(!P||C.hasPrecomputes(this))return C.wNAFCachedUnsafe(this,A,g.normalizeZ);let{k1neg:U,k1:S,k2neg:L,k2:D}=P.splitScalar(A),T=M,x=M,_=this;for(;S>Xi||D>Xi;)S&gt&&(T=T.add(_)),D&gt&&(x=x.add(_)),_=_.double(),S>>=gt,D>>=gt;return U&&(T=T.negate()),L&&(x=x.negate()),x=new g(r.mul(x.px,P.beta),x.py,x.pz),T.add(x)}multiply(A){const{endo:P,n:R}=e;Cl("scalar",A,gt,R);let M,U;if(P){const{k1neg:S,k1:L,k2neg:D,k2:T}=P.splitScalar(A);let{p:x,f:_}=this.wNAF(L),{p:m,f:y}=this.wNAF(T);x=C.constTimeNegate(S,x),m=C.constTimeNegate(D,m),m=new g(r.mul(m.px,P.beta),m.py,m.pz),M=x.add(m),U=_.add(y)}else{const{p:S,f:L}=this.wNAF(A);M=S,U=L}return g.normalizeZ([M,U])[0]}multiplyAndAddUnsafe(A,P,R){const M=g.BASE,U=(L,D)=>D===Xi||D===gt||!L.equals(M)?L.multiplyUnsafe(D):L.multiply(D),S=U(this,P).add(U(A,R));return S.is0()?void 0:S}toAffine(A){return p(this,A)}isTorsionFree(){const{h:A,isTorsionFree:P}=e;if(A===gt)return!0;if(P)return P(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:P}=e;return A===gt?this:P?P(g,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return z0("isCompressed",A),this.assertValidity(),i(g,this,A)}toHex(A=!0){return z0("isCompressed",A),q0(this.toRawBytes(A))}}g.BASE=new g(e.Gx,e.Gy,r.ONE),g.ZERO=new g(r.ZERO,r.ONE,r.ZERO);const{endo:w,nBitLength:v}=e,C=$re(g,w?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:u}}function Ore(t){const e=v_(t);return Z0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Pre(t){const e=Ore(t),{Fp:r,n,nByteLength:i,nBitLength:s}=e,o=r.BYTES+1,a=2*r.BYTES+1;function c(m){return dr(m,n)}function l(m){return m6(m,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:d,isWithinCurveOrder:p}=Ire({...e,toBytes(m,y,E){const I=y.toAffine(),$=r.toBytes(I.x),O=vi;return z0("isCompressed",E),E?O(Uint8Array.from([y.hasEvenY()?2:3]),$):O(Uint8Array.from([4]),$,r.toBytes(I.y))},fromBytes(m){const y=m.length,E=m[0],I=m.subarray(1);if(y===o&&(E===2||E===3)){const $=As(I);if(!W0($,gt,r.ORDER))throw new Error("Point is not on curve");const O=d($);let B;try{B=r.sqrt(O)}catch(V){const q=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+q)}const H=(B&gt)===gt;return(E&1)===1!==H&&(B=r.neg(B)),{x:$,y:B}}else if(y===a&&E===4){const $=r.fromBytes(I.subarray(0,r.BYTES)),O=r.fromBytes(I.subarray(r.BYTES,2*r.BYTES));return{x:$,y:O}}else{const $=o,O=a;throw new Error("invalid Point, expected length of "+$+", or uncompressed "+O+", got "+y)}}});function f(m){const y=n>>gt;return m>y}function g(m){return f(m)?c(-m):m}const w=(m,y,E)=>As(m.slice(y,E));class v{constructor(y,E,I){Cl("r",y,gt,n),Cl("s",E,gt,n),this.r=y,this.s=E,I!=null&&(this.recovery=I),Object.freeze(this)}static fromCompact(y){const E=i;return y=_r("compactSignature",y,E*2),new v(w(y,0,E),w(y,E,2*E))}static fromDER(y){const{r:E,s:I}=pa.toSig(_r("DER",y));return new v(E,I)}assertValidity(){}addRecoveryBit(y){return new v(this.r,this.s,y)}recoverPublicKey(y){const{r:E,s:I,recovery:$}=this,O=M(_r("msgHash",y));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const B=$===2||$===3?E+e.n:E;if(B>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=($&1)===0?"02":"03",K=u.fromHex(H+A6(B,r.BYTES)),V=l(B),q=c(-O*V),Q=c(I*V),re=u.BASE.multiplyAndAddUnsafe(K,q,Q);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return A2(this.toDERHex())}toDERHex(){return pa.hexFromSig(this)}toCompactRawBytes(){return A2(this.toCompactHex())}toCompactHex(){const y=i;return A6(this.r,y)+A6(this.s,y)}}const C={isValidPrivateKey(m){try{return h(m),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const m=g_(e.n);return Ere(e.randomBytes(m),e.n)},precompute(m=8,y=u.BASE){return y._setWindowSize(m),y.multiply(BigInt(3)),y}};function b(m,y=!0){return u.fromPrivateKey(m).toRawBytes(y)}function A(m){if(typeof m=="bigint")return!1;if(m instanceof u)return!0;const E=_r("key",m).length,I=r.BYTES,$=I+1,O=2*I+1;if(!(e.allowedPrivateKeyLengths||i===$))return E===$||E===O}function P(m,y,E=!0){if(A(m)===!0)throw new Error("first arg must be private key");if(A(y)===!1)throw new Error("second arg must be public key");return u.fromHex(y).multiply(h(m)).toRawBytes(E)}const R=e.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const y=As(m),E=m.length*8-s;return E>0?y>>BigInt(E):y},M=e.bits2int_modN||function(m){return c(R(m))},U=$2(s);function S(m){return Cl("num < 2^"+s,m,Xi,U),El(m,i)}function L(m,y,E=D){if(["recovered","canonical"].some(ee=>ee in E))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:$}=e;let{lowS:O,prehash:B,extraEntropy:H}=E;O==null&&(O=!0),m=_r("msgHash",m),E_(E),B&&(m=_r("prehashed msgHash",I(m)));const K=M(m),V=h(y),q=[S(V),S(K)];if(H!=null&&H!==!1){const ee=H===!0?$(r.BYTES):H;q.push(_r("extraEntropy",ee))}const Q=vi(...q),re=K;function he(ee){const de=R(ee);if(!p(de))return;const Re=l(de),rt=u.BASE.multiply(de).toAffine(),wt=c(rt.x);if(wt===Xi)return;const sr=c(Re*c(re+wt*V));if(sr===Xi)return;let Mi=(rt.x===wt?0:2)|Number(rt.y&gt),Sw=sr;return O&&f(sr)&&(Sw=g(sr),Mi^=1),new v(wt,Sw,Mi)}return{seed:Q,k2sig:he}}const D={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function x(m,y,E=D){const{seed:I,k2sig:$}=L(m,y,E),O=e;return pre(O.hash.outputLen,O.nByteLength,O.hmac)(I,$)}u.BASE._setWindowSize(8);function _(m,y,E,I=T){const $=m;y=_r("msgHash",y),E=_r("publicKey",E);const{lowS:O,prehash:B,format:H}=I;if(E_(I),"strict"in I)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const K=typeof $=="string"||V0($),V=!K&&!H&&typeof $=="object"&&$!==null&&typeof $.r=="bigint"&&typeof $.s=="bigint";if(!K&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,Q;try{if(V&&(q=new v($.r,$.s)),K){try{H!=="compact"&&(q=v.fromDER($))}catch(Mi){if(!(Mi instanceof pa.Err))throw Mi}!q&&H!=="der"&&(q=v.fromCompact($))}Q=u.fromHex(E)}catch{return!1}if(!q||O&&q.hasHighS())return!1;B&&(y=e.hash(y));const{r:re,s:he}=q,ee=M(y),de=l(he),Re=c(ee*de),rt=c(re*de),wt=u.BASE.multiplyAndAddUnsafe(Q,Re,rt)?.toAffine();return wt?c(wt.x)===re:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:P,sign:x,verify:_,ProjectivePoint:u,Signature:v,utils:C}}function Nre(t,e){const r=t.ORDER;let n=Xi;for(let f=r-gt;f%oc===Xi;f/=oc)n+=gt;const i=n,s=oc<<i-gt-gt,o=s*oc,a=(r-gt)/o,c=(a-gt)/oc,l=o-gt,u=s,h=t.pow(e,a),d=t.pow(e,(a+gt)/oc);let p=(f,g)=>{let w=h,v=t.pow(g,l),C=t.sqr(v);C=t.mul(C,g);let b=t.mul(f,C);b=t.pow(b,c),b=t.mul(b,v),v=t.mul(b,g),C=t.mul(b,f);let A=t.mul(C,v);b=t.pow(A,u);let P=t.eql(b,t.ONE);v=t.mul(C,d),b=t.mul(A,w),C=t.cmov(v,C,P),A=t.cmov(b,A,P);for(let R=i;R>gt;R--){let M=R-oc;M=oc<<M-gt;let U=t.pow(A,M);const S=t.eql(U,t.ONE);v=t.mul(C,w),w=t.mul(w,w),U=t.mul(A,w),C=t.cmov(v,C,S),A=t.cmov(U,A,S)}return{isValid:P,value:C}};if(t.ORDER%$6===K0){const f=(t.ORDER-K0)/$6,g=t.sqrt(t.neg(e));p=(w,v)=>{let C=t.sqr(v);const b=t.mul(w,v);C=t.mul(C,b);let A=t.pow(C,f);A=t.mul(A,b);const P=t.mul(A,g),R=t.mul(t.sqr(A),v),M=t.eql(R,w);let U=t.cmov(P,A,M);return{isValid:M,value:U}}}return p}function Tre(t,e){if(h_(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=Nre(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,c,l,u,h;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(i,o);const{isValid:d,value:p}=r(s,l);h=t.mul(i,n),h=t.mul(h,p),u=t.cmov(u,o,d),h=t.cmov(h,p,d);const f=t.isOdd(n)===t.isOdd(h);h=t.cmov(t.neg(h),h,f);const g=x2(t,[a],!0)[0];return u=t.mul(u,g),{x:u,y:h}}}function kre(t){return{hash:t,hmac:(e,...r)=>ay(t,e,mr(...r)),randomBytes:Eu}}function Rre(t,e){const r=n=>Pre({...t,...kre(n)});return{...r(e),create:r}}const Dre=As;function ac(t,e){if(G0(t),G0(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function Bre(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function G0(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Mre(t,e,r,n){sc(t),sc(e),G0(r),e.length>255&&(e=n(vi(p6("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=vi(e,ac(e.length,1)),c=ac(0,s),l=ac(r,2),u=new Array(o),h=n(vi(c,t,l,ac(0,1),a));u[0]=n(vi(h,ac(1,1),a));for(let p=1;p<=o;p++){const f=[Bre(h,u[p-1]),ac(p+1,1),a];u[p]=n(vi(...f))}return vi(...u).slice(0,r)}function Ure(t,e,r,n,i){if(sc(t),sc(e),G0(r),e.length>255){const s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update(p6("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(ac(r,2)).update(e).update(ac(e.length,1)).digest()}function C_(t,e,r){Z0(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:c}=r;sc(t),G0(e);const l=typeof c=="string"?p6(c):c,u=n.toString(2).length,h=Math.ceil((u+i)/8),d=e*s*h;let p;if(a==="xmd")p=Mre(t,l,d,o);else if(a==="xof")p=Ure(t,l,d,i,o);else if(a==="_internal_pass")p=t;else throw new Error('expand must be "xmd" or "xof"');const f=new Array(e);for(let g=0;g<e;g++){const w=new Array(s);for(let v=0;v<s;v++){const C=h*(v+g*s),b=p.subarray(C,C+h);w[v]=dr(Dre(b),n)}f[g]=w}return f}function Lre(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,c]=r.map(h=>h.reduce((d,p)=>t.add(t.mul(d,n),p))),[l,u]=x2(t,[o,c],!0);return n=t.mul(s,l),i=t.mul(i,t.mul(a,u)),{x:n,y:i}}}function Fre(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(s){return t.fromAffine(e(s))}function i(s){const o=s.clearCofactor();return o.equals(t.ZERO)?t.ZERO:(o.assertValidity(),o)}return{defaults:r,hashToCurve(s,o){const a=C_(s,2,{...r,DST:r.DST,...o}),c=n(a[0]),l=n(a[1]);return i(c.add(l))},encodeToCurve(s,o){const a=C_(s,1,{...r,DST:r.encodeDST,...o});return i(n(a[0]))},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(const o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return i(n(s))}}}const Y0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),x6=BigInt(0),X0=BigInt(1),S2=BigInt(2),A_=(t,e)=>(t+e/S2)/e;function $_(t){const e=Y0,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=Ei(u,r,e)*u%e,d=Ei(h,r,e)*u%e,p=Ei(d,S2,e)*l%e,f=Ei(p,i,e)*p%e,g=Ei(f,s,e)*f%e,w=Ei(g,a,e)*g%e,v=Ei(w,c,e)*w%e,C=Ei(v,a,e)*g%e,b=Ei(C,r,e)*u%e,A=Ei(b,o,e)*f%e,P=Ei(A,n,e)*l%e,R=Ei(P,S2,e);if(!cc.eql(cc.sqr(R),t))throw new Error("Cannot find square root");return R}const cc=w6(Y0,void 0,void 0,{sqrt:$_}),J0=Rre({a:x6,b:BigInt(7),Fp:cc,n:_2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=_2,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-X0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=A_(s*t,e),c=A_(-n*t,e);let l=dr(t-a*r-c*i,e),u=dr(-a*n-c*s,e);const h=l>o,d=u>o;if(h&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},Vo),x_={};function I2(t,...e){let r=x_[t];if(r===void 0){const n=Vo(Uint8Array.from(t,i=>i.charCodeAt(0)));r=vi(n,n),x_[t]=r}return Vo(vi(r,...e))}const _6=t=>t.toRawBytes(!0).slice(1),S6=t=>El(t,32),I6=t=>dr(t,Y0),Q0=t=>dr(t,_2),O6=J0.ProjectivePoint,Hre=(t,e,r)=>O6.BASE.multiplyAndAddUnsafe(t,e,r);function P6(t){let e=J0.utils.normPrivateKeyToScalar(t),r=O6.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:Q0(-e),bytes:_6(r)}}function __(t){Cl("x",t,X0,Y0);const e=I6(t*t),r=I6(e*t+BigInt(7));let n=$_(r);n%S2!==x6&&(n=I6(-n));const i=new O6(t,n,X0);return i.assertValidity(),i}const ch=As;function S_(...t){return Q0(ch(I2("BIP0340/challenge",...t)))}function jre(t){return P6(t).bytes}function Vre(t,e,r=Eu(32)){const n=_r("message",t),{bytes:i,scalar:s}=P6(e),o=_r("auxRand",r,32),a=S6(s^ch(I2("BIP0340/aux",o))),c=I2("BIP0340/nonce",a,i,n),l=Q0(ch(c));if(l===x6)throw new Error("sign failed: k is zero");const{bytes:u,scalar:h}=P6(l),d=S_(u,i,n),p=new Uint8Array(64);if(p.set(u,0),p.set(S6(Q0(h+d*s)),32),!I_(p,n,i))throw new Error("sign: Invalid signature produced");return p}function I_(t,e,r){const n=_r("signature",t,64),i=_r("message",e),s=_r("publicKey",r,32);try{const o=__(ch(s)),a=ch(n.subarray(0,32));if(!W0(a,X0,Y0))return!1;const c=ch(n.subarray(32,64));if(!W0(c,X0,_2))return!1;const l=S_(S6(a),_6(o),i),u=Hre(o,c,Q0(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const zre={getPublicKey:jre,sign:Vre,verify:I_,utils:{randomPrivateKey:J0.utils.randomPrivateKey,lift_x:__,pointToBytes:_6,numberToBytesBE:El,bytesToNumberBE:As,taggedHash:I2,mod:dr}},qre=Lre(cc,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Wre=Tre(cc,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:cc.create(BigInt("-11"))}),N6=Fre(J0.ProjectivePoint,t=>{const{x:e,y:r}=Wre(cc.create(t[0]));return qre(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:cc.ORDER,m:1,k:128,expand:"xmd",hash:Vo});var Zre=Object.freeze({__proto__:null,secp256k1:J0,schnorr:zre,secp256k1_hasher:N6,hashToCurve:N6.hashToCurve,encodeToCurve:N6.encodeToCurve});const Kre=":";function $l(t){const[e,r]=t.split(Kre);return{namespace:e,reference:r}}function O_(t,e){return t.includes(":")?[t]:e.chains||[]}var Gre=Object.defineProperty,Yre=Object.defineProperties,Xre=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertySymbols,Jre=Object.prototype.hasOwnProperty,Qre=Object.prototype.propertyIsEnumerable,T6=(t,e,r)=>e in t?Gre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N_=(t,e)=>{for(var r in e||(e={}))Jre.call(e,r)&&T6(t,r,e[r]);if(P_)for(var r of P_(e))Qre.call(e,r)&&T6(t,r,e[r]);return t},ene=(t,e)=>Yre(t,Xre(e)),T_=(t,e,r)=>T6(t,typeof e!="symbol"?e+"":e,r);const tne="ReactNative",ni={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},rne="js";function O2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function lc(){return!Fn()&&!!cd()&&navigator.product===tne}function nne(){return lc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function ine(){return lc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function lh(){return!O2()&&!!cd()&&!!Fn()}function e1(){return lc()?ni.reactNative:O2()?ni.node:lh()?ni.browser:ni.unknown}function k_(){var t;try{return lc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function sne(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function one(t){var e,r;const n=R_();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),ene(N_(N_({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function R_(){return Mw()||{name:"",description:"",url:"",icons:[""]}}function ane(){if(e1()===ni.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=uv();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function cne(){var t;const e=e1();return e===ni.browser?[e,((t=Dw())==null?void 0:t.host)||"unknown"].join(":"):e}function D_(t,e,r){const n=ane(),i=cne();return[[t,e].join("-"),[rne,r].join("-"),n,i].join("/")}function lne({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=D_(t,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},d=sne(l[1]||"",h);return l[0]+"?"+d}function xl(t,e){return t.filter(r=>e.includes(r)).length===t.length}function k6(t){return Object.fromEntries(t.entries())}function R6(t){return new Map(Object.entries(t))}function _l(t=Z.FIVE_MINUTES,e){const r=Z.toMiliseconds(t||Z.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function $s(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function B_(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function une(t){return B_("topic",t)}function hne(t){return B_("id",t)}function M_(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function tr(t,e){return Z.fromMiliseconds((e||Date.now())+Z.toMiliseconds(t))}function uc(t){return Date.now()>=Z.toMiliseconds(t)}function ot(t,e){return`${t}${e?`:${e}`:""}`}function xs(t=[],e=[]){return[...new Set([...t,...e])]}async function dne({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i?.href;if(typeof s!="string")return;const o=pne(s,t,e),a=e1();if(a===ni.browser){if(!((n=Fn())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}fne(o)}else a===ni.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function pne(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${yne(n,!0)}`}else i=`${i}/wc?${n}`;return i}function fne(t){let e="_self";wne()?e="_top":(mne()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function gne(t,e){let r="";try{if(lh()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function U_(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function L_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function D6(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function mne(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function wne(){try{return window.self!==window.top}catch{return!1}}function yne(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function F_(t){return Buffer.from(t,"base64").toString("utf-8")}function bne(t){return new Promise(e=>setTimeout(e,t))}class vne{constructor({limit:e}){T_(this,"limit"),T_(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}}const P2=BigInt(2**32-1),H_=BigInt(32);function j_(t,e=!1){return e?{h:Number(t&P2),l:Number(t>>H_&P2)}:{h:Number(t>>H_&P2)|0,l:Number(t&P2)|0}}function V_(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=j_(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const z_=(t,e,r)=>t>>>r,q_=(t,e,r)=>t<<32-r|e>>>r,hc=(t,e,r)=>t>>>r|e<<32-r,dc=(t,e,r)=>t<<32-r|e>>>r,t1=(t,e,r)=>t<<64-r|e>>>r-32,r1=(t,e,r)=>t>>>r-32|e<<64-r,Ene=(t,e)=>e,Cne=(t,e)=>t,Ane=(t,e,r)=>t<<r|e>>>32-r,$ne=(t,e,r)=>e<<r|t>>>32-r,xne=(t,e,r)=>e<<r-32|t>>>64-r,_ne=(t,e,r)=>t<<r-32|e>>>64-r;function Ji(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const B6=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),M6=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Sne=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Ine=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,One=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Pne=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,uh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function U6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ci(t,...e){if(!U6(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function L6(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");fa(t.outputLen),fa(t.blockLen)}function pc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function F6(t,e){Ci(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function n1(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ai(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function H6(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _s(t,e){return t<<32-e|t>>>e}const W_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Z_(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const ga=W_?t=>t:t=>Z_(t);function Nne(t){for(let e=0;e<t.length;e++)t[e]=Z_(t[e]);return t}const fc=W_?t=>t:Nne,K_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Tne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function i1(t){if(Ci(t),K_)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Tne[t[r]];return e}const ma={_0:48,_9:57,A:65,F:70,a:97,f:102};function G_(t){if(t>=ma._0&&t<=ma._9)return t-ma._0;if(t>=ma.A&&t<=ma.F)return t-(ma.A-10);if(t>=ma.a&&t<=ma.f)return t-(ma.a-10)}function j6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(K_)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=G_(t.charCodeAt(s)),a=G_(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function kne(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qi(t){return typeof t=="string"&&(t=kne(t)),Ci(t),t}function Sl(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Ci(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class N2{}function s1(t){const e=n=>t().update(Qi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Rne(t){const e=(n,i)=>t(i).update(Qi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function hh(t=32){if(uh&&typeof uh.getRandomValues=="function")return uh.getRandomValues(new Uint8Array(t));if(uh&&typeof uh.randomBytes=="function")return Uint8Array.from(uh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Dne=BigInt(0),o1=BigInt(1),Bne=BigInt(2),Mne=BigInt(7),Une=BigInt(256),Lne=BigInt(113),Y_=[],X_=[],J_=[];for(let t=0,e=o1,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Y_.push(2*(5*n+r)),X_.push((t+1)*(t+2)/2%64);let i=Dne;for(let s=0;s<7;s++)e=(e<<o1^(e>>Mne)*Lne)%Une,e&Bne&&(i^=o1<<(o1<<BigInt(s))-o1);J_.push(i)}const Q_=V_(J_,!0),Fne=Q_[0],Hne=Q_[1],eS=(t,e,r)=>r>32?xne(t,e,r):Ane(t,e,r),tS=(t,e,r)=>r>32?_ne(t,e,r):$ne(t,e,r);function jne(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],h=eS(l,u,1)^r[a],d=tS(l,u,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=h,t[o+p+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=X_[o],c=eS(i,s,a),l=tS(i,s,a),u=Y_[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Fne[n],t[1]^=Hne[n]}Ai(r)}class V6 extends N2{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,fa(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=n1(this.state)}clone(){return this._cloneInto()}keccak(){fc(this.state32),jne(this.state32,this.rounds),fc(this.state32),this.posOut=0,this.pos=0}update(e){pc(this),e=Qi(e),Ci(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){pc(this,!1),Ci(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return fa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(F6(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ai(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new V6(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Vne=(t,e,r)=>s1(()=>new V6(e,t,r)),zne=Vne(1,136,256/8);function qne(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function Wne(t,e,r){return t&e^~t&r}function Zne(t,e,r){return t&e^t&r^e&r}class rS extends N2{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=H6(this.buffer)}update(e){pc(this),e=Qi(e),Ci(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=H6(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pc(this),F6(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Ai(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;qne(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=H6(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const gc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Vr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Kne=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mc=new Uint32Array(64);class Gne extends rS{constructor(e=32){super(64,e,8,!1),this.A=gc[0]|0,this.B=gc[1]|0,this.C=gc[2]|0,this.D=gc[3]|0,this.E=gc[4]|0,this.F=gc[5]|0,this.G=gc[6]|0,this.H=gc[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)mc[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const d=mc[h-15],p=mc[h-2],f=_s(d,7)^_s(d,18)^d>>>3,g=_s(p,17)^_s(p,19)^p>>>10;mc[h]=g+mc[h-7]+f+mc[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=_s(a,6)^_s(a,11)^_s(a,25),p=u+d+Wne(a,c,l)+Kne[h]+mc[h]|0,f=(_s(n,2)^_s(n,13)^_s(n,22))+Zne(n,i,s)|0;u=l,l=c,c=a,a=o+p|0,o=s,s=i,i=n,n=p+f|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){Ai(mc)}destroy(){this.set(0,0,0,0,0,0,0,0),Ai(this.buffer)}}const nS=V_(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Yne=nS[0],Xne=nS[1],wc=new Uint32Array(80),yc=new Uint32Array(80);class z6 extends rS{constructor(e=64){super(128,e,16,!1),this.Ah=Vr[0]|0,this.Al=Vr[1]|0,this.Bh=Vr[2]|0,this.Bl=Vr[3]|0,this.Ch=Vr[4]|0,this.Cl=Vr[5]|0,this.Dh=Vr[6]|0,this.Dl=Vr[7]|0,this.Eh=Vr[8]|0,this.El=Vr[9]|0,this.Fh=Vr[10]|0,this.Fl=Vr[11]|0,this.Gh=Vr[12]|0,this.Gl=Vr[13]|0,this.Hh=Vr[14]|0,this.Hl=Vr[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:p,Gl:f,Hh:g,Hl:w}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w]}set(e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=p|0,this.Gl=f|0,this.Hh=g|0,this.Hl=w|0}process(e,r){for(let b=0;b<16;b++,r+=4)wc[b]=e.getUint32(r),yc[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const A=wc[b-15]|0,P=yc[b-15]|0,R=hc(A,P,1)^hc(A,P,8)^z_(A,P,7),M=dc(A,P,1)^dc(A,P,8)^q_(A,P,7),U=wc[b-2]|0,S=yc[b-2]|0,L=hc(U,S,19)^t1(U,S,61)^z_(U,S,6),D=dc(U,S,19)^r1(U,S,61)^q_(U,S,6),T=Sne(M,D,yc[b-7],yc[b-16]),x=Ine(T,R,L,wc[b-7],wc[b-16]);wc[b]=x|0,yc[b]=T|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:p,Fl:f,Gh:g,Gl:w,Hh:v,Hl:C}=this;for(let b=0;b<80;b++){const A=hc(h,d,14)^hc(h,d,18)^t1(h,d,41),P=dc(h,d,14)^dc(h,d,18)^r1(h,d,41),R=h&p^~h&g,M=d&f^~d&w,U=One(C,P,M,Xne[b],yc[b]),S=Pne(U,v,A,R,Yne[b],wc[b]),L=U|0,D=hc(n,i,28)^t1(n,i,34)^t1(n,i,39),T=dc(n,i,28)^r1(n,i,34)^r1(n,i,39),x=n&s^n&a^s&a,_=i&o^i&c^o&c;v=g|0,C=w|0,g=p|0,w=f|0,p=h|0,f=d|0,{h,l:d}=Ji(l|0,u|0,S|0,L|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const m=B6(L,T,_);n=M6(m,S,D,x),i=m|0}({h:n,l:i}=Ji(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ji(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Ji(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ji(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Ji(this.Eh|0,this.El|0,h|0,d|0),{h:p,l:f}=Ji(this.Fh|0,this.Fl|0,p|0,f|0),{h:g,l:w}=Ji(this.Gh|0,this.Gl|0,g|0,w|0),{h:v,l:C}=Ji(this.Hh|0,this.Hl|0,v|0,C|0),this.set(n,i,s,o,a,c,l,u,h,d,p,f,g,w,v,C)}roundClean(){Ai(wc,yc)}destroy(){Ai(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Jne extends z6{constructor(){super(48),this.Ah=jr[0]|0,this.Al=jr[1]|0,this.Bh=jr[2]|0,this.Bl=jr[3]|0,this.Ch=jr[4]|0,this.Cl=jr[5]|0,this.Dh=jr[6]|0,this.Dl=jr[7]|0,this.Eh=jr[8]|0,this.El=jr[9]|0,this.Fh=jr[10]|0,this.Fl=jr[11]|0,this.Gh=jr[12]|0,this.Gl=jr[13]|0,this.Hh=jr[14]|0,this.Hl=jr[15]|0}}const zr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Qne extends z6{constructor(){super(32),this.Ah=zr[0]|0,this.Al=zr[1]|0,this.Bh=zr[2]|0,this.Bl=zr[3]|0,this.Ch=zr[4]|0,this.Cl=zr[5]|0,this.Dh=zr[6]|0,this.Dl=zr[7]|0,this.Eh=zr[8]|0,this.El=zr[9]|0,this.Fh=zr[10]|0,this.Fl=zr[11]|0,this.Gh=zr[12]|0,this.Gl=zr[13]|0,this.Hh=zr[14]|0,this.Hl=zr[15]|0}}const T2=s1(()=>new Gne),eie=s1(()=>new z6),tie=s1(()=>new Jne),rie=s1(()=>new Qne),nie=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),rr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),me=new Uint32Array(32);function bc(t,e,r,n,i,s){const o=i[s],a=i[s+1];let c=me[2*t],l=me[2*t+1],u=me[2*e],h=me[2*e+1],d=me[2*r],p=me[2*r+1],f=me[2*n],g=me[2*n+1],w=B6(c,u,o);l=M6(w,l,h,a),c=w|0,{Dh:g,Dl:f}={Dh:g^l,Dl:f^c},{Dh:g,Dl:f}={Dh:Ene(g,f),Dl:Cne(g)},{h:p,l:d}=Ji(p,d,g,f),{Bh:h,Bl:u}={Bh:h^p,Bl:u^d},{Bh:h,Bl:u}={Bh:hc(h,u,24),Bl:dc(h,u,24)},me[2*t]=c,me[2*t+1]=l,me[2*e]=u,me[2*e+1]=h,me[2*r]=d,me[2*r+1]=p,me[2*n]=f,me[2*n+1]=g}function vc(t,e,r,n,i,s){const o=i[s],a=i[s+1];let c=me[2*t],l=me[2*t+1],u=me[2*e],h=me[2*e+1],d=me[2*r],p=me[2*r+1],f=me[2*n],g=me[2*n+1],w=B6(c,u,o);l=M6(w,l,h,a),c=w|0,{Dh:g,Dl:f}={Dh:g^l,Dl:f^c},{Dh:g,Dl:f}={Dh:hc(g,f,16),Dl:dc(g,f,16)},{h:p,l:d}=Ji(p,d,g,f),{Bh:h,Bl:u}={Bh:h^p,Bl:u^d},{Bh:h,Bl:u}={Bh:t1(h,u,63),Bl:r1(h,u,63)},me[2*t]=c,me[2*t+1]=l,me[2*e]=u,me[2*e+1]=h,me[2*r]=d,me[2*r+1]=p,me[2*n]=f,me[2*n+1]=g}function iie(t,e={},r,n,i){if(fa(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class sie extends N2{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,fa(e),fa(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=n1(this.buffer)}update(e){pc(this),e=Qi(e),Ci(e);const{blockLen:r,buffer:n,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<s;){this.pos===r&&(fc(i),this.compress(i,0,!1),fc(i),this.pos=0);const l=Math.min(r-this.pos,s-c),u=o+c;if(l===r&&!(u%4)&&c+l<s){const h=new Uint32Array(a,u,Math.floor((s-c)/4));fc(h);for(let d=0;c+r<s;d+=i.length,c+=r)this.length+=r,this.compress(h,d,!1);fc(h);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){pc(this),F6(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Ai(this.buffer.subarray(r)),fc(n),this.compress(n,0,!0),fc(n);const i=n1(e);this.get().forEach((s,o)=>i[o]=ga(s))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class oie extends sie{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=rr[0]|0,this.v0h=rr[1]|0,this.v1l=rr[2]|0,this.v1h=rr[3]|0,this.v2l=rr[4]|0,this.v2h=rr[5]|0,this.v3l=rr[6]|0,this.v3h=rr[7]|0,this.v4l=rr[8]|0,this.v4h=rr[9]|0,this.v5l=rr[10]|0,this.v5h=rr[11]|0,this.v6l=rr[12]|0,this.v6h=rr[13]|0,this.v7l=rr[14]|0,this.v7h=rr[15]|0,iie(r,e,64,16,16);let{key:n,personalization:i,salt:s}=e,o=0;if(n!==void 0&&(n=Qi(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Qi(s);const a=n1(s);this.v4l^=ga(a[0]),this.v4h^=ga(a[1]),this.v5l^=ga(a[2]),this.v5h^=ga(a[3])}if(i!==void 0){i=Qi(i);const a=n1(i);this.v6l^=ga(a[0]),this.v6h^=ga(a[1]),this.v7l^=ga(a[2]),this.v7h^=ga(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:h,v5h:d,v6l:p,v6h:f,v7l:g,v7h:w}=this;return[e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w]}set(e,r,n,i,s,o,a,c,l,u,h,d,p,f,g,w){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=h|0,this.v5h=d|0,this.v6l=p|0,this.v6h=f|0,this.v7l=g|0,this.v7h=w|0}compress(e,r,n){this.get().forEach((c,l)=>me[l]=c),me.set(rr,16);let{h:i,l:s}=j_(BigInt(this.length));me[24]=rr[8]^s,me[25]=rr[9]^i,n&&(me[28]=~me[28],me[29]=~me[29]);let o=0;const a=nie;for(let c=0;c<12;c++)bc(0,4,8,12,e,r+2*a[o++]),vc(0,4,8,12,e,r+2*a[o++]),bc(1,5,9,13,e,r+2*a[o++]),vc(1,5,9,13,e,r+2*a[o++]),bc(2,6,10,14,e,r+2*a[o++]),vc(2,6,10,14,e,r+2*a[o++]),bc(3,7,11,15,e,r+2*a[o++]),vc(3,7,11,15,e,r+2*a[o++]),bc(0,5,10,15,e,r+2*a[o++]),vc(0,5,10,15,e,r+2*a[o++]),bc(1,6,11,12,e,r+2*a[o++]),vc(1,6,11,12,e,r+2*a[o++]),bc(2,7,8,13,e,r+2*a[o++]),vc(2,7,8,13,e,r+2*a[o++]),bc(3,4,9,14,e,r+2*a[o++]),vc(3,4,9,14,e,r+2*a[o++]);this.v0l^=me[0]^me[16],this.v0h^=me[1]^me[17],this.v1l^=me[2]^me[18],this.v1h^=me[3]^me[19],this.v2l^=me[4]^me[20],this.v2h^=me[5]^me[21],this.v3l^=me[6]^me[22],this.v3h^=me[7]^me[23],this.v4l^=me[8]^me[24],this.v4h^=me[9]^me[25],this.v5l^=me[10]^me[26],this.v5h^=me[11]^me[27],this.v6l^=me[12]^me[28],this.v6h^=me[13]^me[29],this.v7l^=me[14]^me[30],this.v7h^=me[15]^me[31],Ai(me)}destroy(){this.destroyed=!0,Ai(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const aie=Rne(t=>new oie(t)),cie="https://rpc.walletconnect.org/v1";function iS(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(zne(r)).toString("hex")}async function lie(t,e,r,n,i,s){switch(r.t){case"eip191":return await uie(t,e,r.s);case"eip1271":return await hie(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function uie(t,e,r){return(await Tte({hash:iS(e),signature:r})).toLowerCase()===t.toLowerCase()}async function hie(t,e,r,n,i,s){const o=$l(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=r.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),h=(e.startsWith("0x")?e:iS(e)).substring(2),d=a+h+c+u+l,p=await fetch(`${s||cie}/?chainId=${n}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:die(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})}),{result:f}=await p.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function die(){return Date.now()+Math.floor(Math.random()*1e3)}function pie(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return Hi.encode(s)}function fie(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const i=aie(n,{dkLen:32});return Hi.encode(i)}function sS(t){const e=new Uint8Array(T2(gie(t)));return Hi.encode(e)}function gie(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function oS(t){const e=Buffer.from(t,"base64"),r=pE(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=uE(r),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(n)]),o=rie(s);return vE.encode(o).replace(/=+$/,"")}function q6(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function mie(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(q6(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(q6(r.length)),i.push(r),i.push(Buffer.from([26])),i.push(q6(n.length)),i.push(n);const s=Buffer.concat(i),o=T2(s);return Buffer.from(o).toString("hex").toUpperCase()}var wie=Object.defineProperty,yie=Object.defineProperties,bie=Object.getOwnPropertyDescriptors,aS=Object.getOwnPropertySymbols,vie=Object.prototype.hasOwnProperty,Eie=Object.prototype.propertyIsEnumerable,cS=(t,e,r)=>e in t?wie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cie=(t,e)=>{for(var r in e||(e={}))vie.call(e,r)&&cS(t,r,e[r]);if(aS)for(var r of aS(e))Eie.call(e,r)&&cS(t,r,e[r]);return t},Aie=(t,e)=>yie(t,bie(e));const $ie="did:pkh:",W6=t=>t?.split(":"),xie=t=>{const e=t&&W6(t);if(e)return t.includes($ie)?e[3]:e[1]},Z6=t=>{const e=t&&W6(t);if(e)return e[2]+":"+e[3]},k2=t=>{const e=t&&W6(t);if(e)return e.pop()};async function lS(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=uS(i,i.iss),o=k2(i.iss);return await lie(o,s,n,Z6(i.iss),r)}const uS=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=k2(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${xie(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,d=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,f=R2(t.resources);if(f){const g=a1(f);i=Rie(i,g)}return[r,n,"",i,"",s,o,a,c,l,u,h,d,p].filter(g=>g!=null).join(`
`)};function _ie(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Sie(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Il(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Iie(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:Oie(e,r,n)}}}function Oie(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function hS(t){return Il(t),`urn:recap:${_ie(t).replace(/=/g,"")}`}function a1(t){const e=Sie(t.replace("urn:recap:",""));return Il(e),e}function Pie(t,e,r){const n=Iie(t,e,r);return hS(n)}function Nie(t){return t&&t.includes("urn:recap:")}function Tie(t,e){const r=a1(t),n=a1(e),i=kie(r,n);return hS(i)}function kie(t,e){Il(t),Il(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=Aie(Cie({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function Rie(t="",e){Il(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function dS(t){var e;const r=a1(t);Il(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function pS(t){const e=a1(t);Il(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function R2(t){if(!t)return;const e=t?.[t.length-1];return Nie(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function fS(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K6(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function G6(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function On(t,...e){if(!fS(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function gS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Die(t,e){On(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Ec(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function dh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Bie(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Mie=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Uie(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Y6(t){if(typeof t=="string")t=Uie(t);else if(fS(t))t=X6(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Lie(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Fie(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const Hie=(t,e)=>{function r(n,...i){if(On(n),!Mie)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?On(l):On(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&On(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");On(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,On(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(On(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function mS(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Vie(e))throw new Error("invalid output, must be aligned");return e}function wS(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function jie(t,e,r){K6(r);const n=new Uint8Array(16),i=Bie(n);return wS(i,0,BigInt(e),r),wS(i,8,BigInt(t),r),n}function Vie(t){return t.byteOffset%4===0}function X6(t){return Uint8Array.from(t)}const yS=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),zie=yS("expand 16-byte k"),qie=yS("expand 32-byte k"),Wie=Ec(zie),Zie=Ec(qie);function Qe(t,e){return t<<e|t>>>32-e}function J6(t){return t.byteOffset%4===0}const D2=64,Kie=16,bS=2**32-1,vS=new Uint32Array;function Gie(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(D2),u=Ec(l),h=J6(i)&&J6(s),d=h?Ec(i):vS,p=h?Ec(s):vS;for(let f=0;f<c;o++){if(t(e,r,n,u,o,a),o>=bS)throw new Error("arx: counter overflow");const g=Math.min(D2,c-f);if(h&&g===D2){const w=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let v=0,C;v<Kie;v++)C=w+v,p[C]=d[C]^u[v];f+=D2;continue}for(let w=0,v;w<g;w++)v=f+w,s[v]=i[v]^l[w];f+=g}}function Yie(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=Lie({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return G6(i),G6(o),K6(s),K6(r),(a,c,l,u,h=0)=>{On(a),On(c),On(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),On(u),G6(h),h<0||h>=bS)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const p=[];let f=a.length,g,w;if(f===32)p.push(g=X6(a)),w=Zie;else if(f===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Wie,p.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);J6(c)||p.push(c=X6(c));const v=Ec(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(w,v,Ec(c.subarray(0,16)),v),c=c.subarray(16)}const C=16-i;if(C!==c.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){const A=new Uint8Array(12);A.set(c,s?0:12-c.length),c=A,p.push(c)}const b=Ec(c);return Gie(t,w,v,b,l,u,h,o),dh(...p),u}}const Sr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Xie{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Y6(e),On(e,32);const r=Sr(e,0),n=Sr(e,2),i=Sr(e,4),s=Sr(e,6),o=Sr(e,8),a=Sr(e,10),c=Sr(e,12),l=Sr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Sr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],p=o[6],f=o[7],g=o[8],w=o[9],v=Sr(e,r+0),C=Sr(e,r+2),b=Sr(e,r+4),A=Sr(e,r+6),P=Sr(e,r+8),R=Sr(e,r+10),M=Sr(e,r+12),U=Sr(e,r+14);let S=s[0]+(v&8191),L=s[1]+((v>>>13|C<<3)&8191),D=s[2]+((C>>>10|b<<6)&8191),T=s[3]+((b>>>7|A<<9)&8191),x=s[4]+((A>>>4|P<<12)&8191),_=s[5]+(P>>>1&8191),m=s[6]+((P>>>14|R<<2)&8191),y=s[7]+((R>>>11|M<<5)&8191),E=s[8]+((M>>>8|U<<8)&8191),I=s[9]+(U>>>5|i),$=0,O=$+S*a+L*(5*w)+D*(5*g)+T*(5*f)+x*(5*p);$=O>>>13,O&=8191,O+=_*(5*d)+m*(5*h)+y*(5*u)+E*(5*l)+I*(5*c),$+=O>>>13,O&=8191;let B=$+S*c+L*a+D*(5*w)+T*(5*g)+x*(5*f);$=B>>>13,B&=8191,B+=_*(5*p)+m*(5*d)+y*(5*h)+E*(5*u)+I*(5*l),$+=B>>>13,B&=8191;let H=$+S*l+L*c+D*a+T*(5*w)+x*(5*g);$=H>>>13,H&=8191,H+=_*(5*f)+m*(5*p)+y*(5*d)+E*(5*h)+I*(5*u),$+=H>>>13,H&=8191;let K=$+S*u+L*l+D*c+T*a+x*(5*w);$=K>>>13,K&=8191,K+=_*(5*g)+m*(5*f)+y*(5*p)+E*(5*d)+I*(5*h),$+=K>>>13,K&=8191;let V=$+S*h+L*u+D*l+T*c+x*a;$=V>>>13,V&=8191,V+=_*(5*w)+m*(5*g)+y*(5*f)+E*(5*p)+I*(5*d),$+=V>>>13,V&=8191;let q=$+S*d+L*h+D*u+T*l+x*c;$=q>>>13,q&=8191,q+=_*a+m*(5*w)+y*(5*g)+E*(5*f)+I*(5*p),$+=q>>>13,q&=8191;let Q=$+S*p+L*d+D*h+T*u+x*l;$=Q>>>13,Q&=8191,Q+=_*c+m*a+y*(5*w)+E*(5*g)+I*(5*f),$+=Q>>>13,Q&=8191;let re=$+S*f+L*p+D*d+T*h+x*u;$=re>>>13,re&=8191,re+=_*l+m*c+y*a+E*(5*w)+I*(5*g),$+=re>>>13,re&=8191;let he=$+S*g+L*f+D*p+T*d+x*h;$=he>>>13,he&=8191,he+=_*u+m*l+y*c+E*a+I*(5*w),$+=he>>>13,he&=8191;let ee=$+S*w+L*g+D*f+T*p+x*d;$=ee>>>13,ee&=8191,ee+=_*h+m*u+y*l+E*c+I*a,$+=ee>>>13,ee&=8191,$=($<<2)+$|0,$=$+O|0,O=$&8191,$=$>>>13,B+=$,s[0]=O,s[1]=B,s[2]=H,s[3]=K,s[4]=V,s[5]=q,s[6]=Q,s[7]=re,s[8]=he,s[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;dh(n)}update(e){gS(this),e=Y6(e),On(e);const{buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){dh(this.h,this.r,this.buffer,this.pad)}digestInto(e){gS(this),Die(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Jie(t){const e=(n,i)=>t(i).update(Y6(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Qie=Jie(t=>new Xie(t));function ese(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],h=e[1],d=e[2],p=e[3],f=e[4],g=e[5],w=e[6],v=e[7],C=i,b=r[0],A=r[1],P=r[2],R=o,M=a,U=c,S=l,L=u,D=h,T=d,x=p,_=f,m=g,y=w,E=v,I=C,$=b,O=A,B=P;for(let K=0;K<s;K+=2)R=R+L|0,I=Qe(I^R,16),_=_+I|0,L=Qe(L^_,12),R=R+L|0,I=Qe(I^R,8),_=_+I|0,L=Qe(L^_,7),M=M+D|0,$=Qe($^M,16),m=m+$|0,D=Qe(D^m,12),M=M+D|0,$=Qe($^M,8),m=m+$|0,D=Qe(D^m,7),U=U+T|0,O=Qe(O^U,16),y=y+O|0,T=Qe(T^y,12),U=U+T|0,O=Qe(O^U,8),y=y+O|0,T=Qe(T^y,7),S=S+x|0,B=Qe(B^S,16),E=E+B|0,x=Qe(x^E,12),S=S+x|0,B=Qe(B^S,8),E=E+B|0,x=Qe(x^E,7),R=R+D|0,B=Qe(B^R,16),y=y+B|0,D=Qe(D^y,12),R=R+D|0,B=Qe(B^R,8),y=y+B|0,D=Qe(D^y,7),M=M+T|0,I=Qe(I^M,16),E=E+I|0,T=Qe(T^E,12),M=M+T|0,I=Qe(I^M,8),E=E+I|0,T=Qe(T^E,7),U=U+x|0,$=Qe($^U,16),_=_+$|0,x=Qe(x^_,12),U=U+x|0,$=Qe($^U,8),_=_+$|0,x=Qe(x^_,7),S=S+L|0,O=Qe(O^S,16),m=m+O|0,L=Qe(L^m,12),S=S+L|0,O=Qe(O^S,8),m=m+O|0,L=Qe(L^m,7);let H=0;n[H++]=o+R|0,n[H++]=a+M|0,n[H++]=c+U|0,n[H++]=l+S|0,n[H++]=u+L|0,n[H++]=h+D|0,n[H++]=d+T|0,n[H++]=p+x|0,n[H++]=f+_|0,n[H++]=g+m|0,n[H++]=w+y|0,n[H++]=v+E|0,n[H++]=C+I|0,n[H++]=b+$|0,n[H++]=A+O|0,n[H++]=P+B|0}const tse=Yie(ese,{counterRight:!1,counterLength:4,allowShortKeys:!1}),rse=new Uint8Array(16),ES=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(rse.subarray(r))},nse=new Uint8Array(32);function CS(t,e,r,n,i){const s=t(e,r,nse),o=Qie.create(s);i&&ES(o,i),ES(o,n);const a=jie(n.length,i?i.length:0,!0);o.update(a);const c=o.digest();return dh(s,a),c}const ise=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=mS(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=CS(t,e,r,a,n);return s.set(c,o),dh(c),s},decrypt(i,s){s=mS(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=CS(t,e,r,o,n);if(!Fie(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),dh(c),s}}),AS=Hie({blockSize:64,nonceLength:12,tagLength:16},ise(tse));class $S extends N2{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,L6(e);const n=Qi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ai(s)}update(e){return pc(this),this.iHash.update(e),this}digestInto(e){pc(this),Ci(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const B2=(t,e,r)=>new $S(t,e).update(r).digest();B2.create=(t,e)=>new $S(t,e);function sse(t,e,r){return L6(t),r===void 0&&(r=new Uint8Array(t.outputLen)),B2(t,Qi(r),Qi(e))}const Q6=Uint8Array.from([0]),xS=Uint8Array.of();function ose(t,e,r,n=32){L6(t),fa(n);const i=t.outputLen;if(n>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/i);r===void 0&&(r=xS);const o=new Uint8Array(s*i),a=B2.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)Q6[0]=u+1,c.update(u===0?xS:l).update(r).update(Q6).digestInto(l),o.set(l,i*u),a._cloneInto(c);return a.destroy(),c.destroy(),Ai(l,Q6),o.slice(0,n)}const ase=(t,e,r,n,i)=>ose(t,sse(t,e,r),n,i),M2=T2,e4=BigInt(0),t4=BigInt(1);function U2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function L2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function _S(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?e4:BigInt("0x"+t)}function F2(t){return _S(i1(t))}function H2(t){return Ci(t),_S(i1(Uint8Array.from(t).reverse()))}function r4(t,e){return j6(t.toString(16).padStart(e*2,"0"))}function n4(t,e){return r4(t,e).reverse()}function Pn(t,e,r){let n;if(typeof e=="string")try{n=j6(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(U6(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const i4=t=>typeof t=="bigint"&&e4<=t;function cse(t,e,r){return i4(t)&&i4(e)&&i4(r)&&e<=t&&t<r}function s4(t,e,r,n){if(!cse(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function lse(t){let e;for(e=0;t>e4;t>>=t4,e+=1);return e}const j2=t=>(t4<<BigInt(t))-t4;function use(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=d=>new Uint8Array(d),i=d=>Uint8Array.of(d);let s=n(t),o=n(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...d)=>r(o,s,...d),u=(d=n(0))=>{o=l(i(0),d),s=l(),d.length!==0&&(o=l(i(1),d),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){s=l();const f=s.slice();p.push(f),d+=s.length}return Sl(...p)};return(d,p)=>{c(),u(d);let f;for(;!(f=p(h()));)u();return c(),f}}function V2(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function SS(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Nn=BigInt(0),cn=BigInt(1),Ol=BigInt(2),hse=BigInt(3),IS=BigInt(4),OS=BigInt(5),PS=BigInt(8);function $i(t,e){const r=t%e;return r>=Nn?r:e+r}function es(t,e,r){let n=t;for(;e-- >Nn;)n*=n,n%=r;return n}function NS(t,e){if(t===Nn)throw new Error("invert: expected non-zero number");if(e<=Nn)throw new Error("invert: expected positive modulus, got "+e);let r=$i(t,e),n=e,i=Nn,s=cn;for(;r!==Nn;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==cn)throw new Error("invert: does not exist");return $i(i,e)}function TS(t,e){const r=(t.ORDER+cn)/IS,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function dse(t,e){const r=(t.ORDER-OS)/PS,n=t.mul(e,Ol),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,Ol),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function pse(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-cn,r=0;for(;e%Ol===Nn;)e/=Ol,r++;let n=Ol;const i=ph(t);for(;RS(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return TS;let s=i.pow(n,e);const o=(e+cn)/Ol;return function(a,c){if(a.is0(c))return c;if(RS(a,c)!==1)throw new Error("Cannot find square root");let l=r,u=a.mul(a.ONE,s),h=a.pow(c,e),d=a.pow(c,o);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let p=1,f=a.sqr(h);for(;!a.eql(f,a.ONE);)if(p++,f=a.sqr(f),p===l)throw new Error("Cannot find square root");const g=cn<<BigInt(l-p-1),w=a.pow(u,g);l=p,u=a.sqr(w),h=a.mul(h,u),d=a.mul(d,w)}return d}}function fse(t){return t%IS===hse?TS:t%PS===OS?dse:pse(t)}const gse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=gse.reduce((n,i)=>(n[i]="function",n),e);return V2(t,r),t}function wse(t,e,r){if(r<Nn)throw new Error("invalid exponent, negatives unsupported");if(r===Nn)return t.ONE;if(r===cn)return e;let n=t.ONE,i=e;for(;r>Nn;)r&cn&&(n=t.mul(n,i)),i=t.sqr(i),r>>=cn;return n}function kS(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),s),n}function RS(t,e){const r=(t.ORDER-cn)/Ol,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function yse(t,e){e!==void 0&&fa(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ph(t,e,r=!1,n={}){if(t<=Nn)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(r=u.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:o,nByteLength:a}=yse(t,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:a,MASK:j2(o),ZERO:Nn,ONE:cn,create:u=>$i(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Nn<=u&&u<t},is0:u=>u===Nn,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&cn)===cn,neg:u=>$i(-u,t),eql:(u,h)=>u===h,sqr:u=>$i(u*u,t),add:(u,h)=>$i(u+h,t),sub:(u,h)=>$i(u-h,t),mul:(u,h)=>$i(u*h,t),pow:(u,h)=>wse(l,u,h),div:(u,h)=>$i(u*NS(h,t),t),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>NS(u,t),sqrt:s||(u=>(c||(c=fse(t)),c(l,u))),toBytes:u=>r?n4(u,a):r4(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return r?H2(u):F2(u)},invertBatch:u=>kS(l,u),cmov:(u,h,d)=>d?h:u});return Object.freeze(l)}function DS(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function BS(t){const e=DS(t);return e+Math.ceil(e/2)}function bse(t,e,r=!1){const n=t.length,i=DS(e),s=BS(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?H2(t):F2(t),a=$i(o,e-cn)+cn;return r?n4(a,i):r4(a,i)}const fh=BigInt(0),Pl=BigInt(1);function c1(t,e){const r=e.negate();return t?r:e}function vse(t,e,r){const n=e==="pz"?s=>s.pz:s=>s.ez,i=kS(t.Fp,r.map(n));return r.map((s,o)=>s.toAffine(i[o])).map(t.fromAffine)}function MS(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function o4(t,e){MS(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=j2(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function US(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=Pl);const l=e*n,u=l+Math.abs(a)-1,h=a===0,d=a<0,p=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:l}}function Ese(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Cse(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const a4=new WeakMap,LS=new WeakMap;function c4(t){return LS.get(t)||1}function FS(t){if(t!==fh)throw new Error("invalid wNAF")}function Ase(t,e){return{constTimeNegate:c1,hasPrecomputes(r){return c4(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>fh;)n&Pl&&(i=i.add(s)),s=s.double(),n>>=Pl;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=o4(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){let s=t.ZERO,o=t.BASE;const a=o4(r,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:h,isNeg:d,isNegF:p,offsetF:f}=US(i,c,a);i=l,h?o=o.add(c1(p,n[f])):s=s.add(c1(d,n[u]))}return FS(i),{p:s,f:o}},wNAFUnsafe(r,n,i,s=t.ZERO){const o=o4(r,e);for(let a=0;a<o.windows&&i!==fh;a++){const{nextN:c,offset:l,isZero:u,isNeg:h}=US(i,a,o);if(i=c,!u){const d=n[l];s=s.add(h?d.negate():d)}}return FS(i),s},getPrecomputes(r,n,i){let s=a4.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(s=i(s)),a4.set(n,s))),s},wNAFCached(r,n,i){const s=c4(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=c4(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){MS(n,e),LS.set(r,n),a4.delete(r)}}}function $se(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>fh||n>fh;)r&Pl&&(s=s.add(i)),n&Pl&&(o=o.add(i)),i=i.double(),r>>=Pl,n>>=Pl;return{p1:s,p2:o}}function xse(t,e,r,n){Ese(r,t),Cse(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=lse(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=j2(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let p=h;p>=0;p-=c){u.fill(o);for(let g=0;g<s;g++){const w=n[g],v=Number(w>>BigInt(p)&l);u[v]=u[v].add(r[g])}let f=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),f=f.add(w);if(d=d.add(f),p!==0)for(let g=0;g<c;g++)d=d.double()}return d}function HS(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return mse(e),e}else return ph(t)}function _se(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>fh))throw new Error(`CURVE.${o} must be positive bigint`)}const n=HS(e.p,r.Fp),i=HS(e.n,r.Fn),s=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const o of s)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const l1=BigInt(0),gh=BigInt(1),z2=BigInt(2);function Sse(t){return V2(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Ise(t){const e=Sse(t),{P:r,type:n,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||hh,l=a?255:448,u=a?32:56,h=BigInt(a?9:5),d=BigInt(a?121665:39081),p=a?z2**BigInt(254):z2**BigInt(447),f=a?BigInt(8)*z2**BigInt(251)-gh:BigInt(4)*z2**BigInt(445)-gh,g=p+f+gh,w=S=>$i(S,r),v=C(h);function C(S){return n4(w(S),u)}function b(S){const L=Pn("u coordinate",S,u);return a&&(L[31]&=127),w(H2(L))}function A(S){return H2(i(Pn("scalar",S,u)))}function P(S,L){const D=U(b(L),A(S));if(D===l1)throw new Error("invalid private or public key received");return C(D)}function R(S){return P(S,v)}function M(S,L,D){const T=w(S*(L-D));return L=w(L-T),D=w(D+T),{x_2:L,x_3:D}}function U(S,L){s4("u",S,l1,r),s4("scalar",L,p,g);const D=L,T=S;let x=gh,_=l1,m=S,y=gh,E=l1;for(let $=BigInt(l-1);$>=l1;$--){const O=D>>$&gh;E^=O,{x_2:x,x_3:m}=M(E,x,m),{x_2:_,x_3:y}=M(E,_,y),E=O;const B=x+_,H=w(B*B),K=x-_,V=w(K*K),q=H-V,Q=m+y,re=m-y,he=w(re*B),ee=w(Q*K),de=he+ee,Re=he-ee;m=w(de*de),y=w(T*w(Re*Re)),x=w(H*V),_=w(q*(H+w(d*q)))}({x_2:x,x_3:m}=M(E,x,m)),{x_2:_,x_3:y}=M(E,_,y);const I=s(_);return w(x*I)}return{scalarMult:P,scalarMultBase:R,getSharedSecret:(S,L)=>P(S,L),getPublicKey:S=>R(S),utils:{randomPrivateKey:()=>c(u)},GuBytes:v.slice()}}BigInt(0);const Ose=BigInt(1),jS=BigInt(2),Pse=BigInt(3),Nse=BigInt(5),Tse=BigInt(8),VS={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Tse,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function kse(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=VS.p,o=t*t%s*t%s,a=es(o,jS,s)*o%s,c=es(a,Ose,s)*t%s,l=es(c,Nse,s)*c%s,u=es(l,e,s)*l%s,h=es(u,r,s)*u%s,d=es(h,n,s)*h%s,p=es(d,i,s)*d%s,f=es(p,i,s)*d%s,g=es(f,e,s)*l%s;return{pow_p_5_8:es(g,jS,s)*t%s,b2:o}}function Rse(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const l4=(()=>{const t=VS.p;return Ise({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=kse(e);return $i(es(r,Pse,t)*n,t)},adjustScalarBytes:Rse})})();function zS(t){t.lowS!==void 0&&U2("lowS",t.lowS),t.prehash!==void 0&&U2("prehash",t.prehash)}class Dse extends Error{constructor(e=""){super(e)}}const wa={Err:Dse,_tlv:{encode:(t,e)=>{const{Err:r}=wa;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=L2(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?L2(i.length/2|128):"";return L2(t)+s+i+e},decode(t,e){const{Err:r}=wa;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=wa;if(t<u1)throw new e("integer: negative integers are not allowed");let r=L2(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=wa;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return F2(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=wa,i=Pn("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=wa,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},u1=BigInt(0),h1=BigInt(1),Bse=BigInt(2),q2=BigInt(3),Mse=BigInt(4);function Use(t,e,r){function n(i){const s=t.sqr(i),o=t.mul(s,i);return t.add(t.add(o,t.mul(i,e)),r)}return n}function qS(t,e,r){const{BYTES:n}=t;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=Pn("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function Lse(t,e={}){const{Fp:r,Fn:n}=_se("weierstrass",t,e),{h:i,n:s}=t;V2(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(U,S,L){const{x:D,y:T}=S.toAffine(),x=r.toBytes(D);if(U2("isCompressed",L),L){a();const _=!r.isOdd(T);return Sl(WS(_),x)}else return Sl(Uint8Array.of(4),x,r.toBytes(T))}function l(U){Ci(U);const S=r.BYTES,L=S+1,D=2*S+1,T=U.length,x=U[0],_=U.subarray(1);if(T===L&&(x===2||x===3)){const m=r.fromBytes(_);if(!r.isValid(m))throw new Error("bad point: is not on curve, wrong x");const y=d(m);let E;try{E=r.sqrt(y)}catch($){const O=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+O)}a();const I=r.isOdd(E);return(x&1)===1!==I&&(E=r.neg(E)),{x:m,y:E}}else if(T===D&&x===4){const m=r.fromBytes(_.subarray(S*0,S*1)),y=r.fromBytes(_.subarray(S*1,S*2));if(!p(m,y))throw new Error("bad point: is not on curve");return{x:m,y}}else throw new Error(`bad point: got length ${T}, expected compressed=${L} or uncompressed=${D}`)}const u=e.toBytes||c,h=e.fromBytes||l,d=Use(r,t.a,t.b);function p(U,S){const L=r.sqr(S),D=d(U);return r.eql(L,D)}if(!p(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const f=r.mul(r.pow(t.a,q2),Mse),g=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(f,g)))throw new Error("bad curve params: a or b");function w(U,S,L=!1){if(!r.isValid(S)||L&&r.is0(S))throw new Error(`bad point coordinate ${U}`);return S}function v(U){if(!(U instanceof P))throw new Error("ProjectivePoint expected")}const C=SS((U,S)=>{const{px:L,py:D,pz:T}=U;if(r.eql(T,r.ONE))return{x:L,y:D};const x=U.is0();S==null&&(S=x?r.ONE:r.inv(T));const _=r.mul(L,S),m=r.mul(D,S),y=r.mul(T,S);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(y,r.ONE))throw new Error("invZ was invalid");return{x:_,y:m}}),b=SS(U=>{if(U.is0()){if(e.allowInfinityPoint&&!r.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:S,y:L}=U.toAffine();if(!r.isValid(S)||!r.isValid(L))throw new Error("bad point: x or y not field elements");if(!p(S,L))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(U,S,L,D,T){return L=new P(r.mul(L.px,U),L.py,L.pz),S=c1(D,S),L=c1(T,L),S.add(L)}class P{constructor(S,L,D){this.px=w("x",S),this.py=w("y",L,!0),this.pz=w("z",D),Object.freeze(this)}static fromAffine(S){const{x:L,y:D}=S||{};if(!S||!r.isValid(L)||!r.isValid(D))throw new Error("invalid affine point");if(S instanceof P)throw new Error("projective point not allowed");return r.is0(L)&&r.is0(D)?P.ZERO:new P(L,D,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return vse(P,"pz",S)}static fromBytes(S){return Ci(S),P.fromHex(S)}static fromHex(S){const L=P.fromAffine(h(Pn("pointHex",S)));return L.assertValidity(),L}static fromPrivateKey(S){const L=qS(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return P.BASE.multiply(L(S))}static msm(S,L){return xse(P,n,S,L)}precompute(S=8,L=!0){return M.setWindowSize(this,S),L||this.multiply(q2),this}_setWindowSize(S){this.precompute(S)}assertValidity(){b(this)}hasEvenY(){const{y:S}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(S)}equals(S){v(S);const{px:L,py:D,pz:T}=this,{px:x,py:_,pz:m}=S,y=r.eql(r.mul(L,m),r.mul(x,T)),E=r.eql(r.mul(D,m),r.mul(_,T));return y&&E}negate(){return new P(this.px,r.neg(this.py),this.pz)}double(){const{a:S,b:L}=t,D=r.mul(L,q2),{px:T,py:x,pz:_}=this;let m=r.ZERO,y=r.ZERO,E=r.ZERO,I=r.mul(T,T),$=r.mul(x,x),O=r.mul(_,_),B=r.mul(T,x);return B=r.add(B,B),E=r.mul(T,_),E=r.add(E,E),m=r.mul(S,E),y=r.mul(D,O),y=r.add(m,y),m=r.sub($,y),y=r.add($,y),y=r.mul(m,y),m=r.mul(B,m),E=r.mul(D,E),O=r.mul(S,O),B=r.sub(I,O),B=r.mul(S,B),B=r.add(B,E),E=r.add(I,I),I=r.add(E,I),I=r.add(I,O),I=r.mul(I,B),y=r.add(y,I),O=r.mul(x,_),O=r.add(O,O),I=r.mul(O,B),m=r.sub(m,I),E=r.mul(O,$),E=r.add(E,E),E=r.add(E,E),new P(m,y,E)}add(S){v(S);const{px:L,py:D,pz:T}=this,{px:x,py:_,pz:m}=S;let y=r.ZERO,E=r.ZERO,I=r.ZERO;const $=t.a,O=r.mul(t.b,q2);let B=r.mul(L,x),H=r.mul(D,_),K=r.mul(T,m),V=r.add(L,D),q=r.add(x,_);V=r.mul(V,q),q=r.add(B,H),V=r.sub(V,q),q=r.add(L,T);let Q=r.add(x,m);return q=r.mul(q,Q),Q=r.add(B,K),q=r.sub(q,Q),Q=r.add(D,T),y=r.add(_,m),Q=r.mul(Q,y),y=r.add(H,K),Q=r.sub(Q,y),I=r.mul($,q),y=r.mul(O,K),I=r.add(y,I),y=r.sub(H,I),I=r.add(H,I),E=r.mul(y,I),H=r.add(B,B),H=r.add(H,B),K=r.mul($,K),q=r.mul(O,q),H=r.add(H,K),K=r.sub(B,K),K=r.mul($,K),q=r.add(q,K),B=r.mul(H,q),E=r.add(E,B),B=r.mul(Q,q),y=r.mul(V,y),y=r.sub(y,B),B=r.mul(V,H),I=r.mul(Q,I),I=r.add(I,B),new P(y,E,I)}subtract(S){return this.add(S.negate())}is0(){return this.equals(P.ZERO)}multiply(S){const{endo:L}=e;if(!n.isValidNot0(S))throw new Error("invalid scalar: out of range");let D,T;const x=_=>M.wNAFCached(this,_,P.normalizeZ);if(L){const{k1neg:_,k1:m,k2neg:y,k2:E}=L.splitScalar(S),{p:I,f:$}=x(m),{p:O,f:B}=x(E);T=$.add(B),D=A(L.beta,I,O,_,y)}else{const{p:_,f:m}=x(S);D=_,T=m}return P.normalizeZ([D,T])[0]}multiplyUnsafe(S){const{endo:L}=e,D=this;if(!n.isValid(S))throw new Error("invalid scalar: out of range");if(S===u1||D.is0())return P.ZERO;if(S===h1)return D;if(M.hasPrecomputes(this))return this.multiply(S);if(L){const{k1neg:T,k1:x,k2neg:_,k2:m}=L.splitScalar(S),{p1:y,p2:E}=$se(P,D,x,m);return A(L.beta,y,E,T,_)}else return M.wNAFCachedUnsafe(D,S)}multiplyAndAddUnsafe(S,L,D){const T=this.multiplyUnsafe(L).add(S.multiplyUnsafe(D));return T.is0()?void 0:T}toAffine(S){return C(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return i===h1?!0:S?S(P,this):M.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:S}=e;return i===h1?this:S?S(P,this):this.multiplyUnsafe(i)}toBytes(S=!0){return U2("isCompressed",S),this.assertValidity(),u(P,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return i1(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}P.BASE=new P(t.Gx,t.Gy,r.ONE),P.ZERO=new P(r.ZERO,r.ONE,r.ZERO),P.Fp=r,P.Fn=n;const R=n.BITS,M=Ase(P,e.endo?Math.ceil(R/2):R);return P}function WS(t){return Uint8Array.of(t?2:3)}function Fse(t,e,r={}){V2(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||hh,i=e.hmac||((D,...T)=>B2(e.hash,D,Sl(...T))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(D){const T=a>>h1;return D>T}function u(D){return l(D)?o.neg(D):D}function h(D,T){if(!o.isValidNot0(T))throw new Error(`invalid signature ${D}: out of range 1..CURVE.n`)}class d{constructor(T,x,_){h("r",T),h("s",x),this.r=T,this.s=x,_!=null&&(this.recovery=_),Object.freeze(this)}static fromCompact(T){const x=o.BYTES,_=Pn("compactSignature",T,x*2);return new d(o.fromBytes(_.subarray(0,x)),o.fromBytes(_.subarray(x,x*2)))}static fromDER(T){const{r:x,s:_}=wa.toSig(Pn("DER",T));return new d(x,_)}assertValidity(){}addRecoveryBit(T){return new d(this.r,this.s,T)}recoverPublicKey(T){const x=s.ORDER,{r:_,s:m,recovery:y}=this;if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");if(a*Bse<x&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");const E=y===2||y===3?_+a:_;if(!s.isValid(E))throw new Error("recovery id 2 or 3 invalid");const I=s.toBytes(E),$=t.fromHex(Sl(WS((y&1)===0),I)),O=o.inv(E),B=b(Pn("msgHash",T)),H=o.create(-B*O),K=o.create(m*O),V=t.BASE.multiplyUnsafe(H).add($.multiplyUnsafe(K));if(V.is0())throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,o.neg(this.s),this.recovery):this}toBytes(T){if(T==="compact")return Sl(o.toBytes(this.r),o.toBytes(this.s));if(T==="der")return j6(wa.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return i1(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return i1(this.toBytes("compact"))}}const p=qS(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),f={isValidPrivateKey(D){try{return p(D),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const D=a;return bse(n(BS(D)),D)},precompute(D=8,T=t.BASE){return T.precompute(D,!1)}};function g(D,T=!0){return t.fromPrivateKey(D).toBytes(T)}function w(D){if(typeof D=="bigint")return!1;if(D instanceof t)return!0;const T=Pn("key",D).length,x=s.BYTES,_=x+1,m=2*x+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===_))return T===_||T===m}function v(D,T,x=!0){if(w(D)===!0)throw new Error("first arg must be private key");if(w(T)===!1)throw new Error("second arg must be public key");return t.fromHex(T).multiply(p(D)).toBytes(x)}const C=e.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const T=F2(D),x=D.length*8-c;return x>0?T>>BigInt(x):T},b=e.bits2int_modN||function(D){return o.create(C(D))},A=j2(c);function P(D){return s4("num < 2^"+c,D,u1,A),o.toBytes(D)}function R(D,T,x=M){if(["recovered","canonical"].some(V=>V in x))throw new Error("sign() legacy options not supported");const{hash:_}=e;let{lowS:m,prehash:y,extraEntropy:E}=x;m==null&&(m=!0),D=Pn("msgHash",D),zS(x),y&&(D=Pn("prehashed msgHash",_(D)));const I=b(D),$=p(T),O=[P($),P(I)];if(E!=null&&E!==!1){const V=E===!0?n(s.BYTES):E;O.push(Pn("extraEntropy",V))}const B=Sl(...O),H=I;function K(V){const q=C(V);if(!o.isValidNot0(q))return;const Q=o.inv(q),re=t.BASE.multiply(q).toAffine(),he=o.create(re.x);if(he===u1)return;const ee=o.create(Q*o.create(H+he*$));if(ee===u1)return;let de=(re.x===he?0:2)|Number(re.y&h1),Re=ee;return m&&l(ee)&&(Re=u(ee),de^=1),new d(he,Re,de)}return{seed:B,k2sig:K}}const M={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function S(D,T,x=M){const{seed:_,k2sig:m}=R(D,T,x);return use(e.hash.outputLen,o.BYTES,i)(_,m)}t.BASE.precompute(8);function L(D,T,x,_=U){const m=D;T=Pn("msgHash",T),x=Pn("publicKey",x),zS(_);const{lowS:y,prehash:E,format:I}=_;if("strict"in _)throw new Error("options.strict was renamed to lowS");if(I!==void 0&&!["compact","der","js"].includes(I))throw new Error('format must be "compact", "der" or "js"');const $=typeof m=="string"||U6(m),O=!$&&!I&&typeof m=="object"&&m!==null&&typeof m.r=="bigint"&&typeof m.s=="bigint";if(!$&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let B,H;try{if(O)if(I===void 0||I==="js")B=new d(m.r,m.s);else throw new Error("invalid format");if($){try{I!=="compact"&&(B=d.fromDER(m))}catch(de){if(!(de instanceof wa.Err))throw de}!B&&I!=="der"&&(B=d.fromCompact(m))}H=t.fromHex(x)}catch{return!1}if(!B||y&&B.hasHighS())return!1;E&&(T=e.hash(T));const{r:K,s:V}=B,q=b(T),Q=o.inv(V),re=o.create(q*Q),he=o.create(K*Q),ee=t.BASE.multiplyUnsafe(re).add(H.multiplyUnsafe(he));return ee.is0()?!1:o.create(ee.x)===K}return Object.freeze({getPublicKey:g,getSharedSecret:v,sign:S,verify:L,utils:f,Point:t,Signature:d})}function Hse(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=ph(e.n,t.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function jse(t){const{CURVE:e,curveOpts:r}=Hse(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function Vse(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function zse(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=jse(t),i=Lse(e,r),s=Fse(i,n,r);return Vse(t,s)}function u4(t,e){const r=n=>zse({...t,hash:n});return{...r(e),create:r}}const ZS={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},KS={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},GS={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},qse=ph(ZS.p),Wse=ph(KS.p),Zse=ph(GS.p),Kse=u4({...ZS,Fp:qse,lowS:!1},T2);u4({...KS,Fp:Wse,lowS:!1},tie),u4({...GS,Fp:Zse,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},eie);const Gse=Kse,YS="base10",ln="base16",Tn="base64pad",Cc="base64url",d1="utf8",XS=0,ya=1,p1=2,Yse=0,JS=1,f1=12,h4=32;function Xse(){const t=l4.utils.randomPrivateKey(),e=l4.getPublicKey(t);return{privateKey:pt(t,ln),publicKey:pt(e,ln)}}function d4(){const t=hh(h4);return pt(t,ln)}function Jse(t,e){const r=l4.getSharedSecret(It(t,ln),It(e,ln)),n=ase(M2,r,void 0,void 0,h4);return pt(n,ln)}function W2(t){const e=M2(It(t,ln));return pt(e,ln)}function xi(t){const e=M2(It(t,d1));return pt(e,ln)}function QS(t){return It(`${t}`,YS)}function Nl(t){return Number(pt(t,YS))}function eI(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function tI(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function Qse(t){const e=QS(typeof t.type<"u"?t.type:XS);if(Nl(e)===ya&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?It(t.senderPublicKey,ln):void 0,n=typeof t.iv<"u"?It(t.iv,ln):hh(f1),i=It(t.symKey,ln),s=AS(i,n).encrypt(It(t.message,d1)),o=rI({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===Cc?eI(o):o}function eoe(t){const e=It(t.symKey,ln),{sealed:r,iv:n}=g1({encoded:t.encoded,encoding:t.encoding}),i=AS(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return pt(i,d1)}function toe(t,e){const r=QS(p1),n=hh(f1),i=It(t,d1),s=rI({type:r,sealed:i,iv:n});return e===Cc?eI(s):s}function roe(t,e){const{sealed:r}=g1({encoded:t,encoding:e});return pt(r,d1)}function rI(t){if(Nl(t.type)===p1)return pt(ls([t.type,t.sealed]),Tn);if(Nl(t.type)===ya){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return pt(ls([t.type,t.senderPublicKey,t.iv,t.sealed]),Tn)}return pt(ls([t.type,t.iv,t.sealed]),Tn)}function g1(t){const e=(t.encoding||Tn)===Cc?tI(t.encoded):t.encoded,r=It(e,Tn),n=r.slice(Yse,JS),i=JS;if(Nl(n)===ya){const c=i+h4,l=c+f1,u=r.slice(i,c),h=r.slice(c,l),d=r.slice(l);return{type:n,sealed:d,iv:h,senderPublicKey:u}}if(Nl(n)===p1){const c=r.slice(i),l=hh(f1);return{type:n,sealed:c,iv:l}}const s=i+f1,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function noe(t,e){const r=g1({encoded:t,encoding:e?.encoding});return nI({type:Nl(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?pt(r.senderPublicKey,ln):void 0,receiverPublicKey:e?.receiverPublicKey})}function nI(t){const e=t?.type||XS;if(e===ya){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function iI(t){return t.type===ya&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function sI(t){return t.type===p1}function ioe(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return ls([new Uint8Array([4]),e,r])}function soe(t,e){const[r,n,i]=t.split("."),s=Buffer.from(tI(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,l=M2(c),u=ioe(e);if(!Gse.verify(ls([o,a]),l,u))throw new Error("Invalid signature");return ku(t).payload}const ooe="irn";function Z2(t){return t?.relay||{protocol:ooe}}function mh(t){const e=MC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function aoe(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function oI(t){if(!t.includes("wc:")){const l=F_(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:coe(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:aoe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function coe(t){return t.startsWith("//")?t.substring(2):t}function loe(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function aI(t){const e=new URLSearchParams,r=loe(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function K2(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var uoe=Object.defineProperty,hoe=Object.defineProperties,doe=Object.getOwnPropertyDescriptors,cI=Object.getOwnPropertySymbols,poe=Object.prototype.hasOwnProperty,foe=Object.prototype.propertyIsEnumerable,lI=(t,e,r)=>e in t?uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,goe=(t,e)=>{for(var r in e||(e={}))poe.call(e,r)&&lI(t,r,e[r]);if(cI)for(var r of cI(e))foe.call(e,r)&&lI(t,r,e[r]);return t},moe=(t,e)=>hoe(t,doe(e));function wh(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function woe(t){const e=[];return Object.values(t).forEach(r=>{e.push(...wh(r.accounts))}),e}function yoe(t,e){const r=[];return Object.values(t).forEach(n=>{wh(n.accounts).includes(e)&&r.push(...n.methods)}),r}function boe(t,e){const r=[];return Object.values(t).forEach(n=>{wh(n.accounts).includes(e)&&r.push(...n.events)}),r}function G2(t){return t.includes(":")}function yh(t){return G2(t)?t.split(":")[0]:t}function uI(t){var e,r,n;const i={};if(!Ss(t))return i;for(const[s,o]of Object.entries(t)){const a=G2(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=yh(s);i[u]=moe(goe({},i[u]),{chains:xs(a,(e=i[u])==null?void 0:e.chains),methods:xs(c,(r=i[u])==null?void 0:r.methods),events:xs(l,(n=i[u])==null?void 0:n.events)})}return i}function voe(t){const e={};return t?.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function hI(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=voe(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=xs(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}function Eoe(t,e){var r,n,i,s,o,a;const c=uI(t),l=uI(e),u={},h=Object.keys(c).concat(Object.keys(l));for(const d of h)u[d]={chains:xs((r=c[d])==null?void 0:r.chains,(n=l[d])==null?void 0:n.chains),methods:xs((i=c[d])==null?void 0:i.methods,(s=l[d])==null?void 0:s.methods),events:xs((o=c[d])==null?void 0:o.events,(a=l[d])==null?void 0:a.events)};return u}const Coe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Aoe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(t,e){const{message:r,code:n}=Aoe[t];return{message:e?`${r} ${e}`:r,code:n}}function Pt(t,e){const{message:r,code:n}=Coe[t];return{message:e?`${r} ${e}`:r,code:n}}function ba(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ss(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function nr(t){return typeof t>"u"}function zt(t,e){return e&&nr(t)?!0:typeof t=="string"&&!!t.trim().length}function p4(t,e){return e&&nr(t)?!0:typeof t=="number"&&!isNaN(t)}function $oe(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return xl(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=wh(a),h=r[o];(!xl(O_(o,h),u)||!xl(h.methods,c)||!xl(h.events,l))&&(s=!1)}),s):!1}function Y2(t){return zt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function xoe(t){if(zt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Y2(r)}}return!1}function _oe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(zt(t,!1)){if(e(t))return!0;const r=F_(t);return e(r)}}catch{}return!1}function Soe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Ioe(t){return t?.topic}function Ooe(t,e){let r=null;return zt(t?.publicKey,!1)||(r=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function dI(t){let e=!0;return ba(t)?t.length&&(e=t.every(r=>zt(r,!1))):e=!1,e}function Poe(t,e,r){let n=null;return ba(e)&&e.length?e.forEach(i=>{n||Y2(i)||(n=Pt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Y2(t)||(n=Pt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Noe(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Poe(i,O_(i,s),`${e} ${r}`);o&&(n=o)}),n}function Toe(t,e){let r=null;return ba(t)?t.forEach(n=>{r||xoe(n)||(r=Pt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Pt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function koe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Toe(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function Roe(t,e){let r=null;return dI(t?.methods)?dI(t?.events)||(r=Pt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Pt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function pI(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Roe(n,`${e}, namespace`);i&&(r=i)}),r}function Doe(t,e,r){let n=null;if(t&&Ss(t)){const i=pI(t,e);i&&(n=i);const s=Noe(t,e,r);s&&(n=s)}else n=ue("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function f4(t,e){let r=null;if(t&&Ss(t)){const n=pI(t,e);n&&(r=n);const i=koe(t,e);i&&(r=i)}else r=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function fI(t){return zt(t.protocol,!0)}function Boe(t,e){let r=!1;return e&&!t?r=!0:t&&ba(t)&&t.length&&t.forEach(n=>{r=fI(n)}),r}function Moe(t){return typeof t=="number"}function kn(t){return typeof t<"u"&&typeof t!==null}function Uoe(t){return!(!t||typeof t!="object"||!t.code||!p4(t.code,!1)||!t.message||!zt(t.message,!1))}function Loe(t){return!(nr(t)||!zt(t.method,!1))}function Foe(t){return!(nr(t)||nr(t.result)&&nr(t.error)||!p4(t.id,!1)||!zt(t.jsonrpc,!1))}function Hoe(t){return!(nr(t)||!zt(t.name,!1))}function gI(t,e){return!(!Y2(e)||!woe(t).includes(e))}function joe(t,e,r){return zt(r,!1)?yoe(t,e).includes(r):!1}function Voe(t,e,r){return zt(r,!1)?boe(t,e).includes(r):!1}function mI(t,e,r){let n=null;const i=zoe(t),s=qoe(e),o=Object.keys(i),a=Object.keys(s),c=wI(Object.keys(t)),l=wI(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),xl(o,a)||(n=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;const d=wh(e[h].accounts);d.includes(h)||(n=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{n||(xl(i[h].methods,s[h].methods)?xl(i[h].events,s[h].events)||(n=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${h}`)):n=ue("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function zoe(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function wI(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function qoe(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:wh(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function Woe(t,e){return p4(t,!1)&&t<=e.max&&t>=e.min}function yI(){const t=e1();return new Promise(e=>{switch(t){case ni.browser:e(Zoe());break;case ni.reactNative:e(Koe());break;case ni.node:e(Goe());break;default:e(!0)}})}function Zoe(){return lh()&&navigator?.onLine}async function Koe(){return lc()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function Goe(){return!0}function Yoe(t){switch(e1()){case ni.browser:Xoe(t);break;case ni.reactNative:Joe(t);break}}function Xoe(t){!lc()&&lh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Joe(t){lc()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function Qoe(){var t;return lh()&&Fn()?((t=Fn())==null?void 0:t.visibilityState)==="visible":!0}const g4={};class m1{static get(e){return g4[e]}static set(e,r){g4[e]=r}static delete(e){delete g4[e]}}function eae(t){const e=Hi.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function tae({publicKey:t,signature:e,payload:r}){var n;const i=m4(r.method),s=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=iae(r.address),a=r.era==="00"?new Uint8Array([0]):m4(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${nae(r.tip)}`),h=oae(u),d=new Uint8Array([0,...t,o,...e,...a,...l,...h,...i]),p=sae(d.length+1);return new Uint8Array([...p,s,...d])}function rae(t){const e=m4(t),r=JC.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function m4(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function nae(t){return t.startsWith("0x")?t.slice(2):t}function iae(t){const e=Hi.decode(t)[0];return e===42?0:e===60?2:1}function sae(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function oae(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function aae(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=eae(t.transaction.address),n=tae({publicKey:r,signature:e,payload:t.transaction}),i=Buffer.from(n).toString("hex");return rae(i)}const bI="wc",vI=2,X2="core",Is=`${bI}@2:${X2}:`,cae={name:X2,logger:"error"},lae={database:":memory:"},uae="crypto",EI="client_ed25519_seed",hae=Z.ONE_DAY,dae="keychain",pae="0.3",fae="messages",gae="0.3",mae=Z.SIX_HOURS,wae="publisher",CI="irn",yae="error",AI="wss://relay.walletconnect.org",bae="relayer",Mt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},vae="_subscription",_i={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Eae=.1,w4="2.21.7",St={link_mode:"link_mode",relay:"relay"},J2={inbound:"inbound",outbound:"outbound"},Cae="0.3",Aae="WALLETCONNECT_CLIENT_ID",$I="WALLETCONNECT_LINK_MODE_APPS",ii={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},$ae="subscription",xae="0.3",_ae="pairing",Sae="0.3",w1={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Tl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ts={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Iae="history",Oae="0.3",Pae="expirer",Si={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Nae="0.3",Tae="verify-api",kae="https://verify.walletconnect.com",xI="https://verify.walletconnect.org",y1=xI,Rae=`${y1}/v3`,Dae=[kae,xI],Bae="echo",Mae="https://echo.walletconnect.com",Os={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},va={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ac={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},b1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},kl={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},v1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Uae=.1,Lae="event-client",Fae=86400,Hae="https://pulse.walletconnect.org/batch";function jae(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,w=0,v=0,C=f.length;v!==C&&f[v]===0;)v++,g++;for(var b=(C-v)*u+1>>>0,A=new Uint8Array(b);v!==C;){for(var P=f[v],R=0,M=b-1;(P!==0||R<w)&&M!==-1;M--,R++)P+=256*A[M]>>>0,A[M]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");w=R,v++}for(var U=b-w;U!==b&&A[U]===0;)U++;for(var S=c.repeat(g);U<b;++U)S+=t.charAt(A[U]);return S}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var w=0,v=0;f[g]===c;)w++,g++;for(var C=(f.length-g)*l+1>>>0,b=new Uint8Array(C);f[g];){var A=r[f.charCodeAt(g)];if(A===255)return;for(var P=0,R=C-1;(A!==0||P<v)&&R!==-1;R--,P++)A+=a*b[R]>>>0,b[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");v=P,g++}if(f[g]!==" "){for(var M=C-v;M!==C&&b[M]===0;)M++;for(var U=new Uint8Array(w+(C-M)),S=w;M!==C;)U[S++]=b[M++];return U}}}function p(f){var g=d(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var Vae=jae,zae=Vae;const _I=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},qae=t=>new TextEncoder().encode(t),Wae=t=>new TextDecoder().decode(t);class Zae{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kae{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return SI(this,e)}}class Gae{constructor(e){this.decoders=e}or(e){return SI(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const SI=(t,e)=>new Gae({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Yae{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Zae(e,r,n),this.decoder=new Kae(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Q2=({name:t,prefix:e,encode:r,decode:n})=>new Yae(t,e,r,n),E1=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=zae(r,e);return Q2({prefix:t,name:e,encode:n,decode:s=>_I(i(s))})},Xae=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Jae=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ir=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Q2({prefix:e,name:t,encode(i){return Jae(i,n,r)},decode(i){return Xae(i,n,r,t)}}),Qae=Q2({prefix:"\0",name:"identity",encode:t=>Wae(t),decode:t=>qae(t)});var ece=Object.freeze({__proto__:null,identity:Qae});const tce=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rce=Object.freeze({__proto__:null,base2:tce});const nce=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ice=Object.freeze({__proto__:null,base8:nce});const sce=E1({prefix:"9",name:"base10",alphabet:"0123456789"});var oce=Object.freeze({__proto__:null,base10:sce});const ace=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cce=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lce=Object.freeze({__proto__:null,base16:ace,base16upper:cce});const uce=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hce=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dce=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pce=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fce=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gce=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mce=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wce=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yce=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bce=Object.freeze({__proto__:null,base32:uce,base32upper:hce,base32pad:dce,base32padupper:pce,base32hex:fce,base32hexupper:gce,base32hexpad:mce,base32hexpadupper:wce,base32z:yce});const vce=E1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ece=E1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Cce=Object.freeze({__proto__:null,base36:vce,base36upper:Ece});const Ace=E1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$ce=E1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xce=Object.freeze({__proto__:null,base58btc:Ace,base58flickr:$ce});const _ce=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sce=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ice=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oce=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pce=Object.freeze({__proto__:null,base64:_ce,base64pad:Sce,base64url:Ice,base64urlpad:Oce});const II=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Nce=II.reduce((t,e,r)=>(t[r]=e,t),[]),Tce=II.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function kce(t){return t.reduce((e,r)=>(e+=Nce[r],e),"")}function Rce(t){const e=[];for(const r of t){const n=Tce[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Dce=Q2({prefix:"\u{1F680}",name:"base256emoji",encode:kce,decode:Rce});var Bce=Object.freeze({__proto__:null,base256emoji:Dce}),Mce=PI,OI=128,Uce=127,Lce=~Uce,Fce=Math.pow(2,31);function PI(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Fce;)e[r++]=t&255|OI,t/=128;for(;t&Lce;)e[r++]=t&255|OI,t>>>=7;return e[r]=t|0,PI.bytes=r-n+1,e}var Hce=y4,jce=128,NI=127;function y4(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw y4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&NI)<<i:(o&NI)*Math.pow(2,i),i+=7}while(o>=jce);return y4.bytes=s-n,r}var Vce=Math.pow(2,7),zce=Math.pow(2,14),qce=Math.pow(2,21),Wce=Math.pow(2,28),Zce=Math.pow(2,35),Kce=Math.pow(2,42),Gce=Math.pow(2,49),Yce=Math.pow(2,56),Xce=Math.pow(2,63),Jce=function(t){return t<Vce?1:t<zce?2:t<qce?3:t<Wce?4:t<Zce?5:t<Kce?6:t<Gce?7:t<Yce?8:t<Xce?9:10},Qce={encode:Mce,decode:Hce,encodingLength:Jce},TI=Qce;const kI=(t,e,r=0)=>(TI.encode(t,e,r),e),RI=t=>TI.encodingLength(t),b4=(t,e)=>{const r=e.byteLength,n=RI(t),i=n+RI(r),s=new Uint8Array(i+r);return kI(t,s,0),kI(r,s,n),s.set(e,i),new ele(t,r,e,s)};class ele{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const DI=({name:t,code:e,encode:r})=>new tle(t,e,r);class tle{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?b4(this.code,r):r.then(n=>b4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const BI=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),rle=DI({name:"sha2-256",code:18,encode:BI("SHA-256")}),nle=DI({name:"sha2-512",code:19,encode:BI("SHA-512")});var ile=Object.freeze({__proto__:null,sha256:rle,sha512:nle});const MI=0,sle="identity",UI=_I;var ole=Object.freeze({__proto__:null,identity:{code:MI,name:sle,encode:UI,digest:t=>b4(MI,UI(t))}});new TextEncoder,new TextDecoder;const LI={...ece,...rce,...ice,...oce,...lce,...bce,...Cce,...xce,...Pce,...Bce};({...ile,...ole});function FI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ale(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function HI(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const jI=HI("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),v4=HI("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ale(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),cle={utf8:jI,"utf-8":jI,hex:LI.base16,latin1:v4,ascii:v4,binary:v4,...LI};function lle(t,e="utf8"){const r=cle[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FI(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var ule=Object.defineProperty,hle=(t,e,r)=>e in t?ule(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ps=(t,e,r)=>hle(t,typeof e!="symbol"?e+"":e,r);class dle{constructor(e,r){this.core=e,this.logger=r,Ps(this,"keychain",new Map),Ps(this,"name",dae),Ps(this,"version",pae),Ps(this,"initialized",!1),Ps(this,"storagePrefix",Is),Ps(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Ps(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Ps(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),Ps(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Ps(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,k6(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?R6(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ple=Object.defineProperty,fle=(t,e,r)=>e in t?ple(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Or=(t,e,r)=>fle(t,typeof e!="symbol"?e+"":e,r);class gle{constructor(e,r,n){this.core=e,this.logger=r,Or(this,"name",uae),Or(this,"keychain"),Or(this,"randomSessionIdentifier",d4()),Or(this,"initialized",!1),Or(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Or(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Or(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=pg(i);return Qy(s.publicKey)}),Or(this,"generateKeyPair",()=>{this.isInitialized();const i=Xse();return this.setPrivateKey(i.publicKey,i.privateKey)}),Or(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=pg(s),a=this.randomSessionIdentifier;return await yC(a,i,hae,o)}),Or(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Jse(a,s);return this.setSymKey(c,o)}),Or(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||W2(i);return await this.keychain.set(o,i),o}),Or(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Or(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Or(this,"encode",async(i,s,o)=>{this.isInitialized();const a=nI(o),c=as(s);if(sI(a))return toe(c,o?.encoding);if(iI(a)){const d=a.senderPublicKey,p=a.receiverPublicKey;i=await this.generateSharedKey(d,p)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return Qse({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o?.encoding})}),Or(this,"decode",async(i,s,o)=>{this.isInitialized();const a=noe(s,o);if(sI(a)){const c=roe(s,o?.encoding);return Zo(c)}if(iI(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=eoe({symKey:c,encoded:s,encoding:o?.encoding});return Zo(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Or(this,"getPayloadType",(i,s=Tn)=>{const o=g1({encoded:i,encoding:s});return Nl(o.type)}),Or(this,"getPayloadSenderPublicKey",(i,s=Tn)=>{const o=g1({encoded:i,encoding:s});return o.senderPublicKey?pt(o.senderPublicKey,ln):void 0}),this.core=e,this.logger=it(r,this.name),this.keychain=n||new dle(this.core,this.logger)}get context(){return bt(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(EI)}catch{e=d4(),await this.keychain.set(EI,e)}return lle(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mle=Object.defineProperty,wle=Object.defineProperties,yle=Object.getOwnPropertyDescriptors,VI=Object.getOwnPropertySymbols,ble=Object.prototype.hasOwnProperty,vle=Object.prototype.propertyIsEnumerable,E4=(t,e,r)=>e in t?mle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ele=(t,e)=>{for(var r in e||(e={}))ble.call(e,r)&&E4(t,r,e[r]);if(VI)for(var r of VI(e))vle.call(e,r)&&E4(t,r,e[r]);return t},Cle=(t,e)=>wle(t,yle(e)),si=(t,e,r)=>E4(t,typeof e!="symbol"?e+"":e,r);class Ale extends nte{constructor(e,r){super(e,r),this.logger=e,this.core=r,si(this,"messages",new Map),si(this,"messagesWithoutClientAck",new Map),si(this,"name",fae),si(this,"version",gae),si(this,"initialized",!1),si(this,"storagePrefix",Is),si(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),si(this,"set",async(n,i,s)=>{this.isInitialized();const o=xi(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===J2.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,Cle(Ele({},c),{[o]:i}))}return await this.persist(),o}),si(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),si(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),si(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=xi(i);return typeof s[o]<"u"}),si(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=xi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),si(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=it(e,this.name),this.core=r}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,k6(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,k6(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?R6(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?R6(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $le=Object.defineProperty,xle=Object.defineProperties,_le=Object.getOwnPropertyDescriptors,zI=Object.getOwnPropertySymbols,Sle=Object.prototype.hasOwnProperty,Ile=Object.prototype.propertyIsEnumerable,C4=(t,e,r)=>e in t?$le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bh=(t,e)=>{for(var r in e||(e={}))Sle.call(e,r)&&C4(t,r,e[r]);if(zI)for(var r of zI(e))Ile.call(e,r)&&C4(t,r,e[r]);return t},qI=(t,e)=>xle(t,_le(e)),Ii=(t,e,r)=>C4(t,typeof e!="symbol"?e+"":e,r);class Ole extends ite{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Ii(this,"events",new yt.exports.EventEmitter),Ii(this,"name",wae),Ii(this,"queue",new Map),Ii(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Ii(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Ii(this,"needsTransportRestart",!1),Ii(this,"publish",async(n,i,s)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const h=s?.ttl||mae,d=s?.prompt||!1,p=s?.tag||0,f=s?.id||Qr().toString(),g=mh(Z2().protocol),w={id:f,method:s?.publishMethod||g.publish,params:bh({topic:n,message:i,ttl:h,prompt:d,tag:p,attestation:s?.attestation},s?.tvf&&{tvf:s.tvf})},v=`Failed to publish payload, please try again. id:${f} tag:${p}`;try{nr((o=w.params)==null?void 0:o.prompt)&&((a=w.params)==null||delete a.prompt),nr((c=w.params)==null?void 0:c.tag)&&((l=w.params)==null||delete l.tag);const C=new Promise(async b=>{const A=({id:R})=>{var M;((M=w.id)==null?void 0:M.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(Mt.publish,A),b())};this.relayer.events.on(Mt.publish,A);const P=$s(new Promise((R,M)=>{this.rpcPublish(w,s).then(R).catch(U=>{this.logger.warn(U,U?.message),M(U)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${f} tag:${p}`);try{await P,this.events.removeListener(Mt.publish,A)}catch(R){this.queue.set(f,{request:w,opts:s,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:f,topic:n,message:i,opts:s}}),await $s(C,this.publishTimeout,v)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),(u=s?.internal)!=null&&u.throwOnFailedPublish)throw C}finally{this.queue.delete(f)}}),Ii(this,"publishCustom",async n=>{var i,s,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:l,opts:u={}}=n,{attestation:h,tvf:d,publishMethod:p,prompt:f,tag:g,ttl:w=Z.FIVE_MINUTES}=u,v=u.id||Qr().toString(),C=mh(Z2().protocol),b=p||C.publish,A={id:v,method:b,params:bh(qI(bh({},l),{ttl:w,prompt:f,tag:g,attestation:h}),d)},P=`Failed to publish custom payload, please try again. id:${v} tag:${g}`;try{nr((i=A.params)==null?void 0:i.prompt)&&((s=A.params)==null||delete s.prompt),nr((o=A.params)==null?void 0:o.tag)&&((a=A.params)==null||delete a.tag);const R=new Promise(async M=>{const U=({id:L})=>{var D;((D=A.id)==null?void 0:D.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(Mt.publish,U),M())};this.relayer.events.on(Mt.publish,U);const S=$s(new Promise((L,D)=>{this.rpcPublish(A,u).then(L).catch(T=>{this.logger.warn(T,T?.message),D(T)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${v} tag:${g}`);try{await S,this.events.removeListener(Mt.publish,U)}catch(L){this.queue.set(v,{request:A,opts:u,attempt:1}),this.logger.warn(L,L?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,payload:l,opts:u}}),await $s(R,this.publishTimeout,P)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(c=u?.internal)!=null&&c.throwOnFailedPublish)throw R}finally{this.queue.delete(v)}}),Ii(this,"on",(n,i)=>{this.events.on(n,i)}),Ii(this,"once",(n,i)=>{this.events.once(n,i)}),Ii(this,"off",(n,i)=>{this.events.off(n,i)}),Ii(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=it(r,this.name),this.registerEventListeners()}get context(){return bt(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Mt.publish,bh(bh({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const i=e.attempt+1;this.queue.set(r,qI(bh({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Yn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Mt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Mt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Ple=Object.defineProperty,Nle=(t,e,r)=>e in t?Ple(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vh=(t,e,r)=>Nle(t,typeof e!="symbol"?e+"":e,r);class Tle{constructor(){vh(this,"map",new Map),vh(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),vh(this,"get",e=>this.map.get(e)||[]),vh(this,"exists",(e,r)=>this.get(e).includes(r)),vh(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),vh(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var kle=Object.defineProperty,Rle=Object.defineProperties,Dle=Object.getOwnPropertyDescriptors,WI=Object.getOwnPropertySymbols,Ble=Object.prototype.hasOwnProperty,Mle=Object.prototype.propertyIsEnumerable,A4=(t,e,r)=>e in t?kle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C1=(t,e)=>{for(var r in e||(e={}))Ble.call(e,r)&&A4(t,r,e[r]);if(WI)for(var r of WI(e))Mle.call(e,r)&&A4(t,r,e[r]);return t},$4=(t,e)=>Rle(t,Dle(e)),Et=(t,e,r)=>A4(t,typeof e!="symbol"?e+"":e,r);class Ule extends ate{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Et(this,"subscriptions",new Map),Et(this,"topicMap",new Tle),Et(this,"events",new yt.exports.EventEmitter),Et(this,"name",$ae),Et(this,"version",xae),Et(this,"pending",new Map),Et(this,"cached",[]),Et(this,"initialized",!1),Et(this,"storagePrefix",Is),Et(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Et(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Et(this,"clientId"),Et(this,"batchSubscribeTopicsLimit",500),Et(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Et(this,"subscribe",async(n,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=Z2(i),a={topic:n,relay:o,transportType:i?.transportType};(s=i?.internal)!=null&&s.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,i);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Et(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),Et(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),Et(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),Et(this,"on",(n,i)=>{this.events.on(n,i)}),Et(this,"once",(n,i)=>{this.events.once(n,i)}),Et(this,"off",(n,i)=>{this.events.off(n,i)}),Et(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),Et(this,"start",async()=>{await this.onConnect()}),Et(this,"stop",async()=>{await this.onDisconnect()}),Et(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Et(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),Et(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Yn.pulse,async()=>{await this.checkPending()}),this.events.on(ii.created,async n=>{const i=ii.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(ii.deleted,async n=>{const i=ii.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=it(r,this.name),this.clientId=""}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Z2(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=Pt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i,s;const o=await this.getSubscriptionId(e);if((i=n?.internal)!=null&&i.skipSubscribe)return o;(!n||n?.transportType===St.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:mh(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(s=n?.internal)==null?void 0:s.throwOnFailedPublish;try{if(n?.transportType===St.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(h=>this.logger.warn(h))},Z.toMiliseconds(Z.ONE_SECOND)),o;const l=new Promise(async h=>{const d=p=>{p.topic===e&&(this.events.removeListener(ii.created,d),h(p.id))};this.events.on(ii.created,d);try{const p=await $s(new Promise((f,g)=>{this.relayer.request(a).catch(w=>{this.logger.warn(w,w?.message),g(w)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ii.created,d),h(p)}catch{}}),u=await $s(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Mt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:mh(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await $s(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Mt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:mh(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await $s(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Mt.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:mh(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,$4(C1({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,C1({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,C1({},r)),this.topicMap.set(r.topic,e),this.events.emit(ii.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ii.deleted,$4(C1({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ii.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ii.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>$4(C1({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await bne(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return xi(e+await this.getClientId())}}var Lle=Object.defineProperty,ZI=Object.getOwnPropertySymbols,Fle=Object.prototype.hasOwnProperty,Hle=Object.prototype.propertyIsEnumerable,x4=(t,e,r)=>e in t?Lle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KI=(t,e)=>{for(var r in e||(e={}))Fle.call(e,r)&&x4(t,r,e[r]);if(ZI)for(var r of ZI(e))Hle.call(e,r)&&x4(t,r,e[r]);return t},et=(t,e,r)=>x4(t,typeof e!="symbol"?e+"":e,r);class jle extends ste{constructor(e){super(e),et(this,"protocol","wc"),et(this,"version",2),et(this,"core"),et(this,"logger"),et(this,"events",new yt.exports.EventEmitter),et(this,"provider"),et(this,"messages"),et(this,"subscriber"),et(this,"publisher"),et(this,"name",bae),et(this,"transportExplicitlyClosed",!1),et(this,"initialized",!1),et(this,"connectionAttemptInProgress",!1),et(this,"relayUrl"),et(this,"projectId"),et(this,"packageName"),et(this,"bundleId"),et(this,"hasExperiencedNetworkDisruption",!1),et(this,"pingTimeout"),et(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),et(this,"reconnectTimeout"),et(this,"connectPromise"),et(this,"reconnectInProgress",!1),et(this,"requestsInFlight",[]),et(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),et(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Qr().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),et(this,"resetPingTimeout",()=>{O2()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),et(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),et(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Mt.connect)}),et(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),et(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Mt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),et(this,"registerProviderListeners",()=>{this.provider.on(_i.payload,this.onPayloadHandler),this.provider.on(_i.connect,this.onConnectHandler),this.provider.on(_i.disconnect,this.onDisconnectHandler),this.provider.on(_i.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?it(e.logger,this.name):Xn(na({level:e.logger||yae})),this.messages=new Ale(this.logger,e.core),this.subscriber=new Ule(this,this.logger),this.publisher=new Ole(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||AI,nne()?this.packageName=k_():ine()&&(this.bundleId=k_()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return bt(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:St.relay},J2.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ii.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ii.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,KI({internal:{throwOnFailedPublish:o}},r)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await $s(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yI())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=tr(Z.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Mt.message,e),await this.recordMessageEvent(e,J2.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(_i.disconnect,s),await $s(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(_i.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(_i.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(_i.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,Z.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(O2())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new en(new N$(lne({sdkVersion:w4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gu(e)){if(!e.method.endsWith(vae))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:St.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(KI({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ol(e)&&this.events.emit(Mt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,J2.inbound),this.events.emit(Mt.message,e))}async acknowledgePayload(e){const r=ms(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(_i.payload,this.onPayloadHandler),this.provider.off(_i.connect,this.onConnectHandler),this.provider.off(_i.disconnect,this.onDisconnectHandler),this.provider.off(_i.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await yI();Yoe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Yn.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Qoe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Mt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(Eae)))))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Vle(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function GI(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function YI(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const zle="[object RegExp]",qle="[object String]",Wle="[object Number]",Zle="[object Boolean]",XI="[object Arguments]",Kle="[object Symbol]",Gle="[object Date]",Yle="[object Map]",Xle="[object Set]",Jle="[object Array]",Qle="[object Function]",eue="[object ArrayBuffer]",_4="[object Object]",tue="[object Error]",rue="[object DataView]",nue="[object Uint8Array]",iue="[object Uint8ClampedArray]",sue="[object Uint16Array]",oue="[object Uint32Array]",aue="[object BigUint64Array]",cue="[object Int8Array]",lue="[object Int16Array]",uue="[object Int32Array]",hue="[object BigInt64Array]",due="[object Float32Array]",pue="[object Float64Array]";function fue(){}function JI(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function gue(t,e,r){return A1(t,e,void 0,void 0,void 0,void 0,r)}function A1(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return $1(t,e,s,o)}return $1(t,e,s,o)}function $1(t,e,r,n){if(Object.is(t,e))return!0;let i=YI(t),s=YI(e);if(i===XI&&(i=_4),s===XI&&(s=_4),i!==s)return!1;switch(i){case qle:return t.toString()===e.toString();case Wle:{const c=t.valueOf(),l=e.valueOf();return Vle(c,l)}case Zle:case Gle:case Kle:return Object.is(t.valueOf(),e.valueOf());case zle:return t.source===e.source&&t.flags===e.flags;case Qle:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case Yle:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!A1(l,e.get(c),c,t,e,r,n))return!1;return!0}case Xle:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(p=>A1(h,p,void 0,t,e,r,n));if(d===-1)return!1;l.splice(d,1)}return!0}case Jle:case nue:case iue:case sue:case oue:case aue:case cue:case lue:case uue:case hue:case due:case pue:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!A1(t[c],e[c],c,t,e,r,n))return!1;return!0}case eue:return t.byteLength!==e.byteLength?!1:$1(new Uint8Array(t),new Uint8Array(e),r,n);case rue:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:$1(new Uint8Array(t),new Uint8Array(e),r,n);case tue:return t.name===e.name&&t.message===e.message;case _4:{if(!($1(t.constructor,e.constructor,r,n)||JI(t)&&JI(e)))return!1;const c=[...Object.keys(t),...GI(t)],l=[...Object.keys(e),...GI(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=t[h];if(!Object.hasOwn(e,h))return!1;const p=e[h];if(!A1(d,p,h,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function mue(t,e){return gue(t,e,fue)}var wue=Object.defineProperty,QI=Object.getOwnPropertySymbols,yue=Object.prototype.hasOwnProperty,bue=Object.prototype.propertyIsEnumerable,S4=(t,e,r)=>e in t?wue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eO=(t,e)=>{for(var r in e||(e={}))yue.call(e,r)&&S4(t,r,e[r]);if(QI)for(var r of QI(e))bue.call(e,r)&&S4(t,r,e[r]);return t},Rn=(t,e,r)=>S4(t,typeof e!="symbol"?e+"":e,r);class Rl extends ote{constructor(e,r,n,i=Is,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,Rn(this,"map",new Map),Rn(this,"version",Cae),Rn(this,"cached",[]),Rn(this,"initialized",!1),Rn(this,"getKey"),Rn(this,"storagePrefix",Is),Rn(this,"recentlyDeleted",[]),Rn(this,"recentlyDeletedLimit",200),Rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!nr(o)?this.map.set(this.getKey(o),o):Soe(o)?this.map.set(o.id,o):Ioe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Rn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Rn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Rn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>mue(a[c],o[c]))):this.values)),Rn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=eO(eO({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Rn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=it(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vue=Object.defineProperty,Eue=(t,e,r)=>e in t?vue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ve=(t,e,r)=>Eue(t,typeof e!="symbol"?e+"":e,r);class Cue{constructor(e,r){this.core=e,this.logger=r,Ve(this,"name",_ae),Ve(this,"version",Sae),Ve(this,"events",new yt.exports),Ve(this,"pairings"),Ve(this,"initialized",!1),Ve(this,"storagePrefix",Is),Ve(this,"ignoredPayloadTypes",[ya]),Ve(this,"registeredMethods",[]),Ve(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ve(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Ve(this,"create",async n=>{this.isInitialized();const i=d4(),s=await this.core.crypto.setSymKey(i),o=tr(Z.FIVE_MINUTES),a={protocol:CI},c={topic:s,expiry:o,relay:a,active:!1,methods:n?.methods},l=aI({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(Tl.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n?.transportType,internal:n?.internal}),{topic:s,uri:l}}),Ve(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[Os.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=oI(n.uri);i.props.properties.topic=s,i.addTrace(Os.pairing_uri_validation_success),i.addTrace(Os.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Os.existing_pairing),u.active)throw i.setError(va.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Os.pairing_not_expired)}const h=c||tr(Z.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(Os.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Tl.create,d),i.addTrace(Os.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Os.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(va.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(p){throw i.setError(va.subscribe_pairing_topic_failure),p}return i.addTrace(Os.subscribe_pairing_topic_success),d}),Ve(this,"activate",async({topic:n})=>{this.isInitialized();const i=tr(Z.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),Ve(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=_l();this.events.once(ot("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),Ve(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),Ve(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),Ve(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ve(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Pt("USER_DISCONNECTED")),await this.deletePairing(i))}),Ve(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return aI({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),Ve(this,"sendRequest",async(n,i,s)=>{const o=Ht(i,s),a=await this.core.crypto.encode(n,o),c=w1[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Ve(this,"sendResult",async(n,i,s)=>{const o=ms(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=w1[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Ve(this,"sendError",async(n,i,s)=>{const o=Ku(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=w1[c]?w1[c].res:w1.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Ve(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Pt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),Ve(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>uc(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),Ve(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),Ve(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),Ve(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Tl.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Ve(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Yt(i)?this.events.emit(ot("pairing_ping",s),{}):Tt(i)&&this.events.emit(ot("pairing_ping",s),{error:i.error})},500)}),Ve(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Tl.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Ve(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Pt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),Ve(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Pt("WC_METHOD_UNSUPPORTED",n))}),Ve(this,"isValidPair",(n,i)=>{var s;if(!kn(n)){const{message:a}=ue("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(va.malformed_pairing_uri),new Error(a)}if(!_oe(n.uri)){const{message:a}=ue("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(va.malformed_pairing_uri),new Error(a)}const o=oI(n?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(va.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(va.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(va.pairing_expired);const{message:a}=ue("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ve(this,"isValidPing",async n=>{if(!kn(n)){const{message:s}=ue("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Ve(this,"isValidDisconnect",async n=>{if(!kn(n)){const{message:s}=ue("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Ve(this,"isValidPairingTopic",async n=>{if(!zt(n,!1)){const{message:i}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(uc(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ue("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=it(r,this.name),this.pairings=new Rl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Mt.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==St.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);Gu(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):ol(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Si.expired,async e=>{const{topic:r}=M_(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Tl.expire,{topic:r}))})}}var Aue=Object.defineProperty,$ue=(t,e,r)=>e in t?Aue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pr=(t,e,r)=>$ue(t,typeof e!="symbol"?e+"":e,r);class xue extends rte{constructor(e,r){super(e,r),this.core=e,this.logger=r,Pr(this,"records",new Map),Pr(this,"events",new yt.exports.EventEmitter),Pr(this,"name",Iae),Pr(this,"version",Oae),Pr(this,"cached",[]),Pr(this,"initialized",!1),Pr(this,"storagePrefix",Is),Pr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Pr(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:tr(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ts.created,o)}),Pr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Tt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(ts.updated,i))}),Pr(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Pr(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(ts.deleted,s)}}),this.persist()}),Pr(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Pr(this,"on",(n,i)=>{this.events.on(n,i)}),Pr(this,"once",(n,i)=>{this.events.once(n,i)}),Pr(this,"off",(n,i)=>{this.events.off(n,i)}),Pr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ht(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ts.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ts.created,e=>{const r=ts.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ts.updated,e=>{const r=ts.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ts.deleted,e=>{const r=ts.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Yn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{Z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(ts.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _ue=Object.defineProperty,Sue=(t,e,r)=>e in t?_ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qr=(t,e,r)=>Sue(t,typeof e!="symbol"?e+"":e,r);class Iue extends cte{constructor(e,r){super(e,r),this.core=e,this.logger=r,qr(this,"expirations",new Map),qr(this,"events",new yt.exports.EventEmitter),qr(this,"name",Pae),qr(this,"version",Nae),qr(this,"cached",[]),qr(this,"initialized",!1),qr(this,"storagePrefix",Is),qr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),qr(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),qr(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Si.created,{target:s,expiration:o})}),qr(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),qr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Si.deleted,{target:i,expiration:s})}}),qr(this,"on",(n,i)=>{this.events.on(n,i)}),qr(this,"once",(n,i)=>{this.events.once(n,i)}),qr(this,"off",(n,i)=>{this.events.off(n,i)}),qr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=it(r,this.name)}get context(){return bt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return une(e);if(typeof e=="number")return hne(e);const{message:r}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Si.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;Z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Si.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Yn.pulse,()=>this.checkExpirations()),this.events.on(Si.created,e=>{const r=Si.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Si.expired,e=>{const r=Si.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Si.deleted,e=>{const r=Si.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Oue=Object.defineProperty,Pue=(t,e,r)=>e in t?Oue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qt=(t,e,r)=>Pue(t,typeof e!="symbol"?e+"":e,r);class Nue extends lte{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,qt(this,"name",Tae),qt(this,"abortController"),qt(this,"isDevEnv"),qt(this,"verifyUrlV3",Rae),qt(this,"storagePrefix",Is),qt(this,"version",vI),qt(this,"publicKey"),qt(this,"fetchPromise"),qt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qt(this,"register",async i=>{if(!lh()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Fn(),u=this.startAbortTimer(Z.ONE_SECOND*5),h=await new Promise((d,p)=>{const f=()=>{window.removeEventListener("message",w),l.body.removeChild(g),p("attestation aborted")};this.abortController.signal.addEventListener("abort",f);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",f,{signal:this.abortController.signal});const w=v=>{if(v.data&&typeof v.data=="string")try{const C=JSON.parse(v.data);if(C.type==="verify_attestation"){if(ku(C.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",w),d(C.attestation===null?"":C.attestation)}}catch(C){this.logger.warn(C)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),qt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(ku(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),qt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),qt(this,"getVerifyUrl",i=>{let s=i||y1;return Dae.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${y1}`),s=y1),s}),qt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),qt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),qt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),qt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),qt(this,"validateAttestation",(i,s)=>{const o=soe(i,s.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=it(r,this.name),this.abortController=new AbortController,this.isDevEnv=D6(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(e))}}var Tue=Object.defineProperty,kue=(t,e,r)=>e in t?Tue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tO=(t,e,r)=>kue(t,typeof e!="symbol"?e+"":e,r);class Rue extends ute{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,tO(this,"context",Bae),tO(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Mae}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=it(r,this.context)}}var Due=Object.defineProperty,rO=Object.getOwnPropertySymbols,Bue=Object.prototype.hasOwnProperty,Mue=Object.prototype.propertyIsEnumerable,I4=(t,e,r)=>e in t?Due(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x1=(t,e)=>{for(var r in e||(e={}))Bue.call(e,r)&&I4(t,r,e[r]);if(rO)for(var r of rO(e))Mue.call(e,r)&&I4(t,r,e[r]);return t},pr=(t,e,r)=>I4(t,typeof e!="symbol"?e+"":e,r);class Uue extends hte{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,pr(this,"context",Lae),pr(this,"storagePrefix",Is),pr(this,"storageVersion",Uae),pr(this,"events",new Map),pr(this,"shouldPersist",!1),pr(this,"init",async()=>{if(!D6())try{const i={eventId:L_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:D_(this.core.relayer.protocol,this.core.relayer.version,w4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),pr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=L_(),u=this.core.projectId||"",h=Date.now(),d=x1({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),pr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return x1(x1({},a),this.setMethods(a.eventId))}),pr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),pr(this,"setEventListeners",()=>{this.core.heartbeat.on(Yn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(i.timestamp)>Fae&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),pr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),pr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),pr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),pr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),pr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,x1(x1({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),pr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),pr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Hae}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${w4}${s}`,{method:"POST",body:JSON.stringify(i)})}),pr(this,"getAppDomain",()=>R_().url),this.logger=it(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Lue=Object.defineProperty,nO=Object.getOwnPropertySymbols,Fue=Object.prototype.hasOwnProperty,Hue=Object.prototype.propertyIsEnumerable,O4=(t,e,r)=>e in t?Lue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,iO=(t,e)=>{for(var r in e||(e={}))Fue.call(e,r)&&O4(t,r,e[r]);if(nO)for(var r of nO(e))Hue.call(e,r)&&O4(t,r,e[r]);return t},$t=(t,e,r)=>O4(t,typeof e!="symbol"?e+"":e,r);class P4 extends Jee{constructor(e){var r;super(e),$t(this,"protocol",bI),$t(this,"version",vI),$t(this,"name",X2),$t(this,"relayUrl"),$t(this,"projectId"),$t(this,"customStoragePrefix"),$t(this,"events",new yt.exports.EventEmitter),$t(this,"logger"),$t(this,"heartbeat"),$t(this,"relayer"),$t(this,"crypto"),$t(this,"storage"),$t(this,"history"),$t(this,"expirer"),$t(this,"pairing"),$t(this,"verify"),$t(this,"echoClient"),$t(this,"linkModeSupportedApps"),$t(this,"eventClient"),$t(this,"initialized",!1),$t(this,"logChunkController"),$t(this,"on",(a,c)=>this.events.on(a,c)),$t(this,"once",(a,c)=>this.events.once(a,c)),$t(this,"off",(a,c)=>this.events.off(a,c)),$t(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),$t(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:St.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||AI,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=na({level:typeof e?.logger=="string"&&e.logger?e.logger:cae.logger,name:X2}),{logger:s,chunkLoggerController:o}=Qb({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=it(s,this.name),this.heartbeat=new zg,this.crypto=new gle(this,this.logger,e?.keychain),this.history=new xue(this,this.logger),this.expirer=new Iue(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new a$(iO(iO({},lae),e?.storageOptions)),this.relayer=new jle({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Cue(this,this.logger),this.verify=new Nue(this,this.logger,this.storage),this.echoClient=new Rue(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Uue(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new P4(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Aae,n),r}get context(){return bt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem($I,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem($I)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const jue=P4,sO="wc",oO=2,aO="client",N4=`${sO}@${oO}:${aO}:`,T4={name:aO,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},cO="WALLETCONNECT_DEEPLINK_CHOICE",Vue="proposal",lO="Proposal expired",zue="session",Eh=Z.SEVEN_DAYS,que="engine",Nr={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},k4={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},Ns={idle:"IDLE",active:"ACTIVE"},Wue={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Zue="request",Kue=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Gue="wc",Yue="auth",Xue="authKeys",Jue="pairingTopics",Que="requests",em=`${Gue}@${1.5}:${Yue}:`,tm=`${em}:PUB_KEY`;var ehe=Object.defineProperty,the=Object.defineProperties,rhe=Object.getOwnPropertyDescriptors,uO=Object.getOwnPropertySymbols,nhe=Object.prototype.hasOwnProperty,ihe=Object.prototype.propertyIsEnumerable,R4=(t,e,r)=>e in t?ehe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ht=(t,e)=>{for(var r in e||(e={}))nhe.call(e,r)&&R4(t,r,e[r]);if(uO)for(var r of uO(e))ihe.call(e,r)&&R4(t,r,e[r]);return t},Wr=(t,e)=>the(t,rhe(e)),se=(t,e,r)=>R4(t,typeof e!="symbol"?e+"":e,r);class she extends gte{constructor(e){super(e),se(this,"name",que),se(this,"events",new yt.exports),se(this,"initialized",!1),se(this,"requestQueue",{state:Ns.idle,queue:[]}),se(this,"sessionRequestQueue",{state:Ns.idle,queue:[]}),se(this,"emittedSessionRequests",new vne({limit:500})),se(this,"requestQueueDelay",Z.ONE_SECOND),se(this,"expectedPairingMethodMap",new Map),se(this,"recentlyDeletedMap",new Map),se(this,"recentlyDeletedLimit",200),se(this,"relayMessageCache",[]),se(this,"pendingSessions",new Map),se(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Nr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),se(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Wr(ht({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n),n.optionalNamespaces=Eoe(n.requiredNamespaces,n.optionalNamespaces),n.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,h,d=!1;try{if(u){const R=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),R}if(!u||!d){const{topic:R,uri:M}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=R,h=M}if(!u){const{message:R}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(R)}const p=await this.client.core.crypto.generateKeyPair(),f=Nr.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES,g=tr(f),w=Wr(ht(ht({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:CI}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:lr()}),v=ot("session_connect",w.id),{reject:C,resolve:b,done:A}=_l(f,lO),P=({id:R})=>{R===w.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(w.id),this.events.emit(v,{error:{message:lO,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(v,({error:R,session:M})=>{this.client.events.off("proposal_expire",P),R?C(R):M&&b(M)}),await this.sendProposeSession({proposal:w,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:w.id}}}),await this.setProposal(w.id,w),{uri:h,approval:A}}),se(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),se(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[Ac.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(b1.no_internet_connection),S}try{await this.isValidProposalId(r?.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(b1.proposal_not_found),S}try{await this.isValidApprove(r)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(b1.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:f,proposer:g,requiredNamespaces:w,optionalNamespaces:v}=p;let C=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:f});C||(C=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Ac.session_approve_started,properties:{topic:f,trace:[Ac.session_approve_started,Ac.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,P=await this.client.core.crypto.generateSharedKey(b,A),R=ht(ht(ht({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:tr(Eh)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),M=St.relay;C.addTrace(Ac.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:M,internal:{skipSubscribe:!0}})}catch(S){throw C.setError(b1.subscribe_session_topic_failure),S}C.addTrace(Ac.subscribe_session_topic_success);const U=Wr(ht({},R),{topic:P,requiredNamespaces:w,optionalNamespaces:v,pairingTopic:f,acknowledged:!1,self:R.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:b,transportType:St.relay});await this.client.session.set(P,U),C.addTrace(Ac.store_session);try{await this.sendApproveSession({sessionTopic:P,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:b},sessionSettleRequest:R,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:a}}}),C.addTrace(Ac.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(P,Pt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),S}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(P,tr(Eh)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),se(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&await this.sendError({id:n,topic:s,error:i,rpcOpts:Nr.wc_sessionPropose.reject}),await this.deleteProposal(n)}),se(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=_l(),c=lr(),l=Qr().toString(),u=this.client.session.get(n).namespaces;return this.events.once(ot("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}}),se(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=lr(),{done:s,resolve:o,reject:a}=_l();return this.events.once(ot("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,tr(Eh)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),se(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:n,request:i,topic:s,expiry:o=Nr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===St.relay&&await this.confirmOnlineStateOrThrow();const c=lr(),l=Qr().toString(),{done:u,resolve:h,reject:d}=_l(o,"Request expired. Please try again.");this.events.once(ot("session_request",c),({error:w,result:v})=>{w?d(w):h(v)});const p="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:p,params:{request:Wr(ht({},i),{expiryTimestamp:tr(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(w=>d(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const g={request:Wr(ht({},i),{expiryTimestamp:tr(o)}),chainId:n};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:p,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(v=>d(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),w()}),new Promise(async w=>{var v;if(!((v=a.sessionConfig)!=null&&v.disableDeepLink)){const C=await gne(this.client.core.storage,cO);await dne({id:c,topic:s,wcDeepLink:C})}w()}),u()]).then(w=>w[2])}),se(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===St.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Yt(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Tt(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),se(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=lr(),s=Qr().toString(),{done:o,resolve:a,reject:c}=_l();this.events.once(ot("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),se(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Qr().toString(),a=lr();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),se(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Pt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ue("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),se(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>$oe(n,r)))),se(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),se(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?St.link_mode:St.relay;o===St.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:p,nbf:f,methods:g=[],expiry:w}=r,v=[...r.resources||[]],{topic:C,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:C,uri:b}});const A=await this.client.core.crypto.generateKeyPair(),P=W2(A);if(await Promise.all([this.client.auth.authKeys.set(tm,{responseTopic:P,publicKey:A}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:C})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${C}`),g.length>0){const{namespace:$}=$l(a[0]);let O=Pie($,"request",g);R2(v)&&(O=Tie(O,v.pop())),v.push(O)}const R=w&&w>Nr.wc_sessionAuthenticate.req.ttl?w:Nr.wc_sessionAuthenticate.req.ttl,M={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:f,resources:v},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:tr(R)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:C,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:tr(Nr.wc_sessionPropose.req.ttl),id:lr()},{done:L,resolve:D,reject:T}=_l(R,"Request expired"),x=lr(),_=ot("session_connect",S.id),m=ot("session_request",x),y=async({error:$,session:O})=>{this.events.off(m,E),$?T($):O&&D({session:O})},E=async $=>{var O,B,H;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),$.error){const ee=Pt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===ee.code?void 0:(this.events.off(_,y),T($.error.message))}await this.deleteProposal(S.id),this.events.off(_,y);const{cacaos:K,responder:V}=$.result,q=[],Q=[];for(const ee of K){await lS({cacao:ee,projectId:this.client.core.projectId})||(this.client.logger.error(ee,"Signature verification failed"),T(Pt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=ee,Re=R2(de.resources),rt=[Z6(de.iss)],wt=k2(de.iss);if(Re){const sr=dS(Re),Mi=pS(Re);q.push(...sr),rt.push(...Mi)}for(const sr of rt)Q.push(`${sr}:${wt}`)}const re=await this.client.core.crypto.generateSharedKey(A,V.publicKey);let he;q.length>0&&(he={topic:re,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:V,controller:V.publicKey,expiry:tr(Eh),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:C,namespaces:hI([...new Set(q)],[...new Set(Q)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,he),C&&await this.client.core.pairing.updateMetadata({topic:C,metadata:V.metadata}),he=this.client.session.get(re)),(O=this.client.metadata.redirect)!=null&&O.linkMode&&(B=V.metadata.redirect)!=null&&B.linkMode&&(H=V.metadata.redirect)!=null&&H.universal&&n&&(this.client.core.addLinkModeSupportedApp(V.metadata.redirect.universal),this.client.session.update(re,{transportType:St.link_mode})),D({auths:K,session:he})};this.events.once(_,y),this.events.once(m,E);let I;try{if(s){const $=Ht("wc_sessionAuthenticate",M,x);this.client.core.history.set(C,$);const O=await this.client.core.crypto.encode("",$,{type:p1,encoding:Cc});I=K2(n,C,O)}else await Promise.all([this.sendRequest({topic:C,method:"wc_sessionAuthenticate",params:M,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:C,method:"wc_sessionPropose",params:S,expiry:Nr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch($){throw this.events.off(_,y),this.events.off(m,E),$}return await this.setProposal(S.id,S),await this.setAuthRequest(x,{request:Wr(ht({},M),{verifyContext:{}}),pairingTopic:C,transportType:o}),{uri:I??b,response:L}}),se(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[kl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw s.setError(v1.no_internet_connection),w}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(v1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||St.relay;a===St.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=W2(c),h={type:ya,receiverPublicKey:c,senderPublicKey:l},d=[],p=[];for(const w of i){if(!await lS({cacao:w,projectId:this.client.core.projectId})){s.setError(v1.invalid_cacao);const P=Pt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:P,encodeOpts:h}),new Error(P.message)}s.addTrace(kl.cacaos_verified);const{p:v}=w,C=R2(v.resources),b=[Z6(v.iss)],A=k2(v.iss);if(C){const P=dS(C),R=pS(C);d.push(...P),b.push(...R)}for(const P of b)p.push(`${P}:${A}`)}const f=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(kl.create_authenticated_session_topic);let g;if(d?.length>0){g={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:tr(Eh),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:hI([...new Set(d)],[...new Set(p)]),transportType:a},s.addTrace(kl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(w){throw s.setError(v1.subscribe_authenticated_session_topic_failure),w}s.addTrace(kl.subscribe_authenticated_session_topic_success),await this.client.session.set(f,g),s.addTrace(kl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(kl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw s.setError(v1.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),se(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===St.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=W2(o),l={type:ya,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:Nr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),se(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return uS(n,i)}),se(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),se(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),se(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Pt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(cO).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Pt("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Ns.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),se(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(b1.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Pt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),se(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Ns.idle,this.client.events.emit("session_request_expire",{id:r}))}),se(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),se(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),se(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,tr(Nr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),se(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=St.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),se(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||tr(Nr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),se(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h,publishOpts:d={}}=r,p=Ht(i,s,c);let f;const g=!!u;try{const C=g?Cc:Tn;f=await this.client.core.crypto.encode(n,p,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),C}let w;if(Kue.includes(i)){const C=xi(JSON.stringify(p)),b=xi(f);w=await this.client.core.verify.register({id:b,decryptedId:C})}const v=ht(ht({},Nr[i].req),d);if(v.attestation=w,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(n,p),g){const C=K2(u,n,f);await global.Linking.openURL(C,this.client.name)}else v.tvf=Wr(ht({},h),{correlationId:p.id}),l?(v.internal=Wr(ht({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,v)):this.client.core.relayer.publish(n,f,v).catch(C=>this.client.logger.error(C));return p.id}),se(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:i}=r,s=Ht("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,s);const o=await this.client.core.crypto.encode(n.pairingTopic,s,{encoding:Tn}),a=xi(JSON.stringify(s)),c=xi(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:Wr(ht({},i),{publishMethod:"wc_proposeSession",attestation:l})})}),se(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:a}=r,c=ms(s.id,i),l=await this.client.core.crypto.encode(s.pairingTopic,c,{encoding:Tn}),u=Ht("wc_sessionSettle",o,a?.id),h=await this.client.core.crypto.encode(n,u,{encoding:Tn});this.client.core.history.set(n,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:s.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:h},opts:Wr(ht({},a),{publishMethod:"wc_approveSession"})})}),se(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=ms(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=h?Cc:Tn;u=await this.client.core.crypto.encode(i,l,Wr(ht({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),f}let d,p;try{d=await this.client.core.history.get(i,n);const f=d.request;try{p=this.getTVFParams(n,f.params,s)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g?.message}`)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),f}if(h){const f=K2(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=d.request.method,g=Nr[f].res;g.tvf=Wr(ht({},p),{correlationId:n}),o?(g.internal=Wr(ht({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),se(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=Ku(n,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=h?Cc:Tn;u=await this.client.core.crypto.encode(i,l,Wr(ht({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),p}let d;try{d=await this.client.core.history.get(i,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),p}if(h){const p=K2(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=d.request.method,f=a||Nr[p].res;this.client.core.relayer.publish(i,u,f)}await this.client.core.history.resolve(l)}),se(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;uc(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{uc(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),se(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),se(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),se(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ns.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ns.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Ns.idle}),se(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),se(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),se(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),se(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),se(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(va.proposal_listener_not_found)),this.isValidConnect(ht({},i.params));const u=a.expiryTimestamp||tr(Nr.wc_sessionPropose.req.ttl),h=ht({id:c,pairingTopic:n,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:xi(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l?.addTrace(Os.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Nr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),se(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Yt(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else if(Tt(n)){await this.deleteProposal(s);const o=ot("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),se(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=n.params,p=[...this.pendingSessions.values()].find(w=>w.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const f=this.client.proposal.get(p.proposalId),g=Wr(ht(ht(ht({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:St.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(ot("session_connect",p.proposalId),{session:g}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:r,result:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),se(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Yt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ot("session_approve",i),{})):Tt(n)&&(await this.client.session.delete(r,Pt("USER_DISCONNECTED")),this.events.emit(ot("session_approve",i),{error:n.error}))}),se(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=m1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Pt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ht({topic:r},i));try{m1.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0})}catch(c){throw m1.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),se(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),se(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=ot("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(ot("session_update",i),{}):Tt(n)&&this.events.emit(ot("session_update",i),{error:n.error})}),se(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,tr(Eh)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),se(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=ot("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(ot("session_extend",i),{}):Tt(n)&&this.events.emit(ot("session_extend",i),{error:n.error})}),se(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),se(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=ot("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Yt(n)?this.events.emit(ot("session_ping",i),{}):Tt(n)&&this.events.emit(ot("session_ping",i),{error:n.error})},500)}),se(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Mt.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Pt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),se(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:h,params:d}=a;try{await this.isValidRequest(ht({topic:o},d));const p=this.client.session.get(o),f=await this.getVerifyContext({attestationId:c,hash:xi(JSON.stringify(Ht("wc_sessionRequest",d,h))),encryptedId:l,metadata:p.peer.metadata,transportType:u}),g={id:h,topic:o,params:d,verifyContext:f};await this.setPendingSessionRequest(g),u===St.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=p.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(p){await this.sendError({id:h,topic:o,error:p}),this.client.logger.error(p)}}),se(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=ot("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Yt(n)?this.events.emit(ot("session_request",i),{result:n.result}):Tt(n)&&this.events.emit(ot("session_request",i),{error:n.error})}),se(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=m1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ht({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),m1.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),se(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Yt(n)?this.events.emit(ot("session_request",i),{result:n.result}):Tt(n)&&this.events.emit(ot("session_request",i),{error:n.error})}),se(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:xi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),p={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:p,pairingTopic:i,transportType:c}),c===St.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),p={type:ya,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:p,rpcOpts:Nr.wc_sessionAuthenticate.autoReject,appLink:d})}}),se(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),se(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ns.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),se(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=ot("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ot("session_request",s.request.id),{error:n})})}),se(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ns.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),se(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=Ns.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),se(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Ht("wc_sessionPropose",Wr(ht({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),se(this,"isValidConnect",async r=>{if(!kn(r)){const{message:l}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(nr(n)||await this.isValidPairingTopic(n),!Boe(c,!0)){const{message:l}=ue("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!nr(i)&&Ss(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!nr(s)&&Ss(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),nr(o)||this.validateSessionProps(o,"sessionProperties"),!nr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),se(this,"validateNamespaces",(r,n)=>{const i=Doe(r,"connect()",n);if(i)throw new Error(i.message)}),se(this,"isValidApprove",async r=>{if(!kn(r))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=f4(i,"approve()");if(l)throw new Error(l.message);const u=mI(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!zt(s,!0)){const{message:h}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(nr(o)||this.validateSessionProps(o,"sessionProperties"),!nr(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),se(this,"isValidReject",async r=>{if(!kn(r)){const{message:s}=ue("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!Uoe(i)){const{message:s}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),se(this,"isValidSessionSettleRequest",r=>{if(!kn(r)){const{message:l}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!fI(n)){const{message:l}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Ooe(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=f4(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(uc(o)){const{message:l}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),se(this,"isValidUpdate",async r=>{if(!kn(r)){const{message:c}=ue("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=f4(i,"update()");if(o)throw new Error(o.message);const a=mI(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),se(this,"isValidExtend",async r=>{if(!kn(r)){const{message:i}=ue("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),se(this,"isValidRequest",async r=>{if(!kn(r)){const{message:c}=ue("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!gI(a,s)){const{message:c}=ue("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Loe(i)){const{message:c}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!joe(a,s,i.method)){const{message:c}=ue("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!Woe(o,k4)){const{message:c}=ue("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${k4.min} and ${k4.max}`);throw new Error(c)}}),se(this,"isValidRespond",async r=>{var n;if(!kn(r)){const{message:o}=ue("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!Foe(s)){const{message:o}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),se(this,"isValidPing",async r=>{if(!kn(r)){const{message:i}=ue("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),se(this,"isValidEmit",async r=>{if(!kn(r)){const{message:a}=ue("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!gI(o,s)){const{message:a}=ue("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Hoe(i)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Voe(o,s,i.name)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),se(this,"isValidDisconnect",async r=>{if(!kn(r)){const{message:i}=ue("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),se(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!zt(i,!1))throw new Error("uri is required parameter");if(!zt(s,!1))throw new Error("domain is required parameter");if(!zt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>$l(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=$l(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),se(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||y1,validation:"UNKNOWN",origin:o.url||""}};try{if(a===St.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),se(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=ue("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),se(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),se(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),se(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),se(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,h,d;return!r||n!==St.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((h=r?.redirect)==null?void 0:h.universal)!==""&&((d=r?.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),se(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r?.redirect)==null?void 0:i.universal:void 0}),se(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=U_(r,"topic")||"",i=decodeURIComponent(U_(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:St.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),se(this,"registerLinkModeListeners",async()=>{var r;if(D6()||lc()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),se(this,"getTVFParams",(r,n,i)=>{var s,o,a;if(!((s=n.request)!=null&&s.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const l=this.extractTxHashesFromResult(n.request,i);c.txHashes=l,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),se(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=r?.data||((n=r?.[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),se(this,"extractTxHashesFromResult",(r,n)=>{var i;try{if(!n)return[];const s=r.method,o=Wue[s];if(s==="sui_signTransaction")return[fie(n.transactionBytes)];if(s==="near_signTransaction")return[sS(n)];if(s==="near_signTransactions")return n.map(c=>sS(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=n.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[aae({transaction:r.params.transactionPayload,signature:n.signature})];if(s==="algo_signTxn")return ba(n)?n.map(c=>oS(c)):[oS(n)];if(s==="cosmos_signDirect")return[mie(n)];if(typeof n=="string")return[n];const a=n[o.key];if(ba(a))return s==="solana_signAllTransactions"?a.map(c=>pie(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Mt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(tm)?this.client.auth.authKeys.get(tm):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===St.link_mode?Cc:Tn});Gu(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:xi(n)})):ol(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Si.expired,async e=>{const{topic:r,id:n}=M_(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ue("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ue("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Tl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Tl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!zt(e,!1)){const{message:r}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(uc(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!zt(e,!1)){const{message:r}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(uc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ue("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ue("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(zt(e,!1)){const{message:r}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Moe(e)){const{message:r}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(uc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class ohe extends Rl{constructor(e,r){super(e,r,Vue,N4),this.core=e,this.logger=r}}class ahe extends Rl{constructor(e,r){super(e,r,zue,N4),this.core=e,this.logger=r}}class che extends Rl{constructor(e,r){super(e,r,Zue,N4,n=>n.id),this.core=e,this.logger=r}}class lhe extends Rl{constructor(e,r){super(e,r,Xue,em,()=>tm),this.core=e,this.logger=r}}class uhe extends Rl{constructor(e,r){super(e,r,Jue,em),this.core=e,this.logger=r}}class hhe extends Rl{constructor(e,r){super(e,r,Que,em,n=>n.id),this.core=e,this.logger=r}}var dhe=Object.defineProperty,phe=(t,e,r)=>e in t?dhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D4=(t,e,r)=>phe(t,typeof e!="symbol"?e+"":e,r);class fhe{constructor(e,r){this.core=e,this.logger=r,D4(this,"authKeys"),D4(this,"pairingTopics"),D4(this,"requests"),this.authKeys=new lhe(this.core,this.logger),this.pairingTopics=new uhe(this.core,this.logger),this.requests=new hhe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var ghe=Object.defineProperty,mhe=(t,e,r)=>e in t?ghe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ze=(t,e,r)=>mhe(t,typeof e!="symbol"?e+"":e,r);class B4 extends fte{constructor(e){super(e),ze(this,"protocol",sO),ze(this,"version",oO),ze(this,"name",T4.name),ze(this,"metadata"),ze(this,"core"),ze(this,"logger"),ze(this,"events",new yt.exports.EventEmitter),ze(this,"engine"),ze(this,"session"),ze(this,"proposal"),ze(this,"pendingRequest"),ze(this,"auth"),ze(this,"signConfig"),ze(this,"on",(n,i)=>this.events.on(n,i)),ze(this,"once",(n,i)=>this.events.once(n,i)),ze(this,"off",(n,i)=>this.events.off(n,i)),ze(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),ze(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ze(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ze(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),ze(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||T4.name,this.metadata=one(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Xn(na({level:e?.logger||T4.logger}));this.core=e?.core||new jue(e),this.logger=it(r,this.name),this.session=new ahe(this.core,this.logger),this.proposal=new ohe(this.core,this.logger),this.pendingRequest=new che(this.core,this.logger),this.engine=new she(this),this.auth=new fhe(this.core,this.logger)}static async init(e){const r=new B4(e);return await r.initialize(),r}get context(){return bt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const hO="error",whe="wss://relay.walletconnect.org",yhe="wc",bhe="universal_provider",rm=`${yhe}@2:${bhe}:`,dO="https://rpc.walletconnect.org/v1/",pO="generic",vhe=`${dO}bundler`,Oi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function M4(t){return t==null||typeof t!="object"&&typeof t!="function"}function fO(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function gO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Ehe="[object RegExp]",mO="[object String]",wO="[object Number]",yO="[object Boolean]",bO="[object Arguments]",Che="[object Symbol]",Ahe="[object Date]",$he="[object Map]",xhe="[object Set]",_he="[object Array]",She="[object ArrayBuffer]",Ihe="[object Object]",Ohe="[object DataView]",Phe="[object Uint8Array]",Nhe="[object Uint8ClampedArray]",The="[object Uint16Array]",khe="[object Uint32Array]",Rhe="[object Int8Array]",Dhe="[object Int16Array]",Bhe="[object Int32Array]",Mhe="[object Float32Array]",Uhe="[object Float64Array]";function U4(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lhe(t,e){return Ch(t,void 0,t,new Map,e)}function Ch(t,e,r,n=new Map,i=void 0){const s=i?.(t,e,r,n);if(s!=null)return s;if(M4(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ch(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,Ch(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Ch(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(U4(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ch(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Dl(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Dl(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Dl(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Dl(o,t,r,n,i),o}if(typeof t=="object"&&Fhe(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Dl(o,t,r,n,i),o}return t}function Dl(t,e,r=t,n,i){const s=[...Object.keys(e),...fO(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ch(e[a],a,r,n,i))}}function Fhe(t){switch(gO(t)){case bO:case _he:case She:case Ohe:case yO:case Ahe:case Mhe:case Uhe:case Rhe:case Dhe:case Bhe:case $he:case wO:case Ihe:case Ehe:case xhe:case mO:case Che:case Phe:case Nhe:case The:case khe:return!0;default:return!1}}function Hhe(t,e){return Lhe(t,(r,n,i,s)=>{const o=e?.(r,n,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case wO:case mO:case yO:{const a=new t.constructor(t?.valueOf());return Dl(a,t),a}case bO:{const a={};return Dl(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function vO(t){return Hhe(t)}function EO(t){return t!==null&&typeof t=="object"&&gO(t)==="[object Arguments]"}function CO(t){return typeof t=="object"&&t!==null}function jhe(){}function Vhe(t){return U4(t)}function zhe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function qhe(t){if(M4(t))return t;if(Array.isArray(t)||U4(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function Whe(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=L4(i,o,n,new Map)}return i}function L4(t,e,r,n){if(M4(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return qhe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...fO(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(EO(a)&&(a={...a}),EO(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=vO(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const p=h[d];u[p]=c[p]}c=u}else c=[];const l=r(c,a,o,t,e,n);l!=null?t[o]=l:Array.isArray(a)||CO(c)&&CO(a)?t[o]=L4(c,a,r,n):c==null&&zhe(a)?t[o]=L4({},a,r,n):c==null&&Vhe(a)?t[o]=vO(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Zhe(t,...e){return Whe(t,...e,jhe)}var Khe=Object.defineProperty,Ghe=Object.defineProperties,Yhe=Object.getOwnPropertyDescriptors,AO=Object.getOwnPropertySymbols,Xhe=Object.prototype.hasOwnProperty,Jhe=Object.prototype.propertyIsEnumerable,$O=(t,e,r)=>e in t?Khe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nm=(t,e)=>{for(var r in e||(e={}))Xhe.call(e,r)&&$O(t,r,e[r]);if(AO)for(var r of AO(e))Jhe.call(e,r)&&$O(t,r,e[r]);return t},Qhe=(t,e)=>Ghe(t,Yhe(e));function oi(t,e,r){var n;const i=$l(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${dO}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Bl(t){return t.includes(":")?t.split(":")[1]:t}function xO(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ede(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function _O(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,i;return((n=r?.chains)==null?void 0:n.length)&&((i=r?.chains)==null?void 0:i.length)>0}))}function im(t={},e={}){const r=_O(SO(t)),n=_O(SO(e));return Zhe(r,n)}function SO(t){var e,r,n,i,s;const o={};if(!Ss(t))return o;for(const[a,c]of Object.entries(t)){const l=G2(a)?[a]:c.chains,u=c.methods||[],h=c.events||[],d=c.rpcMap||{},p=yh(a);o[p]=Qhe(nm(nm({},o[p]),c),{chains:xs(l,(e=o[p])==null?void 0:e.chains),methods:xs(u,(r=o[p])==null?void 0:r.methods),events:xs(h,(n=o[p])==null?void 0:n.events)}),(Ss(d)||Ss(((i=o[p])==null?void 0:i.rpcMap)||{}))&&(o[p].rpcMap=nm(nm({},d),(s=o[p])==null?void 0:s.rpcMap))}return o}function IO(t){return t.includes(":")?t.split(":")[2]:t}function OO(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=G2(r)?[r]:n.chains?n.chains:xO(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function F4(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const PO={},tt=t=>PO[t],H4=(t,e)=>{PO[t]=e};var tde=Object.defineProperty,NO=Object.getOwnPropertySymbols,rde=Object.prototype.hasOwnProperty,nde=Object.prototype.propertyIsEnumerable,TO=(t,e,r)=>e in t?tde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kO=(t,e)=>{for(var r in e||(e={}))rde.call(e,r)&&TO(t,r,e[r]);if(NO)for(var r of NO(e))nde.call(e,r)&&TO(t,r,e[r]);return t};const RO="eip155",ide=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],sde=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,j4=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,DO=t=>Object.keys(t).filter(e=>ide.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}),ode=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:i={}}=t,s={};if(!Ss(i)&&!Ss(n))return;const o=DO(n);for(const a of r){const c=sde(a);if(!c)continue;s[j4(c)]=o;const l=i?.[`${RO}:${c}`];if(l){const u=l?.[`${RO}:${c}:${e}`];s[j4(c)]=kO(kO({},s[j4(c)]),DO(u||l))}}for(const[a,c]of Object.entries(s))Object.keys(c).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var ade=Object.defineProperty,cde=(t,e,r)=>e in t?ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ah=(t,e,r)=>cde(t,typeof e!="symbol"?e+"":e,r);class lde{constructor(e){Ah(this,"name","polkadot"),Ah(this,"client"),Ah(this,"httpProviders"),Ah(this,"events"),Ah(this,"namespace"),Ah(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Bl(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var ude=Object.defineProperty,hde=Object.defineProperties,dde=Object.getOwnPropertyDescriptors,BO=Object.getOwnPropertySymbols,pde=Object.prototype.hasOwnProperty,fde=Object.prototype.propertyIsEnumerable,V4=(t,e,r)=>e in t?ude(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MO=(t,e)=>{for(var r in e||(e={}))pde.call(e,r)&&V4(t,r,e[r]);if(BO)for(var r of BO(e))fde.call(e,r)&&V4(t,r,e[r]);return t},UO=(t,e)=>hde(t,dde(e)),$h=(t,e,r)=>V4(t,typeof e!="symbol"?e+"":e,r);class gde{constructor(e){$h(this,"name","eip155"),$h(this,"client"),$h(this,"chainId"),$h(this,"namespace"),$h(this,"httpProviders"),$h(this,"events"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||oi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Bl(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i,s,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l?.sessionProperties)==null?void 0:o.capabilities)||{},h=`${a}${c.join(",")}`,d=u?.[h];if(d)return d;let p;try{p=ode(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(p)return p;const f=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:UO(MO({},l.sessionProperties||{}),{capabilities:UO(MO({},u||{}),{[h]:f})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return f}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ht("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${vhe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var mde=Object.defineProperty,wde=(t,e,r)=>e in t?mde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xh=(t,e,r)=>wde(t,typeof e!="symbol"?e+"":e,r);class yde{constructor(e){xh(this,"name","solana"),xh(this,"client"),xh(this,"httpProviders"),xh(this,"events"),xh(this,"namespace"),xh(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Bl(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var bde=Object.defineProperty,vde=(t,e,r)=>e in t?bde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_h=(t,e,r)=>vde(t,typeof e!="symbol"?e+"":e,r);class Ede{constructor(e){_h(this,"name","cosmos"),_h(this,"client"),_h(this,"httpProviders"),_h(this,"events"),_h(this,"namespace"),_h(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Bl(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var Cde=Object.defineProperty,Ade=(t,e,r)=>e in t?Cde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sh=(t,e,r)=>Ade(t,typeof e!="symbol"?e+"":e,r);class $de{constructor(e){Sh(this,"name","algorand"),Sh(this,"client"),Sh(this,"httpProviders"),Sh(this,"events"),Sh(this,"namespace"),Sh(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||oi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new en(new ei(n,tt("disableProviderPing")))}}var xde=Object.defineProperty,_de=(t,e,r)=>e in t?xde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ih=(t,e,r)=>_de(t,typeof e!="symbol"?e+"":e,r);class Sde{constructor(e){Ih(this,"name","cip34"),Ih(this,"client"),Ih(this,"httpProviders"),Ih(this,"events"),Ih(this,"namespace"),Ih(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Bl(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var Ide=Object.defineProperty,Ode=(t,e,r)=>e in t?Ide(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oh=(t,e,r)=>Ode(t,typeof e!="symbol"?e+"":e,r);class Pde{constructor(e){Oh(this,"name","elrond"),Oh(this,"client"),Oh(this,"httpProviders"),Oh(this,"events"),Oh(this,"namespace"),Oh(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Bl(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var Nde=Object.defineProperty,Tde=(t,e,r)=>e in t?Nde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ph=(t,e,r)=>Tde(t,typeof e!="symbol"?e+"":e,r);class kde{constructor(e){Ph(this,"name","multiversx"),Ph(this,"client"),Ph(this,"httpProviders"),Ph(this,"events"),Ph(this,"namespace"),Ph(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Bl(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var Rde=Object.defineProperty,Dde=(t,e,r)=>e in t?Rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nh=(t,e,r)=>Dde(t,typeof e!="symbol"?e+"":e,r);class Bde{constructor(e){Nh(this,"name","near"),Nh(this,"client"),Nh(this,"httpProviders"),Nh(this,"events"),Nh(this,"namespace"),Nh(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||oi(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace);return typeof n>"u"?void 0:new en(new ei(n,tt("disableProviderPing")))}}var Mde=Object.defineProperty,Ude=(t,e,r)=>e in t?Mde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Th=(t,e,r)=>Ude(t,typeof e!="symbol"?e+"":e,r);class Lde{constructor(e){Th(this,"name","tezos"),Th(this,"client"),Th(this,"httpProviders"),Th(this,"events"),Th(this,"namespace"),Th(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||oi(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace);return typeof n>"u"?void 0:new en(new ei(n))}}var Fde=Object.defineProperty,Hde=(t,e,r)=>e in t?Fde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kh=(t,e,r)=>Hde(t,typeof e!="symbol"?e+"":e,r);class jde{constructor(e){kh(this,"name",pO),kh(this,"client"),kh(this,"httpProviders"),kh(this,"events"),kh(this,"namespace"),kh(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Oi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return $l(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=$l(i);n[s.reference]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||oi(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new en(new ei(n,tt("disableProviderPing")))}}var Vde=Object.defineProperty,zde=Object.defineProperties,qde=Object.getOwnPropertyDescriptors,LO=Object.getOwnPropertySymbols,Wde=Object.prototype.hasOwnProperty,Zde=Object.prototype.propertyIsEnumerable,z4=(t,e,r)=>e in t?Vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sm=(t,e)=>{for(var r in e||(e={}))Wde.call(e,r)&&z4(t,r,e[r]);if(LO)for(var r of LO(e))Zde.call(e,r)&&z4(t,r,e[r]);return t},q4=(t,e)=>zde(t,qde(e)),Pi=(t,e,r)=>z4(t,typeof e!="symbol"?e+"":e,r);class W4{constructor(e){Pi(this,"client"),Pi(this,"namespaces"),Pi(this,"optionalNamespaces"),Pi(this,"sessionProperties"),Pi(this,"scopedProperties"),Pi(this,"events",new yt.exports),Pi(this,"rpcProviders",{}),Pi(this,"session"),Pi(this,"providerOpts"),Pi(this,"logger"),Pi(this,"uri"),Pi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Xn(na({level:e?.logger||hO})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new W4(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:sm({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,ms(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Pt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=OO(this.session.namespaces);this.namespaces=im(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=OO(i.namespaces);return this.namespaces=im(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!ba(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn("Failed to cleanup pending pairings",r)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await B4.init({core:this.providerOpts.core,logger:this.providerOpts.logger||hO,relayUrl:this.providerOpts.relayUrl||whe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>yh(r)))];H4("client",this.client),H4("events",this.events),H4("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=ede(r,this.session);if(n?.length===0)return;const i=xO(n),s=im(this.namespaces,this.optionalNamespaces),o=q4(sm({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new gde({namespace:o});break;case"algorand":this.rpcProviders[r]=new $de({namespace:o});break;case"solana":this.rpcProviders[r]=new yde({namespace:o});break;case"cosmos":this.rpcProviders[r]=new Ede({namespace:o});break;case"polkadot":this.rpcProviders[r]=new lde({namespace:o});break;case"cip34":this.rpcProviders[r]=new Sde({namespace:o});break;case"elrond":this.rpcProviders[r]=new Pde({namespace:o});break;case"multiversx":this.rpcProviders[r]=new kde({namespace:o});break;case"near":this.rpcProviders[r]=new Bde({namespace:o});break;case"tezos":this.rpcProviders[r]=new Lde({namespace:o});break;default:this.rpcProviders[r]=new jde({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&ba(o)&&this.events.emit("accountsChanged",o.map(IO))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=yh(o),l=F4(o)!==F4(a)?`${c}:${F4(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=q4(sm({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",q4(sm({},Pt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Oi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[pO]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=im(r,n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>yh(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=yh(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(n,i);const s=this.getProvider(n).getDefaultChain();r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:s,newChainId:e})):this.getProvider(n).setDefaultChain(i),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var i,s;try{if(r===n)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(IO);if(!ba(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${rm}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${rm}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${rm}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(rm)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}let Ml=null;const Dn={getSIWX(){return Y.state.siwx},async initializeIfEnabled(t=k.getActiveCaipAddress()){const e=Y.state.siwx;if(!(e&&t))return;const[r,n,i]=t.split(":");if(k.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(Y.state.remoteFeatures?.emailCapture){const o=k.getAccountData(r)?.user;await ke.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(Ml&&await Ml,(await e.getSessions(`${r}:${n}`,i)).length)return;await ke.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),Te.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await X._getClient()?.disconnect().catch(console.error),J.reset("Connect"),We.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Y.state.siwx,e=ne.getPlainAddress(k.getActiveCaipAddress()),r=M0(),n=X._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();te.getConnectorId(r.chainNamespace)===G.CONNECTOR_ID.AUTH&&J.pushTransactionStack({});const a=await n.signMessage(s);await t.addSession({data:i,message:s,signature:a}),k.setLastConnectedSIWECaipNetwork(r),ke.close(),Te.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!ke.state.open||J.state.view==="ApproveTransaction")&&await ke.open({view:"SIWXSignMessage"}),We.showError("Error signing message"),Te.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=k.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,ne.getPlainAddress(k.getActiveCaipAddress())||"");n&&n.length>0?await k.switchActiveNetwork(r):await X.disconnect()}else await X.disconnect()}else ke.close();ke.close(),Te.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=k.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const i=await t?.getSessions(n.caipNetworkId,ne.getPlainAddress(k.getActiveCaipAddress())||"");i&&r.push(...i)})),r},async getSessions(t){const e=Y.state.siwx;let r=t?.address;if(!r){const i=k.getActiveCaipAddress();r=ne.getPlainAddress(i)}let n=t?.caipNetworkId;return n||(n=k.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=J.state.view==="ApproveTransaction",r=J.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:i}){const s=Dn.getSIWX(),o=M0();if(!s||!i.includes(G.CHAIN.EVM)||Y.state.remoteFeatures?.emailCapture){const h=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const a=`${i}:${e}`,c=await s.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:r,siwxMessage:l,preferredAccountType:n});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await Dn.addEmbeddedWalletSession(l,u.message,u.signature),k.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,r){if(Ml)return Ml;const n=Dn.getSIWX();return n?(Ml=n.addSession({data:t,message:e,signature:r}).finally(()=>{Ml=null}),Ml):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=Dn.getSIWX(),i=M0(),s=new Set(e.map(c=>c.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const o=await n.createMessage({chainId:M0()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(c=>c!==o.chainId)]});if(We.showLoading("Authenticating...",{autoClose:!1}),be.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(s)[0]),a?.auths?.length){const c=a.auths.map(l=>{const u=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud,version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:u,signature:l.s.s,cacao:l}});try{await n.setSessions(c),i&&k.setLastConnectedSIWECaipNetwork(i),Te.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Dn.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),Te.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Dn.getSIWXEventProperties()}),await t.disconnect().catch(console.error),l}finally{We.hide()}}return!0},getSIWXEventProperties(){const t=k.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:k.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:xn(t)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},FO={isUnsupportedChainView(){return J.state.view==="UnsupportedChain"||J.state.view==="SwitchNetwork"&&J.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){ke.shake();return}if(await Dn.isSIWXCloseDisabled()){ke.shake();return}(J.state.view==="DataCapture"||J.state.view==="DataCaptureOtpConfirm")&&X.disconnect(),ke.close()}},kt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",EIP155:G.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},_1={ConnectorExplorerIds:{[G.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[G.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[G.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[G.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[G.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[kt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[kt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[kt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[kt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[kt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[kt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[kt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[kt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[kt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[kt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[kt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[kt.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700"},ConnectorImageIds:{[G.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[G.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[G.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[G.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[G.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[G.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[G.CONNECTOR_ID.INJECTED]:"Browser Wallet",[G.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[G.CONNECTOR_ID.COINBASE]:"Coinbase",[G.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[G.CONNECTOR_ID.LEDGER]:"Ledger",[G.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[G.CONNECTOR_ID.INJECTED]:"INJECTED",[G.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[G.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[G.CONNECTOR_ID.AUTH]:"AUTH",[kt.CONNECTOR_TYPE_AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},Zr={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${kt.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=k.state.activeChain;return G.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>te.getConnectorId(e)===G.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(i=>{async function s(){return n+=1,await t()?i(!0):n>=r?i(!1):(setTimeout(s,e),null)}s()})},userChainIdToChainNamespace(t){if(typeof t=="number")return G.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?G.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(n=>n!==t):[]}},Ni={EmbeddedWalletAbortController:new AbortController,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${nh()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system\u2019s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},Kde={createLogger(t,e="error"){const r=na({level:e}),{logger:n}=Qb({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},Gde="rpc.walletconnect.org";function HO(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const Z4=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ul={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===Gde}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:G.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${G.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return Z4.includes(e)?HO(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,s,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,l=n?.[s]?.map(d=>d.url)||[],u=[...l,...a?[a]:[]],h=[...l];return c&&!h.includes(c)&&h.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:_1.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>Ul.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(i=>{n.push(Gf(i.url,i.config))}),Z4.includes(t.caipNetworkId)&&n.push(Gf(HO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(i=>{n.push(Gf(i))}),oE(n)},extendWagmiTransports(t,e,r){if(Z4.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return oE([r,Gf(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:G.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=oe.getActiveCaipNetworkId(),r=k.getAllRequestedCaipNetworks(),n=Array.from(k.state.chains?.keys()||[]),i=e?.split(":")[0],s=i?n.includes(i):!1,o=r?.find(c=>c.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}},om={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},Bn=st({providers:{...om},providerIds:{...om}}),Nt={state:Bn,subscribeKey(t,e){return hr(Bn,t,e)},subscribe(t){return Xt(Bn,()=>{t(Bn)})},subscribeProviders(t){return Xt(Bn.providers,()=>t(Bn.providers))},setProvider(t,e){t&&e&&(Bn.providers[t]=wl(e))},getProvider(t){if(t)return Bn.providers[t]},setProviderId(t,e){e&&(Bn.providerIds[t]=e)},getProviderId(t){if(t)return Bn.providerIds[t]},reset(){Bn.providers={...om},Bn.providerIds={...om}},resetChain(t){Bn.providers[t]=void 0,Bn.providerIds[t]=void 0}};var jO;(function(t){t.Google="google",t.Github="github",t.Apple="apple",t.Facebook="facebook",t.X="x",t.Discord="discord",t.Farcaster="farcaster"})(jO||(jO={}));const $c={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},xc={filterOutDuplicatesByRDNS(t){const e=Y.state.enableEIP6963?te.state.connectors:[],r=oe.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&ne.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&s.includes(String(a.rdns))||!a?.rdns&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=te.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=oe.getRecentWallets(),n=e.map(a=>a.explorerId),i=r.map(a=>a.id),s=n.concat(i);return t.filter(a=>!s.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=te.state,{featuredWalletIds:r}=Y.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const l=r.indexOf(o.id),u=r.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||Y.state.features?.connectMethodsOrder,n=e||te.state.connectors;if(r)return r;const{injected:i,announced:s}=Ea.getConnectorsByType(n,ce.state.recommended,ce.state.featured),o=i.filter(Ea.showConnector),a=s.filter(Ea.showConnector);return o.length||a.length?["wallet","email","social"]:$c.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ce.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&ce.state.excludedWallets.some(n=>Zr.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))}},Ea={getConnectorsByType(t,e,r){const{customWallets:n}=Y.state,i=oe.getRecentWallets(),s=xc.filterOutDuplicateWallets(e),o=xc.filterOutDuplicateWallets(r),a=t.filter(h=>h.type==="MULTI_CHAIN"),c=t.filter(h=>h.type==="ANNOUNCED"),l=t.filter(h=>h.type==="INJECTED"),u=t.filter(h=>h.type==="EXTERNAL");return{custom:n,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&ce.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&ce.state.excludedWallets.some(i=>Zr.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ne.isMobile()||ne.isMobile()&&!e&&!X.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(k.state.chains.values()).some(r=>te.getConnectorId(r.namespace)===G.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=Y.state.features?.connectorTypeOrder??[]}){const h=[{type:"walletConnect",isEnabled:Y.state.enableWalletConnect},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(g=>g.isEnabled),d=new Set(h.map(g=>g.type)),p=c.filter(g=>d.has(g)).map(g=>({type:g,isEnabled:!0})),f=h.filter(({type:g})=>!p.some(({type:v})=>v===g));return Array.from(new Set([...p,...f].map(({type:g})=>g)))},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!ne.isMobile())return{accounts:[],chainId:void 0};if(t.id===G.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const am=globalThis,K4=am.ShadowRoot&&(am.ShadyCSS===void 0||am.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,G4=Symbol(),VO=new WeakMap;class zO{constructor(e,r,n){if(this._$cssResult$=!0,n!==G4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(K4&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=VO.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&VO.set(r,e))}return e}toString(){return this.cssText}}const rs=t=>new zO(typeof t=="string"?t:t+"",void 0,G4),un=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new zO(r,t,G4)},Yde=(t,e)=>{if(K4)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=am.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},qO=K4?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return rs(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Xde,defineProperty:Jde,getOwnPropertyDescriptor:Qde,getOwnPropertyNames:e0e,getOwnPropertySymbols:t0e,getPrototypeOf:r0e}=Object,cm=globalThis,WO=cm.trustedTypes,n0e=WO?WO.emptyScript:"",i0e=cm.reactiveElementPolyfillSupport,S1=(t,e)=>t,lm={toAttribute(t,e){switch(e){case Boolean:t=t?n0e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Y4=(t,e)=>!Xde(t,e),ZO={attribute:!0,type:String,converter:lm,reflect:!1,useDefault:!1,hasChanged:Y4};Symbol.metadata??=Symbol("metadata"),cm.litPropertyMetadata??=new WeakMap;class Rh extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=ZO){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Jde(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=Qde(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??ZO}static _$Ei(){if(this.hasOwnProperty(S1("elementProperties")))return;const e=r0e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(S1("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(S1("properties"))){const r=this.properties,n=[...e0e(r),...t0e(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(qO(i))}else e!==void 0&&r.push(qO(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Yde(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const s=(n.converter?.toAttribute!==void 0?n.converter:lm).toAttribute(r,n.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,r){const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=n.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:lm;this._$Em=i,this[i]=o.fromAttribute(r,s.type)??this._$Ej?.get(i)??null,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const i=this.constructor,s=this[e];if(n??=i.getPropertyOptions(e),!((n.hasChanged??Y4)(s,r)||n.useDefault&&n.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[i,s]of n){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(r=>this._$ET(r,this[r])),this._$EM()}updated(e){}firstUpdated(e){}}Rh.elementStyles=[],Rh.shadowRootOptions={mode:"open"},Rh[S1("elementProperties")]=new Map,Rh[S1("finalized")]=new Map,i0e?.({ReactiveElement:Rh}),(cm.reactiveElementVersions??=[]).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X4=globalThis,um=X4.trustedTypes,KO=um?um.createPolicy("lit-html",{createHTML:t=>t}):void 0,GO="$lit$",_c=`lit$${Math.random().toFixed(9).slice(2)}$`,YO="?"+_c,s0e=`<${YO}>`,Ll=document,I1=()=>Ll.createComment(""),O1=t=>t===null||typeof t!="object"&&typeof t!="function",J4=Array.isArray,o0e=t=>J4(t)||typeof t?.[Symbol.iterator]=="function",Q4=`[ 	
\f\r]`,P1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,XO=/-->/g,JO=/>/g,Fl=RegExp(`>|${Q4}(?:([^\\s"'>=/]+)(${Q4}*=${Q4}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),QO=/'/g,eP=/"/g,tP=/^(?:script|style|textarea|title)$/i,rP=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),F=rP(1),mt=rP(2),Hl=Symbol.for("lit-noChange"),Ut=Symbol.for("lit-nothing"),nP=new WeakMap,jl=Ll.createTreeWalker(Ll,129);function iP(t,e){if(!J4(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return KO!==void 0?KO.createHTML(e):e}const a0e=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=P1;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===P1?u[1]==="!--"?o=XO:u[1]!==void 0?o=JO:u[2]!==void 0?(tP.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Fl):u[3]!==void 0&&(o=Fl):o===Fl?u[0]===">"?(o=i??P1,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Fl:u[3]==='"'?eP:QO):o===eP||o===QO?o=Fl:o===XO||o===JO?o=P1:(o=Fl,i=void 0);const p=o===Fl&&t[a+1].startsWith("/>")?" ":"";s+=o===P1?c+s0e:h>=0?(n.push(l),c.slice(0,h)+GO+c.slice(h)+_c+p):c+_c+(h===-2?a:p)}return[iP(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class N1{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=a0e(e,r);if(this.el=N1.createElement(l,n),jl.currentNode=this.el.content,r===2||r===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=jl.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(GO)){const d=u[o++],p=i.getAttribute(h).split(_c),f=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:f[2],strings:p,ctor:f[1]==="."?l0e:f[1]==="?"?u0e:f[1]==="@"?h0e:hm}),i.removeAttribute(h)}else h.startsWith(_c)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(tP.test(i.tagName)){const h=i.textContent.split(_c),d=h.length-1;if(d>0){i.textContent=um?um.emptyScript:"";for(let p=0;p<d;p++)i.append(h[p],I1()),jl.nextNode(),c.push({type:2,index:++s});i.append(h[d],I1())}}}else if(i.nodeType===8)if(i.data===YO)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(_c,h+1))!==-1;)c.push({type:7,index:s}),h+=_c.length-1}s++}}static createElement(e,r){const n=Ll.createElement("template");return n.innerHTML=e,n}}function Dh(t,e,r=t,n){if(e===Hl)return e;let i=n!==void 0?r._$Co?.[n]:r._$Cl;const s=O1(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=i:r._$Cl=i),i!==void 0&&(e=Dh(t,i._$AS(t,e.values),i,n)),e}class c0e{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=(e?.creationScope??Ll).importNode(r,!0);jl.currentNode=i;let s=jl.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new T1(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new d0e(s,this,e)),this._$AV.push(l),c=n[++a]}o!==c?.index&&(s=jl.nextNode(),o++)}return jl.currentNode=Ll,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class T1{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=Ut,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Dh(this,e,r),O1(e)?e===Ut||e==null||e===""?(this._$AH!==Ut&&this._$AR(),this._$AH=Ut):e!==this._$AH&&e!==Hl&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):o0e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ut&&O1(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ll.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=N1.createElement(iP(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(r);else{const s=new c0e(i,this),o=s.u(this.options);s.p(r),this.T(o),this._$AH=s}}_$AC(e){let r=nP.get(e.strings);return r===void 0&&nP.set(e.strings,r=new N1(e)),r}k(e){J4(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new T1(this.O(I1()),this.O(I1()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class hm{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=Ut,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Ut}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Dh(this,e,r,0),o=!O1(e)||e!==this._$AH&&e!==Hl,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Dh(this,a[n+c],r,c),l===Hl&&(l=this._$AH[c]),o||=!O1(l)||l!==this._$AH[c],l===Ut?e=Ut:e!==Ut&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Ut?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class l0e extends hm{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ut?void 0:e}}class u0e extends hm{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ut)}}class h0e extends hm{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=Dh(this,e,r,0)??Ut)===Hl)return;const n=this._$AH,i=e===Ut&&n!==Ut||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==Ut&&(n===Ut||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class d0e{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Dh(this,e)}}const p0e=X4.litHtmlPolyfillSupport;p0e?.(N1,T1),(X4.litHtmlVersions??=[]).push("3.3.0");const f0e=(t,e,r)=>{const n=r?.renderBefore??e;let i=n._$litPart$;if(i===void 0){const s=r?.renderBefore??null;n._$litPart$=i=new T1(e.insertBefore(I1(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e3=globalThis;class ye extends Rh{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=f0e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Hl}}ye._$litElement$=!0,ye.finalized=!0,e3.litElementHydrateSupport?.({LitElement:ye});const g0e=e3.litElementPolyfillSupport;g0e?.({LitElement:ye}),(e3.litElementVersions??=[]).push("4.2.0");const m0e={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},dm={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},w0e={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},y0e={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},b0e={regular:"KHTeka",mono:"KHTekaMono"},v0e={regular:"400",medium:"500"},E0e={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},C0e={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},A0e={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},$0e={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},t3={colors:m0e,fontFamily:b0e,fontWeight:v0e,textSize:E0e,typography:C0e,tokens:{core:dm.core,theme:dm.dark},borderRadius:w0e,spacing:y0e,durations:$0e,easings:A0e},sP="--apkt",Ca={createCSSVariables(t){const e={},r={};function n(s,o,a=""){for(const[c,l]of Object.entries(s)){const u=a?`${a}-${c}`:c;l&&typeof l=="object"&&Object.keys(l).length?(o[c]={},n(l,o[c],u)):typeof l=="string"&&(o[c]=`${sP}-${u}`)}}function i(s,o){for(const[a,c]of Object.entries(s))c&&typeof c=="object"?(o[a]={},i(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return n(t,e),i(e,r),{cssVariables:e,cssVariablesVarPrefix:r}},assignCSSVariables(t,e){const r={};function n(i,s,o){for(const[a,c]of Object.entries(i)){const l=o?`${o}-${a}`:a,u=s[a];c&&typeof c=="object"?n(c,u,l):typeof u=="string"&&(r[`${sP}-${l}`]=u)}}return n(t,e),r},createRootStyles(t,e){const r={...t3,tokens:{...t3.tokens,theme:t==="light"?dm.light:dm.dark}},{cssVariables:n}=Ca.createCSSVariables(r),i=Ca.assignCSSVariables(n,r),s=Ca.generateW3MVariables(e),o=Ca.generateW3MOverrides(e),a=Ca.generateScaledVariables(e),c=Ca.generateBaseVariables(i),l={...i,...c,...s,...o,...a},u=Ca.applyColorMixToVariables(e,l),h={...l,...u};return`:root {${Object.entries(h).map(([p,f])=>`${p}:${f.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e={};return e["--w3m-font-family"]=t["--w3m-font-family"]||"KHTeka",e["--w3m-accent"]=t["--w3m-accent"]||"#0988F0",e["--w3m-color-mix"]=t["--w3m-color-mix"]||"#000",e["--w3m-color-mix-strength"]=`${t["--w3m-color-mix-strength"]||0}%`,e["--w3m-font-size-master"]=t["--w3m-font-size-master"]||"10px",e["--w3m-border-radius-master"]=t["--w3m-border-radius-master"]||"4px",t["--w3m-z-index"]&&(e["--apkt-z-index"]=`${t["--w3m-z-index"]}`),e},generateW3MOverrides(t){if(!t)return{};const e={};if(t["--w3m-accent"]){const r=t["--w3m-accent"];e["--apkt-tokens-core-iconAccentPrimary"]=r,e["--apkt-tokens-core-borderAccentPrimary"]=r,e["--apkt-tokens-core-textAccentPrimary"]=r,e["--apkt-tokens-core-backgroundAccentPrimary"]=r}return t["--w3m-font-family"]&&(e["--apkt-fontFamily-regular"]=t["--w3m-font-family"]),e},generateScaledVariables(t){if(!t)return{};const e={};if(t["--w3m-font-size-master"]){const r=parseFloat(t["--w3m-font-size-master"].replace("px",""));e["--apkt-textSize-h1"]=`${Number(r)*5}px`,e["--apkt-textSize-h2"]=`${Number(r)*4.4}px`,e["--apkt-textSize-h3"]=`${Number(r)*3.8}px`,e["--apkt-textSize-h4"]=`${Number(r)*3.2}px`,e["--apkt-textSize-h5"]=`${Number(r)*2.6}px`,e["--apkt-textSize-h6"]=`${Number(r)*2}px`,e["--apkt-textSize-large"]=`${Number(r)*1.6}px`,e["--apkt-textSize-medium"]=`${Number(r)*1.4}px`,e["--apkt-textSize-small"]=`${Number(r)*1.2}px`}if(t["--w3m-border-radius-master"]){const r=parseFloat(t["--w3m-border-radius-master"].replace("px",""));e["--apkt-borderRadius-1"]=`${Number(r)}px`,e["--apkt-borderRadius-2"]=`${Number(r)*2}px`,e["--apkt-borderRadius-3"]=`${Number(r)*3}px`,e["--apkt-borderRadius-4"]=`${Number(r)*4}px`,e["--apkt-borderRadius-5"]=`${Number(r)*5}px`,e["--apkt-borderRadius-6"]=`${Number(r)*6}px`,e["--apkt-borderRadius-8"]=`${Number(r)*8}px`,e["--apkt-borderRadius-16"]=`${Number(r)*16}px`,e["--apkt-borderRadius-20"]=`${Number(r)*20}px`,e["--apkt-borderRadius-32"]=`${Number(r)*32}px`,e["--apkt-borderRadius-64"]=`${Number(r)*64}px`,e["--apkt-borderRadius-128"]=`${Number(r)*128}px`}return e},generateColorMixCSS(t,e){if(!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return"";const r=t["--w3m-color-mix"],n=t["--w3m-color-mix-strength"];if(!n||n===0)return"";const i=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return i.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${i.map(o=>{const a=e?.[o]||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${r} ${n}%, ${a});`:`${o}: color-mix(in srgb, ${r} ${n}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},r=t["--apkt-tokens-theme-backgroundPrimary"];r&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=r);const n=t["--apkt-tokens-core-backgroundAccentPrimary"];return n&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=n),e},applyColorMixToVariables(t,e){const r={};if(e?.["--apkt-tokens-theme-backgroundPrimary"]&&(r["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(r["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)"),!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return r;const n=t["--w3m-color-mix"],i=t["--w3m-color-mix-strength"];if(!i||i===0)return r;const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon")||o.includes("-tokens-theme-overlay"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0||s.forEach(o=>{const a=e?.[o]||"";o.endsWith("-base")||(o==="--apkt-tokens-theme-backgroundPrimary"||o==="--apkt-tokens-core-backgroundAccentPrimary"?r[o]=`color-mix(in srgb, ${n} ${i}%, var(${o}-base))`:a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?r[o]=`color-mix(in srgb, ${n} ${i}%, ${a})`:r[o]=`color-mix(in srgb, ${n} ${i}%, var(${o}-base, ${a}))`)}),r}},{cssVariablesVarPrefix:Rt}=Ca.createCSSVariables(t3);function Me(t,...e){return un(t,...e.map(r=>rs(typeof r=="function"?r(Rt):r)))}let Vl,zl,Ts,ns,pm;const Aa={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function fm(t,e="dark"){Vl&&document.head.removeChild(Vl),Vl=document.createElement("style"),Vl.textContent=Ca.createRootStyles(e,t),document.head.appendChild(Vl)}function x0e(t,e="dark"){if(pm=t,zl=document.createElement("style"),Ts=document.createElement("style"),ns=document.createElement("style"),zl.textContent=Bh(t).core.cssText,Ts.textContent=Bh(t).dark.cssText,ns.textContent=Bh(t).light.cssText,document.head.appendChild(zl),document.head.appendChild(Ts),document.head.appendChild(ns),fm(t,e),r3(e),!t?.["--w3m-font-family"])for(const[r,n]of Object.entries(Aa)){const i=document.createElement("link");i.rel="preload",i.href=n,i.as="font",i.type=r.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}r3(e)}function r3(t="dark"){Ts&&ns&&Vl&&(t==="light"?(fm(pm,t),Ts.removeAttribute("media"),ns.media="enabled"):(fm(pm,t),ns.removeAttribute("media"),Ts.media="enabled"))}function _0e(t){if(pm=t,zl&&Ts&&ns&&(zl.textContent=Bh(t).core.cssText,Ts.textContent=Bh(t).dark.cssText,ns.textContent=Bh(t).light.cssText,t?.["--w3m-font-family"])){const e=t["--w3m-font-family"];zl.textContent=zl.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),Ts.textContent=Ts.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),ns.textContent=ns.textContent?.replace("font-family: KHTeka",`font-family: ${e}`)}if(Vl){const e=ns?.media==="enabled"?"light":"dark";fm(t,e)}}function Bh(t){const e=!!t?.["--w3m-font-family"];return{core:un`
      ${e?un``:un`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${rs(Aa["KHTeka-400-woff2"])}) format('woff2'),
                url(${rs(Aa["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${rs(Aa["KHTeka-300-woff2"])}) format('woff2'),
                url(${rs(Aa["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${rs(Aa["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${rs(Aa["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${rs(Aa["KHTeka-400-woff2"])}) format('woff2'),
                url(${rs(Aa["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:un`
      :root {
      }
    `,light:un`
      :root {
      }
    `}}const at=un`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,hn=un`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,ir={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--apkt-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--apkt-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},formatCurrency(t=0,e={}){const r=Number(t);return isNaN(r)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2,...e}).format(r)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:r,truncate:n}){return t.length<=e+r?t:n==="end"?`${t.substring(0,e)}...`:n==="start"?`...${t.substring(t.length-r)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(r))}`},generateAvatarColors(t){const r=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),n=this.hexToRgb(r),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(i?.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let l=0;l<5;l+=1){const u=this.tintColor(n,.15*l);c.push(`rgb(${u[0]}, ${u[1]}, ${u[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),r=e>>16&255,n=e>>8&255,i=e&255;return[r,n,i]},tintColor(t,e){const[r,n,i]=t,s=Math.round(r+(255-r)*e),o=Math.round(n+(255-n)*e),a=Math.round(i+(255-i)*e);return[s,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){return t||(typeof window<"u"&&window.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,r){return t.toString().length>=e?Number(t).toFixed(r):t},cssDurationToNumber(t){return t.endsWith("s")?Number(t.replace("s",""))*1e3:t.endsWith("ms")?Number(t.replace("ms","")):0}};function S0e(t,e){const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(i){customElements.get(t)||customElements.define(t,i)}}}function I0e(t,e){return customElements.get(t)||customElements.define(t,e),e}function we(t){return function(r){return typeof r=="function"?I0e(t,r):S0e(t,r)}}const gm={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([gm.getAddresses(t),gm.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:gm.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[_1.NetworkImageIds[e.id]]}]})}},Mh={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},oP={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},O0e={block:s5({format(t){return{transactions:t.transactions?.map(r=>{if(typeof r=="string")return r;const n=Bf(r);return n.typeHex==="0x7e"&&(n.isSystemTx=r.isSystemTx,n.mint=r.mint?Li(r.mint):void 0,n.sourceHash=r.sourceHash,n.type="deposit"),n}),stateRoot:t.stateRoot}}}),transaction:i5({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?Li(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:HR({format(t){return{l1GasPrice:t.l1GasPrice?Li(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?Li(t.l1GasUsed):null,l1Fee:t.l1Fee?Li(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function aP(t,e){return T0e(t)?N0e(t):ZR(t,e)}const P0e={transaction:aP};function N0e(t){k0e(t);const{sourceHash:e,data:r,from:n,gas:i,isSystemTx:s,mint:o,to:a,value:c}=t,l=[e,n,a??"0x",o?gr(o):"0x",c?gr(c):"0x",i?gr(i):"0x",s?"0x1":"0x",r??"0x"];return Cu(["0x7e",Oa(l)])}function T0e(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function k0e(t){const{from:e,to:r}=t;if(e&&!jo(e))throw new Ia({address:e});if(r&&!jo(r))throw new Ia({address:r})}const ae={blockTime:2e3,contracts:oP,formatters:O0e,serializers:P0e},mm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:mm+"",portal:mm+"",l1StandardBridge:mm+""}});const wm=11155111;({...ae,contracts:{...ae.contracts,l2OutputOracle:wm+"",portal:wm+"",l1StandardBridge:wm+""}});const k1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:k1+"",l2OutputOracle:k1+"",portal:k1+"",l1StandardBridge:k1+""}});const ym=5;({...ae,contracts:{...ae.contracts,l2OutputOracle:ym+"",portal:ym+"",l1StandardBridge:ym+""}});const R1=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:R1+"",l2OutputOracle:R1+"",portal:R1+"",l1StandardBridge:R1+""}},Ce({id:53456,name:"BirdLayer",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.birdlayer.xyz","https://rpc1.birdlayer.xyz"],webSocket:["wss://rpc.birdlayer.xyz/ws"]}},blockExplorers:{default:{name:"BirdLayer Explorer",url:"https://scan.birdlayer.xyz"}}}));const bm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:bm+"",portal:bm+"",l1StandardBridge:bm+""}});const n3=1;Ce({...ae,id:60808,name:"BOB",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.gobob.xyz"],webSocket:["wss://rpc.gobob.xyz"]}},blockExplorers:{default:{name:"BOB Explorer",url:"https://explorer.gobob.xyz"}},contracts:{...ae.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:23131},l2OutputOracle:{[n3]:{address:"0xdDa53E23f8a32640b04D7256e651C1db98dB11C1",blockCreated:4462615}},portal:{[n3]:{address:"0x8AdeE124447435fE03e3CD24dF3f4cAE32E65a3E",blockCreated:4462615}}},sourceId:n3});const i3=11155111;Ce({...ae,id:808813,name:"BOB Sepolia",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://bob-sepolia.rpc.gobob.xyz"],webSocket:["wss://bob-sepolia.rpc.gobob.xyz"]}},blockExplorers:{default:{name:"BOB Sepolia Explorer",url:"https://bob-sepolia.explorer.gobob.xyz"}},contracts:{...ae.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:35677},l2OutputOracle:{[i3]:{address:"0x14D0069452b4AE2b250B395b8adAb771E4267d2f",blockCreated:4462615}},portal:{[i3]:{address:"0x867B1Aa872b9C8cB5E9F7755feDC45BB24Ad0ae4",blockCreated:4462615}}},testnet:!0,sourceId:i3});const R0e={estimateFeesPerGas:async t=>{if(!t.request?.feeCurrency)return null;const[e,r]=await Promise.all([D0e(t.client,t.request.feeCurrency),B0e(t.client,t.request.feeCurrency)]);return{maxFeePerGas:t.multiply(e-r)+r,maxPriorityFeePerGas:r}}};async function D0e(t,e){const r=await t.request({method:"eth_gasPrice",params:[e]});return BigInt(r)}async function B0e(t,e){const r=await t.request({method:"eth_maxPriorityFeePerGas",params:[e]});return BigInt(r)}function cP(t){return t===0||t===0n||t===void 0||t===null||t==="0"||t===""||typeof t=="string"&&(pu(t).toLowerCase()==="0x"||pu(t).toLowerCase()==="0x00")}function D1(t){return!cP(t)}function M0e(t){return typeof t.maxFeePerGas<"u"&&typeof t.maxPriorityFeePerGas<"u"}function lP(t){return t.type==="cip64"?!0:M0e(t)&&D1(t.feeCurrency)}const U0e={block:s5({format(t){return{transactions:t.transactions?.map(r=>typeof r=="string"?r:{...Bf(r),...r.gatewayFee?{gatewayFee:Li(r.gatewayFee),gatewayFeeRecipient:r.gatewayFeeRecipient}:{},feeCurrency:r.feeCurrency})}}}),transaction:i5({format(t){if(t.type==="0x7e")return{isSystemTx:t.isSystemTx,mint:t.mint?Li(t.mint):void 0,sourceHash:t.sourceHash,type:"deposit"};const e={feeCurrency:t.feeCurrency};return t.type==="0x7b"?e.type="cip64":(t.type==="0x7c"&&(e.type="cip42"),e.gatewayFee=t.gatewayFee?Li(t.gatewayFee):null,e.gatewayFeeRecipient=t.gatewayFeeRecipient),e}}),transactionRequest:Wk({format(t){const e={};return t.feeCurrency&&(e.feeCurrency=t.feeCurrency),lP(t)&&(e.type="0x7b"),e}})};function L0e(t,e){return lP(t)?H0e(t,e):aP(t,e)}const F0e={transaction:L0e};function H0e(t,e){V0e(t);const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,feeCurrency:u,data:h}=t,d=[gr(r),i?gr(i):"0x",c?gr(c):"0x",a?gr(a):"0x",n?gr(n):"0x",s??"0x",o?gr(o):"0x",h??"0x",Bd(l),u,..._u(t,e)];return Cu(["0x7b",Oa(d)])}const j0e=Df;function V0e(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s,feeCurrency:o}=t;if(e<=0)throw new Dd({chainId:e});if(s&&!jo(s))throw new Ia({address:s});if(n)throw new Fe("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(D1(i)&&i>j0e)throw new kd({maxFeePerGas:i});if(D1(r)&&D1(i)&&r>i)throw new Zw({maxFeePerGas:i,maxPriorityFeePerGas:r});if(D1(o)&&!jo(o))throw new Fe("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(cP(o))throw new Fe("`feeCurrency` must be provided for CIP-64 transactions.")}const vm={blockTime:1e3,contracts:oP,formatters:U0e,serializers:F0e,fees:R0e},Em=17e3;({...vm,contracts:{...vm.contracts,portal:Em+"",disputeGameFactory:Em+"",l2OutputOracle:Em+"",l1StandardBridge:Em+""}});const s3=11155111;({...vm,contracts:{...vm.contracts,portal:s3+"",disputeGameFactory:s3+"",l1StandardBridge:s3+""}},Ce({id:44,name:"Crab Network",nativeCurrency:{decimals:18,name:"Crab Network Native Token",symbol:"CRAB"},rpcUrls:{default:{http:["https://crab-rpc.darwinia.network"],webSocket:["wss://crab-rpc.darwinia.network"]}},blockExplorers:{default:{name:"Blockscout",url:"https://crab-scan.darwinia.network"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3032593}}})),Ce({id:66665,name:"Creator",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.creatorchain.io"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.creatorchain.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11"}},testnet:!0}),{...ae,contracts:{...ae.contracts}},{...ae,contracts:{...ae.contracts}},Ce({id:53457,name:"DODOchain Testnet",nativeCurrency:{decimals:18,name:"DODO",symbol:"DODO"},rpcUrls:{default:{http:["https://dodochain-testnet.alt.technology"],webSocket:["wss://dodochain-testnet.alt.technology/ws"]}},blockExplorers:{default:{name:"DODOchain Testnet (Sepolia) Explorer",url:"https://testnet-scan.dodochain.com"}},testnet:!0});const Uh=1;({...ae.contracts,addressManager:Uh+"",l1CrossDomainMessenger:Uh+"",l2OutputOracle:Uh+"",portal:Uh+"",l1StandardBridge:Uh+""});const Lh=11155111;({...ae.contracts,addressManager:Lh+"",l1CrossDomainMessenger:Lh+"",l2OutputOracle:Lh+"",portal:Lh+"",l1StandardBridge:Lh+""});const Cm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Cm+"",portal:Cm+"",l1StandardBridge:Cm+""}});const Am=17e3;({...ae,contracts:{...ae.contracts,l2OutputOracle:Am+"",portal:Am+"",l1StandardBridge:Am+""}});const z0e=1;({...ae,contracts:{...ae.contracts}},Ce({...ae,id:3397901,network:"funkiSepolia",name:"Funki Sepolia Sandbox",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://funki-testnet.alt.technology"]}},blockExplorers:{default:{name:"Funki Sepolia Sandbox Explorer",url:"https://sepolia-sandbox.funkichain.com/"}},testnet:!0,contracts:{...ae.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1620204}},sourceId:11155111}));const $m=17e3;Ce({...ae,name:"Garnet Testnet",testnet:!0,id:17069,sourceId:$m,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"],webSocket:["wss://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}},contracts:{...ae.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11"},portal:{[$m]:{address:"0x57ee40586fbE286AfC75E67cb69511A6D9aF5909",blockCreated:1274684}},l2OutputOracle:{[$m]:{address:"0xCb8E7AC561b8EF04F2a15865e9fbc0766FEF569B",blockCreated:1274684}},l1StandardBridge:{[$m]:{address:"0x09bcDd311FE398F80a78BE37E489f5D440DB95DE",blockCreated:1274684}}}});const xm=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:xm+"",portal:xm+"",l1StandardBridge:xm+""}});const _m=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:_m+"",portal:_m+"",l1StandardBridge:_m+""}},Ce({id:701,name:"Koi Network",nativeCurrency:{decimals:18,name:"Koi Network Native Token",symbol:"KRING"},rpcUrls:{default:{http:["https://koi-rpc.darwinia.network"],webSocket:["wss://koi-rpc.darwinia.network"]}},blockExplorers:{default:{name:"Blockscout",url:"https://koi-scan.darwinia.network"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:180001}},testnet:!0}));const Sm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Sm+"",portal:Sm+"",l1StandardBridge:Sm+""}});const Im=11155111;({...ae,contracts:{...ae.contracts,l2OutputOracle:Im+"",portal:Im+"",l1StandardBridge:Im+""}});const Om=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Om+"",portal:Om+"",l1StandardBridge:Om+""}});const Pm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Pm+"",portal:Pm+"",l1StandardBridge:Pm+""}});const Nm=11155111;({...ae,contracts:{...ae.contracts,l2OutputOracle:Nm+"",portal:Nm+"",l1StandardBridge:Nm+""}},Ce({id:166,name:"Omni",nativeCurrency:{name:"Omni",symbol:"OMNI",decimals:18},rpcUrls:{default:{http:["https://mainnet.omni.network"],webSocket:["wss://mainnet.omni.network"]}},blockExplorers:{default:{name:"OmniScan",url:"https://omniscan.network"}},testnet:!1}));const Tm=56;({...ae.contracts,l2OutputOracle:Tm+"",portal:Tm+"",l1StandardBridge:Tm+""});const km=97;({...ae.contracts,l2OutputOracle:km+"",portal:km+"",l1StandardBridge:km+""});const B1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:B1+"",l2OutputOracle:B1+"",portal:B1+"",l1StandardBridge:B1+""}});const Rm=5;({...ae,contracts:{...ae.contracts,l2OutputOracle:Rm+"",portal:Rm+"",l1StandardBridge:Rm+""}});const M1=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:M1+"",l2OutputOracle:M1+"",portal:M1+"",l1StandardBridge:M1+""}});const uP=11155111;Ce({...ae,name:"Pyrope Testnet",testnet:!0,id:695569,sourceId:uP,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.pyropechain.com"],webSocket:["wss://rpc.pyropechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://pyrope.blockscout.com"}},contracts:{...ae.contracts,l1StandardBridge:{[uP]:{address:"0xC24932c31D9621aE9e792576152B7ef010cFC2F8"}}}});const Dm=1;Ce({...ae,name:"Redstone",id:690,sourceId:Dm,nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.redstonechain.com"],webSocket:["wss://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz"}},contracts:{...ae.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11"},portal:{[Dm]:{address:"0xC7bCb0e8839a28A1cFadd1CF716de9016CdA51ae",blockCreated:19578329}},l2OutputOracle:{[Dm]:{address:"0xa426A052f657AEEefc298b3B5c35a470e4739d69",blockCreated:19578337}},l1StandardBridge:{[Dm]:{address:"0xc473ca7E02af24c129c2eEf51F2aDf0411c1Df69",blockCreated:19578331}}}});const Bm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Bm+"",portal:Bm+"",l1StandardBridge:Bm+""}});const Mm=11155111;({...ae,contracts:{...ae.contracts,l2OutputOracle:Mm+"",portal:Mm+"",l1StandardBridge:Mm+""}});const Um=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Um+"",portal:Um+"",l1StandardBridge:Um+""}});const q0e=11155111;({...ae,contracts:{...ae.contracts}});const U1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:U1+"",l2OutputOracle:U1+"",portal:U1+"",l1StandardBridge:U1+""}});const L1=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:L1+"",l2OutputOracle:L1+"",portal:L1+"",l1StandardBridge:L1+""}});const F1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:F1+"",l2OutputOracle:F1+"",portal:F1+"",l1StandardBridge:F1+""}});const H1=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:H1+"",l2OutputOracle:H1+"",portal:H1+"",l1StandardBridge:H1+""}});const j1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:j1+"",l2OutputOracle:j1+"",portal:j1+"",l1StandardBridge:j1+""}});const o3=11155111;({...ae,contracts:{...ae.contracts,portal:o3+"",l1StandardBridge:o3+""}},{...ae,contracts:{...ae.contracts}}),{...ae,contracts:{...ae.contracts}};const Lm=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:Lm+"",portal:Lm+"",l1StandardBridge:Lm+""}});const Fm=11155111;({...ae,contracts:{...ae.contracts,portal:Fm+"",l1StandardBridge:Fm+"",disputeGameFactory:Fm+""}});const V1=1;({...ae,contracts:{...ae.contracts,disputeGameFactory:V1+"",l2OutputOracle:V1+"",portal:V1+"",l1StandardBridge:V1+""}});const z1=11155111;({...ae,contracts:{...ae.contracts,disputeGameFactory:z1+"",l2OutputOracle:z1+"",portal:z1+"",l1StandardBridge:z1+""}});const Hm=1;({...ae,contracts:{...ae.contracts,l2OutputOracle:Hm+"",portal:Hm+"",l1StandardBridge:Hm+""}});const jm=11155111;({...ae,contracts:{...ae.contracts,l2OutputOracle:jm+"",portal:jm+"",l1StandardBridge:jm+""}});const hP=5;({...ae,contracts:{...ae.contracts,portal:hP+""}});function Fh(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const dP=Fh({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),pP=Fh({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Fh({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),Fh({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),Fh({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0}),Fh({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const W0e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Sc={getMethodsByChainNamespace(t){return W0e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),i.has(a)||(r[a].rpcMap={},i.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=n[o];switch(u.chains.push(l),l){case dP.caipNetworkId:u.chains.push(dP.deprecatedCaipNetworkId);break;case pP.caipNetworkId:u.chains.push(pP.deprecatedCaipNetworkId);break}return u?.rpcMap&&c&&(u.rpcMap[s]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await H0.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,r){for(const n of[...e,...r])if(n.includes("*")){const s=`^${n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(s,"u").test(t))return!0}else try{if(new URL(n).origin===t)return!0}catch{if(n===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:i,onChainChanged:s,onDisplayUri:o}){r&&t.on("connect",()=>{const a=Sc.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),i&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],l=t.rpcProviders?.[e]?.getDefaultChain(),u=a.map(h=>{const d=c.find(g=>g.includes(`${e}:${l}:${h}`));if(!d)return;const{chainId:p,chainNamespace:f}=Cn.parseCaipAddress(d);return{address:h,chainId:p,chainNamespace:f}}).filter(h=>h!==void 0);u.length>0&&i(u)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),s&&t.on("chainChanged",a=>{s(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(i=>Cn.parseCaipAddress(i)).filter(({address:i})=>r.has(i.toLowerCase())?!1:(r.add(i.toLowerCase()),!0));return n&&n.length>0?n:[]}};class Z0e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case G.CHAIN.EVM:await this.syncEVMConnections(e);break;case G.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case G.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:r,universalProvider:n,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===G.CONNECTOR_ID.WALLET_CONNECT){const c=Sc.getWalletConnectAccounts(n,this.namespace),l=r.find(u=>u.chainNamespace===this.namespace&&u.id.toString()===c[0]?.chainId?.toString());c.length>0&&s({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await Ea.fetchProviderData(a);if(c.length>0&&l){const u=r.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===l.toString());s({connectorId:a.id,accounts:c.map(h=>({address:h})),caipNetwork:u}),a.provider&&a.id!==G.CONNECTOR_ID.AUTH&&a.id!==G.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===G.CONNECTOR_ID.WALLET_CONNECT){const c=Sc.getWalletConnectAccounts(n,this.namespace);c.length>0&&s({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:r})}else{const c=await a.connect({chainId:r?.id});c&&(s({connectorId:a.id,accounts:[{address:c}],caipNetwork:r}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:r,universalProvider:n,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===G.CONNECTOR_ID.WALLET_CONNECT){const d=Sc.getWalletConnectAccounts(n,this.namespace);d.length>0&&s({connectorId:a.id,accounts:d.map(p=>({address:p.address})),caipNetwork:r});return}const c=await a.connect();let u=(await a.getAccountAddresses())?.map(d=>ne.createAccount(G.CHAIN.BITCOIN,d.address,d.purpose||"payment",d.publicKey,d.path));if(u&&u.length>1&&(u=[{namespace:G.CHAIN.BITCOIN,publicKey:u[Mh.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:u[Mh.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:u[Mh.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:G.CHAIN.BITCOIN,publicKey:u[Mh.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:u[Mh.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:u[Mh.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(d=>d.id===r?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),s({connectorId:a.id,accounts:u.map(d=>({address:d.address,type:d.type})),caipNetwork:r}))}))}getConnection({address:e,connectorId:r,connections:n,connectors:i}){if(r){const o=n.find(l=>Zr.isLowerCaseMatch(l.connectorId,r));if(!o)return null;const a=i.find(l=>Zr.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Zr.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const s=n.find(o=>o.accounts.length>0&&i.some(a=>Zr.isLowerCaseMatch(a.id,o.connectorId)));if(s){const[o]=s.accounts,a=i.find(c=>Zr.isLowerCaseMatch(c.id,s.connectorId));return{...s,account:o,connector:a}}return null}}const q1={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class fP{constructor({provider:e,namespace:r}){this.id=G.CONNECTOR_ID.WALLET_CONNECT,this.name=_1.ConnectorNamesMap[G.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=_1.ConnectorImageIds[G.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=k.getCaipNetworks.bind(k),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=Y.state.universalProviderConfigOverride,i=Sc.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Dn.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:K0e})}}const K0e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],G0e=[G.CONNECTOR_ID.AUTH,G.CONNECTOR_ID.WALLET_CONNECT];class Y0e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>k.getCaipNetworks(r),this.getConnectorId=r=>te.getConnectorId(r),e&&this.construct(e),e?.namespace&&(this.connectionManager=new Z0e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(i=>i.chainNamespace===this.namespace).find(i=>i.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:G.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:G.CONNECTOR_ID.AUTH,type:"AUTH",name:G.CONNECTOR_NAMES.AUTH,provider:e,imageId:_1.ConnectorImageIds[G.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>!Zr.isLowerCaseMatch(r.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){be.setStatus(e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const s=i,o=xn(r.chainNamespace);await s.switchNetwork({chainId:r.caipNetworkId});const a=await s.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof fP);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:i}=ne.getAccount(e[0]),s=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===i?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:i,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=ne.getAccount(a);return{address:c}}),caipNetwork:s}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:i}=ne.getAccount(e[0]),s=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});i&&Zr.isLowerCaseMatch(this.getConnectorId(G.CHAIN.EVM),r)&&this.emit("accountChanged",{address:i,chainId:s?.caipNetwork?.id,connector:s?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=ne.getAccount(o);return{address:a}}),caipNetwork:s?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Zr.isLowerCaseMatch(this.getConnectorId(G.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?gm.hexStringToNumber(e).toString():e.toString(),i=this.connectionManager?.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),s=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);i&&this.addConnection({connectorId:r,accounts:i.accounts,caipNetwork:s}),Zr.isLowerCaseMatch(this.getConnectorId(G.CHAIN.EVM),r)&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(G0e.includes(e))return;const n=o=>this.onAccountsChanged(o,e),i=o=>this.onChainChanged(o,e),s=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",s),r.on("accountsChanged",n),r.on("chainChanged",i),this.providerHandlers[e]={provider:r,disconnect:s,accountsChanged:n,chainChanged:i})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:i,chainChanged:s}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",i),r.removeListener("chainChanged",s),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class X0e extends Y0e{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new fP({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,s]=i.split(":");return s}).filter((i,s,o)=>o.indexOf(i)===s)||[];return Promise.resolve({accounts:n.map(i=>ne.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Le.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(be.state.balanceLoading&&e.chainId===k.state.activeCaipNetwork?.id)return{balance:be.state.balance||"0.00",symbol:be.state.balanceSymbol||""};const i=(await be.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return k.state.activeCaipNetwork?.chainNamespace===G.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:Hi.encode(new TextEncoder().encode(n)),pubkey:i}},k.state.activeCaipNetwork?.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},k.state.activeCaipNetwork?.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===G.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:gr(r.id)}]})}catch(i){if(i.code===q1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===q1.ERROR_INVALID_CHAIN_ID||i.code===q1.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===q1.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:gr(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}}const J0e=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],Vm={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Le.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Le.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Le.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Le.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Le.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Le.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>Le.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?Le.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},Q0e={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=Vm[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,i){const s=Vm[t],o=e[s.localFeatureName];if(i&&!s.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(s.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Vm[t].processApi(e)},processFallbackFeature(t,e){return Vm[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,i=!1;try{n=await ce.fetchProjectConfig(),i=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const s=i&&!e?Le.DEFAULT_REMOTE_FEATURES:Le.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of J0e){const a=this.processFeature(o,r,n,i,e);Object.assign(s,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Le.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Qt.open({debugMessage:Ni.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return s}};class e1e{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const i=k.getCaipNetworks(r)?.find(a=>a.id===n);if(i)return i;const s=k.getNetworkData(r)?.caipNetwork;return s||k.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return k.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>k.getCaipNetworks(r),this.getActiveChainNamespace=()=>k.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{k.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>k.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>k.state.activeChain===r||!r?k.state.activeCaipAddress:k.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{Ae.setClientId(r)},this.getProvider=r=>Nt.getProvider(r),this.getProviderType=r=>Nt.getProviderId(r),this.getPreferredAccountType=r=>xn(r),this.setCaipAddress=(r,n)=>{be.setCaipAddress(r,n)},this.setBalance=(r,n,i)=>{be.setBalance(r,n,i)},this.setProfileName=(r,n)=>{be.setProfileName(r,n)},this.setProfileImage=(r,n)=>{be.setProfileImage(r,n)},this.setUser=(r,n)=>{be.setUser(r,n)},this.resetAccount=r=>{be.resetAccount(r)},this.setCaipNetwork=r=>{k.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{k.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{be.setStatus(r,n),te.isConnected()?oe.setConnectionStatus("connected"):oe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>k.state.chains.get(r)?.accountState?.address,this.setConnectors=r=>{const n=[...te.state.allConnectors,...r];te.setConnectors(n)},this.setConnections=(r,n)=>{oe.setConnections(r,n),X.setConnections(r,n)},this.fetchIdentity=r=>Ae.fetchIdentity(r),this.getReownName=r=>H0.getNamesForAddress(r),this.getConnectors=()=>te.getConnectors(),this.getConnectorImage=r=>Jt.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?m2.getConnectionsData(r).connections:(Qt.open(G.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?m2.getConnectionsData(r).recentConnections:(Qt.open(G.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){Qt.open(G.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await X.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){Qt.open(G.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}oe.deleteAddressFromConnection(r),X.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const i=Nt.getProviderId(n),s=r?{...r,type:i}:void 0;be.setConnectedWalletInfo(s,n)},this.getIsConnectedState=()=>!!k.state.activeCaipAddress,this.addAddressLabel=(r,n,i)=>{be.addAddressLabel(r,n,i)},this.removeAddressLabel=(r,n)=>{be.removeAddressLabel(r,n)},this.getAddress=r=>k.state.activeChain===r||!r?be.state.address:k.state.chains.get(r)?.accountState?.address,this.setApprovedCaipNetworksData=r=>k.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{k.resetNetwork(r)},this.addConnector=r=>{te.addConnector(r)},this.resetWcConnection=()=>{X.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{be.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{be.setSmartAccountDeployed(r,n)},this.setPreferredAccountType=(r,n)=>{k.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{Y.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(s=>s.namespace).filter(s=>!!s);if(n?.length)return[...new Set(n)];const i=r?.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),Y.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await Q0e.fetchRemoteFeatures(e),Y.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Q8.setOnrampProviders(this.remoteFeatures.onramp),(Y.state.remoteFeatures?.email||Array.isArray(Y.state.remoteFeatures?.socials)&&Y.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),Y.state.features?.reownAuthentication||Y.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await Promise.resolve().then(function(){return m1e}),n=Y.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),Y.setSIWX(new r))}}async checkAllowedOrigins(){try{const e=await ce.fetchAllowedOrigins();if(!ne.isClient())return;const r=window.location.origin;Sc.isOriginAllowed(r,e,q1.DEFAULT_ALLOWED_ANCESTORS)||Qt.open(Ni.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":Qt.open(Ni.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;Qt.open({displayMessage:Ni.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Ni.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}}}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Te.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&xr.setThemeMode(e.themeMode),e.themeVariables&&xr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");k.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&k.setActiveCaipNetwork(r)}initializeConnectionController(e){X.initialize(e.adapters??[]),X.setWcBasic(e.basic??!1)}initializeConnectorController(){te.initialize(this.chainNamespaces)}initializeProjectSettings(e){Y.setProjectId(e.projectId),Y.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){Y.setDebug(e.debug!==!1),Y.setEnableWalletConnect(e.enableWalletConnect!==!1),Y.setEnableWalletGuide(e.enableWalletGuide!==!1),Y.setEnableWallets(e.enableWallets!==!1),Y.setEIP6963Enabled(e.enableEIP6963!==!1),Y.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Y.setEnableReconnect(e.enableReconnect!==!1),Y.setEnableAuthLogger(e.enableAuthLogger!==!1),Y.setCustomRpcUrls(e.customRpcUrls),Y.setEnableEmbedded(e.enableEmbedded),Y.setAllWallets(e.allWallets),Y.setIncludeWalletIds(e.includeWalletIds),Y.setExcludeWalletIds(e.excludeWalletIds),Y.setFeaturedWalletIds(e.featuredWalletIds),Y.setTokens(e.tokens),Y.setTermsConditionsUrl(e.termsConditionsUrl),Y.setPrivacyPolicyUrl(e.privacyPolicyUrl),Y.setCustomWallets(e.customWallets),Y.setFeatures(e.features),Y.setAllowUnsupportedChain(e.allowUnsupportedChain),Y.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Y.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Y.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),Y.setMetadata(e.metadata),Y.setDisableAppend(e.disableAppend),Y.setEnableEmbedded(e.enableEmbedded),Y.setSIWX(e.siwx),this.features=Y.state.features??{},!e.projectId){Qt.open(Ni.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===G.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Y.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ne.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Ul.getUnsupportedNetwork(`${r}:${e}`);k.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Ul.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Ul.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Ul.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>i.id===e.defaultNetwork?.id);return r?Ul.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,r){try{this.setLoading(!0,e);let n={connections:[]};const i=this.getAdapter(e);return(k.state.chains.get(e)?.accountState?.caipAddress||!Y.state.enableReconnect)&&i?.disconnect&&(n=await i.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=k.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,i=X.getConnections(e),s=this.remoteFeatures.multiWallet,o=i.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!s)&&this.close(),this.setClientId(a?.clientId||null),oe.setConnectedNamespaces([...k.state.chains.keys()]),await this.syncWalletConnectAccount(),await Dn.initializeIfEnabled()},connectExternal:async e=>{const r=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,r),r?{address:r.address}:void 0},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{const s=k.state.activeChain,o=this.getAdapter(s);if(!s)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:i,chainId:this.getCaipNetwork()?.id}),oe.addConnectedNamespace(s),this.syncConnectedWalletInfo(s))},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:i}=e||{},s=n||k.state.activeChain,o=te.getConnectorId(s),a=r===G.CONNECTOR_ID.AUTH||o===G.CONNECTOR_ID.AUTH,c=r===G.CONNECTOR_ID.WALLET_CONNECT||o===G.CONNECTOR_ID.WALLET_CONNECT;try{const l=Array.from(k.state.chains.keys());let u=n?[n]:l;(c||a)&&(u=l);const h=u.map(async f=>{const g=te.getConnectorId(f),w=await this.disconnectNamespace(f,r||g);w&&(a&&oe.deleteConnectedSocialProvider(),w.connections.forEach(v=>{oe.addDisconnectedConnectorId(v.connectorId,f)})),i&&this.onDisconnectNamespace({chainNamespace:f,closeModal:!1})}),d=await Promise.allSettled(h);qe.resetSend(),X.resetWcConnection(),Dn.getSIWX()?.signOutOnDisconnect&&await Dn.clearSessions(),te.setFilterByNamespace(void 0),X.syncStorageConnections();const p=d.filter(f=>f.status==="rejected");if(p.length>0)throw new Error(p.map(f=>f.reason.message).join(", "));Te.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(l){throw new Error(`Failed to disconnect chains: ${l.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=k.state.activeChain,n=this.getAdapter(k.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");return(await n?.signMessage({message:e,address:be.state.address,provider:Nt.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(Le.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const i=Nt.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===G.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const i=Nt.getProvider(r),s=this.getCaipNetwork();if(!s)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:i,caipNetwork:s}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=k.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:be.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),be.state.profileImage||!1},getEnsAddress:async e=>await Sc.resolveReownName(e),writeContract:async e=>{const r=k.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const i=this.getCaipNetwork(),s=this.getCaipAddress(),o=Nt.getProvider(r);if(!i||!s)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:i,provider:o,caipAddress:s}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(k.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(k.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(k.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(k.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(k.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(k.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getCaipNetwork(e);!r||!be.state.address||this.updateNativeBalance(be.state.address,r?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},X.setClient(this.connectionControllerClient)}async onConnectExternal(e){const r=k.state.activeChain,n=e.chain||r,i=this.getAdapter(n);let s=!0;if(e.type===kt.CONNECTOR_TYPE_AUTH&&G.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>te.getConnectorId(h)===G.CONNECTOR_ID.AUTH)&&e.chain!==r&&(s=!1),e.chain&&e.chain!==r&&!e.caipNetwork){const l=this.getCaipNetworks().find(u=>u.chainNamespace===e.chain);l&&s&&this.setCaipNetwork(l)}if(!n)throw new Error("connectExternal: namespace not found");if(!i)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(n),a=e.caipNetwork||o,c=await i.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(c)return oe.addConnectedNamespace(n),this.syncProvider({...c,chainNamespace:n}),this.setStatus("connected",n),this.syncConnectedWalletInfo(n),oe.removeDisconnectedConnectorId(e.id,n),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,r){const n=e.type===kt.CONNECTOR_TYPE_AUTH,i=Zr.getOtherAuthNamespaces(r?.connectedCaipNetwork?.chainNamespace),s=k.state.activeCaipNetwork,o=this.getAdapter(s?.chainNamespace),a=Nt.getProvider(s?.chainNamespace);n&&(await Promise.all(i.map(async c=>{try{const l=Nt.getProvider(c),u=this.getCaipNetwork(c);await this.getAdapter(c)?.connect({...e,provider:l,socialUri:void 0,chainId:u?.id,rpcUrl:u?.rpcUrls?.default?.http?.[0]})&&(oe.addConnectedNamespace(c),oe.removeDisconnectedConnectorId(e.id,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c))}catch(l){Qt.warn(Ni.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Ni.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(c,l instanceof Error?l.message:void 0),Ni.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),s&&await o?.switchNetwork({caipNetwork:s,provider:a,providerType:e.type}))}getApprovedCaipNetworksData(){if(Nt.getProviderId(k.state.activeChain)===kt.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Nt.getProvider(r),s=Nt.getProviderId(r);if(e.chainNamespace===k.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:i,providerType:s});else if(this.setCaipNetwork(e),s===kt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:a}=Cn.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const i=e?.find(s=>s.namespace===n);return i?(i.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),r[n]=i):r[n]=new X0e({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=oe.getConnectionStatus();Y.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(oe.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(l=>l.id.toString()===s.toString()||l.caipNetworkId.toString()===s.toString()),a=k.state.activeChain===e,c=k.state.chains.get(e)?.accountState?.address;if(o){const l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",()=>{const i=this.remoteFeatures.multiWallet,s=Array.from(X.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!i||s.length===0})}),r.on("connections",i=>{this.setConnections(i,e)}),r.on("pendingTransactions",()=>{const i=be.state.address,s=k.state.activeCaipNetwork;!i||!s?.id||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s,connector:o})=>{const a=k.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=k.getNetworkData(e)?.caipNetwork?.id,l=s||c;a&&l?this.syncAccount({address:i,chainId:l,chainNamespace:e}):!a&&l?(this.syncAccountInfo(i,l,e),this.syncBalance({address:i,chainId:l,chainNamespace:e})):this.syncAccountInfo(i,s,e),oe.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>X.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();Te.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ne.isMobile()?"mobile":"qrcode",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0}})}async syncNamespaceConnection(e){try{e===G.CHAIN.EVM&&ne.isSafeApp()&&te.setConnectorId(G.CONNECTOR_ID.SAFE,e);const r=te.getConnectorId(e);switch(this.setStatus("connecting",e),r){case G.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case G.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};k.resetAccount(r),k.resetNetwork(r),oe.removeConnectedNamespace(r);const i=Array.from(k.state.chains.keys());(r?[r]:i).forEach(o=>oe.addDisconnectedConnectorId(te.getConnectorId(o)||"",o)),te.removeConnectorId(r),Nt.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(void 0,r),n!==!1&&ke.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getCaipAddress(e),n=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!r,caipNetwork:n,getConnectorStorageInfo(i){const o=oe.getConnections()[e]??[];return{hasDisconnected:oe.isConnectorDisconnected(i,e),hasConnected:o.some(a=>Zr.isLowerCaseMatch(a.connectorId,i))}}})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=te.getConnectorId(e),i=this.getCaipNetwork(e),o=te.getConnectors(e).find(a=>a.id===n);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Te.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const i=this.getAdapter(n);if(!i)return;const s=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=k.state.activeCaipNetwork?.id,a=s.find(c=>{const{chainId:l}=Cn.parseCaipAddress(c);return l===o?.toString()})||s[0];if(a){const c=Cn.validateCaipAddress(a),{chainId:l,address:u}=Cn.parseCaipAddress(c);if(Nt.setProviderId(n,kt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&k.state.activeCaipNetwork&&i.namespace!==G.CHAIN.EVM){const h=i.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:k.state.activeCaipNetwork});Nt.setProvider(n,h)}else Nt.setProvider(n,this.universalProvider);te.setConnectorId(G.CONNECTOR_ID.WALLET_CONNECT,n),oe.addConnectedNamespace(n),await this.syncAccount({address:u,chainId:l,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await k.setApprovedCaipNetworksData(n)});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){Nt.setProviderId(i,e),Nt.setProvider(i,r),te.setConnectorId(n,i)}async syncAccount(e){const r=e.chainNamespace===k.state.activeChain,n=k.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=oe.getActiveNetworkProps(),c=s||a,l=k.state.activeCaipNetwork?.name===G.UNSUPPORTED_NETWORK_NAME,u=k.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.getCaipNetworks().find(f=>f.id.toString()===c.toString()),d=this.getCaipNetworks().find(f=>f.chainNamespace===o);if(!u&&!h&&!d){const f=this.getApprovedCaipNetworkIds()||[],g=f.find(v=>Cn.parseCaipNetworkId(v)?.chainId===c.toString()),w=f.find(v=>Cn.parseCaipNetworkId(v)?.chainNamespace===o);h=this.getCaipNetworks().find(v=>v.caipNetworkId===g),d=this.getCaipNetworks().find(v=>v.caipNetworkId===w||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===w)}const p=h||d;p?.chainNamespace===k.state.activeChain?Y.state.enableNetworkSwitch&&!Y.state.allowUnsupportedChain&&k.state.activeCaipNetwork?.name===G.UNSUPPORTED_NETWORK_NAME?k.showUnsupportedChainUI():this.setCaipNetwork(p):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),Zr.isLowerCaseMatch(i,be.state.address)||this.syncAccountInfo(i,p?.id,o),r?await this.syncBalance({address:i,chainId:p?.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:i,chainId:s,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||i?.split(":")[1];if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=te.getConnectorId(e),n=Nt.getProviderId(e);if(n===kt.CONNECTOR_TYPE_ANNOUNCED||n===kt.CONNECTOR_TYPE_INJECTED){if(r){const s=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,l=o.connectors?.some(u=>u.id===r||u.info?.rdns===r);return a||c||!!l});if(s){const{info:o,name:a,imageUrl:c}=s,l=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(n===kt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Nt.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===G.CONNECTOR_ID.COINBASE_SDK||r===G.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(c=>c.id===r),s=i?.name||"Coinbase Wallet",o=i?.imageUrl||this.getConnectorImage(i),a=i?.info;this.setConnectedWalletInfo({...a,name:s,icon:o},e)}}async syncBalance(e){!H8.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const i=this.getAdapter(n),s=k.getCaipNetworkByNamespace(n,r);if(i){const o=await i.getBalance({address:e,chainId:r,caipNetwork:s,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=Kde.createLogger((n,...i)=>{n&&this.handleAlertError(n),console.error(...i)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Y.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await W4.init(r),Y.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Sc.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{X.setUri(r)},onConnect:r=>{const{address:n}=ne.getAccount(r[0]);X.finalizeWcConnection(n)},onDisconnect:()=>{k.state.noAdapters&&this.resetAccount(e),X.resetWcConnection()},onChainChanged:r=>{const n=k.state.activeChain,i=n&&te.state.activeConnectorIds[n]===G.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(k.state.noAdapters||i)){const s=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!s){this.setUnsupportedNetwork(r);return}o?.id.toString()!==s?.id.toString()&&o?.chainNamespace===s?.chainNamespace&&this.setCaipNetwork(s)}},onAccountsChanged:r=>{const n=k.state.activeChain,i=n&&te.state.activeConnectorIds[n]===G.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(k.state.noAdapters||i)){const s=r?.[0];s&&this.syncAccount({address:s.address,chainId:s.chainId,chainNamespace:s.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&ne.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Te.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Ni.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const a=Ni.ALERT_ERRORS[o];a&&(Qt.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e?.uri&&X.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return ke.open({...e,data:{swap:e.arguments}})}return ke.open(e)}async close(){await this.injectModalUi(),ke.close()}setLoading(e,r){ke.setLoading(e,r)}async disconnect(e){await X.disconnect({namespace:e})}getSIWX(){return Y.state.siwx}getError(){return""}getChainId(){return k.state.activeCaipNetwork?.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){Qt.open(Ni.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await k.switchActiveNetwork(r)}getWalletProvider(){return k.state.activeChain?Nt.state.providers[k.state.activeChain]:null}getWalletProviderType(){return Nt.getProviderId(k.state.activeChain)}subscribeProviders(e){return Nt.subscribeProviders(e)}getThemeMode(){return xr.state.themeMode}getThemeVariables(){return xr.state.themeVariables}setThemeMode(e){xr.setThemeMode(e),r3(xr.state.themeMode)}setTermsConditionsUrl(e){Y.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Y.setPrivacyPolicyUrl(e)}setThemeVariables(e){xr.setThemeVariables(e),_0e(xr.state.themeVariables)}subscribeTheme(e){return xr.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?X.subscribe(e):(Qt.open(G.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?k.state.chains.get(e)?.accountState?.connectedWalletInfo:be.state.connectedWalletInfo}getAccount(e){const r=e||k.state.activeChain,n=te.getAuthConnector(r),i=k.getAccountData(r),s=oe.getConnectedConnectorId(k.state.activeChain),o=X.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:h})=>ne.createAccount(r,l,u||"eoa",h)));if(i)return{allAccounts:a,caipAddress:i.caipAddress,address:ne.getPlainAddress(i.caipAddress),isConnected:!!i.caipAddress,status:i.status,embeddedWalletInfo:n&&s===G.CONNECTOR_ID.AUTH?{user:i.user?{...i.user,username:oe.getConnectedSocialUsername()}:void 0,authProvider:i.socialProvider||"email",accountType:xn(r),isSmartAccountDeployed:!!i.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?k.subscribeChainProp("accountState",n,r):k.subscribe(n),te.subscribe(n)}subscribeNetwork(e){return k.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?be.subscribeKey("connectedWalletInfo",e,r):be.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){be.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){k.subscribeKey("activeCaipNetwork",e)}getState(){return la.state}getRemoteFeatures(){return Y.state.remoteFeatures}subscribeState(e){return la.subscribe(e)}subscribeRemoteFeatures(e){return Y.subscribeKey("remoteFeatures",e)}showErrorMessage(e){We.showError(e)}showSuccessMessage(e){We.showSuccess(e)}getEvent(){return{...Te.state}}subscribeEvents(e){return Te.subscribe(e)}replace(e){J.replace(e)}redirect(e){J.push(e)}popTransactionStack(e){J.popTransactionStack(e)}isOpen(){return ke.state.open}isTransactionStackEmpty(){return J.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Y.setFeatures(e)}updateRemoteFeatures(e){Y.setRemoteFeatures(e)}updateOptions(e){const n={...Y.state||{},...e};Y.setOptions(n)}setConnectMethodsOrder(e){Y.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Y.setWalletFeaturesOrder(e)}setCollapseWallets(e){Y.setCollapseWallets(e)}setSocialsOrder(e){Y.setSocialsOrder(e)}getConnectMethodsOrder(){return xc.getConnectOrderMethod(Y.state.features,te.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(i=>i.id===n.id)||k.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===r)&&k.removeNetwork(e,r)}}let gP=!1;class mP extends e1e{async open(e){te.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&X.finalizeWcConnection(be.state.address)}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!gP&&ne.isClient()){if(await Promise.resolve().then(function(){return Ffe}),await Promise.resolve().then(function(){return lge}),!document.querySelector("w3m-modal")){const r=document.createElement("w3m-modal");!Y.state.disableAppend&&!Y.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}gP=!0}}}const t1e="1.8.1";function r1e(t){return new mP({...t,basic:!0,sdkVersion:`html-core-${t1e}`})}var n1e=Object.freeze({__proto__:null,createAppKit:r1e,AppKit:mP}),i1e=Object.defineProperty,s1e=Object.defineProperties,o1e=Object.getOwnPropertyDescriptors,wP=Object.getOwnPropertySymbols,a1e=Object.prototype.hasOwnProperty,c1e=Object.prototype.propertyIsEnumerable,yP=(t,e,r)=>e in t?i1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bP=(t,e)=>{for(var r in e||(e={}))a1e.call(e,r)&&yP(t,r,e[r]);if(wP)for(var r of wP(e))c1e.call(e,r)&&yP(t,r,e[r]);return t},l1e=(t,e)=>s1e(t,o1e(e));function u1e(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const h1e=t=>{const[e,r]=t.split(":");return vP({id:r,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function d1e(t){var e,r,n,i,s,o,a;const c=(e=t.chains)==null?void 0:e.map(h1e).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const l=c.find(h=>{var d;return h.id===((d=t.defaultChain)==null?void 0:d.id)}),u={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:u1e(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:l,metadata:l1e(bP({},t.metadata),{name:((r=t.metadata)==null?void 0:r.name)||"WalletConnect",description:((n=t.metadata)==null?void 0:n.description)||"Connect to WalletConnect-compatible wallets",url:((i=t.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=t.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const h=[...(t.mobileWallets||[]).map(f=>({id:f.id,name:f.name,links:f.links})),...(t.desktopWallets||[]).map(f=>({id:f.id,name:f.name,links:{native:f.links.native,universal:f.links.universal}}))],d=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],p=h.filter(f=>!d.includes(f.id));p.length&&(u.customWallets=p)}return u}function vP(t){return bP({formatters:void 0,fees:void 0,serializers:void 0},t)}var p1e=Object.freeze({__proto__:null,convertWCMToAppKitOptions:d1e,defineChain:vP});class EP{constructor(e){this.getNonce=e.getNonce}async createMessage(e){const r={accountAddress:e.accountAddress,chainId:e.chainId,version:"1",domain:typeof document>"u"?"Unknown Domain":document.location.host,uri:typeof document>"u"?"Unknown URI":document.location.href,resources:this.resources,nonce:await this.getNonce(e),issuedAt:this.stringifyDate(new Date),statement:void 0,expirationTime:void 0,notBefore:void 0};return Object.assign(r,{toString:()=>this.stringify(r)})}stringify(e){const r=this.getNetworkName(e.chainId);return[`${e.domain} wants you to sign in with your ${r} account:`,e.accountAddress,e.statement?`
${e.statement}
`:"",`URI: ${e.uri}`,`Version: ${e.version}`,`Chain ID: ${e.chainId}`,`Nonce: ${e.nonce}`,e.issuedAt&&`Issued At: ${e.issuedAt}`,e.expirationTime&&`Expiration Time: ${e.expirationTime}`,e.notBefore&&`Not Before: ${e.notBefore}`,e.requestId&&`Request ID: ${e.requestId}`,e.resources?.length&&e.resources.reduce((n,i)=>`${n}
- ${i}`,"Resources:")].filter(n=>typeof n=="string").join(`
`).trim()}getNetworkName(e){const r=k.getAllRequestedCaipNetworks();return H8.getNetworkNameByCaipNetworkId(r,e)}stringifyDate(e){return e.toISOString()}}class f1e{constructor(e={}){this.otpUuid=null,this.listeners={sessionChanged:[]},this.localAuthStorageKey=e.localAuthStorageKey||xe.SIWX_AUTH_TOKEN,this.localNonceStorageKey=e.localNonceStorageKey||xe.SIWX_NONCE_TOKEN,this.required=e.required??!0,this.messenger=new EP({getNonce:this.getNonce.bind(this)})}async createMessage(e){return this.messenger.createMessage(e)}async addSession(e){const r=await this.request({method:"POST",key:"authenticate",body:{data:e.data,message:e.message,signature:e.signature,clientId:this.getClientId(),walletInfo:this.getWalletInfo()},headers:["nonce","otp"]});this.setStorageToken(r.token,this.localAuthStorageKey),this.emit("sessionChanged",e),this.setAppKitAccountUser(g1e(r.token)),this.otpUuid=null}async getSessions(e,r){try{if(!this.getStorageToken(this.localAuthStorageKey))return[];const n=await this.request({method:"GET",key:"me",query:{},headers:["auth"]});if(!n)return[];const i=n.address.toLowerCase()===r.toLowerCase(),s=n.caip2Network===e;if(!i||!s)return[];const o={data:{accountAddress:n.address,chainId:n.caip2Network},message:"",signature:""};return this.emit("sessionChanged",o),this.setAppKitAccountUser(n),[o]}catch{return[]}}async revokeSession(e,r){return Promise.resolve(this.clearStorageTokens())}async setSessions(e){if(e.length===0)this.clearStorageTokens();else{const r=e.find(n=>n.data.chainId===M0()?.caipNetworkId)||e[0];await this.addSession(r)}}getRequired(){return this.required}async getSessionAccount(){if(!this.getStorageToken(this.localAuthStorageKey))throw new Error("Not authenticated");return this.request({method:"GET",key:"me",body:void 0,query:{includeAppKitAccount:!0},headers:["auth"]})}async setSessionAccountMetadata(e=null){if(!this.getStorageToken(this.localAuthStorageKey))throw new Error("Not authenticated");return this.request({method:"PUT",key:"account-metadata",body:{metadata:e},headers:["auth"]})}on(e,r){return this.listeners[e].push(r),()=>{this.listeners[e]=this.listeners[e].filter(n=>n!==r)}}removeAllListeners(){Object.keys(this.listeners).forEach(r=>{this.listeners[r]=[]})}async requestEmailOtp({email:e,account:r}){const n=await this.request({method:"POST",key:"otp",body:{email:e,account:r}});return this.otpUuid=n.uuid,this.messenger.resources=[`email:${e}`],n}confirmEmailOtp({code:e}){return this.request({method:"PUT",key:"otp",body:{code:e},headers:["otp"]})}async request({method:e,key:r,query:n,body:i,headers:s}){const{projectId:o,st:a,sv:c}=this.getSDKProperties(),l=new URL(`${G.W3M_API_URL}/auth/v1/${String(r)}`);l.searchParams.set("projectId",o),l.searchParams.set("st",a),l.searchParams.set("sv",c),n&&Object.entries(n).forEach(([h,d])=>l.searchParams.set(h,String(d)));const u=await fetch(l,{method:e,body:i?JSON.stringify(i):void 0,headers:Array.isArray(s)?s.reduce((h,d)=>{switch(d){case"nonce":h["x-nonce-jwt"]=`Bearer ${this.getStorageToken(this.localNonceStorageKey)}`;break;case"auth":h.Authorization=`Bearer ${this.getStorageToken(this.localAuthStorageKey)}`;break;case"otp":this.otpUuid&&(h["x-otp"]=this.otpUuid);break}return h},{}):void 0});if(!u.ok)throw new Error(await u.text());return u.headers.get("content-type")?.includes("application/json")?u.json():null}getStorageToken(e){return ve.getItem(e)}setStorageToken(e,r){ve.setItem(r,e)}clearStorageTokens(){this.otpUuid=null,ve.removeItem(this.localAuthStorageKey),ve.removeItem(this.localNonceStorageKey),this.emit("sessionChanged",void 0)}async getNonce(){const{nonce:e,token:r}=await this.request({method:"GET",key:"nonce"});return this.setStorageToken(r,this.localNonceStorageKey),e}getClientId(){return Ae.state.clientId}getWalletInfo(){const{connectedWalletInfo:e}=be.state;if(!e)return;if("social"in e){const s=e.social,o=e.identifier;return{type:"social",social:s,identifier:o}}const{name:r,icon:n}=e;let i="unknown";switch(e.type){case"EXTERNAL":case"INJECTED":case"ANNOUNCED":i="extension";break;case"WALLET_CONNECT":i="walletconnect";break;default:i="unknown"}return{type:i,name:r,icon:n}}getSDKProperties(){return ce._getSdkProperties()}emit(e,r){this.listeners[e].forEach(n=>n(r))}setAppKitAccountUser(e){const{email:r}=e;r&&Object.values(G.CHAIN).forEach(n=>{k.setAccountProp("user",{email:r},n)})}}function g1e(t){const e=t.split(".");if(e.length!==3)throw new Error("Invalid token");const r=e[1];if(typeof r!="string")throw new Error("Invalid token");const n=r.replace(/-/gu,"+").replace(/_/gu,"/"),i=n.padEnd(n.length+(4-n.length%4)%4,"=");return JSON.parse(atob(i))}var m1e=Object.freeze({__proto__:null,ReownAuthentication:f1e,ReownAuthenticationMessenger:EP});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w1e={attribute:!0,type:String,converter:lm,reflect:!1,hasChanged:Y4},y1e=(t=w1e,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),n==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),n==="accessor"){const{name:o}=r;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(n==="setter"){const{name:o}=r;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+n)};function z(t){return(e,r)=>typeof r=="object"?y1e(t,e,r):((n,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,n),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function pe(t){return z({...t,state:!0,attribute:!1})}var b1e=un`
  :host {
    display: flex;
    width: inherit;
    height: inherit;
    box-sizing: border-box;
  }
`,Mn=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Kr=class extends ye{render(){return this.style.cssText=`
      flex-direction: ${this.flexDirection};
      flex-wrap: ${this.flexWrap};
      flex-basis: ${this.flexBasis};
      flex-grow: ${this.flexGrow};
      flex-shrink: ${this.flexShrink};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      column-gap: ${this.columnGap&&`var(--apkt-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--apkt-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--apkt-spacing-${this.gap})`};
      padding-top: ${this.padding&&ir.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&ir.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&ir.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&ir.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&ir.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&ir.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&ir.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&ir.getSpacingStyles(this.margin,3)};
      width: ${this.width};
    `,F`<slot></slot>`}};Kr.styles=[at,b1e],Mn([z()],Kr.prototype,"flexDirection",void 0),Mn([z()],Kr.prototype,"flexWrap",void 0),Mn([z()],Kr.prototype,"flexBasis",void 0),Mn([z()],Kr.prototype,"flexGrow",void 0),Mn([z()],Kr.prototype,"flexShrink",void 0),Mn([z()],Kr.prototype,"alignItems",void 0),Mn([z()],Kr.prototype,"justifyContent",void 0),Mn([z()],Kr.prototype,"columnGap",void 0),Mn([z()],Kr.prototype,"rowGap",void 0),Mn([z()],Kr.prototype,"gap",void 0),Mn([z()],Kr.prototype,"padding",void 0),Mn([z()],Kr.prototype,"margin",void 0),Mn([z()],Kr.prototype,"width",void 0),Kr=Mn([we("wui-flex")],Kr);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ne=t=>t??Ut;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const CP=Symbol.for(""),v1e=t=>{if(t?.r===CP)return t?._$litStatic$},E1e=t=>({_$litStatic$:t,r:CP}),AP=new Map,C1e=t=>(e,...r)=>{const n=r.length;let i,s;const o=[],a=[];let c,l=0,u=!1;for(;l<n;){for(c=e[l];l<n&&(s=r[l],(i=v1e(s))!==void 0);)c+=i+e[++l],u=!0;l!==n&&a.push(s),o.push(c),l++}if(l===n&&o.push(e[n]),u){const h=o.join("$$lit$$");(e=AP.get(h))===void 0&&(o.raw=o,AP.set(h,e=o)),r=a}return t(e,...r)},$P=C1e(F),A1e=mt`<svg width="30" height="30" viewBox="0 0 30 30" fill="none">
  <g clip-path="url(#clip0_87_33)">
    <path d="M23.9367 2.29447e-07H6.05917C5.26333 -0.000218805 4.47526 0.156384 3.73997 0.46086C3.00469 0.765337 2.33661 1.21172 1.77391 1.7745C1.21121 2.33727 0.764917 3.00542 0.460542 3.74074C0.156167 4.47607 -0.000327963 5.26417 5.16031e-07 6.06V23.9433C4.48257e-07 24.7389 0.156744 25.5267 0.461276 26.2617C0.765808 26.9967 1.21216 27.6645 1.77484 28.2269C2.33752 28.7894 3.0055 29.2355 3.74061 29.5397C4.47573 29.8439 5.26358 30.0003 6.05917 30H23.9417C25.5486 29.9996 27.0895 29.3609 28.2257 28.2245C29.3618 27.0881 30 25.5469 30 23.94V6.06C29.9993 4.45241 29.3602 2.91091 28.2232 1.77449C27.0861 0.638064 25.5443 -0.000220881 23.9367 2.29447e-07Z" fill="url(#paint0_linear_87_33)"/>
    <path d="M14.8708 6.89259L15.4783 5.84259C15.5679 5.68703 15.6873 5.55064 15.8296 5.44122C15.9719 5.3318 16.1344 5.25148 16.3078 5.20486C16.4812 5.15824 16.662 5.14622 16.8401 5.1695C17.0181 5.19277 17.1898 5.25088 17.3453 5.34051C17.5009 5.43013 17.6373 5.54952 17.7467 5.69186C17.8561 5.83419 17.9364 5.99669 17.9831 6.17006C18.0297 6.34344 18.0417 6.5243 18.0184 6.70232C17.9952 6.88034 17.9371 7.05203 17.8474 7.20759L11.9949 17.3401H16.2283C17.5999 17.3401 18.3691 18.9526 17.7724 20.0701H5.36159C5.18215 20.0707 5.00436 20.0359 4.83845 19.9675C4.67254 19.8992 4.5218 19.7986 4.39492 19.6718C4.26803 19.5449 4.16751 19.3941 4.09915 19.2282C4.03079 19.0623 3.99593 18.8845 3.99659 18.7051C3.99659 17.9476 4.60492 17.3401 5.36159 17.3401H8.84159L13.2958 9.61926L11.9041 7.20426C11.738 6.89096 11.7 6.52543 11.7982 6.18469C11.8963 5.84395 12.1229 5.5546 12.4301 5.37763C12.7374 5.20065 13.1014 5.14987 13.4454 5.23599C13.7893 5.3221 14.0864 5.53838 14.2741 5.83926L14.8708 6.89259ZM9.60659 21.4759L8.29409 23.7526C8.20446 23.9082 8.08506 24.0446 7.94271 24.1541C7.80035 24.2636 7.63783 24.344 7.46441 24.3906C7.291 24.4373 7.11009 24.4493 6.93202 24.4261C6.75395 24.4028 6.58221 24.3447 6.42659 24.2551C6.27097 24.1655 6.13454 24.0461 6.02506 23.9037C5.91559 23.7613 5.83523 23.5988 5.78857 23.4254C5.74191 23.252 5.72986 23.0711 5.75311 22.893C5.77637 22.715 5.83446 22.5432 5.92409 22.3876L6.89909 20.7001C8.00159 20.3584 8.89742 20.6209 9.60659 21.4759ZM20.9066 17.3476H24.4583C25.2158 17.3476 25.8233 17.9551 25.8233 18.7126C25.8233 19.4701 25.2149 20.0776 24.4583 20.0776H22.4858L23.8166 22.3876C24.1916 23.0443 23.9708 23.8726 23.3149 24.2551C23.0006 24.4359 22.6274 24.4845 22.2772 24.3903C21.927 24.2961 21.6286 24.0667 21.4474 23.7526C19.2058 19.8643 17.5216 16.9534 16.4041 15.0151C15.2608 13.0426 16.0783 11.0626 16.8841 10.3909C17.7799 11.9293 19.1191 14.2501 20.9074 17.3476H20.9066Z" fill="white"/>
  </g>
  <defs>
    <linearGradient id="paint0_linear_87_33" x1="15" y1="2.29447e-07" x2="15" y2="30" gradientUnits="userSpaceOnUse">
      <stop stop-color="#18BFFB"/>
      <stop offset="1" stop-color="#2072F3"/>
    </linearGradient>
    <clipPath id="clip0_87_33">
      <rect width="30" height="30" fill="white"/>
    </clipPath>
  </defs>
</svg>`,$1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#000" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M28.77 23.3c-.69 1.99-2.75 5.52-4.87 5.56-1.4.03-1.86-.84-3.46-.84-1.61 0-2.12.81-3.45.86-2.25.1-5.72-5.1-5.72-9.62 0-4.15 2.9-6.2 5.42-6.25 1.36-.02 2.64.92 3.47.92.83 0 2.38-1.13 4.02-.97.68.03 2.6.28 3.84 2.08-3.27 2.14-2.76 6.61.75 8.25ZM24.2 7.88c-2.47.1-4.49 2.69-4.2 4.84 2.28.17 4.47-2.39 4.2-4.84Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,x1e=mt`
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 11">
    <path
      fill="var(--apkt-tokens-theme-textPrimary)"
      d="M7.862 4.86c.159-1.064-.652-1.637-1.76-2.018l.36-1.443-.879-.218-.35 1.404c-.23-.058-.468-.112-.703-.166l.352-1.413-.877-.219-.36 1.442a29.02 29.02 0 0 1-.56-.132v-.005l-1.21-.302-.234.938s.652.15.638.158c.356.089.42.324.41.51l-.41 1.644a.715.715 0 0 1 .09.03l-.092-.024-.574 2.302c-.044.108-.154.27-.402.208.008.013-.639-.16-.639-.16L.227 8.403l1.142.285c.213.053.42.109.626.161l-.363 1.459.877.218.36-1.443c.239.065.472.125.7.182l-.36 1.436.879.219.363-1.456c1.497.283 2.623.17 3.097-1.185.381-1.09-.02-1.719-.807-2.129.574-.132 1.006-.51 1.12-1.289ZM5.856 7.673c-.272 1.09-2.107.5-2.702.353l.482-1.933c.595.149 2.503.443 2.22 1.58Zm.271-2.829c-.247.992-1.775.488-2.27.365l.436-1.753c.496.124 2.092.354 1.834 1.388Z"
    />
  </svg>
`,_1e=mt`<svg width="30" height="30" viewBox="0 0 30 30" fill="none">
<path d="M14.9978 7.80003H27.4668C26.2032 5.61107 24.3857 3.79333 22.1968 2.52955C20.008 1.26577 17.525 0.600485 14.9975 0.600586C12.47 0.600687 9.98712 1.26617 7.79838 2.53012C5.60964 3.79408 3.79221 5.61197 2.52881 7.80103L8.76281 18.599L8.76881 18.598C8.13412 17.5044 7.79906 16.2628 7.79743 14.9983C7.79579 13.7339 8.12764 12.4914 8.7595 11.3961C9.39136 10.3008 10.3009 9.39159 11.3963 8.76005C12.4918 8.12851 13.7344 7.79702 14.9988 7.79903L14.9978 7.80003Z" fill="url(#paint0_linear_87_32)"/>
<path d="M21.237 18.5981L15.003 29.3961C17.5305 29.3961 20.0134 28.7308 22.2022 27.467C24.391 26.2032 26.2086 24.3854 27.4721 22.1965C28.7356 20.0075 29.4006 17.5245 29.4003 14.997C29.3999 12.4695 28.7342 9.9867 27.47 7.7981H15.002L15 7.8041C16.2642 7.80168 17.5067 8.13257 18.6022 8.76342C19.6977 9.39428 20.6076 10.3028 21.2401 11.3974C21.8726 12.492 22.2053 13.734 22.2048 14.9982C22.2042 16.2623 21.8704 17.504 21.237 18.5981Z" fill="url(#paint1_linear_87_32)"/>
<path d="M8.76502 18.601L2.53102 7.80298C1.26664 9.99172 0.600848 12.4748 0.600586 15.0025C0.600324 17.5302 1.2656 20.0134 2.52953 22.2024C3.79345 24.3914 5.61145 26.209 7.80071 27.4725C9.98998 28.736 12.4733 29.4008 15.001 29.4L21.236 18.602L21.232 18.598C20.6022 19.6941 19.6944 20.6049 18.6003 21.2383C17.5062 21.8717 16.2644 22.2055 15.0002 22.2059C13.7359 22.2063 12.4939 21.8733 11.3994 21.2406C10.3049 20.6079 9.39657 19.6977 8.76602 18.602L8.76502 18.601Z" fill="url(#paint2_linear_87_32)"/>
<path d="M14.9998 22.2C16.9094 22.2 18.7407 21.4415 20.091 20.0912C21.4412 18.741 22.1998 16.9096 22.1998 15C22.1998 13.0905 21.4412 11.2591 20.091 9.90888C18.7407 8.55862 16.9094 7.80005 14.9998 7.80005C13.0902 7.80005 11.2589 8.55862 9.90864 9.90888C8.55837 11.2591 7.7998 13.0905 7.7998 15C7.7998 16.9096 8.55837 18.741 9.90864 20.0912C11.2589 21.4415 13.0902 22.2 14.9998 22.2Z" fill="white"/>
<path d="M14.9998 20.7C16.5115 20.7 17.9614 20.0995 19.0303 19.0306C20.0993 17.9616 20.6998 16.5118 20.6998 15C20.6998 13.4883 20.0993 12.0385 19.0303 10.9695C17.9614 9.90058 16.5115 9.30005 14.9998 9.30005C13.4881 9.30005 12.0383 9.90058 10.9693 10.9695C9.90034 12.0385 9.2998 13.4883 9.2998 15C9.2998 16.5118 9.90034 17.9616 10.9693 19.0306C12.0383 20.0995 13.4881 20.7 14.9998 20.7Z" fill="#1A73E8"/>
<defs>
  <linearGradient id="paint0_linear_87_32" x1="3.29381" y1="2.99503" x2="38.0998" y2="2.99503" gradientUnits="userSpaceOnUse">
    <stop stop-color="#D93025"/>
    <stop offset="1" stop-color="#EA4335"/>
  </linearGradient>
  <linearGradient id="paint1_linear_87_32" x1="17.953" y1="29.1431" x2="34.194" y2="-0.298904" gradientUnits="userSpaceOnUse">
    <stop stop-color="#FCC934"/>
    <stop offset="1" stop-color="#FBBC04"/>
  </linearGradient>
  <linearGradient id="paint2_linear_87_32" x1="22.873" y1="28.2" x2="6.63202" y2="-1.24102" gradientUnits="userSpaceOnUse">
    <stop stop-color="#1E8E3E"/>
    <stop offset="1" stop-color="#34A853"/>
  </linearGradient>
</defs>
</svg>`,S1e=mt` <svg fill="none" viewBox="0 0 13 4">
  <path fill="currentColor" d="M.5 0h12L8.9 3.13a3.76 3.76 0 0 1-4.8 0L.5 0Z" />
</svg>`,I1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5865F2" />
      <path
        fill="#fff"
        fill-rule="evenodd"
        d="M25.71 28.15C30.25 28 32 25.02 32 25.02c0-6.61-2.96-11.98-2.96-11.98-2.96-2.22-5.77-2.15-5.77-2.15l-.29.32c3.5 1.07 5.12 2.61 5.12 2.61a16.75 16.75 0 0 0-10.34-1.93l-.35.04a15.43 15.43 0 0 0-5.88 1.9s1.71-1.63 5.4-2.7l-.2-.24s-2.81-.07-5.77 2.15c0 0-2.96 5.37-2.96 11.98 0 0 1.73 2.98 6.27 3.13l1.37-1.7c-2.6-.79-3.6-2.43-3.6-2.43l.58.35.09.06.08.04.02.01.08.05a17.25 17.25 0 0 0 4.52 1.58 14.4 14.4 0 0 0 8.3-.86c.72-.27 1.52-.66 2.37-1.21 0 0-1.03 1.68-3.72 2.44.61.78 1.35 1.67 1.35 1.67Zm-9.55-9.6c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28.01-1.25-.93-2.28-2.1-2.28Zm7.5 0c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28 0-1.25-.93-2.28-2.1-2.28Z"
        clip-rule="evenodd"
      />
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
  </defs>
</svg>`,O1e=mt`<svg
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
  viewBox="0 0 9 12"
>
  <path
    fill="var(--apkt-tokens-theme-textPrimary)"
    d="M4.666.001v4.435l3.748 1.675L4.666.001Zm0 0L.917 6.111l3.749-1.675V.001Zm0 8.984V12l3.75-5.19-3.75 2.176Zm0 3.014V8.985L.917 6.81 4.666 12Zm0-3.712 3.748-2.176-3.748-1.675v3.851Z"
  />
  <path fill="var(--apkt-tokens-theme-textPrimary)" d="m.917 6.111 3.749 2.176v-3.85L.917 6.11Z" />
</svg>`,P1e=mt`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M4.25 7a.63.63 0 0 0-.63.63v3.97c0 .28-.2.51-.47.54l-.75.07a.93.93 0 0 1-.9-.47A7.51 7.51 0 0 1 5.54.92a7.5 7.5 0 0 1 9.54 4.62c.12.35.06.72-.16 1-.74.97-1.68 1.78-2.6 2.44V4.44a.64.64 0 0 0-.63-.64h-1.06c-.35 0-.63.3-.63.64v5.5c0 .23-.12.42-.32.5l-.52.23V6.05c0-.36-.3-.64-.64-.64H7.45c-.35 0-.64.3-.64.64v4.97c0 .25-.17.46-.4.52a5.8 5.8 0 0 0-.45.11v-4c0-.36-.3-.65-.64-.65H4.25ZM14.07 12.4A7.49 7.49 0 0 1 3.6 14.08c4.09-.58 9.14-2.5 11.87-6.6v.03a7.56 7.56 0 0 1-1.41 4.91Z"
  />
</svg>`,N1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1877F2" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M26 12.38h-2.89c-.92 0-1.61.38-1.61 1.34v1.66H26l-.36 4.5H21.5v12H17v-12h-3v-4.5h3V12.5c0-3.03 1.6-4.62 5.2-4.62H26v4.5Z"
        />
      </g>
    </g>
    <path
      fill="#1877F2"
      d="M40 20a20 20 0 1 0-23.13 19.76V25.78H11.8V20h5.07v-4.4c0-5.02 3-7.79 7.56-7.79 2.19 0 4.48.4 4.48.4v4.91h-2.53c-2.48 0-3.25 1.55-3.25 3.13V20h5.54l-.88 5.78h-4.66v13.98A20 20 0 0 0 40 20Z"
    />
    <path
      fill="#fff"
      d="m27.79 25.78.88-5.78h-5.55v-3.75c0-1.58.78-3.13 3.26-3.13h2.53V8.2s-2.3-.39-4.48-.39c-4.57 0-7.55 2.77-7.55 7.78V20H11.8v5.78h5.07v13.98a20.15 20.15 0 0 0 6.25 0V25.78h4.67Z"
    />
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,T1e=mt`<svg style="border-radius: 9999px; overflow: hidden;"  fill="none" viewBox="0 0 1000 1000">
  <rect width="1000" height="1000" rx="9999" ry="9999" fill="#855DCD"/>
  <path fill="#855DCD" d="M0 0h1000v1000H0V0Z" />
  <path
    fill="#fff"
    d="M320 248h354v504h-51.96V521.13h-.5c-5.76-63.8-59.31-113.81-124.54-113.81s-118.78 50-124.53 113.81h-.5V752H320V248Z"
  />
  <path
    fill="#fff"
    d="m225 320 21.16 71.46h17.9v289.09a16.29 16.29 0 0 0-16.28 16.24v19.49h-3.25a16.3 16.3 0 0 0-16.28 16.24V752h182.26v-19.48a16.22 16.22 0 0 0-16.28-16.24h-3.25v-19.5a16.22 16.22 0 0 0-16.28-16.23h-19.52V320H225Zm400.3 360.55a16.3 16.3 0 0 0-15.04 10.02 16.2 16.2 0 0 0-1.24 6.22v19.49h-3.25a16.29 16.29 0 0 0-16.27 16.24V752h182.24v-19.48a16.23 16.23 0 0 0-16.27-16.24h-3.25v-19.5a16.2 16.2 0 0 0-10.04-15 16.3 16.3 0 0 0-6.23-1.23v-289.1h17.9L775 320H644.82v360.55H625.3Z"
  />
</svg>`,k1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1B1F23" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M8 19.89a12 12 0 1 1 15.8 11.38c-.6.12-.8-.26-.8-.57v-3.3c0-1.12-.4-1.85-.82-2.22 2.67-.3 5.48-1.31 5.48-5.92 0-1.31-.47-2.38-1.24-3.22.13-.3.54-1.52-.12-3.18 0 0-1-.32-3.3 1.23a11.54 11.54 0 0 0-6 0c-2.3-1.55-3.3-1.23-3.3-1.23a4.32 4.32 0 0 0-.12 3.18 4.64 4.64 0 0 0-1.24 3.22c0 4.6 2.8 5.63 5.47 5.93-.34.3-.65.83-.76 1.6-.69.31-2.42.84-3.5-1 0 0-.63-1.15-1.83-1.23 0 0-1.18-.02-.09.73 0 0 .8.37 1.34 1.76 0 0 .7 2.14 4.03 1.41v2.24c0 .31-.2.68-.8.57A12 12 0 0 1 8 19.9Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,R1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <path
    fill="#4285F4"
    d="M32.74 20.3c0-.93-.08-1.81-.24-2.66H20.26v5.03h7a6 6 0 0 1-2.62 3.91v3.28h4.22c2.46-2.27 3.88-5.6 3.88-9.56Z"
  />
  <path
    fill="#34A853"
    d="M20.26 33a12.4 12.4 0 0 0 8.6-3.14l-4.22-3.28a7.74 7.74 0 0 1-4.38 1.26 7.76 7.76 0 0 1-7.28-5.36H8.65v3.36A12.99 12.99 0 0 0 20.26 33Z"
  />
  <path
    fill="#FBBC05"
    d="M12.98 22.47a7.79 7.79 0 0 1 0-4.94v-3.36H8.65a12.84 12.84 0 0 0 0 11.66l3.37-2.63.96-.73Z"
  />
  <path
    fill="#EA4335"
    d="M20.26 12.18a7.1 7.1 0 0 1 4.98 1.93l3.72-3.72A12.47 12.47 0 0 0 20.26 7c-5.08 0-9.47 2.92-11.6 7.17l4.32 3.36a7.76 7.76 0 0 1 7.28-5.35Z"
  />
</svg>`,D1e=mt` <svg width="27" height="30" viewBox="0 0 27 30" fill="none">
  <path d="M12.5395 14.3237L0.116699 27.5049V27.5188C0.251527 28.0177 0.49972 28.4788 0.841941 28.866C1.18416 29.2533 1.61117 29.5563 2.0897 29.7515C2.56823 29.9467 3.08536 30.0287 3.60081 29.9913C4.11625 29.9538 4.61609 29.7979 5.06139 29.5356L5.0975 29.512L19.0718 21.4519L12.5395 14.3237Z" fill="#EA4335"/>
  <path d="M25.103 12.0833L25.0919 12.0722L19.0611 8.57202L12.2607 14.6279L19.0847 21.4504L25.0919 17.9864C25.6229 17.6983 26.0665 17.2725 26.376 16.7537C26.6854 16.2349 26.8493 15.6422 26.8505 15.0381C26.8516 14.434 26.6899 13.8408 26.3824 13.3208C26.0749 12.8008 25.633 12.3734 25.103 12.0833Z" fill="#FBBC04"/>
  <path d="M0.116672 2.49553C0.047224 2.7761 0 3.05528 0 3.35946V26.6537C0 26.9565 0.0347234 27.237 0.116672 27.5162L12.959 14.6725L0.116672 2.49553Z" fill="#4285F4"/>
  <path d="M12.634 15.0001L19.0607 8.57198L5.0975 0.477133C4.65115 0.210463 4.14916 0.0506574 3.63079 0.0102139C3.11242 -0.0302296 2.59172 0.0497852 2.10941 0.244001C1.6271 0.438216 1.19625 0.741368 0.850556 1.12975C0.504864 1.51813 0.253698 1.98121 0.116699 2.48279L12.634 15.0001Z" fill="#34A853"/>
</svg>`,B1e=mt`<svg width="75" height="20" viewBox="0 0 75 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.6666 5.83334C11.6666 2.61168 14.2783 0 17.5 0H25.8334C29.055 0 31.6666 2.61168 31.6666 5.83334V14.1666C31.6666 17.3883 29.055 20 25.8334 20H17.5C14.2783 20 11.6666 17.3883 11.6666 14.1666V5.83334Z" fill="var(--apkt-tokens-theme-foregroundTertiary)"/>
<path d="M19.5068 13.7499L22.4309 5.83331H23.2895L20.3654 13.7499H19.5068Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M0 5.41666C0 2.42513 2.42513 0 5.41666 0C8.40821 0 10.8334 2.42513 10.8334 5.41666V14.5833C10.8334 17.5748 8.40821 20 5.41666 20C2.42513 20 0 17.5748 0 14.5833V5.41666Z" fill="var(--apkt-tokens-theme-foregroundTertiary)"/>
<path d="M4.89581 12.4997V11.458H5.93747V12.4997H4.89581Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M32.5 10C32.5 4.47715 36.6896 0 41.8578 0H65.6422C70.8104 0 75 4.47715 75 10C75 15.5229 70.8104 20 65.6422 20H41.8578C36.6896 20 32.5 15.5229 32.5 10Z" fill="var(--apkt-tokens-theme-foregroundTertiary)"/>
<path d="M61.7108 12.4475V7.82751H62.5266V8.52418C62.8199 8.01084 63.4157 7.70834 64.0757 7.70834C65.0749 7.70834 65.7715 8.34084 65.7715 9.56918V12.4475H64.9649V9.61503C64.9649 8.80831 64.5066 8.38668 63.8374 8.38668C63.1132 8.38668 62.5266 8.9642 62.5266 9.78001V12.4475H61.7108Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M56.5671 12.4475L55.7147 7.82748H56.4846L57.0896 11.6409L57.8871 9.12916H58.6479L59.4363 11.6134L60.0505 7.82748H60.8204L59.9679 12.4475H59.0513L58.2721 10.0458L57.4838 12.4475H56.5671Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M52.9636 12.5666C51.5611 12.5666 50.7361 11.5217 50.7361 10.1375C50.7361 8.76254 51.5611 7.70834 52.9636 7.70834C54.3661 7.70834 55.1911 8.76254 55.1911 10.1375C55.1911 11.5217 54.3661 12.5666 52.9636 12.5666ZM52.9636 11.8883C53.9719 11.8883 54.357 11.0266 54.357 10.1283C54.357 9.23914 53.9719 8.38668 52.9636 8.38668C51.9552 8.38668 51.5702 9.23914 51.5702 10.1283C51.5702 11.0266 51.9552 11.8883 52.9636 11.8883Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M47.8507 12.5666C46.494 12.5666 45.6415 11.5308 45.6415 10.1375C45.6415 8.75337 46.494 7.70834 47.8507 7.70834C48.9965 7.70834 50.0048 8.35917 49.8948 10.3483H46.4756C46.5398 11.2009 46.934 11.8975 47.8507 11.8975C48.4648 11.8975 48.8681 11.5217 49.0057 11.0908H49.8123C49.684 11.8609 48.9598 12.5666 47.8507 12.5666ZM46.494 9.73416H49.1065C49.0423 8.80831 48.6114 8.37751 47.8507 8.37751C47.0165 8.37751 46.604 8.98254 46.494 9.73416Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M41.7284 12.4475V7.82748H42.5625V8.60665C42.8559 8.09332 43.3601 7.82748 43.8825 7.82748H44.9917V8.60665H43.8184C43.0851 8.60665 42.5625 9.08331 42.5625 10.0092V12.4475H41.7284Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
</svg>

`,M1e=mt`
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 8">
    <path
      fill="var(--apkt-tokens-theme-textPrimary)"
      d="m9.524 6.307-1.51 1.584A.35.35 0 0 1 7.76 8H.604a.178.178 0 0 1-.161-.103.168.168 0 0 1 .033-.186l1.51-1.583a.35.35 0 0 1 .256-.11h7.154c.034 0 .068.01.096.029a.168.168 0 0 1 .032.26Zm-1.51-3.189a.35.35 0 0 0-.255-.109H.604a.178.178 0 0 0-.161.103.168.168 0 0 0 .033.186l1.51 1.583a.35.35 0 0 0 .256.11h7.154a.178.178 0 0 0 .16-.104.168.168 0 0 0-.032-.185l-1.51-1.584ZM.605 1.981H7.76a.357.357 0 0 0 .256-.11L9.525.289a.17.17 0 0 0 .032-.185.173.173 0 0 0-.16-.103H2.241a.357.357 0 0 0-.256.109L.476 1.692a.17.17 0 0 0-.033.185.178.178 0 0 0 .16.103Z"
    />
  </svg>
`,U1e=mt`<svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <g clip-path="url(#a)">
    <path fill="url(#b)" d="M0 0h32v32H0z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.034 15.252c4.975-2.167 8.293-3.596 9.953-4.287 4.74-1.971 5.725-2.314 6.366-2.325.142-.002.457.033.662.198.172.14.22.33.243.463.022.132.05.435.028.671-.257 2.7-1.368 9.248-1.933 12.27-.24 1.28-.71 1.708-1.167 1.75-.99.091-1.743-.655-2.703-1.284-1.502-.985-2.351-1.598-3.81-2.558-1.684-1.11-.592-1.721.368-2.718.252-.261 4.619-4.233 4.703-4.594.01-.045.02-.213-.08-.301-.1-.09-.246-.059-.353-.035-.15.034-2.55 1.62-7.198 4.758-.682.468-1.298.696-1.851.684-.61-.013-1.782-.344-2.653-.628-1.069-.347-1.918-.53-1.845-1.12.039-.308.462-.623 1.27-.944Z" fill="#fff"/>
  </g>
  <path d="M.5 16C.5 7.44 7.44.5 16 .5 24.56.5 31.5 7.44 31.5 16c0 8.56-6.94 15.5-15.5 15.5C7.44 31.5.5 24.56.5 16Z" stroke="#141414" stroke-opacity=".05"/>
  <defs>
    <linearGradient id="b" x1="1600" y1="0" x2="1600" y2="3176.27" gradientUnits="userSpaceOnUse">
      <stop stop-color="#2AABEE"/>
      <stop offset="1" stop-color="#229ED9"/>
    </linearGradient>
    <clipPath id="a">
      <path d="M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z" fill="#fff"/>
    </clipPath>
  </defs>
</svg>`,L1e=mt`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5A3E85" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M18.22 25.7 20 23.91h3.34l2.1-2.1v-6.68H15.4v8.78h2.82v1.77Zm3.87-8.16h1.25v3.66H22.1v-3.66Zm-3.34 0H20v3.66h-1.25v-3.66ZM20 7.9a12 12 0 1 0 0 24 12 12 0 0 0 0-24Zm6.69 14.56-3.66 3.66h-2.72l-1.77 1.78h-1.88V26.1H13.3v-9.82l.94-2.4H26.7v8.56Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,F1e=mt`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="m14.36 4.74.01.42c0 4.34-3.3 9.34-9.34 9.34A9.3 9.3 0 0 1 0 13.03a6.6 6.6 0 0 0 4.86-1.36 3.29 3.29 0 0 1-3.07-2.28c.5.1 1 .07 1.48-.06A3.28 3.28 0 0 1 .64 6.11v-.04c.46.26.97.4 1.49.41A3.29 3.29 0 0 1 1.11 2.1a9.32 9.32 0 0 0 6.77 3.43 3.28 3.28 0 0 1 5.6-3 6.59 6.59 0 0 0 2.08-.8 3.3 3.3 0 0 1-1.45 1.82A6.53 6.53 0 0 0 16 3.04c-.44.66-1 1.23-1.64 1.7Z"
  />
</svg>`,H1e=mt`
<svg xmlns="http://www.w3.org/2000/svg" width="89" height="89" viewBox="0 0 89 89" fill="none">
<path d="M60.0468 39.2502L65.9116 33.3854C52.6562 20.13 36.1858 20.13 22.9304 33.3854L28.7952 39.2502C38.8764 29.169 49.9725 29.169 60.0536 39.2502H60.0468Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
<path d="M58.0927 52.9146L44.415 39.2369L30.7373 52.9146L17.0596 39.2369L11.2017 45.0949L30.7373 64.6374L44.415 50.9597L58.0927 64.6374L77.6284 45.0949L71.7704 39.2369L58.0927 52.9146Z" fill="var(--apkt-tokens-theme-textPrimary)"/>
</svg>`,j1e=mt`
<svg xmlns="http://www.w3.org/2000/svg" width="89" height="89" viewBox="0 0 89 89" fill="none">
<path d="M60.0468 39.2502L65.9116 33.3854C52.6562 20.13 36.1858 20.13 22.9304 33.3854L28.7952 39.2502C38.8764 29.169 49.9725 29.169 60.0536 39.2502H60.0468Z" fill="var(--apkt-tokens-theme-textInvert)"/>
<path d="M58.0927 52.9146L44.415 39.2369L30.7373 52.9146L17.0596 39.2369L11.2017 45.0949L30.7373 64.6374L44.415 50.9597L58.0927 64.6374L77.6284 45.0949L71.7704 39.2369L58.0927 52.9146Z" fill="var(--apkt-tokens-theme-textInvert)"/>
</svg>`,V1e=mt`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_22274_4692)">
<path d="M0 6.64C0 4.17295 0 2.93942 0.525474 2.01817C0.880399 1.39592 1.39592 0.880399 2.01817 0.525474C2.93942 0 4.17295 0 6.64 0H9.36C11.8271 0 13.0606 0 13.9818 0.525474C14.6041 0.880399 15.1196 1.39592 15.4745 2.01817C16 2.93942 16 4.17295 16 6.64V9.36C16 11.8271 16 13.0606 15.4745 13.9818C15.1196 14.6041 14.6041 15.1196 13.9818 15.4745C13.0606 16 11.8271 16 9.36 16H6.64C4.17295 16 2.93942 16 2.01817 15.4745C1.39592 15.1196 0.880399 14.6041 0.525474 13.9818C0 13.0606 0 11.8271 0 9.36V6.64Z" fill="#C7B994"/>
<path d="M4.49038 5.76609C6.42869 3.86833 9.5713 3.86833 11.5096 5.76609L11.7429 5.99449C11.8398 6.08938 11.8398 6.24323 11.7429 6.33811L10.9449 7.11942C10.8964 7.16686 10.8179 7.16686 10.7694 7.11942L10.4484 6.80512C9.09617 5.48119 6.90381 5.48119 5.5516 6.80512L5.20782 7.14171C5.15936 7.18915 5.08079 7.18915 5.03234 7.14171L4.23434 6.3604C4.13742 6.26552 4.13742 6.11167 4.23434 6.01678L4.49038 5.76609ZM13.1599 7.38192L13.8702 8.07729C13.9671 8.17217 13.9671 8.32602 13.8702 8.4209L10.6677 11.5564C10.5708 11.6513 10.4137 11.6513 10.3168 11.5564L8.04388 9.33105C8.01965 9.30733 7.98037 9.30733 7.95614 9.33105L5.6833 11.5564C5.58638 11.6513 5.42925 11.6513 5.33234 11.5564L2.12982 8.42087C2.0329 8.32598 2.0329 8.17213 2.12982 8.07724L2.84004 7.38188C2.93695 7.28699 3.09408 7.28699 3.191 7.38188L5.46392 9.60726C5.48815 9.63098 5.52743 9.63098 5.55166 9.60726L7.82447 7.38188C7.92138 7.28699 8.07851 7.28699 8.17543 7.38187L10.4484 9.60726C10.4726 9.63098 10.5119 9.63098 10.5361 9.60726L12.809 7.38192C12.9059 7.28703 13.063 7.28703 13.1599 7.38192Z" fill="currentColor"/>
</g>
<defs>
<clipPath id="clip0_22274_4692">
<path d="M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,z1e=mt`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="11" r="11" transform="matrix(-1 0 0 1 23 1)" fill="#202020"/>
<circle cx="11" cy="11" r="11.5" transform="matrix(-1 0 0 1 23 1)" stroke="#C7B994" stroke-opacity="0.7"/>
<path d="M15.4523 11.0686L16.7472 9.78167C13.8205 6.87297 10.1838 6.87297 7.25708 9.78167L8.55201 11.0686C10.7779 8.85645 13.2279 8.85645 15.4538 11.0686H15.4523Z" fill="#C7B994"/>
<path d="M15.0199 14.067L12 11.0656L8.98 14.067L5.96004 11.0656L4.66663 12.3511L8.98 16.6393L12 13.638L15.0199 16.6393L19.3333 12.3511L18.0399 11.0656L15.0199 14.067Z" fill="#C7B994"/>
</svg>
`,xP=mt`<svg fill="none" viewBox="0 0 41 40">
  <g clip-path="url(#a)">
    <path fill="#000" d="M.8 0h40v40H.8z" />
    <path
      fill="#fff"
      d="m22.63 18.46 7.14-8.3h-1.69l-6.2 7.2-4.96-7.2H11.2l7.5 10.9-7.5 8.71h1.7l6.55-7.61 5.23 7.61h5.72l-7.77-11.31Zm-9.13-7.03h2.6l11.98 17.13h-2.6L13.5 11.43Z"
    />
  </g>
  <defs>
    <clipPath id="a"><path fill="#fff" d="M.8 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z" /></clipPath>
  </defs>
</svg>`;var q1e=un`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    aspect-ratio: 1 / 1;
    color: var(--local-color);
    width: var(--local-width);
  }

  svg {
    height: inherit;
    width: inherit;
    object-fit: contain;
    object-position: center;
  }
`,W1=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const W1e={add:"ph-plus",allWallets:"ph-dots-three",arrowBottom:"ph-arrow-down",arrowBottomCircle:"ph-arrow-circle-down",arrowClockWise:"ph-arrow-clockwise",arrowLeft:"ph-arrow-left",arrowRight:"ph-arrow-right",arrowTop:"ph-arrow-up",arrowTopRight:"ph-arrow-up-right",bank:"ph-bank",bin:"ph-trash",browser:"ph-browser",card:"ph-credit-card",checkmark:"ph-check",checkmarkBold:"ph-check",chevronBottom:"ph-caret-down",chevronLeft:"ph-caret-left",chevronRight:"ph-caret-right",chevronTop:"ph-caret-up",clock:"ph-clock",close:"ph-x",coinPlaceholder:"ph-circle-half",compass:"ph-compass",copy:"ph-copy",desktop:"ph-desktop",dollar:"ph-currency-dollar",download:"ph-vault",exclamationCircle:"ph-warning-circle",extension:"ph-puzzle-piece",externalLink:"ph-arrow-square-out",filters:"ph-funnel-simple",helpCircle:"ph-question",id:"ph-identification-card",image:"ph-image",info:"ph-info",lightbulb:"ph-lightbulb",mail:"ph-envelope",mobile:"ph-device-mobile",more:"ph-dots-three",networkPlaceholder:"ph-globe",nftPlaceholder:"ph-image",plus:"ph-plus",power:"ph-power",qrCode:"ph-qr-code",questionMark:"ph-question",refresh:"ph-arrow-clockwise",recycleHorizontal:"ph-arrows-clockwise",search:"ph-magnifying-glass",sealCheck:"ph-seal-check",send:"ph-paper-plane-right",signOut:"ph-sign-out",spinner:"ph-spinner",swapHorizontal:"ph-arrows-left-right",swapVertical:"ph-arrows-down-up",threeDots:"ph-dots-three",user:"ph-user",verify:"ph-seal-check",verifyFilled:"ph-seal-check",wallet:"ph-wallet",warning:"ph-warning",warningCircle:"ph-warning-circle",appStore:"",apple:"",bitcoin:"",chromeStore:"",cursor:"",discord:"",ethereum:"",etherscan:"",facebook:"",farcaster:"",github:"",google:"",playStore:"",reown:"",solana:"",telegram:"",twitch:"",twitterIcon:"",twitter:"",walletConnect:"",walletConnectBrown:"",walletConnectLightBrown:"",x:""},Z1e={"ph-arrow-circle-down":()=>Promise.resolve().then(function(){return Lge}),"ph-arrow-clockwise":()=>Promise.resolve().then(function(){return jge}),"ph-arrow-down":()=>Promise.resolve().then(function(){return qge}),"ph-arrow-left":()=>Promise.resolve().then(function(){return Kge}),"ph-arrow-right":()=>Promise.resolve().then(function(){return Xge}),"ph-arrow-square-out":()=>Promise.resolve().then(function(){return e2e}),"ph-arrows-down-up":()=>Promise.resolve().then(function(){return n2e}),"ph-arrows-left-right":()=>Promise.resolve().then(function(){return o2e}),"ph-arrow-up":()=>Promise.resolve().then(function(){return l2e}),"ph-arrow-up-right":()=>Promise.resolve().then(function(){return d2e}),"ph-arrows-clockwise":()=>Promise.resolve().then(function(){return g2e}),"ph-bank":()=>Promise.resolve().then(function(){return y2e}),"ph-browser":()=>Promise.resolve().then(function(){return E2e}),"ph-caret-down":()=>Promise.resolve().then(function(){return $2e}),"ph-caret-left":()=>Promise.resolve().then(function(){return S2e}),"ph-caret-right":()=>Promise.resolve().then(function(){return P2e}),"ph-caret-up":()=>Promise.resolve().then(function(){return k2e}),"ph-check":()=>Promise.resolve().then(function(){return B2e}),"ph-circle-half":()=>Promise.resolve().then(function(){return L2e}),"ph-clock":()=>Promise.resolve().then(function(){return j2e}),"ph-compass":()=>Promise.resolve().then(function(){return q2e}),"ph-copy":()=>Promise.resolve().then(function(){return K2e}),"ph-credit-card":()=>Promise.resolve().then(function(){return X2e}),"ph-currency-dollar":()=>Promise.resolve().then(function(){return eme}),"ph-desktop":()=>Promise.resolve().then(function(){return nme}),"ph-device-mobile":()=>Promise.resolve().then(function(){return ome}),"ph-dots-three":()=>Promise.resolve().then(function(){return lme}),"ph-vault":()=>Promise.resolve().then(function(){return dme}),"ph-envelope":()=>Promise.resolve().then(function(){return gme}),"ph-funnel-simple":()=>Promise.resolve().then(function(){return yme}),"ph-globe":()=>Promise.resolve().then(function(){return Eme}),"ph-identification-card":()=>Promise.resolve().then(function(){return $me}),"ph-image":()=>Promise.resolve().then(function(){return Sme}),"ph-info":()=>Promise.resolve().then(function(){return Pme}),"ph-lightbulb":()=>Promise.resolve().then(function(){return kme}),"ph-magnifying-glass":()=>Promise.resolve().then(function(){return Bme}),"ph-paper-plane-right":()=>Promise.resolve().then(function(){return Lme}),"ph-plus":()=>Promise.resolve().then(function(){return jme}),"ph-power":()=>Promise.resolve().then(function(){return qme}),"ph-puzzle-piece":()=>Promise.resolve().then(function(){return Kme}),"ph-qr-code":()=>Promise.resolve().then(function(){return Xme}),"ph-question":()=>Promise.resolve().then(function(){return ewe}),"ph-question-circle":()=>Promise.resolve().then(function(){return nwe}),"ph-seal-check":()=>Promise.resolve().then(function(){return owe}),"ph-sign-out":()=>Promise.resolve().then(function(){return lwe}),"ph-spinner":()=>Promise.resolve().then(function(){return dwe}),"ph-trash":()=>Promise.resolve().then(function(){return gwe}),"ph-user":()=>Promise.resolve().then(function(){return ywe}),"ph-wallet":()=>Promise.resolve().then(function(){return Ewe}),"ph-warning":()=>Promise.resolve().then(function(){return $we}),"ph-warning-circle":()=>Promise.resolve().then(function(){return Swe}),"ph-x":()=>Promise.resolve().then(function(){return Pwe})},K1e={appStore:A1e,apple:$1e,bitcoin:x1e,chromeStore:_1e,cursor:S1e,discord:I1e,ethereum:O1e,etherscan:P1e,facebook:N1e,farcaster:T1e,github:k1e,google:R1e,playStore:D1e,reown:B1e,solana:M1e,telegram:U1e,twitch:L1e,twitter:xP,twitterIcon:F1e,walletConnect:H1e,walletConnectInvert:j1e,walletConnectBrown:z1e,walletConnectLightBrown:V1e,x:xP},G1e={"accent-primary":Rt.tokens.core.iconAccentPrimary,"accent-certified":Rt.tokens.core.iconAccentCertified,default:Rt.tokens.theme.iconDefault,success:Rt.tokens.core.iconSuccess,error:Rt.tokens.core.iconError,warning:Rt.tokens.core.iconWarning,inverse:Rt.tokens.theme.iconInverse};let ql=class extends ye{constructor(){super(...arguments),this.size="md",this.name="copy",this.weight="bold",this.color="inherit"}render(){const e={xxs:"2",xs:"3",sm:"3",md:"4",mdl:"5",lg:"5",xl:"6",xxl:"7",inherit:"inherit"};this.style.cssText=`
      --local-width: ${this.size==="inherit"?"inherit":`var(--apkt-spacing-${e[this.size]})`};
      --local-color: ${this.color==="inherit"?"inherit":G1e[this.color]}
    `;const r=W1e[this.name];if(r&&r!==""){const n=Z1e[r];n&&n();const i=E1e(r);return $P`<${i} size=${{xxs:"0.5em",xs:"0.75em",sm:"0.75em",md:"1em",mdl:"1.25em",lg:"1.25em",xl:"1.5em",xxl:"1.75em"}[this.size]} weight="${this.weight}"></${i}>`}return K1e[this.name]||$P``}};ql.styles=[at,q1e],W1([z()],ql.prototype,"size",void 0),W1([z()],ql.prototype,"name",void 0),W1([z()],ql.prototype,"weight",void 0),W1([z()],ql.prototype,"color",void 0),ql=W1([we("wui-icon")],ql);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _P={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},SP=t=>(...e)=>({_$litDirective$:t,values:e});class IP{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Y1e=SP(class extends IP{constructor(t){if(super(t),t.type!==_P.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in e)e[n]&&!this.nt?.has(n)&&this.st.add(n);return this.render(e)}const r=t.element.classList;for(const n of this.st)n in e||(r.remove(n),this.st.delete(n));for(const n in e){const i=!!e[n];i===this.st.has(n)||this.nt?.has(n)||(i?(r.add(n),this.st.add(n)):(r.remove(n),this.st.delete(n)))}return Hl}});var X1e=Me`
  :host {
    display: inline-flex !important;
  }

  slot {
    width: 100%;
    display: inline-block;
    font-style: normal;
    overflow: inherit;
    text-overflow: inherit;
    text-align: var(--local-align);
    color: var(--local-color);
  }

  .wui-line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .wui-line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  /* -- Headings --------------------------------------------------- */
  .wui-font-h1-regular-mono {
    font-size: ${({textSize:t})=>t.h1};
    line-height: ${({typography:t})=>t["h1-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h1-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h1-regular {
    font-size: ${({textSize:t})=>t.h1};
    line-height: ${({typography:t})=>t["h1-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h1-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h1-medium {
    font-size: ${({textSize:t})=>t.h1};
    line-height: ${({typography:t})=>t["h1-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h1-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h2-regular-mono {
    font-size: ${({textSize:t})=>t.h2};
    line-height: ${({typography:t})=>t["h2-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h2-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h2-regular {
    font-size: ${({textSize:t})=>t.h2};
    line-height: ${({typography:t})=>t["h2-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h2-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h2-medium {
    font-size: ${({textSize:t})=>t.h2};
    line-height: ${({typography:t})=>t["h2-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h2-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h3-regular-mono {
    font-size: ${({textSize:t})=>t.h3};
    line-height: ${({typography:t})=>t["h3-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h3-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h3-regular {
    font-size: ${({textSize:t})=>t.h3};
    line-height: ${({typography:t})=>t["h3-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h3-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h3-medium {
    font-size: ${({textSize:t})=>t.h3};
    line-height: ${({typography:t})=>t["h3-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h3-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h4-regular-mono {
    font-size: ${({textSize:t})=>t.h4};
    line-height: ${({typography:t})=>t["h4-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h4-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h4-regular {
    font-size: ${({textSize:t})=>t.h4};
    line-height: ${({typography:t})=>t["h4-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h4-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h4-medium {
    font-size: ${({textSize:t})=>t.h4};
    line-height: ${({typography:t})=>t["h4-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h4-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h5-regular-mono {
    font-size: ${({textSize:t})=>t.h5};
    line-height: ${({typography:t})=>t["h5-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h5-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h5-regular {
    font-size: ${({textSize:t})=>t.h5};
    line-height: ${({typography:t})=>t["h5-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h5-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h5-medium {
    font-size: ${({textSize:t})=>t.h5};
    line-height: ${({typography:t})=>t["h5-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h5-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h6-regular-mono {
    font-size: ${({textSize:t})=>t.h6};
    line-height: ${({typography:t})=>t["h6-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h6-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-h6-regular {
    font-size: ${({textSize:t})=>t.h6};
    line-height: ${({typography:t})=>t["h6-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h6-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-h6-medium {
    font-size: ${({textSize:t})=>t.h6};
    line-height: ${({typography:t})=>t["h6-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["h6-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-lg-regular-mono {
    font-size: ${({textSize:t})=>t.large};
    line-height: ${({typography:t})=>t["lg-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["lg-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-lg-regular {
    font-size: ${({textSize:t})=>t.large};
    line-height: ${({typography:t})=>t["lg-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["lg-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-lg-medium {
    font-size: ${({textSize:t})=>t.large};
    line-height: ${({typography:t})=>t["lg-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["lg-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-md-regular-mono {
    font-size: ${({textSize:t})=>t.medium};
    line-height: ${({typography:t})=>t["md-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["md-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-md-regular {
    font-size: ${({textSize:t})=>t.medium};
    line-height: ${({typography:t})=>t["md-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["md-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-md-medium {
    font-size: ${({textSize:t})=>t.medium};
    line-height: ${({typography:t})=>t["md-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["md-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-sm-regular-mono {
    font-size: ${({textSize:t})=>t.small};
    line-height: ${({typography:t})=>t["sm-regular-mono"].lineHeight};
    letter-spacing: ${({typography:t})=>t["sm-regular-mono"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.mono};
  }

  .wui-font-sm-regular {
    font-size: ${({textSize:t})=>t.small};
    line-height: ${({typography:t})=>t["sm-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["sm-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }

  .wui-font-sm-medium {
    font-size: ${({textSize:t})=>t.small};
    line-height: ${({typography:t})=>t["sm-medium"].lineHeight};
    letter-spacing: ${({typography:t})=>t["sm-medium"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.medium};
    font-family: ${({fontFamily:t})=>t.regular};
    font-feature-settings:
      'liga' off,
      'clig' off;
  }
`,Z1=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const J1e={primary:Rt.tokens.theme.textPrimary,secondary:Rt.tokens.theme.textSecondary,tertiary:Rt.tokens.theme.textTertiary,invert:Rt.tokens.theme.textInvert,error:Rt.tokens.core.textError,warning:Rt.tokens.core.textWarning,"accent-primary":Rt.tokens.core.textAccentPrimary};let Wl=class extends ye{constructor(){super(...arguments),this.variant="md-regular",this.color="inherit",this.align="left",this.lineClamp=void 0}render(){const e={[`wui-font-${this.variant}`]:!0,[`wui-line-clamp-${this.lineClamp}`]:!!this.lineClamp};return this.style.cssText=`
      --local-align: ${this.align};
      --local-color: ${this.color==="inherit"?"inherit":J1e[this.color??"primary"]};
      `,F`<slot class=${Y1e(e)}></slot>`}};Wl.styles=[at,X1e],Z1([z()],Wl.prototype,"variant",void 0),Z1([z()],Wl.prototype,"color",void 0),Z1([z()],Wl.prototype,"align",void 0),Z1([z()],Wl.prototype,"lineClamp",void 0),Wl=Z1([we("wui-text")],Wl);var Q1e=Me`
  :host {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: ${({borderRadius:t})=>t[2]};
    padding: ${({spacing:t})=>t[1]} !important;
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    position: relative;
  }

  :host([data-padding='2']) {
    padding: ${({spacing:t})=>t[2]} !important;
  }

  :host:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  :host > wui-icon {
    z-index: 10;
  }

  /* -- Colors --------------------------------------------------- */
  :host([data-color='accent-primary']) {
    color: ${({tokens:t})=>t.core.iconAccentPrimary};
  }

  :host([data-color='accent-primary']):after {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  :host([data-color='default']),
  :host([data-color='secondary']) {
    color: ${({tokens:t})=>t.theme.iconDefault};
  }

  :host([data-color='default']):after {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  :host([data-color='secondary']):after {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  :host([data-color='success']) {
    color: ${({tokens:t})=>t.core.iconSuccess};
  }

  :host([data-color='success']):after {
    background-color: ${({tokens:t})=>t.core.backgroundSuccess};
  }

  :host([data-color='error']) {
    color: ${({tokens:t})=>t.core.iconError};
  }

  :host([data-color='error']):after {
    background-color: ${({tokens:t})=>t.core.backgroundError};
  }

  :host([data-color='warning']) {
    color: ${({tokens:t})=>t.core.iconWarning};
  }

  :host([data-color='warning']):after {
    background-color: ${({tokens:t})=>t.core.backgroundWarning};
  }

  :host([data-color='inverse']) {
    color: ${({tokens:t})=>t.theme.iconInverse};
  }

  :host([data-color='inverse']):after {
    background-color: transparent;
  }
`,K1=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Zl=class extends ye{constructor(){super(...arguments),this.icon="copy",this.size="md",this.padding="1",this.color="default"}render(){return this.dataset.padding=this.padding,this.dataset.color=this.color,F`
      <wui-icon size=${Ne(this.size)} name=${this.icon} color="inherit"></wui-icon>
    `}};Zl.styles=[at,hn,Q1e],K1([z()],Zl.prototype,"icon",void 0),K1([z()],Zl.prototype,"size",void 0),K1([z()],Zl.prototype,"padding",void 0),K1([z()],Zl.prototype,"color",void 0),Zl=K1([we("wui-icon-box")],Zl);var epe=Me`
  :host {
    display: block;
    width: var(--local-width);
    height: var(--local-height);
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    border-radius: inherit;
    user-select: none;
    user-drag: none;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
  }

  :host([data-boxed='true']) {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  :host([data-boxed='true']) img {
    width: 20px;
    height: 20px;
    border-radius: ${({borderRadius:t})=>t[16]};
  }

  :host([data-full='true']) img {
    width: 100%;
    height: 100%;
  }

  :host([data-boxed='true']) wui-icon {
    width: 20px;
    height: 20px;
  }

  :host([data-icon='error']) {
    background-color: ${({tokens:t})=>t.core.backgroundError};
  }

  :host([data-rounded='true']) {
    border-radius: ${({borderRadius:t})=>t[16]};
  }
`,ks=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ti=class extends ye{constructor(){super(...arguments),this.src="./path/to/image.jpg",this.alt="Image",this.size=void 0,this.boxed=!1,this.rounded=!1,this.fullSize=!1}render(){const e={inherit:"inherit",xxs:"2",xs:"3",sm:"4",md:"4",mdl:"5",lg:"5",xl:"6",xxl:"7","3xl":"8","4xl":"9","5xl":"10"};return this.style.cssText=`
      --local-width: ${this.size?`var(--apkt-spacing-${e[this.size]});`:"100%"};
      --local-height: ${this.size?`var(--apkt-spacing-${e[this.size]});`:"100%"};
      `,this.dataset.boxed=this.boxed?"true":"false",this.dataset.rounded=this.rounded?"true":"false",this.dataset.full=this.fullSize?"true":"false",this.dataset.icon=this.iconColor||"inherit",this.icon?F`<wui-icon
        color=${this.iconColor||"inherit"}
        name=${this.icon}
        size="lg"
      ></wui-icon> `:this.logo?F`<wui-icon size="lg" color="inherit" name=${this.logo}></wui-icon> `:F`<img src=${Ne(this.src)} alt=${this.alt} @error=${this.handleImageError} />`}handleImageError(){this.dispatchEvent(new CustomEvent("onLoadError",{bubbles:!0,composed:!0}))}};Ti.styles=[at,epe],ks([z()],Ti.prototype,"src",void 0),ks([z()],Ti.prototype,"logo",void 0),ks([z()],Ti.prototype,"icon",void 0),ks([z()],Ti.prototype,"iconColor",void 0),ks([z()],Ti.prototype,"alt",void 0),ks([z()],Ti.prototype,"size",void 0),ks([z({type:Boolean})],Ti.prototype,"boxed",void 0),ks([z({type:Boolean})],Ti.prototype,"rounded",void 0),ks([z({type:Boolean})],Ti.prototype,"fullSize",void 0),Ti=ks([we("wui-image")],Ti);var tpe=Me`
  :host {
    position: relative;
    background-color: ${({tokens:t})=>t.theme.foregroundTertiary};
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host([data-image='true']) {
    background-color: transparent;
  }

  :host > wui-flex {
    overflow: hidden;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host([data-size='sm']) {
    width: 32px;
    height: 32px;
  }

  :host([data-size='md']) {
    width: 40px;
    height: 40px;
  }

  :host([data-size='lg']) {
    width: 56px;
    height: 56px;
  }

  :host([name='Extension'])::after {
    border: 1px solid ${({colors:t})=>t.accent010};
  }

  :host([data-wallet-icon='allWallets'])::after {
    border: 1px solid ${({colors:t})=>t.accent010};
  }

  wui-icon[data-parent-size='inherit'] {
    width: 75%;
    height: 75%;
    align-items: center;
  }

  wui-icon[data-parent-size='sm'] {
    width: 32px;
    height: 32px;
  }

  wui-icon[data-parent-size='md'] {
    width: 40px;
    height: 40px;
  }

  :host > wui-icon-box {
    position: absolute;
    overflow: hidden;
    right: -1px;
    bottom: -2px;
    z-index: 1;
    border: 2px solid ${({tokens:t})=>t.theme.backgroundPrimary};
    padding: 1px;
  }
`,Kl=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let $a=class extends ye{constructor(){super(...arguments),this.size="md",this.name="",this.installed=!1,this.badgeSize="xs"}render(){let e="1";return this.size==="lg"?e="4":this.size==="md"?e="2":this.size==="sm"&&(e="1"),this.style.cssText=`
       --local-border-radius: var(--apkt-borderRadius-${e});
   `,this.dataset.size=this.size,this.imageSrc&&(this.dataset.image="true"),this.walletIcon&&(this.dataset.walletIcon=this.walletIcon),F`
      <wui-flex justifyContent="center" alignItems="center"> ${this.templateVisual()} </wui-flex>
    `}templateVisual(){return this.imageSrc?F`<wui-image src=${this.imageSrc} alt=${this.name}></wui-image>`:this.walletIcon?F`<wui-icon size="md" color="default" name=${this.walletIcon}></wui-icon>`:F`<wui-icon
      data-parent-size=${this.size}
      size="inherit"
      color="inherit"
      name="wallet"
    ></wui-icon>`}};$a.styles=[at,tpe],Kl([z()],$a.prototype,"size",void 0),Kl([z()],$a.prototype,"name",void 0),Kl([z()],$a.prototype,"imageSrc",void 0),Kl([z()],$a.prototype,"walletIcon",void 0),Kl([z({type:Boolean})],$a.prototype,"installed",void 0),Kl([z()],$a.prototype,"badgeSize",void 0),$a=Kl([we("wui-wallet-image")],$a);var rpe=Me`
  :host {
    position: relative;
    border-radius: ${({borderRadius:t})=>t[2]};
    width: 40px;
    height: 40px;
    overflow: hidden;
    background: ${({tokens:t})=>t.theme.foregroundPrimary};
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    column-gap: ${({spacing:t})=>t[1]};
    padding: ${({spacing:t})=>t[1]};
  }

  :host > wui-wallet-image {
    width: 14px;
    height: 14px;
    border-radius: 2px;
  }
`,OP=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const a3=4;let zm=class extends ye{constructor(){super(...arguments),this.walletImages=[]}render(){const e=this.walletImages.length<a3;return F`${this.walletImages.slice(0,a3).map(({src:r,walletName:n})=>F`
          <wui-wallet-image
            size="sm"
            imageSrc=${r}
            name=${Ne(n)}
          ></wui-wallet-image>
        `)}
    ${e?[...Array(a3-this.walletImages.length)].map(()=>F` <wui-wallet-image size="sm" name=""></wui-wallet-image>`):null} `}};zm.styles=[at,rpe],OP([z({type:Array})],zm.prototype,"walletImages",void 0),zm=OP([we("wui-all-wallets-image")],zm);var npe=Me`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: ${({spacing:t})=>t[1]};
    text-transform: uppercase;
  }

  :host([data-variant='accent']) {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
    color: ${({tokens:t})=>t.core.textAccentPrimary};
  }

  :host([data-variant='info']) {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  :host([data-variant='success']) {
    background-color: ${({tokens:t})=>t.core.backgroundSuccess};
    color: ${({tokens:t})=>t.core.textSuccess};
  }

  :host([data-variant='warning']) {
    background-color: ${({tokens:t})=>t.core.backgroundWarning};
    color: ${({tokens:t})=>t.core.textWarning};
  }

  :host([data-variant='error']) {
    background-color: ${({tokens:t})=>t.core.backgroundError};
    color: ${({tokens:t})=>t.core.textError};
  }

  :host([data-variant='certified']) {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  :host([data-size='md']) {
    height: 30px;
    padding: 0 ${({spacing:t})=>t[2]};
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  :host([data-size='sm']) {
    height: 20px;
    padding: 0 ${({spacing:t})=>t[1]};
    border-radius: ${({borderRadius:t})=>t[1]};
  }
`,qm=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Hh=class extends ye{constructor(){super(...arguments),this.variant="accent",this.size="md",this.icon=void 0}render(){this.dataset.variant=this.variant,this.dataset.size=this.size;const e=this.size==="md"?"md-medium":"sm-medium",r=this.size==="md"?"md":"sm";return F`
      ${this.icon?F`<wui-icon size=${r} name=${this.icon}></wui-icon>`:null}
      <wui-text data-variant=${this.variant} variant=${e} color="inherit">
        <slot></slot>
      </wui-text>
    `}};Hh.styles=[at,npe],qm([z()],Hh.prototype,"variant",void 0),qm([z()],Hh.prototype,"size",void 0),qm([z()],Hh.prototype,"icon",void 0),Hh=qm([we("wui-tag")],Hh);var ipe=Me`
  :host {
    width: 100%;
  }

  button {
    column-gap: ${({spacing:t})=>t[2]};
    padding: ${({spacing:t})=>t[3]};
    width: 100%;
    background-color: transparent;
    border-radius: ${({borderRadius:t})=>t[4]};
    color: ${({tokens:t})=>t.theme.textPrimary};
  }

  button > wui-wallet-image {
    background: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  button > wui-text:nth-child(2) {
    display: flex;
    flex: 1;
  }

  button:hover:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  button[data-all-wallets='true'] {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  button[data-all-wallets='true']:hover:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  button:focus-visible:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    box-shadow: 0 0 0 4px ${({tokens:t})=>t.core.foregroundAccent020};
  }

  button:disabled {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    opacity: 0.5;
    cursor: not-allowed;
  }

  button:disabled > wui-tag {
    background-color: ${({tokens:t})=>t.core.glass010};
    color: ${({tokens:t})=>t.theme.foregroundTertiary};
  }
`,ai=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let dn=class extends ye{constructor(){super(...arguments),this.walletImages=[],this.imageSrc="",this.name="",this.size="md",this.tabIdx=void 0,this.disabled=!1,this.showAllWallets=!1,this.loading=!1,this.loadingSpinnerColor="accent-100"}render(){return this.dataset.size=this.size,F`
      <button
        ?disabled=${this.disabled}
        data-all-wallets=${this.showAllWallets}
        tabindex=${Ne(this.tabIdx)}
      >
        ${this.templateAllWallets()} ${this.templateWalletImage()}
        <wui-text variant="lg-regular" color="inherit">${this.name}</wui-text>
        ${this.templateStatus()}
      </button>
    `}templateAllWallets(){return this.showAllWallets&&this.imageSrc?F` <wui-all-wallets-image .imageeSrc=${this.imageSrc}> </wui-all-wallets-image> `:this.showAllWallets&&this.walletIcon?F` <wui-wallet-image .walletIcon=${this.walletIcon} size="sm"> </wui-wallet-image> `:null}templateWalletImage(){return!this.showAllWallets&&this.imageSrc?F`<wui-wallet-image
        size=${Ne(this.size==="sm"?"sm":"md")}
        imageSrc=${this.imageSrc}
        name=${this.name}
      ></wui-wallet-image>`:!this.showAllWallets&&!this.imageSrc?F`<wui-wallet-image size="sm" name=${this.name}></wui-wallet-image>`:null}templateStatus(){return this.loading?F`<wui-loading-spinner size="lg" color="accent-primary"></wui-loading-spinner>`:this.tagLabel&&this.tagVariant?F`<wui-tag size="sm" variant=${this.tagVariant}>${this.tagLabel}</wui-tag>`:null}};dn.styles=[at,hn,ipe],ai([z({type:Array})],dn.prototype,"walletImages",void 0),ai([z()],dn.prototype,"imageSrc",void 0),ai([z()],dn.prototype,"name",void 0),ai([z()],dn.prototype,"size",void 0),ai([z()],dn.prototype,"tagLabel",void 0),ai([z()],dn.prototype,"tagVariant",void 0),ai([z()],dn.prototype,"walletIcon",void 0),ai([z()],dn.prototype,"tabIdx",void 0),ai([z({type:Boolean})],dn.prototype,"disabled",void 0),ai([z({type:Boolean})],dn.prototype,"showAllWallets",void 0),ai([z({type:Boolean})],dn.prototype,"loading",void 0),ai([z({type:String})],dn.prototype,"loadingSpinnerColor",void 0),dn=ai([we("wui-list-wallet")],dn);var jh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Gl=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.count=ce.state.count,this.filteredCount=ce.state.filteredWallets.length,this.isFetchingRecommendedWallets=ce.state.isFetchingRecommendedWallets,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e),ce.subscribeKey("count",e=>this.count=e),ce.subscribeKey("filteredWallets",e=>this.filteredCount=e.length),ce.subscribeKey("isFetchingRecommendedWallets",e=>this.isFetchingRecommendedWallets=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.find(l=>l.id==="walletConnect"),{allWallets:r}=Y.state;if(!e||r==="HIDE"||r==="ONLY_MOBILE"&&!ne.isMobile())return null;const n=ce.state.featured.length,i=this.count+n,s=i<10?i:Math.floor(i/10)*10,o=this.filteredCount>0?this.filteredCount:s;let a=`${o}`;this.filteredCount>0?a=`${this.filteredCount}`:o<i&&(a=`${o}+`);const c=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-list-wallet
        name="Search Wallet"
        walletIcon="search"
        showAllWallets
        @click=${this.onAllWallets.bind(this)}
        tagLabel=${a}
        tagVariant="info"
        data-testid="all-wallets"
        tabIdx=${Ne(this.tabIdx)}
        .loading=${this.isFetchingRecommendedWallets}
        ?disabled=${c}
        size="sm"
      ></wui-list-wallet>
    `}onAllWallets(){Te.sendEvent({type:"track",event:"CLICK_ALL_WALLETS"}),J.push("AllWallets")}};jh([z()],Gl.prototype,"tabIdx",void 0),jh([pe()],Gl.prototype,"connectors",void 0),jh([pe()],Gl.prototype,"count",void 0),jh([pe()],Gl.prototype,"filteredCount",void 0),jh([pe()],Gl.prototype,"isFetchingRecommendedWallets",void 0),Gl=jh([we("w3m-all-wallets-widget")],Gl);var Wm=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let G1=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.connections=X.state.connections,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e),X.subscribeKey("connections",e=>this.connections=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(r=>r.type==="ANNOUNCED");return e?.length?F`
      <wui-flex flexDirection="column" gap="2">
        ${e.filter(Ea.showConnector).map(r=>{const i=(this.connections.get(r.chain)??[]).some(s=>Zr.isLowerCaseMatch(s.connectorId,r.id));return F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getConnectorImage(r))}
              name=${r.name??"Unknown"}
              @click=${()=>this.onConnector(r)}
              tagVariant=${i?"info":"success"}
              tagLabel=${i?"connected":"installed"}
              size="sm"
              data-testid=${`wallet-selector-${r.id}`}
              .installed=${!0}
              tabIdx=${Ne(this.tabIdx)}
            >
            </wui-list-wallet>
          `})}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){e.id==="walletConnect"?ne.isMobile()?J.push("AllWallets"):J.push("ConnectingWalletConnect"):J.push("ConnectingExternal",{connector:e})}};Wm([z()],G1.prototype,"tabIdx",void 0),Wm([pe()],G1.prototype,"connectors",void 0),Wm([pe()],G1.prototype,"connections",void 0),G1=Wm([we("w3m-connect-announced-widget")],G1);var Zm=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Y1=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.loading=!1,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e)),ne.isTelegram()&&ne.isIos()&&(this.loading=!X.state.wcUri,this.unsubscribe.push(X.subscribeKey("wcUri",e=>this.loading=!e)))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{customWallets:e}=Y.state;if(!e?.length)return this.style.cssText="display: none",null;const r=this.filterOutDuplicateWallets(e),n=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`<wui-flex flexDirection="column" gap="2">
      ${r.map(i=>F`
          <wui-list-wallet
            imageSrc=${Ne(Jt.getWalletImage(i))}
            name=${i.name??"Unknown"}
            @click=${()=>this.onConnectWallet(i)}
            size="sm"
            data-testid=${`wallet-selector-${i.id}`}
            tabIdx=${Ne(this.tabIdx)}
            ?loading=${this.loading}
            ?disabled=${n}
          >
          </wui-list-wallet>
        `)}
    </wui-flex>`}filterOutDuplicateWallets(e){const r=oe.getRecentWallets(),n=this.connectors.map(a=>a.info?.rdns).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&ne.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return e.filter(a=>!s.includes(String(a?.rdns)))}onConnectWallet(e){this.loading||J.push("ConnectingWalletConnect",{wallet:e})}};Zm([z()],Y1.prototype,"tabIdx",void 0),Zm([pe()],Y1.prototype,"connectors",void 0),Zm([pe()],Y1.prototype,"loading",void 0),Y1=Zm([we("w3m-connect-custom-widget")],Y1);var c3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Km=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const n=this.connectors.filter(s=>s.type==="EXTERNAL").filter(Ea.showConnector).filter(s=>s.id!==G.CONNECTOR_ID.COINBASE_SDK);if(!n?.length)return this.style.cssText="display: none",null;const i=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-flex flexDirection="column" gap="2">
        ${n.map(s=>F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getConnectorImage(s))}
              .installed=${!0}
              name=${s.name??"Unknown"}
              data-testid=${`wallet-selector-external-${s.id}`}
              size="sm"
              @click=${()=>this.onConnector(s)}
              tabIdx=${Ne(this.tabIdx)}
              ?disabled=${i}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnector(e){J.push("ConnectingExternal",{connector:e})}};c3([z()],Km.prototype,"tabIdx",void 0),c3([pe()],Km.prototype,"connectors",void 0),Km=c3([we("w3m-connect-external-widget")],Km);var l3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Gm=class extends ye{constructor(){super(...arguments),this.tabIdx=void 0,this.wallets=[]}render(){if(!this.wallets.length)return this.style.cssText="display: none",null;const e=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-flex flexDirection="column" gap="2">
        ${this.wallets.map(r=>F`
            <wui-list-wallet
              data-testid=${`wallet-selector-featured-${r.id}`}
              imageSrc=${Ne(Jt.getWalletImage(r))}
              name=${r.name??"Unknown"}
              @click=${()=>this.onConnectWallet(r)}
              tabIdx=${Ne(this.tabIdx)}
              size="sm"
              ?disabled=${e}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnectWallet(e){te.selectWalletConnector(e)}};l3([z()],Gm.prototype,"tabIdx",void 0),l3([z()],Gm.prototype,"wallets",void 0),Gm=l3([we("w3m-connect-featured-widget")],Gm);var Ym=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let X1=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=[],this.connections=X.state.connections,this.unsubscribe.push(X.subscribeKey("connections",e=>this.connections=e))}render(){const e=this.connectors.filter(Ea.showConnector);return e.length===0?(this.style.cssText="display: none",null):F`
      <wui-flex flexDirection="column" gap="2">
        ${e.map(r=>{const i=(this.connections.get(r.chain)??[]).some(s=>Zr.isLowerCaseMatch(s.connectorId,r.id));return F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getConnectorImage(r))}
              .installed=${!0}
              name=${r.name??"Unknown"}
              tagVariant=${i?"info":"success"}
              tagLabel=${i?"connected":"installed"}
              data-testid=${`wallet-selector-${r.id}`}
              size="sm"
              @click=${()=>this.onConnector(r)}
              tabIdx=${Ne(this.tabIdx)}
            >
            </wui-list-wallet>
          `})}
      </wui-flex>
    `}onConnector(e){te.setActiveConnector(e),J.push("ConnectingExternal",{connector:e})}};Ym([z()],X1.prototype,"tabIdx",void 0),Ym([z()],X1.prototype,"connectors",void 0),Ym([pe()],X1.prototype,"connections",void 0),X1=Ym([we("w3m-connect-injected-widget")],X1);var u3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Xm=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(r=>r.type==="MULTI_CHAIN"&&r.name!=="WalletConnect");return e?.length?F`
      <wui-flex flexDirection="column" gap="2">
        ${e.map(r=>F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getConnectorImage(r))}
              .installed=${!0}
              name=${r.name??"Unknown"}
              tagVariant="info"
              tagLabel="multichain"
              data-testid=${`wallet-selector-${r.id}`}
              size="sm"
              @click=${()=>this.onConnector(r)}
              tabIdx=${Ne(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){te.setActiveConnector(e),J.push("ConnectingMultiChain")}};u3([z()],Xm.prototype,"tabIdx",void 0),u3([pe()],Xm.prototype,"connectors",void 0),Xm=u3([we("w3m-connect-multi-chain-widget")],Xm);var Jm=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let J1=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.loading=!1,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e)),ne.isTelegram()&&ne.isIos()&&(this.loading=!X.state.wcUri,this.unsubscribe.push(X.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const r=oe.getRecentWallets().filter(i=>!xc.isExcluded(i)).filter(i=>!this.hasWalletConnector(i)).filter(i=>this.isWalletCompatibleWithCurrentChain(i));if(!r.length)return this.style.cssText="display: none",null;const n=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-flex flexDirection="column" gap="2">
        ${r.map(i=>F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getWalletImage(i))}
              name=${i.name??"Unknown"}
              @click=${()=>this.onConnectWallet(i)}
              tagLabel="recent"
              tagVariant="info"
              size="sm"
              tabIdx=${Ne(this.tabIdx)}
              ?loading=${this.loading}
              ?disabled=${n}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnectWallet(e){this.loading||te.selectWalletConnector(e)}hasWalletConnector(e){return this.connectors.some(r=>r.id===e.id||r.name===e.name)}isWalletCompatibleWithCurrentChain(e){const r=k.state.activeChain;return r&&e.chains?e.chains.some(n=>{const i=n.split(":")[0];return r===i}):!0}};Jm([z()],J1.prototype,"tabIdx",void 0),Jm([pe()],J1.prototype,"connectors",void 0),Jm([pe()],J1.prototype,"loading",void 0),J1=Jm([we("w3m-connect-recent-widget")],J1);var Qm=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Q1=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.wallets=[],this.loading=!1,ne.isTelegram()&&ne.isIos()&&(this.loading=!X.state.wcUri,this.unsubscribe.push(X.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const{connectors:e}=te.state,{customWallets:r,featuredWalletIds:n}=Y.state,i=oe.getRecentWallets(),s=e.find(d=>d.id==="walletConnect"),a=e.filter(d=>d.type==="INJECTED"||d.type==="ANNOUNCED"||d.type==="MULTI_CHAIN").filter(d=>d.name!=="Browser Wallet");if(!s)return null;if(n||r||!this.wallets.length)return this.style.cssText="display: none",null;const c=a.length+i.length,l=Math.max(0,2-c),u=xc.filterOutDuplicateWallets(this.wallets).slice(0,l);if(!u.length)return this.style.cssText="display: none",null;const h=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-flex flexDirection="column" gap="2">
        ${u.map(d=>F`
            <wui-list-wallet
              imageSrc=${Ne(Jt.getWalletImage(d))}
              name=${d?.name??"Unknown"}
              @click=${()=>this.onConnectWallet(d)}
              size="sm"
              tabIdx=${Ne(this.tabIdx)}
              ?loading=${this.loading}
              ?disabled=${h}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnectWallet(e){if(this.loading)return;const r=te.getConnector({id:e.id,rdns:e.rdns});r?J.push("ConnectingExternal",{connector:r}):J.push("ConnectingWalletConnect",{wallet:e})}};Qm([z()],Q1.prototype,"tabIdx",void 0),Qm([z()],Q1.prototype,"wallets",void 0),Qm([pe()],Q1.prototype,"loading",void 0),Q1=Qm([we("w3m-connect-recommended-widget")],Q1);var ew=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let ep=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.connectorImages=An.state.connectorImages,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e),An.subscribeKey("connectorImages",e=>this.connectorImages=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(ne.isMobile())return this.style.cssText="display: none",null;const e=this.connectors.find(i=>i.id==="walletConnect");if(!e)return this.style.cssText="display: none",null;const r=e.imageUrl||this.connectorImages[e?.imageId??""],n=X.hasAnyConnection(G.CONNECTOR_ID.WALLET_CONNECT);return F`
      <wui-list-wallet
        imageSrc=${Ne(r)}
        name=${e.name??"Unknown"}
        @click=${()=>this.onConnector(e)}
        tagLabel="qr code"
        tagVariant="accent"
        tabIdx=${Ne(this.tabIdx)}
        data-testid="wallet-selector-walletconnect"
        size="sm"
        ?disabled=${n}
      >
      </wui-list-wallet>
    `}onConnector(e){te.setActiveConnector(e),J.push("ConnectingWalletConnect")}};ew([z()],ep.prototype,"tabIdx",void 0),ew([pe()],ep.prototype,"connectors",void 0),ew([pe()],ep.prototype,"connectorImages",void 0),ep=ew([we("w3m-connect-walletconnect-widget")],ep);var spe=Me`
  :host {
    margin-top: ${({spacing:t})=>t[1]};
  }
  wui-separator {
    margin: ${({spacing:t})=>t[3]} calc(${({spacing:t})=>t[3]} * -1)
      ${({spacing:t})=>t[2]} calc(${({spacing:t})=>t[3]} * -1);
    width: calc(100% + ${({spacing:t})=>t[3]} * 2);
  }
`,tp=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Yl=class extends ye{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=te.state.connectors,this.recommended=ce.state.recommended,this.featured=ce.state.featured,this.unsubscribe.push(te.subscribeKey("connectors",e=>this.connectors=e),ce.subscribeKey("recommended",e=>this.recommended=e),ce.subscribeKey("featured",e=>this.featured=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return F`
      <wui-flex flexDirection="column" gap="2"> ${this.connectorListTemplate()} </wui-flex>
    `}connectorListTemplate(){const{custom:e,recent:r,announced:n,injected:i,multiChain:s,recommended:o,featured:a,external:c}=Ea.getConnectorsByType(this.connectors,this.recommended,this.featured);return Ea.getConnectorTypeOrder({custom:e,recent:r,announced:n,injected:i,multiChain:s,recommended:o,featured:a,external:c}).map(u=>{switch(u){case"injected":return F`
            ${s.length?F`<w3m-connect-multi-chain-widget
                  tabIdx=${Ne(this.tabIdx)}
                ></w3m-connect-multi-chain-widget>`:null}
            ${n.length?F`<w3m-connect-announced-widget
                  tabIdx=${Ne(this.tabIdx)}
                ></w3m-connect-announced-widget>`:null}
            ${i.length?F`<w3m-connect-injected-widget
                  .connectors=${i}
                  tabIdx=${Ne(this.tabIdx)}
                ></w3m-connect-injected-widget>`:null}
          `;case"walletConnect":return F`<w3m-connect-walletconnect-widget
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-walletconnect-widget>`;case"recent":return F`<w3m-connect-recent-widget
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-recent-widget>`;case"featured":return F`<w3m-connect-featured-widget
            .wallets=${a}
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-featured-widget>`;case"custom":return F`<w3m-connect-custom-widget
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-custom-widget>`;case"external":return F`<w3m-connect-external-widget
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-external-widget>`;case"recommended":return F`<w3m-connect-recommended-widget
            .wallets=${o}
            tabIdx=${Ne(this.tabIdx)}
          ></w3m-connect-recommended-widget>`;default:return console.warn(`Unknown connector type: ${u}`),null}})}};Yl.styles=spe,tp([z()],Yl.prototype,"tabIdx",void 0),tp([pe()],Yl.prototype,"connectors",void 0),tp([pe()],Yl.prototype,"recommended",void 0),tp([pe()],Yl.prototype,"featured",void 0),Yl=tp([we("w3m-connector-list")],Yl);var ope=Me`
  :host {
    flex: 1;
    height: 100%;
  }

  button {
    width: 100%;
    height: 100%;
    display: inline-flex;
    align-items: center;
    padding: ${({spacing:t})=>t[1]} ${({spacing:t})=>t[2]};
    column-gap: ${({spacing:t})=>t[1]};
    color: ${({tokens:t})=>t.theme.textSecondary};
    border-radius: ${({borderRadius:t})=>t[20]};
    background-color: transparent;
    transition: background-color ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color;
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  button[data-active='true'] {
    color: ${({tokens:t})=>t.theme.textPrimary};
    background-color: ${({tokens:t})=>t.theme.foregroundTertiary};
  }

  button:hover:enabled:not([data-active='true']),
  button:active:enabled:not([data-active='true']) {
    wui-text,
    wui-icon {
      color: ${({tokens:t})=>t.theme.textPrimary};
    }
  }
`,rp=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const ape={lg:"lg-regular",md:"md-regular",sm:"sm-regular"},cpe={lg:"md",md:"sm",sm:"sm"};let Xl=class extends ye{constructor(){super(...arguments),this.icon="mobile",this.size="md",this.label="",this.active=!1}render(){return F`
      <button data-active=${this.active}>
        ${this.icon?F`<wui-icon size=${cpe[this.size]} name=${this.icon}></wui-icon>`:""}
        <wui-text variant=${ape[this.size]}> ${this.label} </wui-text>
      </button>
    `}};Xl.styles=[at,hn,ope],rp([z()],Xl.prototype,"icon",void 0),rp([z()],Xl.prototype,"size",void 0),rp([z()],Xl.prototype,"label",void 0),rp([z({type:Boolean})],Xl.prototype,"active",void 0),Xl=rp([we("wui-tab-item")],Xl);var lpe=Me`
  :host {
    display: inline-flex;
    align-items: center;
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    border-radius: ${({borderRadius:t})=>t[32]};
    padding: ${({spacing:t})=>t["01"]};
    box-sizing: border-box;
  }

  :host([data-size='sm']) {
    height: 26px;
  }

  :host([data-size='md']) {
    height: 36px;
  }
`,np=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Jl=class extends ye{constructor(){super(...arguments),this.tabs=[],this.onTabChange=()=>null,this.size="md",this.activeTab=0}render(){return this.dataset.size=this.size,this.tabs.map((e,r)=>{const n=r===this.activeTab;return F`
        <wui-tab-item
          @click=${()=>this.onTabClick(r)}
          icon=${e.icon}
          size=${this.size}
          label=${e.label}
          ?active=${n}
          data-active=${n}
          data-testid="tab-${e.label?.toLowerCase()}"
        ></wui-tab-item>
      `})}onTabClick(e){this.activeTab=e,this.onTabChange(e)}};Jl.styles=[at,hn,lpe],np([z({type:Array})],Jl.prototype,"tabs",void 0),np([z()],Jl.prototype,"onTabChange",void 0),np([z()],Jl.prototype,"size",void 0),np([pe()],Jl.prototype,"activeTab",void 0),Jl=np([we("wui-tabs")],Jl);var h3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let tw=class extends ye{constructor(){super(...arguments),this.platformTabs=[],this.unsubscribe=[],this.platforms=[],this.onSelectPlatfrom=void 0}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.generateTabs();return F`
      <wui-flex justifyContent="center" .padding=${["0","0","4","0"]}>
        <wui-tabs .tabs=${e} .onTabChange=${this.onTabChange.bind(this)}></wui-tabs>
      </wui-flex>
    `}generateTabs(){const e=this.platforms.map(r=>r==="browser"?{label:"Browser",icon:"extension",platform:"browser"}:r==="mobile"?{label:"Mobile",icon:"mobile",platform:"mobile"}:r==="qrcode"?{label:"Mobile",icon:"mobile",platform:"qrcode"}:r==="web"?{label:"Webapp",icon:"browser",platform:"web"}:r==="desktop"?{label:"Desktop",icon:"desktop",platform:"desktop"}:{label:"Browser",icon:"extension",platform:"unsupported"});return this.platformTabs=e.map(({platform:r})=>r),e}onTabChange(e){const r=this.platformTabs[e];r&&this.onSelectPlatfrom?.(r)}};h3([z({type:Array})],tw.prototype,"platforms",void 0),h3([z()],tw.prototype,"onSelectPlatfrom",void 0),tw=h3([we("w3m-connecting-header")],tw);var upe=un`
  :host {
    display: flex;
  }

  :host([data-size='sm']) > svg {
    width: 12px;
    height: 12px;
  }

  :host([data-size='md']) > svg {
    width: 16px;
    height: 16px;
  }

  :host([data-size='lg']) > svg {
    width: 24px;
    height: 24px;
  }

  :host([data-size='xl']) > svg {
    width: 32px;
    height: 32px;
  }

  svg {
    animation: rotate 1.4s linear infinite;
    color: var(--local-color);
  }

  :host([data-size='md']) > svg > circle {
    stroke-width: 6px;
  }

  :host([data-size='sm']) > svg > circle {
    stroke-width: 8px;
  }

  @keyframes rotate {
    100% {
      transform: rotate(360deg);
    }
  }
`,d3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let ip=class extends ye{constructor(){super(...arguments),this.color="primary",this.size="lg"}render(){const e={primary:Rt.tokens.theme.textPrimary,secondary:Rt.tokens.theme.textSecondary,tertiary:Rt.tokens.theme.textTertiary,invert:Rt.tokens.theme.textInvert,error:Rt.tokens.core.textError,warning:Rt.tokens.core.textWarning,"accent-primary":Rt.tokens.core.textAccentPrimary};return this.style.cssText=`
      --local-color: ${this.color==="inherit"?"inherit":e[this.color]};
      `,this.dataset.size=this.size,F`<svg viewBox="0 0 16 17" fill="none">
      <path
        d="M8.75 2.65625V4.65625C8.75 4.85516 8.67098 5.04593 8.53033 5.18658C8.38968 5.32723 8.19891 5.40625 8 5.40625C7.80109 5.40625 7.61032 5.32723 7.46967 5.18658C7.32902 5.04593 7.25 4.85516 7.25 4.65625V2.65625C7.25 2.45734 7.32902 2.26657 7.46967 2.12592C7.61032 1.98527 7.80109 1.90625 8 1.90625C8.19891 1.90625 8.38968 1.98527 8.53033 2.12592C8.67098 2.26657 8.75 2.45734 8.75 2.65625ZM14 7.90625H12C11.8011 7.90625 11.6103 7.98527 11.4697 8.12592C11.329 8.26657 11.25 8.45734 11.25 8.65625C11.25 8.85516 11.329 9.04593 11.4697 9.18658C11.6103 9.32723 11.8011 9.40625 12 9.40625H14C14.1989 9.40625 14.3897 9.32723 14.5303 9.18658C14.671 9.04593 14.75 8.85516 14.75 8.65625C14.75 8.45734 14.671 8.26657 14.5303 8.12592C14.3897 7.98527 14.1989 7.90625 14 7.90625ZM11.3588 10.9544C11.289 10.8846 11.2062 10.8293 11.115 10.7915C11.0239 10.7538 10.9262 10.7343 10.8275 10.7343C10.7288 10.7343 10.6311 10.7538 10.54 10.7915C10.4488 10.8293 10.366 10.8846 10.2963 10.9544C10.2265 11.0241 10.1711 11.107 10.1334 11.1981C10.0956 11.2893 10.0762 11.387 10.0762 11.4856C10.0762 11.5843 10.0956 11.682 10.1334 11.7731C10.1711 11.8643 10.2265 11.9471 10.2963 12.0169L11.7106 13.4312C11.8515 13.5721 12.0426 13.6513 12.2419 13.6513C12.4411 13.6513 12.6322 13.5721 12.7731 13.4312C12.914 13.2904 12.9932 13.0993 12.9932 12.9C12.9932 12.7007 12.914 12.5096 12.7731 12.3687L11.3588 10.9544ZM8 11.9062C7.80109 11.9062 7.61032 11.9853 7.46967 12.1259C7.32902 12.2666 7.25 12.4573 7.25 12.6562V14.6562C7.25 14.8552 7.32902 15.0459 7.46967 15.1866C7.61032 15.3272 7.80109 15.4062 8 15.4062C8.19891 15.4062 8.38968 15.3272 8.53033 15.1866C8.67098 15.0459 8.75 14.8552 8.75 14.6562V12.6562C8.75 12.4573 8.67098 12.2666 8.53033 12.1259C8.38968 11.9853 8.19891 11.9062 8 11.9062ZM4.64125 10.9544L3.22688 12.3687C3.08598 12.5096 3.00682 12.7007 3.00682 12.9C3.00682 13.0993 3.08598 13.2904 3.22688 13.4312C3.36777 13.5721 3.55887 13.6513 3.75813 13.6513C3.95738 13.6513 4.14848 13.5721 4.28937 13.4312L5.70375 12.0169C5.84465 11.876 5.9238 11.6849 5.9238 11.4856C5.9238 11.2864 5.84465 11.0953 5.70375 10.9544C5.56285 10.8135 5.37176 10.7343 5.1725 10.7343C4.97324 10.7343 4.78215 10.8135 4.64125 10.9544ZM4.75 8.65625C4.75 8.45734 4.67098 8.26657 4.53033 8.12592C4.38968 7.98527 4.19891 7.90625 4 7.90625H2C1.80109 7.90625 1.61032 7.98527 1.46967 8.12592C1.32902 8.26657 1.25 8.45734 1.25 8.65625C1.25 8.85516 1.32902 9.04593 1.46967 9.18658C1.61032 9.32723 1.80109 9.40625 2 9.40625H4C4.19891 9.40625 4.38968 9.32723 4.53033 9.18658C4.67098 9.04593 4.75 8.85516 4.75 8.65625ZM4.2875 3.88313C4.1466 3.74223 3.95551 3.66307 3.75625 3.66307C3.55699 3.66307 3.3659 3.74223 3.225 3.88313C3.0841 4.02402 3.00495 4.21512 3.00495 4.41438C3.00495 4.61363 3.0841 4.80473 3.225 4.94562L4.64125 6.35813C4.78215 6.49902 4.97324 6.57818 5.1725 6.57818C5.37176 6.57818 5.56285 6.49902 5.70375 6.35813C5.84465 6.21723 5.9238 6.02613 5.9238 5.82688C5.9238 5.62762 5.84465 5.43652 5.70375 5.29563L4.2875 3.88313Z"
        fill="currentColor"
      />
    </svg>`}};ip.styles=[at,upe],d3([z()],ip.prototype,"color",void 0),d3([z()],ip.prototype,"size",void 0),ip=d3([we("wui-loading-spinner")],ip);var hpe=Me`
  :host {
    width: var(--local-width);
  }

  button {
    width: var(--local-width);
    white-space: nowrap;
    column-gap: ${({spacing:t})=>t[2]};
    transition:
      scale ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-1"]},
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      border-radius ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]};
    will-change: scale, background-color, border-radius;
    cursor: pointer;
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='sm'] {
    border-radius: ${({borderRadius:t})=>t[2]};
    padding: 0 ${({spacing:t})=>t[2]};
    height: 28px;
  }

  button[data-size='md'] {
    border-radius: ${({borderRadius:t})=>t[3]};
    padding: 0 ${({spacing:t})=>t[4]};
    height: 38px;
  }

  button[data-size='lg'] {
    border-radius: ${({borderRadius:t})=>t[4]};
    padding: 0 ${({spacing:t})=>t[5]};
    height: 48px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='accent-primary'] {
    background-color: ${({tokens:t})=>t.core.backgroundAccentPrimary};
    color: ${({tokens:t})=>t.theme.textInvert};
  }

  button[data-variant='accent-secondary'] {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
    color: ${({tokens:t})=>t.core.textAccentPrimary};
  }

  button[data-variant='neutral-primary'] {
    background-color: ${({tokens:t})=>t.theme.backgroundInvert};
    color: ${({tokens:t})=>t.theme.textInvert};
  }

  button[data-variant='neutral-secondary'] {
    background-color: transparent;
    border: 1px solid ${({tokens:t})=>t.theme.borderSecondary};
    color: ${({tokens:t})=>t.theme.textPrimary};
  }

  button[data-variant='neutral-tertiary'] {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    color: ${({tokens:t})=>t.theme.textPrimary};
  }

  button[data-variant='error-primary'] {
    background-color: ${({tokens:t})=>t.core.textError};
    color: ${({tokens:t})=>t.theme.textInvert};
  }

  button[data-variant='error-secondary'] {
    background-color: ${({tokens:t})=>t.core.backgroundError};
    color: ${({tokens:t})=>t.core.textError};
  }

  button[data-variant='shade'] {
    background: var(--wui-color-gray-glass-002);
    color: var(--wui-color-fg-200);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  /* -- Focus states --------------------------------------------------- */
  button[data-size='sm']:focus-visible:enabled {
    border-radius: 28px;
  }

  button[data-size='md']:focus-visible:enabled {
    border-radius: 38px;
  }

  button[data-size='lg']:focus-visible:enabled {
    border-radius: 48px;
  }
  button[data-variant='shade']:focus-visible:enabled {
    background: var(--wui-color-gray-glass-005);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-gray-glass-002);
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) {
    button[data-size='sm']:hover:enabled {
      border-radius: 28px;
    }

    button[data-size='md']:hover:enabled {
      border-radius: 38px;
    }

    button[data-size='lg']:hover:enabled {
      border-radius: 48px;
    }

    button[data-variant='shade']:hover:enabled {
      background: var(--wui-color-gray-glass-002);
    }

    button[data-variant='shade']:active:enabled {
      background: var(--wui-color-gray-glass-005);
    }
  }

  button[data-size='sm']:active:enabled {
    border-radius: 28px;
  }

  button[data-size='md']:active:enabled {
    border-radius: 38px;
  }

  button[data-size='lg']:active:enabled {
    border-radius: 48px;
  }

  /* -- Disabled states --------------------------------------------------- */
  button:disabled {
    opacity: 0.3;
  }
`,Ql=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const dpe={lg:"lg-regular-mono",md:"md-regular-mono",sm:"sm-regular-mono"},ppe={lg:"md",md:"md",sm:"sm"};let xa=class extends ye{constructor(){super(...arguments),this.size="lg",this.disabled=!1,this.fullWidth=!1,this.loading=!1,this.variant="accent-primary"}render(){this.style.cssText=`
    --local-width: ${this.fullWidth?"100%":"auto"};
     `;const e=this.textVariant??dpe[this.size];return F`
      <button data-variant=${this.variant} data-size=${this.size} ?disabled=${this.disabled}>
        ${this.loadingTemplate()}
        <slot name="iconLeft"></slot>
        <wui-text variant=${e} color="inherit">
          <slot></slot>
        </wui-text>
        <slot name="iconRight"></slot>
      </button>
    `}loadingTemplate(){if(this.loading){const e=ppe[this.size],r=this.variant==="neutral-primary"||this.variant==="accent-primary"?"invert":"primary";return F`<wui-loading-spinner color=${r} size=${e}></wui-loading-spinner>`}return null}};xa.styles=[at,hn,hpe],Ql([z()],xa.prototype,"size",void 0),Ql([z({type:Boolean})],xa.prototype,"disabled",void 0),Ql([z({type:Boolean})],xa.prototype,"fullWidth",void 0),Ql([z({type:Boolean})],xa.prototype,"loading",void 0),Ql([z()],xa.prototype,"variant",void 0),Ql([z()],xa.prototype,"textVariant",void 0),xa=Ql([we("wui-button")],xa);var fpe=Me`
  button {
    border: none;
    background: transparent;
    height: 20px;
    padding: ${({spacing:t})=>t[2]};
    column-gap: ${({spacing:t})=>t[1]};
    border-radius: ${({borderRadius:t})=>t[1]};
    padding: 0 ${({spacing:t})=>t[1]};
    border-radius: ${({spacing:t})=>t[1]};
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='accent'] {
    color: ${({tokens:t})=>t.core.textAccentPrimary};
  }

  button[data-variant='secondary'] {
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  /* -- Focus states --------------------------------------------------- */
  button:focus-visible:enabled {
    box-shadow: 0px 0px 0px 4px rgba(9, 136, 240, 0.2);
  }

  button[data-variant='accent']:focus-visible:enabled {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  button[data-variant='secondary']:focus-visible:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  button[data-variant='accent']:hover:enabled {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  button[data-variant='secondary']:hover:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  button[data-variant='accent']:focus-visible {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  button[data-variant='secondary']:focus-visible {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    box-shadow: 0px 0px 0px 4px rgba(9, 136, 240, 0.2);
  }

  button[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,sp=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const gpe={sm:"sm-medium",md:"md-medium"},mpe={accent:"accent-primary",secondary:"secondary"};let eu=class extends ye{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.variant="accent",this.icon=void 0}render(){return F`
      <button ?disabled=${this.disabled} data-variant=${this.variant}>
        <slot name="iconLeft"></slot>
        <wui-text
          color=${mpe[this.variant]}
          variant=${gpe[this.size]}
        >
          <slot></slot>
        </wui-text>
        ${this.iconTemplate()}
      </button>
    `}iconTemplate(){return this.icon?F`<wui-icon name=${this.icon} size="sm"></wui-icon>`:null}};eu.styles=[at,hn,fpe],sp([z()],eu.prototype,"size",void 0),sp([z({type:Boolean})],eu.prototype,"disabled",void 0),sp([z()],eu.prototype,"variant",void 0),sp([z()],eu.prototype,"icon",void 0),eu=sp([we("wui-link")],eu);var wpe=Me`
  :host {
    display: block;
    width: 100px;
    height: 100px;
  }

  svg {
    width: 100px;
    height: 100px;
  }

  rect {
    fill: none;
    stroke: ${t=>t.colors.accent100};
    stroke-width: 3px;
    stroke-linecap: round;
    animation: dash 1s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0px;
    }
  }
`,PP=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let rw=class extends ye{constructor(){super(...arguments),this.radius=36}render(){return this.svgLoaderTemplate()}svgLoaderTemplate(){const e=this.radius>50?50:this.radius,n=36-e,i=116+n,s=245+n,o=360+n*1.75;return F`
      <svg viewBox="0 0 110 110" width="110" height="110">
        <rect
          x="2"
          y="2"
          width="106"
          height="106"
          rx=${e}
          stroke-dasharray="${i} ${s}"
          stroke-dashoffset=${o}
        />
      </svg>
    `}};rw.styles=[at,wpe],PP([z({type:Number})],rw.prototype,"radius",void 0),rw=PP([we("wui-loading-thumbnail")],rw);var ype=Me`
  wui-flex {
    width: 100%;
    height: 52px;
    box-sizing: border-box;
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    border-radius: ${({borderRadius:t})=>t[5]};
    padding-left: ${({spacing:t})=>t[3]};
    padding-right: ${({spacing:t})=>t[3]};
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: ${({spacing:t})=>t[6]};
  }

  wui-text {
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  wui-icon {
    width: 12px;
    height: 12px;
  }
`,nw=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Vh=class extends ye{constructor(){super(...arguments),this.disabled=!1,this.label="",this.buttonLabel=""}render(){return F`
      <wui-flex justifyContent="space-between" alignItems="center">
        <wui-text variant="lg-regular" color="inherit">${this.label}</wui-text>
        <wui-button variant="accent-secondary" size="sm">
          ${this.buttonLabel}
          <wui-icon name="chevronRight" color="inherit" size="inherit" slot="iconRight"></wui-icon>
        </wui-button>
      </wui-flex>
    `}};Vh.styles=[at,hn,ype],nw([z({type:Boolean})],Vh.prototype,"disabled",void 0),nw([z()],Vh.prototype,"label",void 0),nw([z()],Vh.prototype,"buttonLabel",void 0),Vh=nw([we("wui-cta-button")],Vh);var bpe=Me`
  :host {
    display: block;
    padding: 0 ${({spacing:t})=>t[5]} ${({spacing:t})=>t[5]};
  }
`,NP=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let iw=class extends ye{constructor(){super(...arguments),this.wallet=void 0}render(){if(!this.wallet)return this.style.display="none",null;const{name:e,app_store:r,play_store:n,chrome_store:i,homepage:s}=this.wallet,o=ne.isMobile(),a=ne.isIos(),c=ne.isAndroid(),l=[r,n,s,i].filter(Boolean).length>1,u=ir.getTruncateString({string:e,charsStart:12,charsEnd:0,truncate:"end"});return l&&!o?F`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${()=>J.push("Downloads",{wallet:this.wallet})}
        ></wui-cta-button>
      `:!l&&s?F`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onHomePage.bind(this)}
        ></wui-cta-button>
      `:r&&a?F`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onAppStore.bind(this)}
        ></wui-cta-button>
      `:n&&c?F`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onPlayStore.bind(this)}
        ></wui-cta-button>
      `:(this.style.display="none",null)}onAppStore(){this.wallet?.app_store&&ne.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&ne.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&ne.openHref(this.wallet.homepage,"_blank")}};iw.styles=[bpe],NP([z({type:Object})],iw.prototype,"wallet",void 0),iw=NP([we("w3m-mobile-download-links")],iw);var vpe=Me`
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(3px);
    }
    50% {
      transform: translateX(-3px);
    }
    75% {
      transform: translateX(3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-wallet-image {
    width: 56px;
    height: 56px;
  }

  wui-loading-thumbnail {
    position: absolute;
  }

  wui-icon-box {
    position: absolute;
    right: calc(${({spacing:t})=>t[1]} * -1);
    bottom: calc(${({spacing:t})=>t[1]} * -1);
    opacity: 0;
    transform: scale(0.5);
    transition-property: opacity, transform;
    transition-duration: ${({durations:t})=>t.lg};
    transition-timing-function: ${({easings:t})=>t["ease-out-power-2"]};
    will-change: opacity, transform;
  }

  wui-text[align='center'] {
    width: 100%;
    padding: 0px ${({spacing:t})=>t[4]};
  }

  [data-error='true'] wui-icon-box {
    opacity: 1;
    transform: scale(1);
  }

  [data-error='true'] > wui-flex:first-child {
    animation: shake 250ms ${({easings:t})=>t["ease-out-power-2"]} both;
  }

  [data-retry='false'] wui-link {
    display: none;
  }

  [data-retry='true'] wui-link {
    display: block;
    opacity: 1;
  }

  w3m-mobile-download-links {
    padding: 0px;
    width: 100%;
  }
`,is=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};class Tr extends ye{constructor(){super(),this.wallet=J.state.data?.wallet,this.connector=J.state.data?.connector,this.timeout=void 0,this.secondaryBtnIcon="refresh",this.onConnect=void 0,this.onRender=void 0,this.onAutoConnect=void 0,this.isWalletConnect=!0,this.unsubscribe=[],this.imageSrc=Jt.getWalletImage(this.wallet)??Jt.getConnectorImage(this.connector),this.name=this.wallet?.name??this.connector?.name??"Wallet",this.isRetrying=!1,this.uri=X.state.wcUri,this.error=X.state.wcError,this.ready=!1,this.showRetry=!1,this.label=void 0,this.secondaryBtnLabel="Try again",this.secondaryLabel="Accept connection request in the wallet",this.isLoading=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(X.subscribeKey("wcUri",e=>{this.uri=e,this.isRetrying&&this.onRetry&&(this.isRetrying=!1,this.onConnect?.())}),X.subscribeKey("wcError",e=>this.error=e)),(ne.isTelegram()||ne.isSafari())&&ne.isIos()&&X.state.wcUri&&this.onConnect?.()}firstUpdated(){this.onAutoConnect?.(),this.showRetry=!this.onAutoConnect}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),X.setWcError(!1),clearTimeout(this.timeout)}render(){this.onRender?.(),this.onShowRetry();const e=this.error?"Connection can be declined if a previous request is still active":this.secondaryLabel;let r="";return this.label?r=this.label:(r=`Continue in ${this.name}`,this.error&&(r="Connection declined")),F`
      <wui-flex
        data-error=${Ne(this.error)}
        data-retry=${this.showRetry}
        flexDirection="column"
        alignItems="center"
        .padding=${["10","5","5","5"]}
        gap="6"
      >
        <wui-flex gap="2" justifyContent="center" alignItems="center">
          <wui-wallet-image size="lg" imageSrc=${Ne(this.imageSrc)}></wui-wallet-image>

          ${this.error?null:this.loaderTemplate()}

          <wui-icon-box
            color="error"
            icon="close"
            size="sm"
            border
            borderColor="wui-color-bg-125"
          ></wui-icon-box>
        </wui-flex>

        <wui-flex flexDirection="column" alignItems="center" gap="6"> <wui-flex
          flexDirection="column"
          alignItems="center"
          gap="2"
          .padding=${["2","0","0","0"]}
        >
          <wui-text align="center" variant="lg-medium" color=${this.error?"error":"primary"}>
            ${r}
          </wui-text>
          <wui-text align="center" variant="lg-regular" color="secondary">${e}</wui-text>
        </wui-flex>

        ${this.secondaryBtnLabel?F`
                <wui-button
                  variant="neutral-secondary"
                  size="md"
                  ?disabled=${this.isRetrying||this.isLoading}
                  @click=${this.onTryAgain.bind(this)}
                  data-testid="w3m-connecting-widget-secondary-button"
                >
                  <wui-icon
                    color="inherit"
                    slot="iconLeft"
                    name=${this.secondaryBtnIcon}
                  ></wui-icon>
                  ${this.secondaryBtnLabel}
                </wui-button>
              `:null}
      </wui-flex>

      ${this.isWalletConnect?F`
              <wui-flex .padding=${["0","5","5","5"]} justifyContent="center">
                <wui-link
                  @click=${this.onCopyUri}
                  variant="secondary"
                  icon="copy"
                  data-testid="wui-link-copy"
                >
                  Copy link
                </wui-link>
              </wui-flex>
            `:null}

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links></wui-flex>
      </wui-flex>
    `}onShowRetry(){this.error&&!this.showRetry&&(this.showRetry=!0,this.shadowRoot?.querySelector("wui-button")?.animate([{opacity:0},{opacity:1}],{fill:"forwards",easing:"ease"}))}onTryAgain(){X.setWcError(!1),this.onRetry?(this.isRetrying=!0,this.onRetry?.()):this.onConnect?.()}loaderTemplate(){const e=xr.state.themeVariables["--w3m-border-radius-master"],r=e?parseInt(e.replace("px",""),10):4;return F`<wui-loading-thumbnail radius=${r*9}></wui-loading-thumbnail>`}onCopyUri(){try{this.uri&&(ne.copyToClopboard(this.uri),We.showSuccess("Link copied"))}catch{We.showError("Failed to copy")}}}Tr.styles=vpe,is([pe()],Tr.prototype,"isRetrying",void 0),is([pe()],Tr.prototype,"uri",void 0),is([pe()],Tr.prototype,"error",void 0),is([pe()],Tr.prototype,"ready",void 0),is([pe()],Tr.prototype,"showRetry",void 0),is([pe()],Tr.prototype,"label",void 0),is([pe()],Tr.prototype,"secondaryBtnLabel",void 0),is([pe()],Tr.prototype,"secondaryLabel",void 0),is([pe()],Tr.prototype,"isLoading",void 0),is([z({type:Boolean})],Tr.prototype,"isMobile",void 0),is([z()],Tr.prototype,"onRetry",void 0);var Epe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let TP=class extends Tr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-browser: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onAutoConnect=this.onConnectProxy.bind(this),Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser",displayIndex:this.wallet?.display_index}})}async onConnectProxy(){try{this.error=!1;const{connectors:e}=te.state,r=e.find(n=>n.type==="ANNOUNCED"&&n.info?.rdns===this.wallet?.rdns||n.type==="INJECTED"||n.name===this.wallet?.name);if(r)await X.connectExternal(r,r.chain);else throw new Error("w3m-connecting-wc-browser: No connector found");ke.close(),Te.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"browser",name:this.wallet?.name||"Unknown"}})}catch(e){Te.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:e?.message??"Unknown"}}),this.error=!0}}};TP=Epe([we("w3m-connecting-wc-browser")],TP);var Cpe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let kP=class extends Tr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-desktop: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onRender=this.onRenderProxy.bind(this),Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"desktop",displayIndex:this.wallet?.display_index}})}onRenderProxy(){!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onConnectProxy(){if(this.wallet?.desktop_link&&this.uri)try{this.error=!1;const{desktop_link:e,name:r}=this.wallet,{redirect:n,href:i}=ne.formatNativeUrl(e,this.uri);X.setWcLinking({name:r,href:i}),X.setRecentWallet(this.wallet),ne.openHref(n,"_blank")}catch{this.error=!0}}};kP=Cpe([we("w3m-connecting-wc-desktop")],kP);var zh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let tu=class extends Tr{constructor(){if(super(),this.btnLabelTimeout=void 0,this.redirectDeeplink=void 0,this.redirectUniversalLink=void 0,this.target=void 0,this.preferUniversalLinks=Y.state.experimental_preferUniversalLinks,this.isLoading=!0,this.onConnect=()=>{if(this.wallet?.mobile_link&&this.uri)try{this.error=!1;const{mobile_link:e,link_mode:r,name:n}=this.wallet,{redirect:i,redirectUniversalLink:s,href:o}=ne.formatNativeUrl(e,this.uri,r);this.redirectDeeplink=i,this.redirectUniversalLink=s,this.target=ne.isIframe()?"_top":"_self",X.setWcLinking({name:n,href:o}),X.setRecentWallet(this.wallet),this.preferUniversalLinks&&this.redirectUniversalLink?ne.openHref(this.redirectUniversalLink,this.target):ne.openHref(this.redirectDeeplink,this.target)}catch(e){Te.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:e instanceof Error?e.message:"Error parsing the deeplink",uri:this.uri,mobile_link:this.wallet.mobile_link,name:this.wallet.name}}),this.error=!0}},!this.wallet)throw new Error("w3m-connecting-wc-mobile: No wallet provided");this.secondaryBtnLabel="Open",this.secondaryLabel=Le.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.onHandleURI(),this.unsubscribe.push(X.subscribeKey("wcUri",()=>{this.onHandleURI()})),Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"mobile",displayIndex:this.wallet?.display_index}})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.btnLabelTimeout)}onHandleURI(){this.isLoading=!this.uri,!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onTryAgain(){X.setWcError(!1),this.onConnect?.()}};zh([pe()],tu.prototype,"redirectDeeplink",void 0),zh([pe()],tu.prototype,"redirectUniversalLink",void 0),zh([pe()],tu.prototype,"target",void 0),zh([pe()],tu.prototype,"preferUniversalLinks",void 0),zh([pe()],tu.prototype,"isLoading",void 0),tu=zh([we("w3m-connecting-wc-mobile")],tu);var op={},Ape=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},RP={},ci={};let p3;const $pe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ci.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},ci.getSymbolTotalCodewords=function(e){return $pe[e]},ci.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},ci.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');p3=e},ci.isKanjiModeEnabled=function(){return typeof p3<"u"},ci.toSJIS=function(e){return p3(e)};var sw={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(sw);function DP(){this.buffer=[],this.length=0}DP.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var xpe=DP;function ap(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ap.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},ap.prototype.get=function(t,e){return this.data[t*this.size+e]},ap.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},ap.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var _pe=ap,BP={};(function(t){const e=ci.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(BP);var MP={};const Spe=ci.getSymbolSize,UP=7;MP.getPositions=function(e){const r=Spe(e);return[[0,0],[r-UP,0],[0,r-UP]]};var LP={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let h=0;h<s;h++){a=c=0,l=u=null;for(let d=0;d<s;d++){let p=i.get(h,d);p===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=p,a=1),p=i.get(d,h),p===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=p,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(LP);var ow={};const Ic=sw,aw=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],cw=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ow.getBlocksCount=function(e,r){switch(r){case Ic.L:return aw[(e-1)*4+0];case Ic.M:return aw[(e-1)*4+1];case Ic.Q:return aw[(e-1)*4+2];case Ic.H:return aw[(e-1)*4+3];default:return}},ow.getTotalCodewordsCount=function(e,r){switch(r){case Ic.L:return cw[(e-1)*4+0];case Ic.M:return cw[(e-1)*4+1];case Ic.Q:return cw[(e-1)*4+2];case Ic.H:return cw[(e-1)*4+3];default:return}};var FP={},lw={};const cp=new Uint8Array(512),uw=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)cp[r]=e,uw[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)cp[r]=cp[r-255]})(),lw.log=function(e){if(e<1)throw new Error("log("+e+")");return uw[e]},lw.exp=function(e){return cp[e]},lw.mul=function(e,r){return e===0||r===0?0:cp[uw[e]+uw[r]]},function(t){const e=lw;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(FP);const HP=FP;function f3(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}f3.prototype.initialize=function(e){this.degree=e,this.genPoly=HP.generateECPolynomial(this.degree)},f3.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=HP.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var Ipe=f3,jP={},Oc={},g3={};g3.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Rs={};const VP="[0-9]+",Ope="[A-Z $%*+\\-./:]+";let lp="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";lp=lp.replace(/u/g,"\\u");const Ppe="(?:(?![A-Z0-9 $%*+\\-./:]|"+lp+`)(?:.|[\r
]))+`;Rs.KANJI=new RegExp(lp,"g"),Rs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Rs.BYTE=new RegExp(Ppe,"g"),Rs.NUMERIC=new RegExp(VP,"g"),Rs.ALPHANUMERIC=new RegExp(Ope,"g");const Npe=new RegExp("^"+lp+"$"),Tpe=new RegExp("^"+VP+"$"),kpe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Rs.testKanji=function(e){return Npe.test(e)},Rs.testNumeric=function(e){return Tpe.test(e)},Rs.testAlphanumeric=function(e){return kpe.test(e)},function(t){const e=g3,r=Rs;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Oc),function(t){const e=ci,r=ow,n=sw,i=Oc,s=g3,o=7973,a=e.getBCHDigit(o);function c(d,p,f){for(let g=1;g<=40;g++)if(p<=t.getCapacity(g,f,d))return g}function l(d,p){return i.getCharCountIndicator(d,p)+4}function u(d,p){let f=0;return d.forEach(function(g){const w=l(g.mode,p);f+=w+g.getBitsLength()}),f}function h(d,p){for(let f=1;f<=40;f++)if(u(d,f)<=t.getCapacity(f,p,i.MIXED))return f}t.from=function(p,f){return s.isValid(p)?parseInt(p,10):f},t.getCapacity=function(p,f,g){if(!s.isValid(p))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=i.BYTE);const w=e.getSymbolTotalCodewords(p),v=r.getTotalCodewordsCount(p,f),C=(w-v)*8;if(g===i.MIXED)return C;const b=C-l(g,p);switch(g){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(p,f){let g;const w=n.from(f,n.M);if(Array.isArray(p)){if(p.length>1)return h(p,w);if(p.length===0)return 1;g=p[0]}else g=p;return c(g.mode,g.getLength(),w)},t.getEncodedBits=function(p){if(!s.isValid(p)||p<7)throw new Error("Invalid QR Code version");let f=p<<12;for(;e.getBCHDigit(f)-a>=0;)f^=o<<e.getBCHDigit(f)-a;return p<<12|f}}(jP);var zP={};const m3=ci,qP=1335,Rpe=21522,WP=m3.getBCHDigit(qP);zP.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;m3.getBCHDigit(i)-WP>=0;)i^=qP<<m3.getBCHDigit(i)-WP;return(n<<10|i)^Rpe};var ZP={};const Dpe=Oc;function qh(t){this.mode=Dpe.NUMERIC,this.data=t.toString()}qh.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},qh.prototype.getLength=function(){return this.data.length},qh.prototype.getBitsLength=function(){return qh.getBitsLength(this.data.length)},qh.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var Bpe=qh;const Mpe=Oc,w3=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Wh(t){this.mode=Mpe.ALPHANUMERIC,this.data=t}Wh.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Wh.prototype.getLength=function(){return this.data.length},Wh.prototype.getBitsLength=function(){return Wh.getBitsLength(this.data.length)},Wh.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=w3.indexOf(this.data[r])*45;n+=w3.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(w3.indexOf(this.data[r]),6)};var Upe=Wh,Lpe=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const Fpe=Lpe,Hpe=Oc;function Zh(t){this.mode=Hpe.BYTE,typeof t=="string"&&(t=Fpe(t)),this.data=new Uint8Array(t)}Zh.getBitsLength=function(e){return e*8},Zh.prototype.getLength=function(){return this.data.length},Zh.prototype.getBitsLength=function(){return Zh.getBitsLength(this.data.length)},Zh.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var jpe=Zh;const Vpe=Oc,zpe=ci;function Kh(t){this.mode=Vpe.KANJI,this.data=t}Kh.getBitsLength=function(e){return e*13},Kh.prototype.getLength=function(){return this.data.length},Kh.prototype.getBitsLength=function(){return Kh.getBitsLength(this.data.length)},Kh.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=zpe.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var qpe=Kh,KP={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,u,h,d,p,f,g,w;!a.empty();){c=a.pop(),l=c.value,h=c.cost,d=r[l]||{};for(u in d)d.hasOwnProperty(u)&&(p=d[u],f=h+p,g=o[u],w=typeof o[u]>"u",(w||g>f)&&(o[u]=f,a.push(u,f),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var v=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(v)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(KP),function(t){const e=Oc,r=Bpe,n=Upe,i=jpe,s=qpe,o=Rs,a=ci,c=KP.exports;function l(v){return unescape(encodeURIComponent(v)).length}function u(v,C,b){const A=[];let P;for(;(P=v.exec(b))!==null;)A.push({data:P[0],index:P.index,mode:C,length:P[0].length});return A}function h(v){const C=u(o.NUMERIC,e.NUMERIC,v),b=u(o.ALPHANUMERIC,e.ALPHANUMERIC,v);let A,P;return a.isKanjiModeEnabled()?(A=u(o.BYTE,e.BYTE,v),P=u(o.KANJI,e.KANJI,v)):(A=u(o.BYTE_KANJI,e.BYTE,v),P=[]),C.concat(b,A,P).sort(function(M,U){return M.index-U.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function d(v,C){switch(C){case e.NUMERIC:return r.getBitsLength(v);case e.ALPHANUMERIC:return n.getBitsLength(v);case e.KANJI:return s.getBitsLength(v);case e.BYTE:return i.getBitsLength(v)}}function p(v){return v.reduce(function(C,b){const A=C.length-1>=0?C[C.length-1]:null;return A&&A.mode===b.mode?(C[C.length-1].data+=b.data,C):(C.push(b),C)},[])}function f(v){const C=[];for(let b=0;b<v.length;b++){const A=v[b];switch(A.mode){case e.NUMERIC:C.push([A,{data:A.data,mode:e.ALPHANUMERIC,length:A.length},{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.ALPHANUMERIC:C.push([A,{data:A.data,mode:e.BYTE,length:A.length}]);break;case e.KANJI:C.push([A,{data:A.data,mode:e.BYTE,length:l(A.data)}]);break;case e.BYTE:C.push([{data:A.data,mode:e.BYTE,length:l(A.data)}])}}return C}function g(v,C){const b={},A={start:{}};let P=["start"];for(let R=0;R<v.length;R++){const M=v[R],U=[];for(let S=0;S<M.length;S++){const L=M[S],D=""+R+S;U.push(D),b[D]={node:L,lastCount:0},A[D]={};for(let T=0;T<P.length;T++){const x=P[T];b[x]&&b[x].node.mode===L.mode?(A[x][D]=d(b[x].lastCount+L.length,L.mode)-d(b[x].lastCount,L.mode),b[x].lastCount+=L.length):(b[x]&&(b[x].lastCount=L.length),A[x][D]=d(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,C))}}P=U}for(let R=0;R<P.length;R++)A[P[R]].end=0;return{map:A,table:b}}function w(v,C){let b;const A=e.getBestModeForData(v);if(b=e.from(C,A),b!==e.BYTE&&b.bit<A.bit)throw new Error('"'+v+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(A));switch(b===e.KANJI&&!a.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new r(v);case e.ALPHANUMERIC:return new n(v);case e.KANJI:return new s(v);case e.BYTE:return new i(v)}}t.fromArray=function(C){return C.reduce(function(b,A){return typeof A=="string"?b.push(w(A,null)):A.data&&b.push(w(A.data,A.mode)),b},[])},t.fromString=function(C,b){const A=h(C,a.isKanjiModeEnabled()),P=f(A),R=g(P,b),M=c.find_path(R.map,"start","end"),U=[];for(let S=1;S<M.length-1;S++)U.push(R.table[M[S]].node);return t.fromArray(p(U))},t.rawSplit=function(C){return t.fromArray(h(C,a.isKanjiModeEnabled()))}}(ZP);const hw=ci,y3=sw,Wpe=xpe,Zpe=_pe,Kpe=BP,Gpe=MP,b3=LP,v3=ow,Ype=Ipe,dw=jP,Xpe=zP,Jpe=Oc,E3=ZP;function Qpe(t,e){const r=t.size,n=Gpe.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function efe(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function tfe(t,e){const r=Kpe.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function rfe(t,e){const r=t.size,n=dw.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function C3(t,e,r){const n=t.size,i=Xpe.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function nfe(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function ife(t,e,r){const n=new Wpe;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),Jpe.getCharCountIndicator(c.mode,t)),c.write(n)});const i=hw.getSymbolTotalCodewords(t),s=v3.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return sfe(n,t,e)}function sfe(t,e,r){const n=hw.getSymbolTotalCodewords(e),i=v3.getTotalCodewordsCount(e,r),s=n-i,o=v3.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),u=Math.floor(s/o),h=u+1,d=l-u,p=new Ype(d);let f=0;const g=new Array(o),w=new Array(o);let v=0;const C=new Uint8Array(t.buffer);for(let M=0;M<o;M++){const U=M<c?u:h;g[M]=C.slice(f,f+U),w[M]=p.encode(g[M]),f+=U,v=Math.max(v,U)}const b=new Uint8Array(n);let A=0,P,R;for(P=0;P<v;P++)for(R=0;R<o;R++)P<g[R].length&&(b[A++]=g[R][P]);for(P=0;P<d;P++)for(R=0;R<o;R++)b[A++]=w[R][P];return b}function ofe(t,e,r,n){let i;if(Array.isArray(t))i=E3.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=E3.rawSplit(t);l=dw.getBestVersionForData(u,r)}i=E3.fromString(t,l||40)}else throw new Error("Invalid data");const s=dw.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=ife(e,r,i),a=hw.getSymbolSize(e),c=new Zpe(a);return Qpe(c,e),efe(c),tfe(c,e),C3(c,r,0),e>=7&&rfe(c,e),nfe(c,o),isNaN(n)&&(n=b3.getBestMask(c,C3.bind(null,c,r))),b3.applyMask(n,c),C3(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}RP.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=y3.M,i,s;return typeof r<"u"&&(n=y3.from(r.errorCorrectionLevel,y3.M),i=dw.from(r.version),s=b3.from(r.maskPattern),r.toSJISFunc&&hw.setToSJISFunction(r.toSJISFunc)),ofe(e,i,n,s)};var GP={},A3={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,h=[s.color.light,s.color.dark];for(let d=0;d<l;d++)for(let p=0;p<l;p++){let f=(d*l+p)*4,g=s.color.light;if(d>=u&&p>=u&&d<l-u&&p<l-u){const w=Math.floor((d-u)/c),v=Math.floor((p-u)/c);g=h[a[w*o+v]?1:0]}n[f++]=g.r,n[f++]=g.g,n[f++]=g.b,n[f]=g.a}}})(A3),function(t){const e=A3;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),h=l.getContext("2d"),d=h.createImageData(u,u);return e.qrToImageData(d.data,s,c),r(h,l,u),h.putImageData(d,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return l.toDataURL(u,h.quality)}}(GP);var YP={};const afe=A3;function XP(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function $3(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function cfe(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?$3("M",c+r,.5+l+r):$3("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=$3("h",o),o=0)):i++}return n}YP.render=function(e,r,n){const i=afe.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+XP(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+XP(i.color.dark,"stroke")+' d="'+cfe(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,d),d};const lfe=Ape,x3=RP,JP=GP,ufe=YP;function _3(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!lfe())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const u=x3.create(r,n);c(t(u,e,n))}catch(u){l(u)}})}try{const c=x3.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}op.create=x3.create,op.toCanvas=_3.bind(null,JP.render),op.toDataURL=_3.bind(null,JP.renderToDataURL),op.toString=_3.bind(null,function(t,e,r){return ufe.render(t,r)});const hfe=.1,QP=2.5,_a=7;function S3(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+hfe}function dfe(t,e){const r=Array.prototype.slice.call(op.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const pfe={generate({uri:t,size:e,logoSize:r,padding:n=8,dotColor:i="var(--apkt-tokens-theme-textInvert)"}){const o=[],a=dfe(t,"Q"),c=(e-2*n)/a.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:g,y:w})=>{const v=(a.length-_a)*c*g+n,C=(a.length-_a)*c*w+n,b=.45;for(let A=0;A<l.length;A+=1){const P=c*(_a-A*2);o.push(mt`
            <rect
              fill=${A===2?"var(--apkt-tokens-theme-textInvert)":"var(--apkt-tokens-theme-textPrimary)"}
              width=${A===0?P-10:P}
              rx= ${A===0?(P-10)*b:P*b}
              ry= ${A===0?(P-10)*b:P*b}
              stroke=${i}
              stroke-width=${A===0?10:0}
              height=${A===0?P-10:P}
              x= ${A===0?C+c*A+10/2:C+c*A}
              y= ${A===0?v+c*A+10/2:v+c*A}
            />
          `)}});const u=Math.floor((r+25)/c),h=a.length/2-u/2,d=a.length/2+u/2-1,p=[];a.forEach((g,w)=>{g.forEach((v,C)=>{if(a[w][C]&&!(w<_a&&C<_a||w>a.length-(_a+1)&&C<_a||w<_a&&C>a.length-(_a+1))&&!(w>h&&w<d&&C>h&&C<d)){const b=w*c+c/2+n,A=C*c+c/2+n;p.push([b,A])}})});const f={};return p.forEach(([g,w])=>{f[g]?f[g]?.push(w):f[g]=[w]}),Object.entries(f).map(([g,w])=>{const v=w.filter(C=>w.every(b=>!S3(C,b,c)));return[Number(g),v]}).forEach(([g,w])=>{w.forEach(v=>{o.push(mt`<circle cx=${g} cy=${v} fill=${i} r=${c/QP} />`)})}),Object.entries(f).filter(([g,w])=>w.length>1).map(([g,w])=>{const v=w.filter(C=>w.some(b=>S3(C,b,c)));return[Number(g),v]}).map(([g,w])=>{w.sort((C,b)=>C<b?-1:1);const v=[];for(const C of w){const b=v.find(A=>A.some(P=>S3(C,P,c)));b?b.push(C):v.push([C])}return[g,v.map(C=>[C[0],C[C.length-1]])]}).forEach(([g,w])=>{w.forEach(([v,C])=>{o.push(mt`
              <line
                x1=${g}
                x2=${g}
                y1=${v}
                y2=${C}
                stroke=${i}
                stroke-width=${c/(QP/2)}
                stroke-linecap="round"
              />
            `)})}),o}};var ffe=Me`
  :host {
    position: relative;
    user-select: none;
    display: block;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    width: 100%;
    height: 100%;
    background-color: ${({tokens:t})=>t.theme.backgroundInvert};
    color: ${({tokens:t})=>t.theme.textInvert};
  }

  :host {
    border-radius: ${({borderRadius:t})=>t[4]};
    display: flex;
    align-items: center;
    justify-content: center;
  }

  :host([data-clear='true']) > wui-icon {
    display: none;
  }

  svg:first-child,
  wui-image,
  wui-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    box-shadow: inset 0 0 0 4px ${({tokens:t})=>t.theme.backgroundPrimary};
    border-radius: ${({borderRadius:t})=>t[6]};
  }

  wui-image {
    width: 25%;
    height: 25%;
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  wui-icon {
    width: 100%;
    height: 100%;
    color: #3396ff !important;
    transform: translateY(-50%) translateX(-50%) scale(0.25);
  }

  wui-icon > svg {
    width: inherit;
    height: inherit;
  }
`,Pc=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ds=class extends ye{constructor(){super(...arguments),this.uri="",this.size=0,this.theme="dark",this.imageSrc=void 0,this.alt=void 0,this.arenaClear=void 0,this.farcaster=void 0}render(){return this.dataset.theme=this.theme,this.dataset.clear=String(this.arenaClear),this.style.cssText=`--local-size: ${this.size}px`,F`<wui-flex
      alignItems="center"
      justifyContent="center"
      class="wui-qr-code"
      direction="column"
      gap="4"
      width="100%"
      style="height: 100%"
    >
      ${this.templateVisual()} ${this.templateSvg()}
    </wui-flex>`}templateSvg(){return mt`
      <svg height=${this.size} width=${this.size}>
        ${pfe.generate({uri:this.uri,size:this.size,logoSize:this.arenaClear?0:this.size/4})}
      </svg>
    `}templateVisual(){return this.imageSrc?F`<wui-image src=${this.imageSrc} alt=${this.alt??"logo"}></wui-image>`:this.farcaster?F`<wui-icon
        class="farcaster"
        size="inherit"
        color="inherit"
        name="farcaster"
      ></wui-icon>`:F`<wui-icon size="inherit" color="inherit" name="walletConnect"></wui-icon>`}};Ds.styles=[at,ffe],Pc([z()],Ds.prototype,"uri",void 0),Pc([z({type:Number})],Ds.prototype,"size",void 0),Pc([z()],Ds.prototype,"theme",void 0),Pc([z()],Ds.prototype,"imageSrc",void 0),Pc([z()],Ds.prototype,"alt",void 0),Pc([z({type:Boolean})],Ds.prototype,"arenaClear",void 0),Pc([z({type:Boolean})],Ds.prototype,"farcaster",void 0),Ds=Pc([we("wui-qr-code")],Ds);var gfe=Me`
  :host {
    display: block;
    background: linear-gradient(
      90deg,
      ${({tokens:t})=>t.theme.foregroundSecondary} 0%,
      ${({tokens:t})=>t.theme.foregroundTertiary} 50%,
      ${({tokens:t})=>t.theme.foregroundSecondary} 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1s ease-in-out infinite;
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  :host([data-rounded='true']) {
    border-radius: ${({borderRadius:t})=>t[16]};
  }

  @keyframes shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
`,up=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let ru=class extends ye{constructor(){super(...arguments),this.width="",this.height="",this.variant="default",this.rounded=!1}render(){return this.style.cssText=`
      width: ${this.width};
      height: ${this.height};
    `,this.dataset.rounded=this.rounded?"true":"false",F`<slot></slot>`}};ru.styles=[gfe],up([z()],ru.prototype,"width",void 0),up([z()],ru.prototype,"height",void 0),up([z()],ru.prototype,"variant",void 0),up([z({type:Boolean})],ru.prototype,"rounded",void 0),ru=up([we("wui-shimmer")],ru);const mfe="https://reown.com";var wfe=Me`
  .reown-logo {
    height: 24px;
  }

  a {
    text-decoration: none;
    cursor: pointer;
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  a:hover {
    opacity: 0.9;
  }
`,yfe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let I3=class extends ye{render(){return F`
      <a
        data-testid="ux-branding-reown"
        href=${mfe}
        rel="noreferrer"
        target="_blank"
        style="text-decoration: none;"
      >
        <wui-flex
          justifyContent="center"
          alignItems="center"
          gap="1"
          .padding=${["01","0","3","0"]}
        >
          <wui-text variant="sm-regular" color="inherit"> UX by </wui-text>
          <wui-icon name="reown" size="inherit" class="reown-logo"></wui-icon>
        </wui-flex>
      </a>
    `}};I3.styles=[at,hn,wfe],I3=yfe([we("wui-ux-by-reown")],I3);var bfe=Me`
  wui-shimmer {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: ${({borderRadius:t})=>t[4]};
  }

  wui-qr-code {
    opacity: 0;
    animation-duration: ${({durations:t})=>t.xl};
    animation-timing-function: ${({easings:t})=>t["ease-out-power-2"]};
    animation-name: fade-in;
    animation-fill-mode: forwards;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
`,vfe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let O3=class extends Tr{constructor(){super(),this.forceUpdate=()=>{this.requestUpdate()},window.addEventListener("resize",this.forceUpdate),Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet?.name??"WalletConnect",platform:"qrcode",displayIndex:this.wallet?.display_index}})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe?.forEach(e=>e()),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),F`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["0","5","5","5"]}
        gap="5"
      >
        <wui-shimmer width="100%"> ${this.qrCodeTemplate()} </wui-shimmer>
        <wui-text variant="lg-medium" color="primary"> Scan this QR Code with your phone </wui-text>
        ${this.copyTemplate()}
      </wui-flex>
      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout(()=>{this.ready=!0},200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;const e=this.getBoundingClientRect().width-40,r=this.wallet?this.wallet.name:void 0;return X.setWcLinking(void 0),X.setRecentWallet(this.wallet),F` <wui-qr-code
      size=${e}
      theme=${xr.state.themeMode}
      uri=${this.uri}
      imageSrc=${Ne(Jt.getWalletImage(this.wallet))}
      color=${Ne(xr.state.themeVariables["--w3m-qr-color"])}
      alt=${Ne(r)}
      data-testid="wui-qr-code"
    ></wui-qr-code>`}copyTemplate(){const e=!this.uri||!this.ready;return F`<wui-button
      .disabled=${e}
      @click=${this.onCopyUri}
      variant="neutral-secondary"
      size="sm"
      data-testid="copy-wc2-uri"
    >
      Copy link
      <wui-icon size="sm" color="inherit" name="copy" slot="iconRight"></wui-icon>
    </wui-button>`}};O3.styles=bfe,O3=vfe([we("w3m-connecting-wc-qrcode")],O3);var Efe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let eN=class extends ye{constructor(){if(super(),this.wallet=J.state.data?.wallet,!this.wallet)throw new Error("w3m-connecting-wc-unsupported: No wallet provided");Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser",displayIndex:this.wallet?.display_index}})}render(){return F`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["10","5","5","5"]}
        gap="5"
      >
        <wui-wallet-image
          size="lg"
          imageSrc=${Ne(Jt.getWalletImage(this.wallet))}
        ></wui-wallet-image>

        <wui-text variant="md-regular" color="primary">Not Detected</wui-text>
      </wui-flex>

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}};eN=Efe([we("w3m-connecting-wc-unsupported")],eN);var tN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let P3=class extends Tr{constructor(){if(super(),this.isLoading=!0,!this.wallet)throw new Error("w3m-connecting-wc-web: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.secondaryBtnLabel="Open",this.secondaryLabel=Le.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.updateLoadingState(),this.unsubscribe.push(X.subscribeKey("wcUri",()=>{this.updateLoadingState()})),Te.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"web",displayIndex:this.wallet?.display_index}})}updateLoadingState(){this.isLoading=!this.uri}onConnectProxy(){if(this.wallet?.webapp_link&&this.uri)try{this.error=!1;const{webapp_link:e,name:r}=this.wallet,{redirect:n,href:i}=ne.formatUniversalUrl(e,this.uri);X.setWcLinking({name:r,href:i}),X.setRecentWallet(this.wallet),ne.openHref(n,"_blank")}catch{this.error=!0}}};tN([pe()],P3.prototype,"isLoading",void 0),P3=tN([we("w3m-connecting-wc-web")],P3);var Gh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let nu=class extends ye{constructor(){super(),this.wallet=J.state.data?.wallet,this.unsubscribe=[],this.platform=void 0,this.platforms=[],this.isSiwxEnabled=!!Y.state.siwx,this.remoteFeatures=Y.state.remoteFeatures,this.displayBranding=!0,this.determinePlatforms(),this.initializeConnection(),this.unsubscribe.push(Y.subscribeKey("remoteFeatures",e=>this.remoteFeatures=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return F`
      ${this.headerTemplate()}
      <div>${this.platformTemplate()}</div>
      ${this.reownBrandingTemplate()}
    `}reownBrandingTemplate(){return!this.remoteFeatures?.reownBranding||!this.displayBranding?null:F`<wui-ux-by-reown></wui-ux-by-reown>`}async initializeConnection(e=!1){if(!(this.platform==="browser"||Y.state.manualWCControl&&!e))try{const{wcPairingExpiry:r,status:n}=X.state;if(e||Y.state.enableEmbedded||ne.isPairingExpired(r)||n==="connecting"){const i=X.getConnections(k.state.activeChain),s=this.remoteFeatures?.multiWallet,o=i.length>0;await X.connectWalletConnect({cache:"never"}),this.isSiwxEnabled||(o&&s?(J.replace("ProfileWallets"),We.showSuccess("New Wallet Added")):ke.close())}}catch(r){if(r instanceof Error&&r.message.includes("An error occurred when attempting to switch chain")&&!Y.state.enableNetworkSwitch&&k.state.activeChain){k.setActiveCaipNetwork(Ul.getUnsupportedNetwork(`${k.state.activeChain}:${k.state.activeCaipNetwork?.id}`)),k.showUnsupportedChainUI();return}Te.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:r?.message??"Unknown"}}),X.setWcError(!0),We.showError(r.message??"Connection error"),X.resetWcConnection(),J.goBack()}}determinePlatforms(){if(!this.wallet){this.platforms.push("qrcode"),this.platform="qrcode";return}if(this.platform)return;const{mobile_link:e,desktop_link:r,webapp_link:n,injected:i,rdns:s}=this.wallet,o=i?.map(({injected_id:f})=>f).filter(Boolean),a=[...s?[s]:o??[]],c=Y.state.isUniversalProvider?!1:a.length,l=e,u=n,h=X.checkInstalled(a),d=c&&h,p=r&&!ne.isMobile();d&&!k.state.noAdapters&&this.platforms.push("browser"),l&&this.platforms.push(ne.isMobile()?"mobile":"qrcode"),u&&this.platforms.push("web"),p&&this.platforms.push("desktop"),!d&&c&&!k.state.noAdapters&&this.platforms.push("unsupported"),this.platform=this.platforms[0]}platformTemplate(){switch(this.platform){case"browser":return F`<w3m-connecting-wc-browser></w3m-connecting-wc-browser>`;case"web":return F`<w3m-connecting-wc-web></w3m-connecting-wc-web>`;case"desktop":return F`
          <w3m-connecting-wc-desktop .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-desktop>
        `;case"mobile":return F`
          <w3m-connecting-wc-mobile isMobile .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-mobile>
        `;case"qrcode":return F`<w3m-connecting-wc-qrcode></w3m-connecting-wc-qrcode>`;default:return F`<w3m-connecting-wc-unsupported></w3m-connecting-wc-unsupported>`}}headerTemplate(){return this.platforms.length>1?F`
      <w3m-connecting-header
        .platforms=${this.platforms}
        .onSelectPlatfrom=${this.onSelectPlatform.bind(this)}
      >
      </w3m-connecting-header>
    `:null}async onSelectPlatform(e){const r=this.shadowRoot?.querySelector("div");r&&(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.platform=e,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}};Gh([pe()],nu.prototype,"platform",void 0),Gh([pe()],nu.prototype,"platforms",void 0),Gh([pe()],nu.prototype,"isSiwxEnabled",void 0),Gh([pe()],nu.prototype,"remoteFeatures",void 0),Gh([z({type:Boolean})],nu.prototype,"displayBranding",void 0),nu=Gh([we("w3m-connecting-wc-view")],nu);var N3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let hp=class extends ye{constructor(){super(),this.unsubscribe=[],this.isMobile=ne.isMobile(),this.remoteFeatures=Y.state.remoteFeatures,this.unsubscribe.push(Y.subscribeKey("remoteFeatures",e=>this.remoteFeatures=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(this.isMobile){const{featured:e,recommended:r}=ce.state,{customWallets:n}=Y.state,i=oe.getRecentWallets(),s=e.length||r.length||n?.length||i.length;return F`<wui-flex flexDirection="column" gap="2" .margin=${["1","3","3","3"]}>
        ${s?F`<w3m-connector-list></w3m-connector-list>`:null}
        <w3m-all-wallets-widget></w3m-all-wallets-widget>
      </wui-flex>`}return F`<wui-flex flexDirection="column" .padding=${["0","0","4","0"]}>
        <w3m-connecting-wc-view .displayBranding=${!1}></w3m-connecting-wc-view>
        <wui-flex flexDirection="column" .padding=${["0","3","0","3"]}>
          <w3m-all-wallets-widget></w3m-all-wallets-widget>
        </wui-flex>
      </wui-flex>
      ${this.reownBrandingTemplate()} `}reownBrandingTemplate(){return this.remoteFeatures?.reownBranding?F` <wui-flex flexDirection="column" .padding=${["1","0","1","0"]}>
      <wui-ux-by-reown></wui-ux-by-reown>
    </wui-flex>`:null}};N3([pe()],hp.prototype,"isMobile",void 0),N3([pe()],hp.prototype,"remoteFeatures",void 0),hp=N3([we("w3m-connecting-wc-basic-view")],hp);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cfe=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dp=(t,e)=>{const r=t._$AN;if(r===void 0)return!1;for(const n of r)n._$AO?.(e,!1),dp(n,e);return!0},pw=t=>{let e,r;do{if((e=t._$AM)===void 0)break;r=e._$AN,r.delete(t),t=e}while(r?.size===0)},rN=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(r===void 0)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),xfe(e)}};function Afe(t){this._$AN!==void 0?(pw(this),this._$AM=t,rN(this)):this._$AM=t}function $fe(t,e=!1,r=0){const n=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(n))for(let s=r;s<n.length;s++)dp(n[s],!1),pw(n[s]);else n!=null&&(dp(n,!1),pw(n));else dp(this,t)}const xfe=t=>{t.type==_P.CHILD&&(t._$AP??=$fe,t._$AQ??=Afe)};class _fe extends IP{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,r,n){super._$AT(e,r,n),rN(this),this.isConnected=e._$AU}_$AO(e,r=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),r&&(dp(this,e),pw(this))}setValue(e){if(Cfe(this._$Ct))this._$Ct._$AI(e,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=e,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const T3=()=>new Sfe;class Sfe{}const k3=new WeakMap,R3=SP(class extends _fe{render(t){return Ut}update(t,[e]){const r=e!==this.G;return r&&this.G!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),Ut}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let r=k3.get(e);r===void 0&&(r=new WeakMap,k3.set(e,r)),r.get(this.G)!==void 0&&this.G.call(this.ht,void 0),r.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?k3.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Ife=Me`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  label {
    position: relative;
    display: inline-block;
    user-select: none;
    transition:
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      color ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      border ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      box-shadow ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      width ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      height ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      transform ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      opacity ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
  }

  input {
    width: 0;
    height: 0;
    opacity: 0;
  }

  span {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: ${({colors:t})=>t.neutrals300};
    border-radius: ${({borderRadius:t})=>t.round};
    border: 1px solid transparent;
    will-change: border;
    transition:
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      color ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      border ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      box-shadow ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      width ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      height ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      transform ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      opacity ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
  }

  span:before {
    content: '';
    position: absolute;
    background-color: ${({colors:t})=>t.white};
    border-radius: 50%;
  }

  /* -- Sizes --------------------------------------------------------- */
  label[data-size='lg'] {
    width: 48px;
    height: 32px;
  }

  label[data-size='md'] {
    width: 40px;
    height: 28px;
  }

  label[data-size='sm'] {
    width: 32px;
    height: 22px;
  }

  label[data-size='lg'] > span:before {
    height: 24px;
    width: 24px;
    left: 4px;
    top: 3px;
  }

  label[data-size='md'] > span:before {
    height: 20px;
    width: 20px;
    left: 4px;
    top: 3px;
  }

  label[data-size='sm'] > span:before {
    height: 16px;
    width: 16px;
    left: 3px;
    top: 2px;
  }

  /* -- Focus states --------------------------------------------------- */
  input:focus-visible:not(:checked) + span,
  input:focus:not(:checked) + span {
    border: 1px solid ${({tokens:t})=>t.core.iconAccentPrimary};
    background-color: ${({tokens:t})=>t.theme.textTertiary};
    box-shadow: 0px 0px 0px 4px rgba(9, 136, 240, 0.2);
  }

  input:focus-visible:checked + span,
  input:focus:checked + span {
    border: 1px solid ${({tokens:t})=>t.core.iconAccentPrimary};
    box-shadow: 0px 0px 0px 4px rgba(9, 136, 240, 0.2);
  }

  /* -- Checked states --------------------------------------------------- */
  input:checked + span {
    background-color: ${({tokens:t})=>t.core.iconAccentPrimary};
  }

  label[data-size='lg'] > input:checked + span:before {
    transform: translateX(calc(100% - 9px));
  }

  label[data-size='md'] > input:checked + span:before {
    transform: translateX(calc(100% - 9px));
  }

  label[data-size='sm'] > input:checked + span:before {
    transform: translateX(calc(100% - 7px));
  }

  /* -- Hover states ------------------------------------------------------- */
  label:hover > input:not(:checked):not(:disabled) + span {
    background-color: ${({colors:t})=>t.neutrals400};
  }

  label:hover > input:checked:not(:disabled) + span {
    background-color: ${({colors:t})=>t.accent080};
  }

  /* -- Disabled state --------------------------------------------------- */
  label:has(input:disabled) {
    pointer-events: none;
    user-select: none;
  }

  input:not(:checked):disabled + span {
    background-color: ${({colors:t})=>t.neutrals700};
  }

  input:checked:disabled + span {
    background-color: ${({colors:t})=>t.neutrals700};
  }

  input:not(:checked):disabled + span::before {
    background-color: ${({colors:t})=>t.neutrals400};
  }

  input:checked:disabled + span::before {
    background-color: ${({tokens:t})=>t.theme.textTertiary};
  }
`,fw=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Yh=class extends ye{constructor(){super(...arguments),this.inputElementRef=T3(),this.checked=!1,this.disabled=!1,this.size="md"}render(){return F`
      <label data-size=${this.size}>
        <input
          ${R3(this.inputElementRef)}
          type="checkbox"
          ?checked=${this.checked}
          ?disabled=${this.disabled}
          @change=${this.dispatchChangeEvent.bind(this)}
        />
        <span></span>
      </label>
    `}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("switchChange",{detail:this.inputElementRef.value?.checked,bubbles:!0,composed:!0}))}};Yh.styles=[at,hn,Ife],fw([z({type:Boolean})],Yh.prototype,"checked",void 0),fw([z({type:Boolean})],Yh.prototype,"disabled",void 0),fw([z()],Yh.prototype,"size",void 0),Yh=fw([we("wui-toggle")],Yh);var Ofe=Me`
  :host {
    height: auto;
  }

  :host > wui-flex {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: ${({spacing:t})=>t[2]};
    padding: ${({spacing:t})=>t[2]} ${({spacing:t})=>t[3]};
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    border-radius: ${({borderRadius:t})=>t[4]};
    box-shadow: inset 0 0 0 1px ${({tokens:t})=>t.theme.foregroundPrimary};
    transition: background-color ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color;
    cursor: pointer;
  }

  wui-switch {
    pointer-events: none;
  }
`,nN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let gw=class extends ye{constructor(){super(...arguments),this.checked=!1}render(){return F`
      <wui-flex>
        <wui-icon size="xl" name="walletConnectBrown"></wui-icon>
        <wui-toggle
          ?checked=${this.checked}
          size="sm"
          @switchChange=${this.handleToggleChange.bind(this)}
        ></wui-toggle>
      </wui-flex>
    `}handleToggleChange(e){e.stopPropagation(),this.checked=e.detail,this.dispatchSwitchEvent()}dispatchSwitchEvent(){this.dispatchEvent(new CustomEvent("certifiedSwitchChange",{detail:this.checked,bubbles:!0,composed:!0}))}};gw.styles=[at,hn,Ofe],nN([z({type:Boolean})],gw.prototype,"checked",void 0),gw=nN([we("wui-certified-switch")],gw);var Pfe=Me`
  :host {
    position: relative;
    width: 100%;
    display: inline-flex;
    flex-direction: column;
    gap: ${({spacing:t})=>t[3]};
    color: ${({tokens:t})=>t.theme.textPrimary};
    caret-color: ${({tokens:t})=>t.core.textAccentPrimary};
  }

  .wui-input-text-container {
    position: relative;
    display: flex;
  }

  input {
    width: 100%;
    border-radius: ${({borderRadius:t})=>t[4]};
    color: inherit;
    background: transparent;
    border: 1px solid ${({tokens:t})=>t.theme.borderPrimary};
    caret-color: ${({tokens:t})=>t.core.textAccentPrimary};
    padding: ${({spacing:t})=>t[3]} ${({spacing:t})=>t[3]}
      ${({spacing:t})=>t[3]} ${({spacing:t})=>t[10]};
    font-size: ${({textSize:t})=>t.large};
    line-height: ${({typography:t})=>t["lg-regular"].lineHeight};
    letter-spacing: ${({typography:t})=>t["lg-regular"].letterSpacing};
    font-weight: ${({fontWeight:t})=>t.regular};
    font-family: ${({fontFamily:t})=>t.regular};
  }

  input[data-size='lg'] {
    padding: ${({spacing:t})=>t[4]} ${({spacing:t})=>t[3]}
      ${({spacing:t})=>t[4]} ${({spacing:t})=>t[10]};
  }

  @media (hover: hover) and (pointer: fine) {
    input:hover:enabled {
      border: 1px solid ${({tokens:t})=>t.theme.borderSecondary};
    }
  }

  input:disabled {
    cursor: unset;
    border: 1px solid ${({tokens:t})=>t.theme.borderPrimary};
  }

  input::placeholder {
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  input:focus:enabled {
    border: 1px solid ${({tokens:t})=>t.theme.borderSecondary};
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    -webkit-box-shadow: 0px 0px 0px 4px ${({tokens:t})=>t.core.foregroundAccent040};
    -moz-box-shadow: 0px 0px 0px 4px ${({tokens:t})=>t.core.foregroundAccent040};
    box-shadow: 0px 0px 0px 4px ${({tokens:t})=>t.core.foregroundAccent040};
  }

  div.wui-input-text-container:has(input:disabled) {
    opacity: 0.5;
  }

  wui-icon.wui-input-text-left-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    left: ${({spacing:t})=>t[4]};
    color: ${({tokens:t})=>t.theme.iconDefault};
  }

  button.wui-input-text-submit-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: ${({spacing:t})=>t[3]};
    width: 24px;
    height: 24px;
    border: none;
    background: transparent;
    border-radius: ${({borderRadius:t})=>t[2]};
    color: ${({tokens:t})=>t.core.textAccentPrimary};
  }

  button.wui-input-text-submit-button:disabled {
    opacity: 1;
  }

  button.wui-input-text-submit-button.loading wui-icon {
    animation: spin 1s linear infinite;
  }

  button.wui-input-text-submit-button:hover {
    background: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  input:has(+ .wui-input-text-submit-button) {
    padding-right: ${({spacing:t})=>t[12]};
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  input[type='search']::-webkit-search-decoration,
  input[type='search']::-webkit-search-cancel-button,
  input[type='search']::-webkit-search-results-button,
  input[type='search']::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  /* -- Keyframes --------------------------------------------------- */
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
`,ki=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Un=class extends ye{constructor(){super(...arguments),this.inputElementRef=T3(),this.disabled=!1,this.loading=!1,this.placeholder="",this.type="text",this.value="",this.size="md"}render(){return F` <div class="wui-input-text-container">
        ${this.templateLeftIcon()}
        <input
          data-size=${this.size}
          ${R3(this.inputElementRef)}
          data-testid="wui-input-text"
          type=${this.type}
          enterkeyhint=${Ne(this.enterKeyHint)}
          ?disabled=${this.disabled}
          placeholder=${this.placeholder}
          @input=${this.dispatchInputChangeEvent.bind(this)}
          @keydown=${this.onKeyDown}
          .value=${this.value||""}
        />
        ${this.templateSubmitButton()}
        <slot class="wui-input-text-slot"></slot>
      </div>
      ${this.templateError()} ${this.templateWarning()}`}templateLeftIcon(){return this.icon?F`<wui-icon
        class="wui-input-text-left-icon"
        size="md"
        data-size=${this.size}
        color="inherit"
        name=${this.icon}
      ></wui-icon>`:null}templateSubmitButton(){return this.onSubmit?F`<button
        class="wui-input-text-submit-button ${this.loading?"loading":""}"
        @click=${this.onSubmit?.bind(this)}
        ?disabled=${this.disabled||this.loading}
      >
        ${this.loading?F`<wui-icon name="spinner" size="md"></wui-icon>`:F`<wui-icon name="chevronRight" size="md"></wui-icon>`}
      </button>`:null}templateError(){return this.errorText?F`<wui-text variant="sm-regular" color="error">${this.errorText}</wui-text>`:null}templateWarning(){return this.warningText?F`<wui-text variant="sm-regular" color="warning">${this.warningText}</wui-text>`:null}dispatchInputChangeEvent(){this.dispatchEvent(new CustomEvent("inputChange",{detail:this.inputElementRef.value?.value,bubbles:!0,composed:!0}))}};Un.styles=[at,hn,Pfe],ki([z()],Un.prototype,"icon",void 0),ki([z({type:Boolean})],Un.prototype,"disabled",void 0),ki([z({type:Boolean})],Un.prototype,"loading",void 0),ki([z()],Un.prototype,"placeholder",void 0),ki([z()],Un.prototype,"type",void 0),ki([z()],Un.prototype,"value",void 0),ki([z()],Un.prototype,"errorText",void 0),ki([z()],Un.prototype,"warningText",void 0),ki([z()],Un.prototype,"onSubmit",void 0),ki([z()],Un.prototype,"size",void 0),ki([z({attribute:!1})],Un.prototype,"onKeyDown",void 0),Un=ki([we("wui-input-text")],Un);var Nfe=Me`
  :host {
    position: relative;
    display: inline-block;
    width: 100%;
  }

  wui-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: ${({spacing:t})=>t[3]};
    color: ${({tokens:t})=>t.theme.iconDefault};
    cursor: pointer;
    padding: ${({spacing:t})=>t[2]};
    background-color: transparent;
    border-radius: ${({borderRadius:t})=>t[4]};
    transition: background-color ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
  }

  @media (hover: hover) {
    wui-icon:hover {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    }
  }
`,iN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let mw=class extends ye{constructor(){super(...arguments),this.inputComponentRef=T3(),this.inputValue=""}render(){return F`
      <wui-input-text
        ${R3(this.inputComponentRef)}
        placeholder="Search wallet"
        icon="search"
        type="search"
        enterKeyHint="search"
        size="sm"
        @inputChange=${this.onInputChange}
      >
        ${this.inputValue?F`<wui-icon
              @click=${this.clearValue}
              color="inherit"
              size="sm"
              name="close"
            ></wui-icon>`:null}
      </wui-input-text>
    `}onInputChange(e){this.inputValue=e.detail||""}clearValue(){const r=this.inputComponentRef.value?.inputElementRef.value;r&&(r.value="",this.inputValue="",r.focus(),r.dispatchEvent(new Event("input")))}};mw.styles=[at,Nfe],iN([z()],mw.prototype,"inputValue",void 0),mw=iN([we("wui-search-bar")],mw);const Tfe=mt`<svg  viewBox="0 0 48 54" fill="none">
  <path
    d="M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z"
  />
</svg>`;var kfe=Me`
  :host {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 104px;
    width: 104px;
    row-gap: ${({spacing:t})=>t[2]};
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    border-radius: ${({borderRadius:t})=>t[5]};
    position: relative;
  }

  wui-shimmer[data-type='network'] {
    border: none;
    -webkit-clip-path: var(--apkt-path-network);
    clip-path: var(--apkt-path-network);
  }

  svg {
    position: absolute;
    width: 48px;
    height: 54px;
    z-index: 1;
  }

  svg > path {
    stroke: ${({tokens:t})=>t.theme.foregroundSecondary};
    stroke-width: 1px;
  }

  @media (max-width: 350px) {
    :host {
      width: 100%;
    }
  }
`,sN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let ww=class extends ye{constructor(){super(...arguments),this.type="wallet"}render(){return F`
      ${this.shimmerTemplate()}
      <wui-shimmer width="80px" height="20px"></wui-shimmer>
    `}shimmerTemplate(){return this.type==="network"?F` <wui-shimmer data-type=${this.type} width="48px" height="54px"></wui-shimmer>
        ${Tfe}`:F`<wui-shimmer width="56px" height="56px"></wui-shimmer>`}};ww.styles=[at,hn,kfe],sN([z()],ww.prototype,"type",void 0),ww=sN([we("wui-card-select-loader")],ww);var Rfe=un`
  :host {
    display: grid;
    width: inherit;
    height: inherit;
  }
`,Ri=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ln=class extends ye{render(){return this.style.cssText=`
      grid-template-rows: ${this.gridTemplateRows};
      grid-template-columns: ${this.gridTemplateColumns};
      justify-items: ${this.justifyItems};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      align-content: ${this.alignContent};
      column-gap: ${this.columnGap&&`var(--apkt-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--apkt-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--apkt-spacing-${this.gap})`};
      padding-top: ${this.padding&&ir.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&ir.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&ir.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&ir.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&ir.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&ir.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&ir.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&ir.getSpacingStyles(this.margin,3)};
    `,F`<slot></slot>`}};Ln.styles=[at,Rfe],Ri([z()],Ln.prototype,"gridTemplateRows",void 0),Ri([z()],Ln.prototype,"gridTemplateColumns",void 0),Ri([z()],Ln.prototype,"justifyItems",void 0),Ri([z()],Ln.prototype,"alignItems",void 0),Ri([z()],Ln.prototype,"justifyContent",void 0),Ri([z()],Ln.prototype,"alignContent",void 0),Ri([z()],Ln.prototype,"columnGap",void 0),Ri([z()],Ln.prototype,"rowGap",void 0),Ri([z()],Ln.prototype,"gap",void 0),Ri([z()],Ln.prototype,"padding",void 0),Ri([z()],Ln.prototype,"margin",void 0),Ln=Ri([we("wui-grid")],Ln);var Dfe=Me`
  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 104px;
    row-gap: ${({spacing:t})=>t[2]};
    padding: ${({spacing:t})=>t[3]} ${({spacing:t})=>t[0]};
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    border-radius: clamp(0px, ${({borderRadius:t})=>t[4]}, 20px);
    transition:
      color ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-1"]},
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]},
      border-radius ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]};
    will-change: background-color, color, border-radius;
    outline: none;
    border: none;
  }

  button > wui-flex > wui-text {
    color: ${({tokens:t})=>t.theme.textPrimary};
    max-width: 86px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    justify-content: center;
  }

  button > wui-flex > wui-text.certified {
    max-width: 66px;
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    }
  }

  button:disabled > wui-flex > wui-text {
    color: ${({tokens:t})=>t.core.glass010};
  }

  [data-selected='true'] {
    background-color: ${({colors:t})=>t.accent020};
  }

  @media (hover: hover) and (pointer: fine) {
    [data-selected='true']:hover:enabled {
      background-color: ${({colors:t})=>t.accent010};
    }
  }

  [data-selected='true']:active:enabled {
    background-color: ${({colors:t})=>t.accent010};
  }

  @media (max-width: 350px) {
    button {
      width: 100%;
    }
  }
`,pp=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let iu=class extends ye{constructor(){super(),this.observer=new IntersectionObserver(()=>{}),this.visible=!1,this.imageSrc=void 0,this.imageLoading=!1,this.wallet=void 0,this.observer=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting?(this.visible=!0,this.fetchImageSrc()):this.visible=!1})},{threshold:.01})}firstUpdated(){this.observer.observe(this)}disconnectedCallback(){this.observer.disconnect()}render(){const e=this.wallet?.badge_type==="certified";return F`
      <button>
        ${this.imageTemplate()}
        <wui-flex flexDirection="row" alignItems="center" justifyContent="center" gap="1">
          <wui-text
            variant="md-regular"
            color="inherit"
            class=${Ne(e?"certified":void 0)}
            >${this.wallet?.name}</wui-text
          >
          ${e?F`<wui-icon size="sm" name="walletConnectBrown"></wui-icon>`:null}
        </wui-flex>
      </button>
    `}imageTemplate(){return!this.visible&&!this.imageSrc||this.imageLoading?this.shimmerTemplate():F`
      <wui-wallet-image
        size="lg"
        imageSrc=${Ne(this.imageSrc)}
        name=${this.wallet?.name}
        .installed=${this.wallet?.installed}
        badgeSize="sm"
      >
      </wui-wallet-image>
    `}shimmerTemplate(){return F`<wui-shimmer width="56px" height="56px"></wui-shimmer>`}async fetchImageSrc(){this.wallet&&(this.imageSrc=Jt.getWalletImage(this.wallet),!this.imageSrc&&(this.imageLoading=!0,this.imageSrc=await Jt.fetchWalletImage(this.wallet.image_id),this.imageLoading=!1))}};iu.styles=Dfe,pp([pe()],iu.prototype,"visible",void 0),pp([pe()],iu.prototype,"imageSrc",void 0),pp([pe()],iu.prototype,"imageLoading",void 0),pp([z()],iu.prototype,"wallet",void 0),iu=pp([we("w3m-all-wallets-list-item")],iu);var Bfe=Me`
  wui-grid {
    max-height: clamp(360px, 400px, 80vh);
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  w3m-all-wallets-list-item {
    opacity: 0;
    animation-duration: ${({durations:t})=>t.xl};
    animation-timing-function: ${({easings:t})=>t["ease-inout-power-2"]};
    animation-name: fade-in;
    animation-fill-mode: forwards;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  wui-loading-spinner {
    padding-top: ${({spacing:t})=>t[4]};
    padding-bottom: ${({spacing:t})=>t[4]};
    justify-content: center;
    grid-column: 1 / span 4;
  }
`,Xh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const oN="local-paginator";let Nc=class extends ye{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.loading=!ce.state.wallets.length,this.wallets=ce.state.wallets,this.recommended=ce.state.recommended,this.featured=ce.state.featured,this.filteredWallets=ce.state.filteredWallets,this.unsubscribe.push(ce.subscribeKey("wallets",e=>this.wallets=e),ce.subscribeKey("recommended",e=>this.recommended=e),ce.subscribeKey("featured",e=>this.featured=e),ce.subscribeKey("filteredWallets",e=>this.filteredWallets=e))}firstUpdated(){this.initialFetch(),this.createPaginationObserver()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.paginationObserver?.disconnect()}render(){return F`
      <wui-grid
        data-scroll=${!this.loading}
        .padding=${["0","3","3","3"]}
        gap="2"
        justifyContent="space-between"
      >
        ${this.loading?this.shimmerTemplate(16):this.walletsTemplate()}
        ${this.paginationLoaderTemplate()}
      </wui-grid>
    `}async initialFetch(){this.loading=!0;const e=this.shadowRoot?.querySelector("wui-grid");e&&(await ce.fetchWalletsByPage({page:1}),await e.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.loading=!1,e.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}shimmerTemplate(e,r){return[...Array(e)].map(()=>F`
        <wui-card-select-loader type="wallet" id=${Ne(r)}></wui-card-select-loader>
      `)}getWallets(){const e=[...this.featured,...this.recommended];this.filteredWallets?.length>0?e.push(...this.filteredWallets):e.push(...this.wallets);const r=ne.uniqueBy(e,"id"),n=xc.markWalletsAsInstalled(r);return xc.markWalletsWithDisplayIndex(n)}walletsTemplate(){return this.getWallets().map(r=>F`
        <w3m-all-wallets-list-item
          data-testid="wallet-search-item-${r.id}"
          @click=${()=>this.onConnectWallet(r)}
          .wallet=${r}
        ></w3m-all-wallets-list-item>
      `)}paginationLoaderTemplate(){const{wallets:e,recommended:r,featured:n,count:i}=ce.state,s=window.innerWidth<352?3:4,o=e.length+r.length;let c=Math.ceil(o/s)*s-o+s;return c-=e.length?n.length%s:0,i===0&&n.length>0?null:i===0||[...n,...e,...r].length<i?this.shimmerTemplate(c,oN):null}createPaginationObserver(){const e=this.shadowRoot?.querySelector(`#${oN}`);e&&(this.paginationObserver=new IntersectionObserver(([r])=>{if(r?.isIntersecting&&!this.loading){const{page:n,count:i,wallets:s}=ce.state;s.length<i&&ce.fetchWalletsByPage({page:n+1})}}),this.paginationObserver.observe(e))}onConnectWallet(e){te.selectWalletConnector(e)}};Nc.styles=Bfe,Xh([pe()],Nc.prototype,"loading",void 0),Xh([pe()],Nc.prototype,"wallets",void 0),Xh([pe()],Nc.prototype,"recommended",void 0),Xh([pe()],Nc.prototype,"featured",void 0),Xh([pe()],Nc.prototype,"filteredWallets",void 0),Nc=Xh([we("w3m-all-wallets-list")],Nc);var Mfe=un`
  wui-grid,
  wui-loading-spinner,
  wui-flex {
    height: 360px;
  }

  wui-grid {
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
`,yw=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Jh=class extends ye{constructor(){super(...arguments),this.prevQuery="",this.prevBadge=void 0,this.loading=!0,this.query=""}render(){return this.onSearch(),this.loading?F`<wui-loading-spinner color="accent-primary"></wui-loading-spinner>`:this.walletsTemplate()}async onSearch(){(this.query.trim()!==this.prevQuery.trim()||this.badge!==this.prevBadge)&&(this.prevQuery=this.query,this.prevBadge=this.badge,this.loading=!0,await ce.searchWallet({search:this.query,badge:this.badge}),this.loading=!1)}walletsTemplate(){const{search:e}=ce.state,r=xc.markWalletsAsInstalled(e);return e.length?F`
      <wui-grid
        data-testid="wallet-list"
        .padding=${["0","3","3","3"]}
        rowGap="4"
        columngap="2"
        justifyContent="space-between"
      >
        ${r.map(n=>F`
            <w3m-all-wallets-list-item
              @click=${()=>this.onConnectWallet(n)}
              .wallet=${n}
              data-testid="wallet-search-item-${n.id}"
            ></w3m-all-wallets-list-item>
          `)}
      </wui-grid>
    `:F`
        <wui-flex
          data-testid="no-wallet-found"
          justifyContent="center"
          alignItems="center"
          gap="3"
          flexDirection="column"
        >
          <wui-icon-box size="lg" color="default" icon="wallet"></wui-icon-box>
          <wui-text data-testid="no-wallet-found-text" color="secondary" variant="md-medium">
            No Wallet found
          </wui-text>
        </wui-flex>
      `}onConnectWallet(e){te.selectWalletConnector(e)}};Jh.styles=Mfe,yw([pe()],Jh.prototype,"loading",void 0),yw([z()],Jh.prototype,"query",void 0),yw([z()],Jh.prototype,"badge",void 0),Jh=yw([we("w3m-all-wallets-search")],Jh);var D3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let fp=class extends ye{constructor(){super(...arguments),this.search="",this.badge=void 0,this.onDebouncedSearch=ne.debounce(e=>{this.search=e})}render(){const e=this.search.length>=2;return F`
      <wui-flex .padding=${["1","3","3","3"]} gap="2" alignItems="center">
        <wui-search-bar @inputChange=${this.onInputChange.bind(this)}></wui-search-bar>
        <wui-certified-switch
          ?checked=${this.badge==="certified"}
          @certifiedSwitchChange=${this.onCertifiedSwitchChange.bind(this)}
          data-testid="wui-certified-switch"
        ></wui-certified-switch>
        ${this.qrButtonTemplate()}
      </wui-flex>
      ${e||this.badge?F`<w3m-all-wallets-search
            query=${this.search}
            .badge=${this.badge}
          ></w3m-all-wallets-search>`:F`<w3m-all-wallets-list .badge=${this.badge}></w3m-all-wallets-list>`}
    `}onInputChange(e){this.onDebouncedSearch(e.detail)}onCertifiedSwitchChange(e){e.detail?(this.badge="certified",We.showSvg("Only WalletConnect certified",{icon:"walletConnectBrown",iconColor:"accent-100"})):this.badge=void 0}qrButtonTemplate(){return ne.isMobile()?F`
        <wui-icon-box
          size="xl"
          iconSize="xl"
          color="accent-primary"
          icon="qrCode"
          border
          borderColor="wui-accent-glass-010"
          @click=${this.onWalletConnectQr.bind(this)}
        ></wui-icon-box>
      `:null}onWalletConnectQr(){J.push("ConnectingWalletConnect")}};D3([pe()],fp.prototype,"search",void 0),D3([pe()],fp.prototype,"badge",void 0),fp=D3([we("w3m-all-wallets-view")],fp);var Ufe=Me`
  :host {
    width: 100%;
  }

  button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: ${({spacing:t})=>t[3]};
    width: 100%;
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    border-radius: ${({borderRadius:t})=>t[4]};
    transition:
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      scale ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color, scale;
  }

  wui-text {
    text-transform: capitalize;
  }

  wui-image {
    color: ${({tokens:t})=>t.theme.textPrimary};
  }

  @media (hover: hover) {
    button:hover:enabled {
      background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    }
  }

  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Bs=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Di=class extends ye{constructor(){super(...arguments),this.imageSrc="google",this.loading=!1,this.disabled=!1,this.rightIcon=!0,this.rounded=!1,this.fullSize=!1}render(){return this.dataset.rounded=this.rounded?"true":"false",F`
      <button
        ?disabled=${this.loading?!0:!!this.disabled}
        data-loading=${this.loading}
        tabindex=${Ne(this.tabIdx)}
      >
        <wui-flex gap="2" alignItems="center">
          ${this.templateLeftIcon()}
          <wui-flex gap="1">
            <slot></slot>
          </wui-flex>
        </wui-flex>
        ${this.templateRightIcon()}
      </button>
    `}templateLeftIcon(){return this.icon?F`<wui-image
        icon=${this.icon}
        iconColor=${Ne(this.iconColor)}
        ?boxed=${!0}
        ?rounded=${this.rounded}
      ></wui-image>`:F`<wui-image
      ?boxed=${!0}
      ?rounded=${this.rounded}
      ?fullSize=${this.fullSize}
      src=${this.imageSrc}
    ></wui-image>`}templateRightIcon(){return this.rightIcon?this.loading?F`<wui-loading-spinner size="md" color="accent-primary"></wui-loading-spinner>`:F`<wui-icon name="chevronRight" size="lg" color="default"></wui-icon>`:null}};Di.styles=[at,hn,Ufe],Bs([z()],Di.prototype,"imageSrc",void 0),Bs([z()],Di.prototype,"icon",void 0),Bs([z()],Di.prototype,"iconColor",void 0),Bs([z({type:Boolean})],Di.prototype,"loading",void 0),Bs([z()],Di.prototype,"tabIdx",void 0),Bs([z({type:Boolean})],Di.prototype,"disabled",void 0),Bs([z({type:Boolean})],Di.prototype,"rightIcon",void 0),Bs([z({type:Boolean})],Di.prototype,"rounded",void 0),Bs([z({type:Boolean})],Di.prototype,"fullSize",void 0),Di=Bs([we("wui-list-item")],Di);var Lfe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let B3=class extends ye{constructor(){super(...arguments),this.wallet=J.state.data?.wallet}render(){if(!this.wallet)throw new Error("w3m-downloads-view");return F`
      <wui-flex gap="2" flexDirection="column" .padding=${["3","3","4","3"]}>
        ${this.chromeTemplate()} ${this.iosTemplate()} ${this.androidTemplate()}
        ${this.homepageTemplate()}
      </wui-flex>
    `}chromeTemplate(){return this.wallet?.chrome_store?F`<wui-list-item
      variant="icon"
      icon="chromeStore"
      iconVariant="square"
      @click=${this.onChromeStore.bind(this)}
      chevron
    >
      <wui-text variant="md-medium" color="primary">Chrome Extension</wui-text>
    </wui-list-item>`:null}iosTemplate(){return this.wallet?.app_store?F`<wui-list-item
      variant="icon"
      icon="appStore"
      iconVariant="square"
      @click=${this.onAppStore.bind(this)}
      chevron
    >
      <wui-text variant="md-medium" color="primary">iOS App</wui-text>
    </wui-list-item>`:null}androidTemplate(){return this.wallet?.play_store?F`<wui-list-item
      variant="icon"
      icon="playStore"
      iconVariant="square"
      @click=${this.onPlayStore.bind(this)}
      chevron
    >
      <wui-text variant="md-medium" color="primary">Android App</wui-text>
    </wui-list-item>`:null}homepageTemplate(){return this.wallet?.homepage?F`
      <wui-list-item
        variant="icon"
        icon="browser"
        iconVariant="square-blue"
        @click=${this.onHomePage.bind(this)}
        chevron
      >
        <wui-text variant="md-medium" color="primary">Website</wui-text>
      </wui-list-item>
    `:null}onChromeStore(){this.wallet?.chrome_store&&ne.openHref(this.wallet.chrome_store,"_blank")}onAppStore(){this.wallet?.app_store&&ne.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&ne.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&ne.openHref(this.wallet.homepage,"_blank")}};B3=Lfe([we("w3m-downloads-view")],B3);var Ffe=Object.freeze({__proto__:null,get W3mConnectingWcBasicView(){return hp},get W3mAllWalletsView(){return fp},get W3mDownloadsView(){return B3}}),Hfe=Me`
  :host {
    display: block;
    border-radius: clamp(0px, ${({borderRadius:t})=>t[8]}, 44px);
    box-shadow: 0 0 0 1px ${({tokens:t})=>t.theme.foregroundPrimary};
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    overflow: hidden;
  }
`,jfe=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let M3=class extends ye{render(){return F`<slot></slot>`}};M3.styles=[at,Hfe],M3=jfe([we("wui-card")],M3);var Vfe=Me`
  :host {
    width: 100%;
  }

  :host > wui-flex {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: ${({spacing:t})=>t[2]};
    padding: ${({spacing:t})=>t[3]};
    border-radius: ${({borderRadius:t})=>t[6]};
    border: 1px solid ${({tokens:t})=>t.theme.borderPrimary};
    box-sizing: border-box;
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.25);
    color: ${({tokens:t})=>t.theme.textPrimary};
  }

  :host > wui-flex[data-type='info'] {
    .icon-box {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};

      wui-icon {
        color: ${({tokens:t})=>t.theme.iconDefault};
      }
    }
  }
  :host > wui-flex[data-type='success'] {
    .icon-box {
      background-color: ${({tokens:t})=>t.core.backgroundSuccess};

      wui-icon {
        color: ${({tokens:t})=>t.core.borderSuccess};
      }
    }
  }
  :host > wui-flex[data-type='warning'] {
    .icon-box {
      background-color: ${({tokens:t})=>t.core.backgroundWarning};

      wui-icon {
        color: ${({tokens:t})=>t.core.borderWarning};
      }
    }
  }
  :host > wui-flex[data-type='error'] {
    .icon-box {
      background-color: ${({tokens:t})=>t.core.backgroundError};

      wui-icon {
        color: ${({tokens:t})=>t.core.borderError};
      }
    }
  }

  wui-flex {
    width: 100%;
  }

  wui-text {
    word-break: break-word;
    flex: 1;
  }

  .close {
    cursor: pointer;
    color: ${({tokens:t})=>t.theme.iconDefault};
  }

  .icon-box {
    height: 40px;
    width: 40px;
    border-radius: ${({borderRadius:t})=>t[2]};
    background-color: var(--local-icon-bg-value);
  }
`,U3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const zfe={info:"info",success:"checkmark",warning:"warningCircle",error:"warning"};let gp=class extends ye{constructor(){super(...arguments),this.message="",this.type="info"}render(){return F`
      <wui-flex
        data-type=${Ne(this.type)}
        flexDirection="row"
        justifyContent="space-between"
        alignItems="center"
        gap="2"
      >
        <wui-flex columnGap="2" flexDirection="row" alignItems="center">
          <wui-flex
            flexDirection="row"
            alignItems="center"
            justifyContent="center"
            class="icon-box"
          >
            <wui-icon color="inherit" size="md" name=${zfe[this.type]}></wui-icon>
          </wui-flex>
          <wui-text variant="md-medium" color="inherit" data-testid="wui-alertbar-text"
            >${this.message}</wui-text
          >
        </wui-flex>
        <wui-icon
          class="close"
          color="inherit"
          size="sm"
          name="close"
          @click=${this.onClose}
        ></wui-icon>
      </wui-flex>
    `}onClose(){Qt.close()}};gp.styles=[at,Vfe],U3([z()],gp.prototype,"message",void 0),U3([z()],gp.prototype,"type",void 0),gp=U3([we("wui-alertbar")],gp);var qfe=Me`
  :host {
    display: block;
    position: absolute;
    top: ${({spacing:t})=>t[3]};
    left: ${({spacing:t})=>t[4]};
    right: ${({spacing:t})=>t[4]};
    opacity: 0;
    pointer-events: none;
  }
`,aN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const Wfe={info:{backgroundColor:"fg-350",iconColor:"fg-325",icon:"info"},success:{backgroundColor:"success-glass-reown-020",iconColor:"success-125",icon:"checkmark"},warning:{backgroundColor:"warning-glass-reown-020",iconColor:"warning-100",icon:"warningCircle"},error:{backgroundColor:"error-glass-reown-020",iconColor:"error-125",icon:"warning"}};let bw=class extends ye{constructor(){super(),this.unsubscribe=[],this.open=Qt.state.open,this.onOpen(!0),this.unsubscribe.push(Qt.subscribeKey("open",e=>{this.open=e,this.onOpen(!1)}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:r}=Qt.state,n=Wfe[r];return F`
      <wui-alertbar
        message=${e}
        backgroundColor=${n?.backgroundColor}
        iconColor=${n?.iconColor}
        icon=${n?.icon}
        type=${r}
      ></wui-alertbar>
    `}onOpen(e){this.open?(this.animate([{opacity:0,transform:"scale(0.85)"},{opacity:1,transform:"scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: auto"):e||(this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: none")}};bw.styles=qfe,aN([pe()],bw.prototype,"open",void 0),bw=aN([we("w3m-alertbar")],bw);var Zfe=Me`
  button {
    background-color: transparent;
    padding: ${({spacing:t})=>t[1]};
  }

  button:focus-visible {
    box-shadow: 0 0 0 4px ${({tokens:t})=>t.core.foregroundAccent020};
  }

  button[data-variant='accent']:hover:enabled,
  button[data-variant='accent']:focus-visible {
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
  }

  button[data-variant='primary']:hover:enabled,
  button[data-variant='primary']:focus-visible,
  button[data-variant='secondary']:hover:enabled,
  button[data-variant='secondary']:focus-visible {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  button[data-size='xs'] > wui-icon {
    width: 8px;
    height: 8px;
  }

  button[data-size='sm'] > wui-icon {
    width: 12px;
    height: 12px;
  }

  button[data-size='xs'],
  button[data-size='sm'] {
    border-radius: ${({borderRadius:t})=>t[1]};
  }

  button[data-size='md'],
  button[data-size='lg'] {
    border-radius: ${({borderRadius:t})=>t[2]};
  }

  button[data-size='md'] > wui-icon {
    width: 16px;
    height: 16px;
  }

  button[data-size='lg'] > wui-icon {
    width: 20px;
    height: 20px;
  }

  button:disabled {
    background-color: transparent;
    cursor: not-allowed;
    opacity: 0.5;
  }

  button:hover:not(:disabled) {
    background-color: var(--wui-color-accent-glass-015);
  }

  button:focus-visible:not(:disabled) {
    background-color: var(--wui-color-accent-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
`,Qh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Tc=class extends ye{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.icon="copy",this.iconColor="default",this.variant="accent"}render(){const e={accent:"accent-primary",primary:"inverse",secondary:"default"};return F`
      <button data-variant=${this.variant} ?disabled=${this.disabled} data-size=${this.size}>
        <wui-icon
          color=${e[this.variant]||this.iconColor}
          size=${this.size}
          name=${this.icon}
        ></wui-icon>
      </button>
    `}};Tc.styles=[at,hn,Zfe],Qh([z()],Tc.prototype,"size",void 0),Qh([z({type:Boolean})],Tc.prototype,"disabled",void 0),Qh([z()],Tc.prototype,"icon",void 0),Qh([z()],Tc.prototype,"iconColor",void 0),Qh([z()],Tc.prototype,"variant",void 0),Tc=Qh([we("wui-icon-link")],Tc);var Kfe=Me`
  button {
    display: block;
    display: flex;
    align-items: center;
    padding: ${({spacing:t})=>t[1]};
    transition: background-color ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
    will-change: background-color;
    border-radius: ${({borderRadius:t})=>t[32]};
  }

  wui-image {
    border-radius: 100%;
  }

  wui-text {
    padding-left: ${({spacing:t})=>t[1]};
  }

  .left-icon-container,
  .right-icon-container {
    width: 24px;
    height: 24px;
    justify-content: center;
    align-items: center;
  }

  wui-icon {
    color: ${({tokens:t})=>t.theme.iconDefault};
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='lg'] {
    height: 32px;
  }

  button[data-size='md'] {
    height: 28px;
  }

  button[data-size='sm'] {
    height: 24px;
  }

  button[data-size='lg'] wui-image {
    width: 24px;
    height: 24px;
  }

  button[data-size='md'] wui-image {
    width: 20px;
    height: 20px;
  }

  button[data-size='sm'] wui-image {
    width: 16px;
    height: 16px;
  }

  button[data-size='lg'] .left-icon-container {
    width: 24px;
    height: 24px;
  }

  button[data-size='md'] .left-icon-container {
    width: 20px;
    height: 20px;
  }

  button[data-size='sm'] .left-icon-container {
    width: 16px;
    height: 16px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-type='filled-dropdown'] {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  button[data-type='text-dropdown'] {
    background-color: transparent;
  }

  /* -- Focus states --------------------------------------------------- */
  button:focus-visible:enabled {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    box-shadow: 0 0 0 4px ${({tokens:t})=>t.core.foregroundAccent040};
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled,
    button:active:enabled {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    }
  }

  /* -- Disabled states --------------------------------------------------- */
  button:disabled {
    background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    opacity: 0.5;
  }
`,ed=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const Gfe={lg:"lg-regular",md:"md-regular",sm:"sm-regular"},Yfe={lg:"lg",md:"md",sm:"sm"};let kc=class extends ye{constructor(){super(...arguments),this.imageSrc="",this.text="",this.size="lg",this.type="text-dropdown",this.disabled=!1}render(){return F`<button ?disabled=${this.disabled} data-size=${this.size} data-type=${this.type}>
      ${this.imageTemplate()} ${this.textTemplate()}
      <wui-flex class="right-icon-container">
        <wui-icon name="chevronBottom"></wui-icon>
      </wui-flex>
    </button>`}textTemplate(){const e=Gfe[this.size];return this.text?F`<wui-text color="primary" variant=${e}>${this.text}</wui-text>`:null}imageTemplate(){if(this.imageSrc)return F`<wui-image src=${this.imageSrc} alt="select visual"></wui-image>`;const e=Yfe[this.size];return F` <wui-flex class="left-icon-container">
      <wui-icon size=${e} name="networkPlaceholder"></wui-icon>
    </wui-flex>`}};kc.styles=[at,hn,Kfe],ed([z()],kc.prototype,"imageSrc",void 0),ed([z()],kc.prototype,"text",void 0),ed([z()],kc.prototype,"size",void 0),ed([z()],kc.prototype,"type",void 0),ed([z({type:Boolean})],kc.prototype,"disabled",void 0),kc=ed([we("wui-select")],kc);var Xfe=Me`
  :host {
    height: 60px;
  }

  :host > wui-flex {
    box-sizing: border-box;
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
  }

  wui-text {
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
  }

  wui-flex.w3m-header-title {
    transform: translateY(0);
    opacity: 1;
  }

  wui-flex.w3m-header-title[view-direction='prev'] {
    animation:
      slide-down-out 120ms forwards ${({easings:t})=>t["ease-out-power-2"]},
      slide-down-in 120ms forwards ${({easings:t})=>t["ease-out-power-2"]};
    animation-delay: 0ms, 200ms;
  }

  wui-flex.w3m-header-title[view-direction='next'] {
    animation:
      slide-up-out 120ms forwards ${({easings:t})=>t["ease-out-power-2"]},
      slide-up-in 120ms forwards ${({easings:t})=>t["ease-out-power-2"]};
    animation-delay: 0ms, 200ms;
  }

  wui-icon-link[data-hidden='true'] {
    opacity: 0 !important;
    pointer-events: none;
  }

  @keyframes slide-up-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(3px);
      opacity: 0;
    }
  }

  @keyframes slide-up-in {
    from {
      transform: translateY(-3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-down-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(-3px);
      opacity: 0;
    }
  }

  @keyframes slide-down-in {
    from {
      transform: translateY(3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,Rc=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const Jfe=["SmartSessionList"];function cN(){const t=J.state.data?.connector?.name,e=J.state.data?.wallet?.name,r=J.state.data?.network?.name,n=e??t,i=te.getConnectors();return{Connect:`Connect ${i.length===1&&i[0]?.id==="w3m-email"?"Email":""} Wallet`,Create:"Create Wallet",ChooseAccountName:void 0,Account:void 0,AccountSettings:void 0,AllWallets:"All Wallets",ApproveTransaction:"Approve Transaction",BuyInProgress:"Buy",ConnectingExternal:n??"Connect Wallet",ConnectingWalletConnect:n??"WalletConnect",ConnectingWalletConnectBasic:"WalletConnect",ConnectingSiwe:"Sign In",Convert:"Convert",ConvertSelectToken:"Select token",ConvertPreview:"Preview Convert",Downloads:n?`Get ${n}`:"Downloads",EmailLogin:"Email Login",EmailVerifyOtp:"Confirm Email",EmailVerifyDevice:"Register Device",GetWallet:"Get a Wallet",Networks:"Choose Network",OnRampProviders:"Choose Provider",OnRampActivity:"Activity",OnRampTokenSelect:"Select Token",OnRampFiatSelect:"Select Currency",Pay:"How you pay",ProfileWallets:"Wallets",SwitchNetwork:r??"Switch Network",Transactions:"Activity",UnsupportedChain:"Switch Network",UpgradeEmailWallet:"Upgrade Your Wallet",UpdateEmailWallet:"Edit Email",UpdateEmailPrimaryOtp:"Confirm Current Email",UpdateEmailSecondaryOtp:"Confirm New Email",WhatIsABuy:"What is Buy?",RegisterAccountName:"Choose Name",RegisterAccountNameSuccess:"",WalletReceive:"Receive",WalletCompatibleNetworks:"Compatible Networks",Swap:"Swap",SwapSelectToken:"Select Token",SwapPreview:"Preview Swap",WalletSend:"Send",WalletSendPreview:"Review Send",WalletSendSelectToken:"Select Token",WhatIsANetwork:"What is a network?",WhatIsAWallet:"What is a Wallet?",ConnectWallets:"Connect Wallet",ConnectSocials:"All Socials",ConnectingSocial:be.state.socialProvider?be.state.socialProvider.charAt(0).toUpperCase()+be.state.socialProvider.slice(1):"Connect Social",ConnectingMultiChain:"Select Chain",ConnectingFarcaster:"Farcaster",SwitchActiveChain:"Switch Chain",SmartSessionCreated:void 0,SmartSessionList:"Smart Sessions",SIWXSignMessage:"Sign In",PayLoading:"Payment in Progress",DataCapture:"Profile",DataCaptureOtpConfirm:"Confirm Email",FundWallet:"Fund Wallet",PayWithExchange:"Deposit from an Exchange",PayWithExchangeSelectAsset:"Select Asset"}}let Ms=class extends ye{constructor(){super(),this.unsubscribe=[],this.heading=cN()[J.state.view],this.network=k.state.activeCaipNetwork,this.networkImage=Jt.getNetworkImage(this.network),this.showBack=!1,this.prevHistoryLength=1,this.view=J.state.view,this.viewDirection="",this.unsubscribe.push(An.subscribeNetworkImages(()=>{this.networkImage=Jt.getNetworkImage(this.network)}),J.subscribeKey("view",e=>{setTimeout(()=>{this.view=e,this.heading=cN()[e]},$c.ANIMATION_DURATIONS.HeaderText),this.onViewChange(),this.onHistoryChange()}),k.subscribeKey("activeCaipNetwork",e=>{this.network=e,this.networkImage=Jt.getNetworkImage(this.network)}))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){return F`
      <wui-flex
        .padding=${["0","5","0","5"]}
        justifyContent="space-between"
        alignItems="center"
      >
        ${this.leftHeaderTemplate()} ${this.titleTemplate()} ${this.rightHeaderTemplate()}
      </wui-flex>
    `}onWalletHelp(){Te.sendEvent({type:"track",event:"CLICK_WALLET_HELP"}),J.push("WhatIsAWallet")}async onClose(){await FO.safeClose()}rightHeaderTemplate(){const e=Y?.state?.features?.smartSessions;return J.state.view!=="Account"||!e?this.closeButtonTemplate():F`<wui-flex>
      <wui-icon-link
        icon="clock"
        variant="primary"
        @click=${()=>J.push("SmartSessionList")}
        data-testid="w3m-header-smart-sessions"
      ></wui-icon-link>
      ${this.closeButtonTemplate()}
    </wui-flex> `}closeButtonTemplate(){return F`
      <wui-icon-link
        icon="close"
        variant="primary"
        @click=${this.onClose.bind(this)}
        data-testid="w3m-header-close"
      ></wui-icon-link>
    `}titleTemplate(){const e=Jfe.includes(this.view);return F`
      <wui-flex
        view-direction="${this.viewDirection}"
        class="w3m-header-title"
        alignItems="center"
        gap="2"
      >
        <wui-text variant="lg-regular" color="primary" data-testid="w3m-header-text">
          ${this.heading}
        </wui-text>
        ${e?F`<wui-tag variant="accent" size="md">Beta</wui-tag>`:null}
      </wui-flex>
    `}leftHeaderTemplate(){const{view:e}=J.state,r=e==="Connect",n=Y.state.enableEmbedded,i=e==="ApproveTransaction",s=e==="ConnectingSiwe",o=e==="Account",a=Y.state.enableNetworkSwitch,c=i||s||r&&n;return o&&a?F`<wui-select
        id="dynamic"
        data-testid="w3m-account-select-network"
        active-network=${Ne(this.network?.name)}
        @click=${this.onNetworks.bind(this)}
        imageSrc=${Ne(this.networkImage)}
      ></wui-select>`:this.showBack&&!c?F`<wui-icon-link
        data-testid="header-back"
        id="dynamic"
        icon="chevronLeft"
        variant="primary"
        @click=${this.onGoBack.bind(this)}
      ></wui-icon-link>`:F`<wui-icon-link
      data-hidden=${!r}
      id="dynamic"
      icon="helpCircle"
      variant="primary"
      @click=${this.onWalletHelp.bind(this)}
    ></wui-icon-link>`}onNetworks(){this.isAllowedNetworkSwitch()&&(Te.sendEvent({type:"track",event:"CLICK_NETWORKS"}),J.push("Networks"))}isAllowedNetworkSwitch(){const e=k.getAllRequestedCaipNetworks(),r=e?e.length>1:!1,n=e?.find(({id:i})=>i===this.network?.id);return r||!n}onViewChange(){const{history:e}=J.state;let r=$c.VIEW_DIRECTION.Next;e.length<this.prevHistoryLength&&(r=$c.VIEW_DIRECTION.Prev),this.prevHistoryLength=e.length,this.viewDirection=r}async onHistoryChange(){const{history:e}=J.state,r=this.shadowRoot?.querySelector("#dynamic");e.length>1&&!this.showBack&&r?(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!0,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"})):e.length<=1&&this.showBack&&r&&(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!1,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}onGoBack(){J.goBack()}};Ms.styles=Xfe,Rc([pe()],Ms.prototype,"heading",void 0),Rc([pe()],Ms.prototype,"network",void 0),Rc([pe()],Ms.prototype,"networkImage",void 0),Rc([pe()],Ms.prototype,"showBack",void 0),Rc([pe()],Ms.prototype,"prevHistoryLength",void 0),Rc([pe()],Ms.prototype,"view",void 0),Rc([pe()],Ms.prototype,"viewDirection",void 0),Ms=Rc([we("w3m-header")],Ms);var Qfe=Me`
  :host {
    display: flex;
    align-items: center;
    gap: ${({spacing:t})=>t[1]};
    padding: ${({spacing:t})=>t[2]} ${({spacing:t})=>t[3]}
      ${({spacing:t})=>t[2]} ${({spacing:t})=>t[2]};
    border-radius: ${({borderRadius:t})=>t[20]};
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
    box-shadow:
      0px 0px 8px 0px rgba(0, 0, 0, 0.1),
      inset 0 0 0 1px ${({tokens:t})=>t.theme.borderPrimary};
    max-width: 320px;
  }

  wui-icon-box {
    border-radius: ${({borderRadius:t})=>t.round} !important;
    overflow: hidden;
  }

  wui-loading-spinner {
    padding: ${({spacing:t})=>t[1]};
    background-color: ${({tokens:t})=>t.core.foregroundAccent010};
    border-radius: ${({borderRadius:t})=>t.round} !important;
  }
`,L3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let mp=class extends ye{constructor(){super(...arguments),this.message="",this.variant="success"}render(){return F`
      ${this.templateIcon()}
      <wui-text variant="lg-regular" color="primary" data-testid="wui-snackbar-message"
        >${this.message}</wui-text
      >
    `}templateIcon(){const e={success:"success",error:"error",warning:"warning",info:"default"},r={success:"checkmark",error:"warning",warning:"warningCircle",info:"info"};return this.variant==="loading"?F`<wui-loading-spinner size="md" color="accent-primary"></wui-loading-spinner>`:F`<wui-icon-box
      size="md"
      color=${e[this.variant]}
      icon=${r[this.variant]}
    ></wui-icon-box>`}};mp.styles=[at,Qfe],L3([z()],mp.prototype,"message",void 0),L3([z()],mp.prototype,"variant",void 0),mp=L3([we("wui-snackbar")],mp);var ege=un`
  :host {
    display: block;
    position: absolute;
    opacity: 0;
    pointer-events: none;
    top: 11px;
    left: 50%;
    width: max-content;
  }
`,lN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let vw=class extends ye{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.open=We.state.open,this.unsubscribe.push(We.subscribeKey("open",e=>{this.open=e,this.onOpen()}))}disconnectedCallback(){clearTimeout(this.timeout),this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:r}=We.state;return F` <wui-snackbar message=${e} variant=${r}></wui-snackbar> `}onOpen(){clearTimeout(this.timeout),this.open?(this.animate([{opacity:0,transform:"translateX(-50%) scale(0.85)"},{opacity:1,transform:"translateX(-50%) scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.timeout&&clearTimeout(this.timeout),We.state.autoClose&&(this.timeout=setTimeout(()=>We.hide(),2500))):this.animate([{opacity:1,transform:"translateX(-50%) scale(1)"},{opacity:0,transform:"translateX(-50%) scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"})}};vw.styles=ege,lN([pe()],vw.prototype,"open",void 0),vw=lN([we("w3m-snackbar")],vw);var tge=Me`
  :host {
    pointer-events: none;
  }

  :host > wui-flex {
    display: var(--w3m-tooltip-display);
    opacity: var(--w3m-tooltip-opacity);
    padding: 9px ${({spacing:t})=>t[3]} 10px ${({spacing:t})=>t[3]};
    border-radius: ${({borderRadius:t})=>t[3]};
    color: ${({tokens:t})=>t.theme.backgroundPrimary};
    position: absolute;
    top: var(--w3m-tooltip-top);
    left: var(--w3m-tooltip-left);
    transform: translate(calc(-50% + var(--w3m-tooltip-parent-width)), calc(-100% - 8px));
    max-width: calc(var(--apkt-modal-width) - ${({spacing:t})=>t[5]});
    transition: opacity ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
    will-change: opacity;
    opacity: 0;
    animation-duration: ${({durations:t})=>t.xl};
    animation-timing-function: ${({easings:t})=>t["ease-out-power-2"]};
    animation-name: fade-in;
    animation-fill-mode: forwards;
  }

  :host([data-variant='shade']) > wui-flex {
    background-color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  :host([data-variant='shade']) > wui-flex > wui-text {
    color: ${({tokens:t})=>t.theme.textSecondary};
  }

  :host([data-variant='fill']) > wui-flex {
    background-color: ${({tokens:t})=>t.theme.textPrimary};
    border: none;
  }

  wui-icon {
    position: absolute;
    width: 12px !important;
    height: 4px !important;
    color: ${({tokens:t})=>t.theme.foregroundPrimary};
  }

  wui-icon[data-placement='top'] {
    bottom: 0px;
    left: 50%;
    transform: translate(-50%, 95%);
  }

  wui-icon[data-placement='bottom'] {
    top: 0;
    left: 50%;
    transform: translate(-50%, -95%) rotate(180deg);
  }

  wui-icon[data-placement='right'] {
    top: 50%;
    left: 0;
    transform: translate(-65%, -50%) rotate(90deg);
  }

  wui-icon[data-placement='left'] {
    top: 50%;
    right: 0%;
    transform: translate(65%, -50%) rotate(270deg);
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
`,wp=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let su=class extends ye{constructor(){super(),this.unsubscribe=[],this.open=F0.state.open,this.message=F0.state.message,this.triggerRect=F0.state.triggerRect,this.variant=F0.state.variant,this.unsubscribe.push(F0.subscribe(e=>{this.open=e.open,this.message=e.message,this.triggerRect=e.triggerRect,this.variant=e.variant}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){this.dataset.variant=this.variant;const e=this.triggerRect.top,r=this.triggerRect.left;return this.style.cssText=`
    --w3m-tooltip-top: ${e}px;
    --w3m-tooltip-left: ${r}px;
    --w3m-tooltip-parent-width: ${this.triggerRect.width/2}px;
    --w3m-tooltip-display: ${this.open?"flex":"none"};
    --w3m-tooltip-opacity: ${this.open?1:0};
    `,F`<wui-flex>
      <wui-icon data-placement="top" size="inherit" name="cursor"></wui-icon>
      <wui-text color="primary" variant="sm-regular">${this.message}</wui-text>
    </wui-flex>`}};su.styles=[tge],wp([pe()],su.prototype,"open",void 0),wp([pe()],su.prototype,"message",void 0),wp([pe()],su.prototype,"triggerRect",void 0),wp([pe()],su.prototype,"variant",void 0),su=wp([we("w3m-tooltip")],su);const yp={getTabsByNamespace(t){return!!t&&t===G.CHAIN.EVM?Y.state.remoteFeatures?.activity===!1?$c.ACCOUNT_TABS.filter(r=>r.label!=="Activity"):$c.ACCOUNT_TABS:[]},isValidReownName(t){return/^[a-zA-Z0-9]+$/gu.test(t)},isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/gu.test(t)},validateReownName(t){return t.replace(/\^/gu,"").toLowerCase().replace(/[^a-zA-Z0-9]/gu,"")},hasFooter(){const t=J.state.view;if($c.VIEWS_WITH_LEGAL_FOOTER.includes(t)){const{termsConditionsUrl:e,privacyPolicyUrl:r}=Y.state,n=Y.state.features?.legalCheckbox;return!(!e&&!r||n)}return $c.VIEWS_WITH_DEFAULT_FOOTER.includes(t)}};var rge=Me`
  :host wui-ux-by-reown {
    padding-top: 0;
  }

  :host wui-ux-by-reown.branding-only {
    padding-top: ${({spacing:t})=>t[3]};
  }

  a {
    text-decoration: none;
    color: ${({tokens:t})=>t.core.textAccentPrimary};
    font-weight: 500;
  }
`,uN=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ew=class extends ye{constructor(){super(),this.unsubscribe=[],this.remoteFeatures=Y.state.remoteFeatures,this.unsubscribe.push(Y.subscribeKey("remoteFeatures",e=>this.remoteFeatures=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{termsConditionsUrl:e,privacyPolicyUrl:r}=Y.state,n=Y.state.features?.legalCheckbox;return!e&&!r||n?F`
        <wui-flex flexDirection="column"> ${this.reownBrandingTemplate(!0)} </wui-flex>
      `:F`
      <wui-flex flexDirection="column">
        <wui-flex .padding=${["4","3","3","3"]} justifyContent="center">
          <wui-text color="secondary" variant="md-regular" align="center">
            By connecting your wallet, you agree to our <br />
            ${this.termsTemplate()} ${this.andTemplate()} ${this.privacyTemplate()}
          </wui-text>
        </wui-flex>
        ${this.reownBrandingTemplate()}
      </wui-flex>
    `}andTemplate(){const{termsConditionsUrl:e,privacyPolicyUrl:r}=Y.state;return e&&r?"and":""}termsTemplate(){const{termsConditionsUrl:e}=Y.state;return e?F`<a href=${e} target="_blank" rel="noopener noreferrer"
      >Terms of Service</a
    >`:null}privacyTemplate(){const{privacyPolicyUrl:e}=Y.state;return e?F`<a href=${e} target="_blank" rel="noopener noreferrer"
      >Privacy Policy</a
    >`:null}reownBrandingTemplate(e=!1){return this.remoteFeatures?.reownBranding?e?F`<wui-ux-by-reown class="branding-only"></wui-ux-by-reown>`:F`<wui-ux-by-reown></wui-ux-by-reown>`:null}};Ew.styles=[rge],uN([pe()],Ew.prototype,"remoteFeatures",void 0),Ew=uN([we("w3m-legal-footer")],Ew);var nge=un``,ige=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let F3=class extends ye{render(){const{termsConditionsUrl:e,privacyPolicyUrl:r}=Y.state;return!e&&!r?null:F`
      <wui-flex
        .padding=${["4","3","3","3"]}
        flexDirection="column"
        alignItems="center"
        justifyContent="center"
        gap="3"
      >
        <wui-text color="secondary" variant="md-regular" align="center">
          We work with the best providers to give you the lowest fees and best support. More options
          coming soon!
        </wui-text>

        ${this.howDoesItWorkTemplate()}
      </wui-flex>
    `}howDoesItWorkTemplate(){return F` <wui-link @click=${this.onWhatIsBuy.bind(this)}>
      <wui-icon size="xs" color="accent-primary" slot="iconLeft" name="helpCircle"></wui-icon>
      How does it work?
    </wui-link>`}onWhatIsBuy(){Te.sendEvent({type:"track",event:"SELECT_WHAT_IS_A_BUY",properties:{isSmartAccount:xn(k.state.activeChain)===Ki.ACCOUNT_TYPES.SMART_ACCOUNT}}),J.push("WhatIsABuy")}};F3.styles=[nge],F3=ige([we("w3m-onramp-providers-footer")],F3);var sge=Me`
  :host {
    display: block;
  }

  div.container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    overflow: hidden;
    height: auto;
    display: block;
  }

  div.container[status='hide'] {
    animation: fade-out;
    animation-duration: var(--apkt-duration-dynamic);
    animation-timing-function: ${({easings:t})=>t["ease-out-power-2"]};
    animation-fill-mode: both;
    animation-delay: 0s;
  }

  div.container[status='show'] {
    animation: fade-in;
    animation-duration: var(--apkt-duration-dynamic);
    animation-timing-function: ${({easings:t})=>t["ease-out-power-2"]};
    animation-fill-mode: both;
    animation-delay: var(--apkt-duration-dynamic);
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      filter: blur(6px);
    }
    to {
      opacity: 1;
      filter: blur(0px);
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
      filter: blur(0px);
    }
    to {
      opacity: 0;
      filter: blur(6px);
    }
  }
`,H3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let bp=class extends ye{constructor(){super(...arguments),this.resizeObserver=void 0,this.unsubscribe=[],this.status="hide",this.view=J.state.view}firstUpdated(){this.status=yp.hasFooter()?"show":"hide",this.unsubscribe.push(J.subscribeKey("view",e=>{this.view=e,this.status=yp.hasFooter()?"show":"hide",this.status==="hide"&&document.documentElement.style.setProperty("--apkt-footer-height","0px")})),this.resizeObserver=new ResizeObserver(e=>{for(const r of e)if(r.target===this.getWrapper()){const n=`${r.contentRect.height}px`;document.documentElement.style.setProperty("--apkt-footer-height",n)}}),this.resizeObserver.observe(this.getWrapper())}render(){return F`
      <div class="container" status=${this.status}>${this.templatePageContainer()}</div>
    `}templatePageContainer(){return yp.hasFooter()?F` ${this.templateFooter()}`:null}templateFooter(){switch(this.view){case"Networks":return this.templateNetworksFooter();case"Connect":case"ConnectWallets":case"OnRampFiatSelect":case"OnRampTokenSelect":return F`<w3m-legal-footer></w3m-legal-footer>`;case"OnRampProviders":return F`<w3m-onramp-providers-footer></w3m-onramp-providers-footer>`;default:return null}}templateNetworksFooter(){return F` <wui-flex
      class="footer-in"
      padding="3"
      flexDirection="column"
      gap="3"
      alignItems="center"
    >
      <wui-text variant="md-regular" color="secondary" align="center">
        Your connected wallet may not support some of the networks available for this dApp
      </wui-text>
      <wui-link @click=${this.onNetworkHelp.bind(this)}>
        <wui-icon size="sm" color="accent-primary" slot="iconLeft" name="helpCircle"></wui-icon>
        What is a network
      </wui-link>
    </wui-flex>`}onNetworkHelp(){Te.sendEvent({type:"track",event:"CLICK_NETWORK_HELP"}),J.push("WhatIsANetwork")}getWrapper(){return this.shadowRoot?.querySelector("div.container")}};bp.styles=[sge],H3([pe()],bp.prototype,"status",void 0),H3([pe()],bp.prototype,"view",void 0),bp=H3([we("w3m-footer")],bp);var oge=Me`
  :host {
    display: block;
    width: inherit;
  }
`,j3=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let vp=class extends ye{constructor(){super(),this.unsubscribe=[],this.viewState=J.state.view,this.history=J.state.history.join(","),this.unsubscribe.push(J.subscribeKey("view",()=>{this.history=J.state.history.join(","),document.documentElement.style.setProperty("--apkt-duration-dynamic","var(--apkt-durations-lg)")}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),document.documentElement.style.setProperty("--apkt-duration-dynamic","0s")}render(){return F`${this.templatePageContainer()}`}templatePageContainer(){return F`<w3m-router-container
      history=${this.history}
      .setView=${()=>{this.viewState=J.state.view}}
    >
      ${this.viewTemplate(this.viewState)}
    </w3m-router-container>`}viewTemplate(e){switch(e){case"AccountSettings":return F`<w3m-account-settings-view></w3m-account-settings-view>`;case"Account":return F`<w3m-account-view></w3m-account-view>`;case"AllWallets":return F`<w3m-all-wallets-view></w3m-all-wallets-view>`;case"ApproveTransaction":return F`<w3m-approve-transaction-view></w3m-approve-transaction-view>`;case"BuyInProgress":return F`<w3m-buy-in-progress-view></w3m-buy-in-progress-view>`;case"ChooseAccountName":return F`<w3m-choose-account-name-view></w3m-choose-account-name-view>`;case"Connect":return F`<w3m-connect-view></w3m-connect-view>`;case"Create":return F`<w3m-connect-view walletGuide="explore"></w3m-connect-view>`;case"ConnectingWalletConnect":return F`<w3m-connecting-wc-view></w3m-connecting-wc-view>`;case"ConnectingWalletConnectBasic":return F`<w3m-connecting-wc-basic-view></w3m-connecting-wc-basic-view>`;case"ConnectingExternal":return F`<w3m-connecting-external-view></w3m-connecting-external-view>`;case"ConnectingSiwe":return F`<w3m-connecting-siwe-view></w3m-connecting-siwe-view>`;case"ConnectWallets":return F`<w3m-connect-wallets-view></w3m-connect-wallets-view>`;case"ConnectSocials":return F`<w3m-connect-socials-view></w3m-connect-socials-view>`;case"ConnectingSocial":return F`<w3m-connecting-social-view></w3m-connecting-social-view>`;case"DataCapture":return F`<w3m-data-capture-view></w3m-data-capture-view>`;case"DataCaptureOtpConfirm":return F`<w3m-data-capture-otp-confirm-view></w3m-data-capture-otp-confirm-view>`;case"Downloads":return F`<w3m-downloads-view></w3m-downloads-view>`;case"EmailLogin":return F`<w3m-email-login-view></w3m-email-login-view>`;case"EmailVerifyOtp":return F`<w3m-email-verify-otp-view></w3m-email-verify-otp-view>`;case"EmailVerifyDevice":return F`<w3m-email-verify-device-view></w3m-email-verify-device-view>`;case"GetWallet":return F`<w3m-get-wallet-view></w3m-get-wallet-view>`;case"Networks":return F`<w3m-networks-view></w3m-networks-view>`;case"SwitchNetwork":return F`<w3m-network-switch-view></w3m-network-switch-view>`;case"ProfileWallets":return F`<w3m-profile-wallets-view></w3m-profile-wallets-view>`;case"Transactions":return F`<w3m-transactions-view></w3m-transactions-view>`;case"OnRampProviders":return F`<w3m-onramp-providers-view></w3m-onramp-providers-view>`;case"OnRampTokenSelect":return F`<w3m-onramp-token-select-view></w3m-onramp-token-select-view>`;case"OnRampFiatSelect":return F`<w3m-onramp-fiat-select-view></w3m-onramp-fiat-select-view>`;case"UpgradeEmailWallet":return F`<w3m-upgrade-wallet-view></w3m-upgrade-wallet-view>`;case"UpdateEmailWallet":return F`<w3m-update-email-wallet-view></w3m-update-email-wallet-view>`;case"UpdateEmailPrimaryOtp":return F`<w3m-update-email-primary-otp-view></w3m-update-email-primary-otp-view>`;case"UpdateEmailSecondaryOtp":return F`<w3m-update-email-secondary-otp-view></w3m-update-email-secondary-otp-view>`;case"UnsupportedChain":return F`<w3m-unsupported-chain-view></w3m-unsupported-chain-view>`;case"Swap":return F`<w3m-swap-view></w3m-swap-view>`;case"SwapSelectToken":return F`<w3m-swap-select-token-view></w3m-swap-select-token-view>`;case"SwapPreview":return F`<w3m-swap-preview-view></w3m-swap-preview-view>`;case"WalletSend":return F`<w3m-wallet-send-view></w3m-wallet-send-view>`;case"WalletSendSelectToken":return F`<w3m-wallet-send-select-token-view></w3m-wallet-send-select-token-view>`;case"WalletSendPreview":return F`<w3m-wallet-send-preview-view></w3m-wallet-send-preview-view>`;case"WhatIsABuy":return F`<w3m-what-is-a-buy-view></w3m-what-is-a-buy-view>`;case"WalletReceive":return F`<w3m-wallet-receive-view></w3m-wallet-receive-view>`;case"WalletCompatibleNetworks":return F`<w3m-wallet-compatible-networks-view></w3m-wallet-compatible-networks-view>`;case"WhatIsAWallet":return F`<w3m-what-is-a-wallet-view></w3m-what-is-a-wallet-view>`;case"ConnectingMultiChain":return F`<w3m-connecting-multi-chain-view></w3m-connecting-multi-chain-view>`;case"WhatIsANetwork":return F`<w3m-what-is-a-network-view></w3m-what-is-a-network-view>`;case"ConnectingFarcaster":return F`<w3m-connecting-farcaster-view></w3m-connecting-farcaster-view>`;case"SwitchActiveChain":return F`<w3m-switch-active-chain-view></w3m-switch-active-chain-view>`;case"RegisterAccountName":return F`<w3m-register-account-name-view></w3m-register-account-name-view>`;case"RegisterAccountNameSuccess":return F`<w3m-register-account-name-success-view></w3m-register-account-name-success-view>`;case"SmartSessionCreated":return F`<w3m-smart-session-created-view></w3m-smart-session-created-view>`;case"SmartSessionList":return F`<w3m-smart-session-list-view></w3m-smart-session-list-view>`;case"SIWXSignMessage":return F`<w3m-siwx-sign-message-view></w3m-siwx-sign-message-view>`;case"Pay":return F`<w3m-pay-view></w3m-pay-view>`;case"PayLoading":return F`<w3m-pay-loading-view></w3m-pay-loading-view>`;case"FundWallet":return F`<w3m-fund-wallet-view></w3m-fund-wallet-view>`;case"PayWithExchange":return F`<w3m-deposit-from-exchange-view></w3m-deposit-from-exchange-view>`;case"PayWithExchangeSelectAsset":return F`<w3m-deposit-from-exchange-select-asset-view></w3m-deposit-from-exchange-select-asset-view>`;default:return F`<w3m-connect-view></w3m-connect-view>`}}};vp.styles=[oge],j3([pe()],vp.prototype,"viewState",void 0),j3([pe()],vp.prototype,"history",void 0),vp=j3([we("w3m-router")],vp);var age=Me`
  :host {
    z-index: var(--w3m-z-index);
    display: block;
    backface-visibility: hidden;
    will-change: opacity;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0;
    background-color: ${({tokens:t})=>t.theme.overlay};
    backdrop-filter: blur(0px);
    transition:
      opacity ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      backdrop-filter ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]};
    will-change: opacity;
  }

  :host(.open) {
    opacity: 1;
    backdrop-filter: blur(8px);
  }

  :host(.appkit-modal) {
    position: relative;
    pointer-events: unset;
    background: none;
    width: 100%;
    opacity: 1;
  }

  wui-card {
    max-width: var(--apkt-modal-width);
    width: 100%;
    position: relative;
    outline: none;
    transform: translateY(4px);
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.05);
    transition:
      transform ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-2"]},
      border-radius ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]},
      background-color ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]},
      box-shadow ${({durations:t})=>t.lg}
        ${({easings:t})=>t["ease-out-power-1"]};
    will-change: border-radius, background-color, transform, box-shadow;
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    padding: ${({spacing:t})=>t[1]};
    box-sizing: border-box;
  }

  :host(.open) wui-card {
    transform: translateY(0px);
  }

  wui-card::before {
    z-index: 1;
    pointer-events: none;
    content: '';
    position: absolute;
    inset: 0;
    border-radius: clamp(0px, var(--apkt-borderRadius-8), 44px);
    transition: box-shadow ${({durations:t})=>t.lg}
      ${({easings:t})=>t["ease-out-power-2"]};
    transition-delay: ${({durations:t})=>t.md};
    will-change: box-shadow;
  }

  :host([data-border='true']) wui-card::before {
    box-shadow: inset 0px 0px 0px 4px ${({tokens:t})=>t.theme.foregroundSecondary};
  }

  :host([data-border='false']) wui-card::before {
    box-shadow: inset 0px 0px 0px 1px ${({tokens:t})=>t.theme.borderPrimaryDark};
  }

  :host([data-border='true']) wui-card {
    animation:
      fade-in ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      card-background-border var(--apkt-duration-dynamic)
        ${({easings:t})=>t["ease-out-power-2"]};
    animation-fill-mode: backwards, both;
    animation-delay: var(--apkt-duration-dynamic);
  }

  :host([data-border='false']) wui-card {
    animation:
      fade-in ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      card-background-default var(--apkt-duration-dynamic)
        ${({easings:t})=>t["ease-out-power-2"]};
    animation-fill-mode: backwards, both;
    animation-delay: 0s;
  }

  :host(.appkit-modal) wui-card {
    max-width: 400px;
  }

  wui-card[shake='true'] {
    animation:
      fade-in ${({durations:t})=>t.lg} ${({easings:t})=>t["ease-out-power-2"]},
      w3m-shake ${({durations:t})=>t.xl}
        ${({easings:t})=>t["ease-out-power-2"]};
  }

  wui-flex {
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  @media (max-height: 700px) and (min-width: 431px) {
    wui-flex {
      align-items: flex-start;
    }

    wui-card {
      margin: var(--apkt-spacing-6) 0px;
    }
  }

  @media (max-width: 430px) {
    wui-flex {
      align-items: flex-end;
    }

    wui-card {
      max-width: 100%;
      border-bottom-left-radius: var(--local-border-bottom-mobile-radius);
      border-bottom-right-radius: var(--local-border-bottom-mobile-radius);
      border-bottom: none;
    }

    wui-card[shake='true'] {
      animation: w3m-shake 0.5s ${({easings:t})=>t["ease-out-power-2"]};
    }
  }

  @keyframes fade-in {
    0% {
      transform: scale(0.99) translateY(4px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes w3m-shake {
    0% {
      transform: scale(1) rotate(0deg);
    }
    20% {
      transform: scale(1) rotate(-1deg);
    }
    40% {
      transform: scale(1) rotate(1.5deg);
    }
    60% {
      transform: scale(1) rotate(-1.5deg);
    }
    80% {
      transform: scale(1) rotate(1deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes card-background-border {
    from {
      background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    }
    to {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    }
  }

  @keyframes card-background-default {
    from {
      background-color: ${({tokens:t})=>t.theme.foregroundSecondary};
    }
    to {
      background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    }
  }
`,Dc=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const hN="scroll-lock";class Us extends ye{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.hasPrefetched=!1,this.enableEmbedded=Y.state.enableEmbedded,this.open=ke.state.open,this.caipAddress=k.state.activeCaipAddress,this.caipNetwork=k.state.activeCaipNetwork,this.shake=ke.state.shake,this.filterByNamespace=te.state.filterByNamespace,this.initializeTheming(),ce.prefetchAnalyticsConfig(),this.unsubscribe.push(ke.subscribeKey("open",e=>e?this.onOpen():this.onClose()),ke.subscribeKey("shake",e=>this.shake=e),k.subscribeKey("activeCaipNetwork",e=>this.onNewNetwork(e)),k.subscribeKey("activeCaipAddress",e=>this.onNewAddress(e)),Y.subscribeKey("enableEmbedded",e=>this.enableEmbedded=e),te.subscribeKey("filterByNamespace",e=>{this.filterByNamespace!==e&&!k.getAccountData(e)?.caipAddress&&(ce.fetchRecommendedWallets(),this.filterByNamespace=e)}),J.subscribeKey("view",()=>{this.dataset.border=yp.hasFooter()?"true":"false"}))}firstUpdated(){if(this.dataset.border=yp.hasFooter()?"true":"false",this.caipAddress){if(this.enableEmbedded){ke.close(),this.prefetch();return}this.onNewAddress(this.caipAddress)}this.open&&this.onOpen(),this.enableEmbedded&&this.prefetch()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return this.style.cssText=`
      --local-border-bottom-mobile-radius: ${this.enableEmbedded?"clamp(0px, var(--apkt-borderRadius-8), 44px)":"0px"};
    `,this.enableEmbedded?F`${this.contentTemplate()}
        <w3m-tooltip></w3m-tooltip> `:this.open?F`
          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid="w3m-modal-overlay">
            ${this.contentTemplate()}
          </wui-flex>
          <w3m-tooltip></w3m-tooltip>
        `:null}contentTemplate(){return F` <wui-card
      shake="${this.shake}"
      data-embedded="${Ne(this.enableEmbedded)}"
      role="alertdialog"
      aria-modal="true"
      tabindex="0"
      data-testid="w3m-modal-card"
    >
      <w3m-header></w3m-header>
      <w3m-router></w3m-router>
      <w3m-footer></w3m-footer>
      <w3m-snackbar></w3m-snackbar>
      <w3m-alertbar></w3m-alertbar>
    </wui-card>`}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){await FO.safeClose()}initializeTheming(){const{themeVariables:e,themeMode:r}=xr.state,n=ir.getColorTheme(r);x0e(e,n)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),We.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){const e=document.createElement("style");e.dataset.w3m=hN,e.textContent=`
      body {
        touch-action: none;
        overflow: hidden;
        overscroll-behavior: contain;
      }
      w3m-modal {
        pointer-events: auto;
      }
    `,document.head.appendChild(e)}onScrollUnlock(){const e=document.head.querySelector(`style[data-w3m="${hN}"]`);e&&e.remove()}onAddKeyboardListener(){this.abortController=new AbortController;const e=this.shadowRoot?.querySelector("wui-card");e?.focus(),window.addEventListener("keydown",r=>{if(r.key==="Escape")this.handleClose();else if(r.key==="Tab"){const{tagName:n}=r.target;n&&!n.includes("W3M-")&&!n.includes("WUI-")&&e?.focus()}},this.abortController)}onRemoveKeyboardListener(){this.abortController?.abort(),this.abortController=void 0}async onNewAddress(e){const r=k.state.isSwitchingNamespace,n=J.state.view==="ProfileWallets";e?await this.onConnected({caipAddress:e,isSwitchingNamespace:r,isInProfileView:n}):!r&&!this.enableEmbedded&&!n&&ke.close(),await Dn.initializeIfEnabled(e),this.caipAddress=e,k.setIsSwitchingNamespace(!1)}async onConnected(e){if(e.isInProfileView)return;const{chainNamespace:r,chainId:n,address:i}=Cn.parseCaipAddress(e.caipAddress),s=`${r}:${n}`,o=!ne.getPlainAddress(this.caipAddress),a=await Dn.getSessions({address:i,caipNetworkId:s}),c=Dn.getSIWX()?a.some(h=>h.data.accountAddress===i):!0,l=e.isSwitchingNamespace&&c&&!this.enableEmbedded,u=this.enableEmbedded&&o;l?J.goBack():u&&ke.close()}onNewNetwork(e){const r=this.caipNetwork,n=r?.caipNetworkId?.toString(),i=r?.chainNamespace,s=e?.caipNetworkId?.toString(),o=e?.chainNamespace,a=n!==s,l=a&&!(i!==o),u=r?.name===G.UNSUPPORTED_NETWORK_NAME,h=J.state.view==="ConnectingExternal",d=J.state.view==="ProfileWallets",p=!k.getAccountData(e?.chainNamespace)?.caipAddress,f=J.state.view==="UnsupportedChain",g=ke.state.open;let w=!1;this.enableEmbedded&&J.state.view==="SwitchNetwork"&&(w=!0),a&&Oe.resetState(),g&&!h&&!d&&(p?a&&(w=!0):(f||l&&!u)&&(w=!0)),w&&J.state.view!=="SIWXSignMessage"&&J.goBack(),this.caipNetwork=e}prefetch(){this.hasPrefetched||(ce.prefetch(),ce.fetchWalletsByPage({page:1}),this.hasPrefetched=!0)}}Us.styles=age,Dc([z({type:Boolean})],Us.prototype,"enableEmbedded",void 0),Dc([pe()],Us.prototype,"open",void 0),Dc([pe()],Us.prototype,"caipAddress",void 0),Dc([pe()],Us.prototype,"caipNetwork",void 0),Dc([pe()],Us.prototype,"shake",void 0),Dc([pe()],Us.prototype,"filterByNamespace",void 0);let V3=class extends Us{};V3=Dc([we("w3m-modal")],V3);let z3=class extends Us{};z3=Dc([we("appkit-modal")],z3);var cge=Me`
  :host {
    --local-duration-height: 0s;
    --local-duration: ${({durations:t})=>t.lg};
    --local-transition: ${({easings:t})=>t["ease-out-power-2"]};
  }

  .container {
    display: block;
    overflow: hidden;
    overflow: hidden;
    position: relative;
    height: var(--local-container-height);
    transition: height var(--local-duration-height) var(--local-transition);
    will-change: height, padding-bottom;
  }

  .page {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: auto;
    width: inherit;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    background-color: ${({tokens:t})=>t.theme.backgroundPrimary};
    border-bottom-left-radius: var(--local-border-bottom-radius);
    border-bottom-right-radius: var(--local-border-bottom-radius);
    transition: border-bottom-left-radius var(--local-duration) var(--local-transition);
  }

  .footer {
    height: var(--apkt-footer-height);
  }

  div.page[view-direction^='prev-'] .page-content {
    animation:
      slide-left-out var(--local-duration) forwards var(--local-transition),
      slide-left-in var(--local-duration) forwards var(--local-transition);
    animation-delay: 0ms, var(--local-duration, ${({durations:t})=>t.lg});
  }

  div.page[view-direction^='next-'] .page-content {
    animation:
      slide-right-out var(--local-duration) forwards var(--local-transition),
      slide-right-in var(--local-duration) forwards var(--local-transition);
    animation-delay: 0ms, var(--local-duration, ${({durations:t})=>t.lg});
  }

  @keyframes slide-left-out {
    from {
      transform: translateX(0px) scale(1);
      opacity: 1;
      filter: blur(0px);
    }
    to {
      transform: translateX(8px) scale(0.99);
      opacity: 0;
      filter: blur(4px);
    }
  }

  @keyframes slide-left-in {
    from {
      transform: translateX(-8px) scale(0.99);
      opacity: 0;
      filter: blur(4px);
    }
    to {
      transform: translateX(0) translateY(0) scale(1);
      opacity: 1;
      filter: blur(0px);
    }
  }

  @keyframes slide-right-out {
    from {
      transform: translateX(0px) scale(1);
      opacity: 1;
      filter: blur(0px);
    }
    to {
      transform: translateX(-8px) scale(0.99);
      opacity: 0;
      filter: blur(4px);
    }
  }

  @keyframes slide-right-in {
    from {
      transform: translateX(8px) scale(0.99);
      opacity: 0;
      filter: blur(4px);
    }
    to {
      transform: translateX(0) translateY(0) scale(1);
      opacity: 1;
      filter: blur(0px);
    }
  }
`,Sa=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Bi=class extends ye{constructor(){super(...arguments),this.resizeObserver=void 0,this.transitionDuration="0.15s",this.transitionFunction="",this.history="",this.view="",this.setView=void 0,this.viewDirection="",this.historyState="",this.previousHeight="0px"}updated(e){if(e.has("history")){const r=this.history;this.historyState!==""&&this.historyState!==r&&this.onViewChange(r)}e.has("transitionDuration")&&this.style.setProperty("--local-duration",this.transitionDuration),e.has("transitionFunction")&&this.style.setProperty("--local-transition",this.transitionFunction)}firstUpdated(){this.transitionFunction&&this.style.setProperty("--local-transition",this.transitionFunction),this.style.setProperty("--local-duration",this.transitionDuration),this.historyState=this.history,this.resizeObserver=new ResizeObserver(e=>{for(const r of e)if(r.target===this.getWrapper()){let n=r.contentRect.height;const i=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--apkt-footer-height")||"0");n=n+i,this.style.setProperty("--local-border-bottom-radius",i?"var(--apkt-borderRadius-5)":"0px"),this.style.setProperty("--local-container-height",`${n}px`),this.previousHeight!=="0px"&&this.style.setProperty("--local-duration-height",this.transitionDuration),this.previousHeight=`${n}px`}}),this.resizeObserver.observe(this.getWrapper())}disconnectedCallback(){const e=this.getWrapper();e&&this.resizeObserver&&this.resizeObserver.unobserve(e)}render(){return F`
      <div class="container">
        <div class="page" view-direction="${this.viewDirection}">
          <div class="page-content">
            <slot></slot>
          </div>
        </div>
      </div>
    `}onViewChange(e){const r=e.split(",").filter(Boolean),n=this.historyState.split(",").filter(Boolean),i=n.length,s=r.length,o=r[r.length-1]||"",a=ir.cssDurationToNumber(this.transitionDuration);let c="";s>i?c="next":s<i?c="prev":s===i&&r[s-1]!==n[i-1]&&(c="next"),this.viewDirection=`${c}-${o}`,setTimeout(()=>{this.historyState=e,this.setView?.(o)},a),setTimeout(()=>{this.viewDirection=""},a*2)}getWrapper(){return this.shadowRoot?.querySelector("div.page")}};Bi.styles=[cge],Sa([z({type:String})],Bi.prototype,"transitionDuration",void 0),Sa([z({type:String})],Bi.prototype,"transitionFunction",void 0),Sa([z({type:String})],Bi.prototype,"history",void 0),Sa([z({type:String})],Bi.prototype,"view",void 0),Sa([z({attribute:!1})],Bi.prototype,"setView",void 0),Sa([pe()],Bi.prototype,"viewDirection",void 0),Sa([pe()],Bi.prototype,"historyState",void 0),Sa([pe()],Bi.prototype,"previousHeight",void 0),Bi=Sa([we("w3m-router-container")],Bi);var lge=Object.freeze({__proto__:null,W3mModalBase:Us,get W3mModal(){return V3},get AppKitModal(){return z3},get W3mRouterContainer(){return Bi}});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cw=globalThis,q3=Cw.ShadowRoot&&(Cw.ShadyCSS===void 0||Cw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,W3=Symbol(),dN=new WeakMap;class pN{constructor(e,r,n){if(this._$cssResult$=!0,n!==W3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(q3&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=dN.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&dN.set(r,e))}return e}toString(){return this.cssText}}const uge=t=>new pN(typeof t=="string"?t:t+"",void 0,W3),_e=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new pN(r,t,W3)},hge=(t,e)=>{if(q3)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=Cw.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},fN=q3?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return uge(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:dge,defineProperty:pge,getOwnPropertyDescriptor:fge,getOwnPropertyNames:gge,getOwnPropertySymbols:mge,getPrototypeOf:wge}=Object,td=globalThis,gN=td.trustedTypes,yge=gN?gN.emptyScript:"",mN=td.reactiveElementPolyfillSupport,Ep=(t,e)=>t,Aw={toAttribute(t,e){switch(e){case Boolean:t=t?yge:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Z3=(t,e)=>!dge(t,e),wN={attribute:!0,type:String,converter:Aw,reflect:!1,hasChanged:Z3};Symbol.metadata!=null||(Symbol.metadata=Symbol("metadata")),td.litPropertyMetadata!=null||(td.litPropertyMetadata=new WeakMap);class rd extends HTMLElement{static addInitializer(e){var r;this._$Ei(),((r=this.l)!=null?r:this.l=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=wN){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&pge(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){var i;const{get:s,set:o}=(i=fge(this.prototype,e))!=null?i:{get(){return this[r]},set(a){this[r]=a}};return{get(){return s?.call(this)},set(a){const c=s?.call(this);o.call(this,a),this.requestUpdate(e,c,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){var r;return(r=this.elementProperties.get(e))!=null?r:wN}static _$Ei(){if(this.hasOwnProperty(Ep("elementProperties")))return;const e=wge(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ep("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ep("properties"))){const r=this.properties,n=[...gge(r),...mge(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(fN(i))}else e!==void 0&&r.push(fN(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$EO)!=null?r:this._$EO=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){var e;const r=(e=this.shadowRoot)!=null?e:this.attachShadow(this.constructor.shadowRootOptions);return hge(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot!=null||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EC(e,r){var n;const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)==null?void 0:n.toAttribute)!==void 0?i.converter:Aw).toAttribute(r,i.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)==null?void 0:n.fromAttribute)!==void 0?o.converter:Aw;this._$Em=s,this[s]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(e,r,n){var i;if(e!==void 0){if(n!=null||(n=this.constructor.getPropertyOptions(e)),!((i=n.hasChanged)!=null?i:Z3)(this[e],r))return;this.P(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,r,n){var i;this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$Em!==e&&((i=this._$Ej)!=null?i:this._$Ej=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot!=null||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$EO)==null||e.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(n)):this._$EU()}catch(i){throw r=!1,this._$EU(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var i;return(i=n.hostUpdated)==null?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(e){}firstUpdated(e){}}var yN;rd.elementStyles=[],rd.shadowRootOptions={mode:"open"},rd[Ep("elementProperties")]=new Map,rd[Ep("finalized")]=new Map,mN?.({ReactiveElement:rd}),((yN=td.reactiveElementVersions)!=null?yN:td.reactiveElementVersions=[]).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $w=globalThis,xw=$w.trustedTypes,bN=xw?xw.createPolicy("lit-html",{createHTML:t=>t}):void 0,vN="$lit$",Bc=`lit$${Math.random().toFixed(9).slice(2)}$`,EN="?"+Bc,bge=`<${EN}>`,ou=document,Cp=()=>ou.createComment(""),Ap=t=>t===null||typeof t!="object"&&typeof t!="function",CN=Array.isArray,vge=t=>CN(t)||typeof t?.[Symbol.iterator]=="function",K3=`[ 	
\f\r]`,$p=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,AN=/-->/g,$N=/>/g,au=RegExp(`>|${K3}(?:([^\\s"'>=/]+)(${K3}*=${K3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xN=/'/g,_N=/"/g,SN=/^(?:script|style|textarea|title)$/i,IN=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Se=IN(1),N=IN(2),nd=Symbol.for("lit-noChange"),fr=Symbol.for("lit-nothing"),ON=new WeakMap,cu=ou.createTreeWalker(ou,129);function PN(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return bN!==void 0?bN.createHTML(e):e}const Ege=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=$p;for(let a=0;a<r;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===$p?u[1]==="!--"?o=AN:u[1]!==void 0?o=$N:u[2]!==void 0?(SN.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=au):u[3]!==void 0&&(o=au):o===au?u[0]===">"?(o=i??$p,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?au:u[3]==='"'?_N:xN):o===_N||o===xN?o=au:o===AN||o===$N?o=$p:(o=au,i=void 0);const p=o===au&&t[a+1].startsWith("/>")?" ":"";s+=o===$p?c+bge:h>=0?(n.push(l),c.slice(0,h)+vN+c.slice(h)+Bc+p):c+Bc+(h===-2?a:p)}return[PN(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class xp{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Ege(e,r);if(this.el=xp.createElement(l,n),cu.currentNode=this.el.content,r===2){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=cu.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(vN)){const d=u[o++],p=i.getAttribute(h).split(Bc),f=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:f[2],strings:p,ctor:f[1]==="."?Age:f[1]==="?"?$ge:f[1]==="@"?xge:_w}),i.removeAttribute(h)}else h.startsWith(Bc)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(SN.test(i.tagName)){const h=i.textContent.split(Bc),d=h.length-1;if(d>0){i.textContent=xw?xw.emptyScript:"";for(let p=0;p<d;p++)i.append(h[p],Cp()),cu.nextNode(),c.push({type:2,index:++s});i.append(h[d],Cp())}}}else if(i.nodeType===8)if(i.data===EN)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Bc,h+1))!==-1;)c.push({type:7,index:s}),h+=Bc.length-1}s++}}static createElement(e,r){const n=ou.createElement("template");return n.innerHTML=e,n}}function id(t,e,r=t,n){var i,s,o;if(e===nd)return e;let a=n!==void 0?(i=r._$Co)==null?void 0:i[n]:r._$Cl;const c=Ap(e)?void 0:e._$litDirective$;return a?.constructor!==c&&((s=a?._$AO)==null||s.call(a,!1),c===void 0?a=void 0:(a=new c(t),a._$AT(t,r,n)),n!==void 0?((o=r._$Co)!=null?o:r._$Co=[])[n]=a:r._$Cl=a),a!==void 0&&(e=id(t,a._$AS(t,e.values),a,n)),e}class Cge{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e?.creationScope)!=null?r:ou).importNode(n,!0);cu.currentNode=s;let o=cu.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new _p(o,o.nextSibling,this,e):l.type===1?u=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(u=new _ge(o,this,e)),this._$AV.push(u),l=i[++c]}a!==l?.index&&(o=cu.nextNode(),a++)}return cu.currentNode=ou,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class _p{get _$AU(){var e,r;return(r=(e=this._$AM)==null?void 0:e._$AU)!=null?r:this._$Cv}constructor(e,r,n,i){var s;this.type=2,this._$AH=fr,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=(s=i?.isConnected)!=null?s:!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=id(this,e,r),Ap(e)?e===fr||e==null||e===""?(this._$AH!==fr&&this._$AR(),this._$AH=fr):e!==this._$AH&&e!==nd&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):vge(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==fr&&Ap(this._$AH)?this._$AA.nextSibling.data=e:this.T(ou.createTextNode(e)),this._$AH=e}$(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=xp.createElement(PN(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)==null?void 0:r._$AD)===s)this._$AH.p(n);else{const o=new Cge(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let r=ON.get(e.strings);return r===void 0&&ON.set(e.strings,r=new xp(e)),r}k(e){CN(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new _p(this.S(Cp()),this.S(Cp()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class _w{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=fr,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=fr}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=id(this,e,r,0),o=!Ap(e)||e!==this._$AH&&e!==nd,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=id(this,a[n+c],r,c),l===nd&&(l=this._$AH[c]),o||(o=!Ap(l)||l!==this._$AH[c]),l===fr?e=fr:e!==fr&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===fr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Age extends _w{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===fr?void 0:e}}class $ge extends _w{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==fr)}}class xge extends _w{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=id(this,e,r,0))!=null?n:fr)===nd)return;const i=this._$AH,s=e===fr&&i!==fr||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==fr&&(i===fr||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)==null?void 0:r.host)!=null?n:this.element,e):this._$AH.handleEvent(e)}}class _ge{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){id(this,e)}}const NN=$w.litHtmlPolyfillSupport;var TN;NN?.(xp,_p),((TN=$w.litHtmlVersions)!=null?TN:$w.litHtmlVersions=[]).push("3.1.4");const Sge=(t,e,r)=>{var n,i;const s=(n=r?.renderBefore)!=null?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r?.renderBefore)!=null?i:null;s._$litPart$=o=new _p(e.insertBefore(Cp(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class $e extends rd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const r=super.createRenderRoot();return(e=this.renderOptions).renderBefore!=null||(e.renderBefore=r.firstChild),r}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Sge(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return nd}}var kN;$e._$litElement$=!0,$e.finalized=!0,(kN=globalThis.litElementHydrateSupport)==null||kN.call(globalThis,{LitElement:$e});const RN=globalThis.litElementPolyfillSupport;RN?.({LitElement:$e});var DN;((DN=globalThis.litElementVersions)!=null?DN:globalThis.litElementVersions=[]).push("4.0.6");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ie=t=>(e,r)=>{r!==void 0?r.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};var Ige=Object.defineProperty,Oge=Object.defineProperties,Pge=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertySymbols,Nge=Object.prototype.hasOwnProperty,Tge=Object.prototype.propertyIsEnumerable,MN=(t,e,r)=>e in t?Ige(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kge=(t,e)=>{for(var r in e||(e={}))Nge.call(e,r)&&MN(t,r,e[r]);if(BN)for(var r of BN(e))Tge.call(e,r)&&MN(t,r,e[r]);return t},Rge=(t,e)=>Oge(t,Pge(e));/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dge={attribute:!0,type:String,converter:Aw,reflect:!1,hasChanged:Z3},Bge=(t=Dge,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(r.name,t),n==="accessor"){const{name:o}=r;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.P(o,void 0,t),a}}}if(n==="setter"){const{name:o}=r;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+n)};function j(t){return(e,r)=>typeof r=="object"?Bge(t,e,r):((n,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,o?Rge(kge({},n),{wrapped:!0}):n),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,r)}var Mge=Object.defineProperty,Uge=Object.getOwnPropertyDescriptor,Sp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Uge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Mge(e,r,i),i};let Ls=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ls.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ls.weightsMap=new Map([["thin",N`<path d="M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm34.83-86.83a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66,0l-32-32a4,4,0,0,1,5.66-5.66L124,158.34V88a4,4,0,0,1,8,0v70.34l25.17-25.17A4,4,0,0,1,162.83,133.17Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm36.24-86.24a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48,0l-32-32a6,6,0,0,1,8.48-8.48L122,153.51V88a6,6,0,0,1,12,0v65.51l21.76-21.75A6,6,0,0,1,164.24,131.76Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-85.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35A8,8,0,0,1,165.66,130.34Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm40.49-84.49a12,12,0,0,1,0,17l-32,32a12,12,0,0,1-17,0l-32-32a12,12,0,1,1,17-17L116,139V88a12,12,0,0,1,24,0v51l11.51-11.52A12,12,0,0,1,168.49,127.51Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,117.66-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35a8,8,0,0,1,11.32,11.32Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-85.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35A8,8,0,0,1,165.66,130.34Z"/>`]]),Ls.styles=_e`
    :host {
      display: contents;
    }
  `,Sp([j({type:String,reflect:!0})],Ls.prototype,"size",2),Sp([j({type:String,reflect:!0})],Ls.prototype,"weight",2),Sp([j({type:String,reflect:!0})],Ls.prototype,"color",2),Sp([j({type:Boolean,reflect:!0})],Ls.prototype,"mirrored",2),Ls=Sp([Ie("ph-arrow-circle-down")],Ls);var Lge=Object.freeze({__proto__:null,get PhArrowCircleDown(){return Ls}}),Fge=Object.defineProperty,Hge=Object.getOwnPropertyDescriptor,Ip=(t,e,r,n)=>{for(var i=n>1?void 0:n?Hge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Fge(e,r,i),i};let Fs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Fs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Fs.weightsMap=new Map([["thin",N`<path d="M236,56v48a4,4,0,0,1-4,4H184a4,4,0,0,1,0-8h37.7L187.53,68.69l-.13-.12a84,84,0,1,0-1.75,120.51,4,4,0,0,1,5.5,5.82A91.43,91.43,0,0,1,128,220h-1.26A92,92,0,1,1,193,62.84l35,32.05V56a4,4,0,1,1,8,0Z"/>`],["light",N`<path d="M238,56v48a6,6,0,0,1-6,6H184a6,6,0,0,1,0-12h32.55l-30.38-27.8c-.06-.06-.12-.13-.19-.19a82,82,0,1,0-1.7,117.65,6,6,0,0,1,8.24,8.73A93.46,93.46,0,0,1,128,222h-1.28A94,94,0,1,1,194.37,61.4L226,90.35V56a6,6,0,1,1,12,0Z"/>`],["regular",N`<path d="M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"/>`],["bold",N`<path d="M244,56v48a12,12,0,0,1-12,12H184a12,12,0,1,1,0-24H201.1l-19-17.38c-.13-.12-.26-.24-.38-.37A76,76,0,1,0,127,204h1a75.53,75.53,0,0,0,52.15-20.72,12,12,0,0,1,16.49,17.45A99.45,99.45,0,0,1,128,228h-1.37A100,100,0,1,1,198.51,57.06L220,76.72V56a12,12,0,0,1,24,0Z"/>`],["fill",N`<path d="M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1-5.66-13.66l17-17-10.55-9.65-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,1,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60l10.93,10L226.34,50.3A8,8,0,0,1,240,56Z"/>`],["duotone",N`<path d="M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z" opacity="0.2"/><path d="M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"/>`]]),Fs.styles=_e`
    :host {
      display: contents;
    }
  `,Ip([j({type:String,reflect:!0})],Fs.prototype,"size",2),Ip([j({type:String,reflect:!0})],Fs.prototype,"weight",2),Ip([j({type:String,reflect:!0})],Fs.prototype,"color",2),Ip([j({type:Boolean,reflect:!0})],Fs.prototype,"mirrored",2),Fs=Ip([Ie("ph-arrow-clockwise")],Fs);var jge=Object.freeze({__proto__:null,get PhArrowClockwise(){return Fs}}),Vge=Object.defineProperty,zge=Object.getOwnPropertyDescriptor,Op=(t,e,r,n)=>{for(var i=n>1?void 0:n?zge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Vge(e,r,i),i};let Hs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Hs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Hs.weightsMap=new Map([["thin",N`<path d="M202.83,146.83l-72,72a4,4,0,0,1-5.66,0l-72-72a4,4,0,0,1,5.66-5.66L124,206.34V40a4,4,0,0,1,8,0V206.34l65.17-65.17a4,4,0,0,1,5.66,5.66Z"/>`],["light",N`<path d="M204.24,148.24l-72,72a6,6,0,0,1-8.48,0l-72-72a6,6,0,0,1,8.48-8.48L122,201.51V40a6,6,0,0,1,12,0V201.51l61.76-61.75a6,6,0,0,1,8.48,8.48Z"/>`],["regular",N`<path d="M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72a8,8,0,0,1,11.32-11.32L120,196.69V40a8,8,0,0,1,16,0V196.69l58.34-58.35a8,8,0,0,1,11.32,11.32Z"/>`],["bold",N`<path d="M208.49,152.49l-72,72a12,12,0,0,1-17,0l-72-72a12,12,0,0,1,17-17L116,187V40a12,12,0,0,1,24,0V187l51.51-51.52a12,12,0,0,1,17,17Z"/>`],["fill",N`<path d="M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72A8,8,0,0,1,56,136h64V40a8,8,0,0,1,16,0v96h64a8,8,0,0,1,5.66,13.66Z"/>`],["duotone",N`<path d="M200,144l-72,72L56,144Z" opacity="0.2"/><path d="M207.39,140.94A8,8,0,0,0,200,136H136V40a8,8,0,0,0-16,0v96H56a8,8,0,0,0-5.66,13.66l72,72a8,8,0,0,0,11.32,0l72-72A8,8,0,0,0,207.39,140.94ZM128,204.69,75.31,152H180.69Z"/>`]]),Hs.styles=_e`
    :host {
      display: contents;
    }
  `,Op([j({type:String,reflect:!0})],Hs.prototype,"size",2),Op([j({type:String,reflect:!0})],Hs.prototype,"weight",2),Op([j({type:String,reflect:!0})],Hs.prototype,"color",2),Op([j({type:Boolean,reflect:!0})],Hs.prototype,"mirrored",2),Hs=Op([Ie("ph-arrow-down")],Hs);var qge=Object.freeze({__proto__:null,get PhArrowDown(){return Hs}}),Wge=Object.defineProperty,Zge=Object.getOwnPropertyDescriptor,Pp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Zge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Wge(e,r,i),i};let js=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${js.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};js.weightsMap=new Map([["thin",N`<path d="M220,128a4,4,0,0,1-4,4H49.66l65.17,65.17a4,4,0,0,1-5.66,5.66l-72-72a4,4,0,0,1,0-5.66l72-72a4,4,0,0,1,5.66,5.66L49.66,124H216A4,4,0,0,1,220,128Z"/>`],["light",N`<path d="M222,128a6,6,0,0,1-6,6H54.49l61.75,61.76a6,6,0,1,1-8.48,8.48l-72-72a6,6,0,0,1,0-8.48l72-72a6,6,0,0,1,8.48,8.48L54.49,122H216A6,6,0,0,1,222,128Z"/>`],["regular",N`<path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"/>`],["bold",N`<path d="M228,128a12,12,0,0,1-12,12H69l51.52,51.51a12,12,0,0,1-17,17l-72-72a12,12,0,0,1,0-17l72-72a12,12,0,0,1,17,17L69,116H216A12,12,0,0,1,228,128Z"/>`],["fill",N`<path d="M224,128a8,8,0,0,1-8,8H120v64a8,8,0,0,1-13.66,5.66l-72-72a8,8,0,0,1,0-11.32l72-72A8,8,0,0,1,120,56v64h96A8,8,0,0,1,224,128Z"/>`],["duotone",N`<path d="M112,56V200L40,128Z" opacity="0.2"/><path d="M216,120H120V56a8,8,0,0,0-13.66-5.66l-72,72a8,8,0,0,0,0,11.32l72,72A8,8,0,0,0,120,200V136h96a8,8,0,0,0,0-16ZM104,180.69,51.31,128,104,75.31Z"/>`]]),js.styles=_e`
    :host {
      display: contents;
    }
  `,Pp([j({type:String,reflect:!0})],js.prototype,"size",2),Pp([j({type:String,reflect:!0})],js.prototype,"weight",2),Pp([j({type:String,reflect:!0})],js.prototype,"color",2),Pp([j({type:Boolean,reflect:!0})],js.prototype,"mirrored",2),js=Pp([Ie("ph-arrow-left")],js);var Kge=Object.freeze({__proto__:null,get PhArrowLeft(){return js}}),Gge=Object.defineProperty,Yge=Object.getOwnPropertyDescriptor,Np=(t,e,r,n)=>{for(var i=n>1?void 0:n?Yge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Gge(e,r,i),i};let Vs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Vs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Vs.weightsMap=new Map([["thin",N`<path d="M218.83,130.83l-72,72a4,4,0,0,1-5.66-5.66L206.34,132H40a4,4,0,0,1,0-8H206.34L141.17,58.83a4,4,0,0,1,5.66-5.66l72,72A4,4,0,0,1,218.83,130.83Z"/>`],["light",N`<path d="M220.24,132.24l-72,72a6,6,0,0,1-8.48-8.48L201.51,134H40a6,6,0,0,1,0-12H201.51L139.76,60.24a6,6,0,0,1,8.48-8.48l72,72A6,6,0,0,1,220.24,132.24Z"/>`],["regular",N`<path d="M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"/>`],["bold",N`<path d="M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"/>`],["fill",N`<path d="M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"/>`],["duotone",N`<path d="M216,128l-72,72V56Z" opacity="0.2"/><path d="M221.66,122.34l-72-72A8,8,0,0,0,136,56v64H40a8,8,0,0,0,0,16h96v64a8,8,0,0,0,13.66,5.66l72-72A8,8,0,0,0,221.66,122.34ZM152,180.69V75.31L204.69,128Z"/>`]]),Vs.styles=_e`
    :host {
      display: contents;
    }
  `,Np([j({type:String,reflect:!0})],Vs.prototype,"size",2),Np([j({type:String,reflect:!0})],Vs.prototype,"weight",2),Np([j({type:String,reflect:!0})],Vs.prototype,"color",2),Np([j({type:Boolean,reflect:!0})],Vs.prototype,"mirrored",2),Vs=Np([Ie("ph-arrow-right")],Vs);var Xge=Object.freeze({__proto__:null,get PhArrowRight(){return Vs}}),Jge=Object.defineProperty,Qge=Object.getOwnPropertyDescriptor,Tp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Qge(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Jge(e,r,i),i};let zs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${zs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};zs.weightsMap=new Map([["thin",N`<path d="M220,104a4,4,0,0,1-8,0V49.66l-73.16,73.17a4,4,0,0,1-5.66-5.66L206.34,44H152a4,4,0,0,1,0-8h64a4,4,0,0,1,4,4Zm-36,28a4,4,0,0,0-4,4v72a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V80a4,4,0,0,1,4-4h72a4,4,0,0,0,0-8H48A12,12,0,0,0,36,80V208a12,12,0,0,0,12,12H176a12,12,0,0,0,12-12V136A4,4,0,0,0,184,132Z"/>`],["light",N`<path d="M222,104a6,6,0,0,1-12,0V54.49l-69.75,69.75a6,6,0,0,1-8.48-8.48L201.51,46H152a6,6,0,0,1,0-12h64a6,6,0,0,1,6,6Zm-38,26a6,6,0,0,0-6,6v72a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V80a2,2,0,0,1,2-2h72a6,6,0,0,0,0-12H48A14,14,0,0,0,34,80V208a14,14,0,0,0,14,14H176a14,14,0,0,0,14-14V136A6,6,0,0,0,184,130Z"/>`],["regular",N`<path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"/>`],["bold",N`<path d="M228,104a12,12,0,0,1-24,0V69l-59.51,59.51a12,12,0,0,1-17-17L187,52H152a12,12,0,0,1,0-24h64a12,12,0,0,1,12,12Zm-44,24a12,12,0,0,0-12,12v64H52V84h64a12,12,0,0,0,0-24H48A20,20,0,0,0,28,80V208a20,20,0,0,0,20,20H176a20,20,0,0,0,20-20V140A12,12,0,0,0,184,128Z"/>`],["fill",N`<path d="M192,136v72a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V80A16,16,0,0,1,48,64h72a8,8,0,0,1,0,16H48V208H176V136a8,8,0,0,1,16,0Zm32-96a8,8,0,0,0-8-8H152a8,8,0,0,0-5.66,13.66L172.69,72l-42.35,42.34a8,8,0,0,0,11.32,11.32L184,83.31l26.34,26.35A8,8,0,0,0,224,104Z"/>`],["duotone",N`<path d="M184,80V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H176A8,8,0,0,1,184,80Z" opacity="0.2"/><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"/>`]]),zs.styles=_e`
    :host {
      display: contents;
    }
  `,Tp([j({type:String,reflect:!0})],zs.prototype,"size",2),Tp([j({type:String,reflect:!0})],zs.prototype,"weight",2),Tp([j({type:String,reflect:!0})],zs.prototype,"color",2),Tp([j({type:Boolean,reflect:!0})],zs.prototype,"mirrored",2),zs=Tp([Ie("ph-arrow-square-out")],zs);var e2e=Object.freeze({__proto__:null,get PhArrowSquareOut(){return zs}}),t2e=Object.defineProperty,r2e=Object.getOwnPropertyDescriptor,kp=(t,e,r,n)=>{for(var i=n>1?void 0:n?r2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t2e(e,r,i),i};let qs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${qs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};qs.weightsMap=new Map([["thin",N`<path d="M114.83,173.17a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66,0l-32-32a4,4,0,0,1,5.66-5.66L76,198.34V48a4,4,0,0,1,8,0V198.34l25.17-25.17A4,4,0,0,1,114.83,173.17Zm96-96-32-32a4,4,0,0,0-5.66,0l-32,32a4,4,0,0,0,5.66,5.66L172,57.66V208a4,4,0,0,0,8,0V57.66l25.17,25.17a4,4,0,1,0,5.66-5.66Z"/>`],["light",N`<path d="M116.24,171.76a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48,0l-32-32a6,6,0,0,1,8.48-8.48L74,193.51V48a6,6,0,0,1,12,0V193.51l21.76-21.75A6,6,0,0,1,116.24,171.76Zm96-96-32-32a6,6,0,0,0-8.48,0l-32,32a6,6,0,0,0,8.48,8.48L170,62.49V208a6,6,0,0,0,12,0V62.49l21.76,21.75a6,6,0,0,0,8.48-8.48Z"/>`],["regular",N`<path d="M117.66,170.34a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L72,188.69V48a8,8,0,0,1,16,0V188.69l18.34-18.35A8,8,0,0,1,117.66,170.34Zm96-96-32-32a8,8,0,0,0-11.32,0l-32,32a8,8,0,0,0,11.32,11.32L168,67.31V208a8,8,0,0,0,16,0V67.31l18.34,18.35a8,8,0,0,0,11.32-11.32Z"/>`],["bold",N`<path d="M120.49,167.51a12,12,0,0,1,0,17l-32,32a12,12,0,0,1-17,0l-32-32a12,12,0,1,1,17-17L68,179V48a12,12,0,0,1,24,0V179l11.51-11.52A12,12,0,0,1,120.49,167.51Zm96-96-32-32a12,12,0,0,0-17,0l-32,32a12,12,0,0,0,17,17L164,77V208a12,12,0,0,0,24,0V77l11.51,11.52a12,12,0,0,0,17-17Z"/>`],["fill",N`<path d="M119.39,172.94a8,8,0,0,1-1.73,8.72l-32,32a8,8,0,0,1-11.32,0l-32-32A8,8,0,0,1,48,168H72V48a8,8,0,0,1,16,0V168h24A8,8,0,0,1,119.39,172.94Zm94.27-98.6-32-32a8,8,0,0,0-11.32,0l-32,32A8,8,0,0,0,144,88h24V208a8,8,0,0,0,16,0V88h24a8,8,0,0,0,5.66-13.66Z"/>`],["duotone",N`<path d="M176,48V208H80V48Z" opacity="0.2"/><path d="M117.66,170.34a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L72,188.69V48a8,8,0,0,1,16,0V188.69l18.34-18.35A8,8,0,0,1,117.66,170.34Zm96-96-32-32a8,8,0,0,0-11.32,0l-32,32a8,8,0,0,0,11.32,11.32L168,67.31V208a8,8,0,0,0,16,0V67.31l18.34,18.35a8,8,0,0,0,11.32-11.32Z"/>`]]),qs.styles=_e`
    :host {
      display: contents;
    }
  `,kp([j({type:String,reflect:!0})],qs.prototype,"size",2),kp([j({type:String,reflect:!0})],qs.prototype,"weight",2),kp([j({type:String,reflect:!0})],qs.prototype,"color",2),kp([j({type:Boolean,reflect:!0})],qs.prototype,"mirrored",2),qs=kp([Ie("ph-arrows-down-up")],qs);var n2e=Object.freeze({__proto__:null,get PhArrowsDownUp(){return qs}}),i2e=Object.defineProperty,s2e=Object.getOwnPropertyDescriptor,Rp=(t,e,r,n)=>{for(var i=n>1?void 0:n?s2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&i2e(e,r,i),i};let Ws=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ws.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ws.weightsMap=new Map([["thin",N`<path d="M210.83,173.17a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66-5.66L198.34,180H48a4,4,0,0,1,0-8H198.34l-25.17-25.17a4,4,0,0,1,5.66-5.66ZM77.17,114.83a4,4,0,0,0,5.66-5.66L57.66,84H208a4,4,0,0,0,0-8H57.66L82.83,50.83a4,4,0,0,0-5.66-5.66l-32,32a4,4,0,0,0,0,5.66Z"/>`],["light",N`<path d="M212.24,171.76a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48-8.48L193.51,182H48a6,6,0,0,1,0-12H193.51l-21.75-21.76a6,6,0,0,1,8.48-8.48ZM75.76,116.24a6,6,0,0,0,8.48-8.48L62.49,86H208a6,6,0,0,0,0-12H62.49L84.24,52.24a6,6,0,0,0-8.48-8.48l-32,32a6,6,0,0,0,0,8.48Z"/>`],["regular",N`<path d="M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"/>`],["bold",N`<path d="M216.49,184.49l-32,32a12,12,0,0,1-17-17L179,188H48a12,12,0,0,1,0-24H179l-11.52-11.51a12,12,0,0,1,17-17l32,32A12,12,0,0,1,216.49,184.49Zm-145-64a12,12,0,0,0,17-17L77,92H208a12,12,0,0,0,0-24H77L88.49,56.49a12,12,0,0,0-17-17l-32,32a12,12,0,0,0,0,17Z"/>`],["fill",N`<path d="M42.34,85.66a8,8,0,0,1,0-11.32l32-32A8,8,0,0,1,88,48V72H208a8,8,0,0,1,0,16H88v24a8,8,0,0,1-13.66,5.66Zm171.32,84.68-32-32A8,8,0,0,0,168,144v24H48a8,8,0,0,0,0,16H168v24a8,8,0,0,0,13.66,5.66l32-32A8,8,0,0,0,213.66,170.34Z"/>`],["duotone",N`<path d="M208,80v96H48V80Z" opacity="0.2"/><path d="M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"/>`]]),Ws.styles=_e`
    :host {
      display: contents;
    }
  `,Rp([j({type:String,reflect:!0})],Ws.prototype,"size",2),Rp([j({type:String,reflect:!0})],Ws.prototype,"weight",2),Rp([j({type:String,reflect:!0})],Ws.prototype,"color",2),Rp([j({type:Boolean,reflect:!0})],Ws.prototype,"mirrored",2),Ws=Rp([Ie("ph-arrows-left-right")],Ws);var o2e=Object.freeze({__proto__:null,get PhArrowsLeftRight(){return Ws}}),a2e=Object.defineProperty,c2e=Object.getOwnPropertyDescriptor,Dp=(t,e,r,n)=>{for(var i=n>1?void 0:n?c2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&a2e(e,r,i),i};let Zs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Zs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Zs.weightsMap=new Map([["thin",N`<path d="M202.83,114.83a4,4,0,0,1-5.66,0L132,49.66V216a4,4,0,0,1-8,0V49.66L58.83,114.83a4,4,0,0,1-5.66-5.66l72-72a4,4,0,0,1,5.66,0l72,72A4,4,0,0,1,202.83,114.83Z"/>`],["light",N`<path d="M204.24,116.24a6,6,0,0,1-8.48,0L134,54.49V216a6,6,0,0,1-12,0V54.49L60.24,116.24a6,6,0,0,1-8.48-8.48l72-72a6,6,0,0,1,8.48,0l72,72A6,6,0,0,1,204.24,116.24Z"/>`],["regular",N`<path d="M205.66,117.66a8,8,0,0,1-11.32,0L136,59.31V216a8,8,0,0,1-16,0V59.31L61.66,117.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,205.66,117.66Z"/>`],["bold",N`<path d="M208.49,120.49a12,12,0,0,1-17,0L140,69V216a12,12,0,0,1-24,0V69L64.49,120.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0l72,72A12,12,0,0,1,208.49,120.49Z"/>`],["fill",N`<path d="M207.39,115.06A8,8,0,0,1,200,120H136v96a8,8,0,0,1-16,0V120H56a8,8,0,0,1-5.66-13.66l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,207.39,115.06Z"/>`],["duotone",N`<path d="M200,112H56l72-72Z" opacity="0.2"/><path d="M205.66,106.34l-72-72a8,8,0,0,0-11.32,0l-72,72A8,8,0,0,0,56,120h64v96a8,8,0,0,0,16,0V120h64a8,8,0,0,0,5.66-13.66ZM75.31,104,128,51.31,180.69,104Z"/>`]]),Zs.styles=_e`
    :host {
      display: contents;
    }
  `,Dp([j({type:String,reflect:!0})],Zs.prototype,"size",2),Dp([j({type:String,reflect:!0})],Zs.prototype,"weight",2),Dp([j({type:String,reflect:!0})],Zs.prototype,"color",2),Dp([j({type:Boolean,reflect:!0})],Zs.prototype,"mirrored",2),Zs=Dp([Ie("ph-arrow-up")],Zs);var l2e=Object.freeze({__proto__:null,get PhArrowUp(){return Zs}}),u2e=Object.defineProperty,h2e=Object.getOwnPropertyDescriptor,Bp=(t,e,r,n)=>{for(var i=n>1?void 0:n?h2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&u2e(e,r,i),i};let Ks=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ks.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ks.weightsMap=new Map([["thin",N`<path d="M196,64V168a4,4,0,0,1-8,0V73.66L66.83,194.83a4,4,0,0,1-5.66-5.66L182.34,68H88a4,4,0,0,1,0-8H192A4,4,0,0,1,196,64Z"/>`],["light",N`<path d="M198,64V168a6,6,0,0,1-12,0V78.48L68.24,196.24a6,6,0,0,1-8.48-8.48L177.52,70H88a6,6,0,0,1,0-12H192A6,6,0,0,1,198,64Z"/>`],["regular",N`<path d="M200,64V168a8,8,0,0,1-16,0V83.31L69.66,197.66a8,8,0,0,1-11.32-11.32L172.69,72H88a8,8,0,0,1,0-16H192A8,8,0,0,1,200,64Z"/>`],["bold",N`<path d="M204,64V168a12,12,0,0,1-24,0V93L72.49,200.49a12,12,0,0,1-17-17L163,76H88a12,12,0,0,1,0-24H192A12,12,0,0,1,204,64Z"/>`],["fill",N`<path d="M200,64V168a8,8,0,0,1-13.66,5.66L140,127.31,69.66,197.66a8,8,0,0,1-11.32-11.32L128.69,116,82.34,69.66A8,8,0,0,1,88,56H192A8,8,0,0,1,200,64Z"/>`],["duotone",N`<path d="M192,64V168L88,64Z" opacity="0.2"/><path d="M192,56H88a8,8,0,0,0-5.66,13.66L128.69,116,58.34,186.34a8,8,0,0,0,11.32,11.32L140,127.31l46.34,46.35A8,8,0,0,0,200,168V64A8,8,0,0,0,192,56Zm-8,92.69-38.34-38.34h0L107.31,72H184Z"/>`]]),Ks.styles=_e`
    :host {
      display: contents;
    }
  `,Bp([j({type:String,reflect:!0})],Ks.prototype,"size",2),Bp([j({type:String,reflect:!0})],Ks.prototype,"weight",2),Bp([j({type:String,reflect:!0})],Ks.prototype,"color",2),Bp([j({type:Boolean,reflect:!0})],Ks.prototype,"mirrored",2),Ks=Bp([Ie("ph-arrow-up-right")],Ks);var d2e=Object.freeze({__proto__:null,get PhArrowUpRight(){return Ks}}),p2e=Object.defineProperty,f2e=Object.getOwnPropertyDescriptor,Mp=(t,e,r,n)=>{for(var i=n>1?void 0:n?f2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&p2e(e,r,i),i};let Gs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Gs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Gs.weightsMap=new Map([["thin",N`<path d="M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"/>`],["light",N`<path d="M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"/>`],["regular",N`<path d="M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"/>`],["bold",N`<path d="M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"/>`],["fill",N`<path d="M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"/>`],["duotone",N`<path d="M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z" opacity="0.2"/><path d="M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"/>`]]),Gs.styles=_e`
    :host {
      display: contents;
    }
  `,Mp([j({type:String,reflect:!0})],Gs.prototype,"size",2),Mp([j({type:String,reflect:!0})],Gs.prototype,"weight",2),Mp([j({type:String,reflect:!0})],Gs.prototype,"color",2),Mp([j({type:Boolean,reflect:!0})],Gs.prototype,"mirrored",2),Gs=Mp([Ie("ph-arrows-clockwise")],Gs);var g2e=Object.freeze({__proto__:null,get PhArrowsClockwise(){return Gs}}),m2e=Object.defineProperty,w2e=Object.getOwnPropertyDescriptor,Up=(t,e,r,n)=>{for(var i=n>1?void 0:n?w2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&m2e(e,r,i),i};let Ys=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ys.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ys.weightsMap=new Map([["thin",N`<path d="M24,100H52v72H32a4,4,0,0,0,0,8H224a4,4,0,0,0,0-8H204V100h28a4,4,0,0,0,2.1-7.41l-104-64a4,4,0,0,0-4.2,0l-104,64A4,4,0,0,0,24,100Zm36,0h40v72H60Zm88,0v72H108V100Zm48,72H156V100h40ZM128,36.7,217.87,92H38.13ZM244,208a4,4,0,0,1-4,4H16a4,4,0,0,1,0-8H240A4,4,0,0,1,244,208Z"/>`],["light",N`<path d="M24,102H50v68H32a6,6,0,0,0,0,12H224a6,6,0,0,0,0-12H206V102h26a6,6,0,0,0,3.14-11.11l-104-64a6,6,0,0,0-6.28,0l-104,64A6,6,0,0,0,24,102Zm38,0H98v68H62Zm84,0v68H110V102Zm48,68H158V102h36ZM128,39l82.8,51H45.2ZM246,208a6,6,0,0,1-6,6H16a6,6,0,0,1,0-12H240A6,6,0,0,1,246,208Z"/>`],["regular",N`<path d="M24,104H48v64H32a8,8,0,0,0,0,16H224a8,8,0,0,0,0-16H208V104h24a8,8,0,0,0,4.19-14.81l-104-64a8,8,0,0,0-8.38,0l-104,64A8,8,0,0,0,24,104Zm40,0H96v64H64Zm80,0v64H112V104Zm48,64H160V104h32ZM128,41.39,203.74,88H52.26ZM248,208a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H240A8,8,0,0,1,248,208Z"/>`],["bold",N`<path d="M24,108H44v48H32a12,12,0,0,0,0,24H224a12,12,0,0,0,0-24H212V108h20a12,12,0,0,0,6.29-22.22l-104-64a12,12,0,0,0-12.58,0l-104,64A12,12,0,0,0,24,108Zm44,0H92v48H68Zm72,0v48H116V108Zm48,48H164V108h24ZM128,46.09,189.6,84H66.4ZM252,208a12,12,0,0,1-12,12H16a12,12,0,0,1,0-24H240A12,12,0,0,1,252,208Z"/>`],["fill",N`<path d="M248,208a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H240A8,8,0,0,1,248,208ZM16.3,98.18a8,8,0,0,1,3.51-9l104-64a8,8,0,0,1,8.38,0l104,64A8,8,0,0,1,232,104H208v64h16a8,8,0,0,1,0,16H32a8,8,0,0,1,0-16H48V104H24A8,8,0,0,1,16.3,98.18ZM144,160a8,8,0,0,0,16,0V112a8,8,0,0,0-16,0Zm-48,0a8,8,0,0,0,16,0V112a8,8,0,0,0-16,0Z"/>`],["duotone",N`<path d="M232,96H24L128,32Z" opacity="0.2"/><path d="M24,104H48v64H32a8,8,0,0,0,0,16H224a8,8,0,0,0,0-16H208V104h24a8,8,0,0,0,4.19-14.81l-104-64a8,8,0,0,0-8.38,0l-104,64A8,8,0,0,0,24,104Zm40,0H96v64H64Zm80,0v64H112V104Zm48,64H160V104h32ZM128,41.39,203.74,88H52.26ZM248,208a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H240A8,8,0,0,1,248,208Z"/>`]]),Ys.styles=_e`
    :host {
      display: contents;
    }
  `,Up([j({type:String,reflect:!0})],Ys.prototype,"size",2),Up([j({type:String,reflect:!0})],Ys.prototype,"weight",2),Up([j({type:String,reflect:!0})],Ys.prototype,"color",2),Up([j({type:Boolean,reflect:!0})],Ys.prototype,"mirrored",2),Ys=Up([Ie("ph-bank")],Ys);var y2e=Object.freeze({__proto__:null,get PhBank(){return Ys}}),b2e=Object.defineProperty,v2e=Object.getOwnPropertyDescriptor,Lp=(t,e,r,n)=>{for(var i=n>1?void 0:n?v2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b2e(e,r,i),i};let Xs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Xs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Xs.weightsMap=new Map([["thin",N`<path d="M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44ZM40,52H216a4,4,0,0,1,4,4V92H36V56A4,4,0,0,1,40,52ZM216,204H40a4,4,0,0,1-4-4V100H220V200A4,4,0,0,1,216,204Z"/>`],["light",N`<path d="M216,42H40A14,14,0,0,0,26,56V200a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM40,54H216a2,2,0,0,1,2,2V90H38V56A2,2,0,0,1,40,54ZM216,202H40a2,2,0,0,1-2-2V102H218v98A2,2,0,0,1,216,202Z"/>`],["regular",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V88H40V56Zm0,144H40V104H216v96Z"/>`],["bold",N`<path d="M216,36H40A20,20,0,0,0,20,56V200a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A20,20,0,0,0,216,36Zm-4,24V84H44V60ZM44,196V108H212v88Z"/>`],["fill",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V88H40V56Z"/>`],["duotone",N`<path d="M224,56V96H32V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z" opacity="0.2"/><path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V88H40V56Zm0,144H40V104H216v96Z"/>`]]),Xs.styles=_e`
    :host {
      display: contents;
    }
  `,Lp([j({type:String,reflect:!0})],Xs.prototype,"size",2),Lp([j({type:String,reflect:!0})],Xs.prototype,"weight",2),Lp([j({type:String,reflect:!0})],Xs.prototype,"color",2),Lp([j({type:Boolean,reflect:!0})],Xs.prototype,"mirrored",2),Xs=Lp([Ie("ph-browser")],Xs);var E2e=Object.freeze({__proto__:null,get PhBrowser(){return Xs}}),C2e=Object.defineProperty,A2e=Object.getOwnPropertyDescriptor,Fp=(t,e,r,n)=>{for(var i=n>1?void 0:n?A2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&C2e(e,r,i),i};let Js=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Js.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Js.weightsMap=new Map([["thin",N`<path d="M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"/>`],["light",N`<path d="M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"/>`],["regular",N`<path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"/>`],["bold",N`<path d="M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"/>`],["fill",N`<path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"/>`],["duotone",N`<path d="M208,96l-80,80L48,96Z" opacity="0.2"/><path d="M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"/>`]]),Js.styles=_e`
    :host {
      display: contents;
    }
  `,Fp([j({type:String,reflect:!0})],Js.prototype,"size",2),Fp([j({type:String,reflect:!0})],Js.prototype,"weight",2),Fp([j({type:String,reflect:!0})],Js.prototype,"color",2),Fp([j({type:Boolean,reflect:!0})],Js.prototype,"mirrored",2),Js=Fp([Ie("ph-caret-down")],Js);var $2e=Object.freeze({__proto__:null,get PhCaretDown(){return Js}}),x2e=Object.defineProperty,_2e=Object.getOwnPropertyDescriptor,Hp=(t,e,r,n)=>{for(var i=n>1?void 0:n?_2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&x2e(e,r,i),i};let Qs=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Qs.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Qs.weightsMap=new Map([["thin",N`<path d="M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"/>`],["light",N`<path d="M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"/>`],["regular",N`<path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"/>`],["bold",N`<path d="M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"/>`],["fill",N`<path d="M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"/>`],["duotone",N`<path d="M160,48V208L80,128Z" opacity="0.2"/><path d="M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"/>`]]),Qs.styles=_e`
    :host {
      display: contents;
    }
  `,Hp([j({type:String,reflect:!0})],Qs.prototype,"size",2),Hp([j({type:String,reflect:!0})],Qs.prototype,"weight",2),Hp([j({type:String,reflect:!0})],Qs.prototype,"color",2),Hp([j({type:Boolean,reflect:!0})],Qs.prototype,"mirrored",2),Qs=Hp([Ie("ph-caret-left")],Qs);var S2e=Object.freeze({__proto__:null,get PhCaretLeft(){return Qs}}),I2e=Object.defineProperty,O2e=Object.getOwnPropertyDescriptor,jp=(t,e,r,n)=>{for(var i=n>1?void 0:n?O2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I2e(e,r,i),i};let eo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${eo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};eo.weightsMap=new Map([["thin",N`<path d="M178.83,130.83l-80,80a4,4,0,0,1-5.66-5.66L170.34,128,93.17,50.83a4,4,0,0,1,5.66-5.66l80,80A4,4,0,0,1,178.83,130.83Z"/>`],["light",N`<path d="M180.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L167.51,128,91.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,180.24,132.24Z"/>`],["regular",N`<path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"/>`],["bold",N`<path d="M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"/>`],["fill",N`<path d="M181.66,133.66l-80,80A8,8,0,0,1,88,208V48a8,8,0,0,1,13.66-5.66l80,80A8,8,0,0,1,181.66,133.66Z"/>`],["duotone",N`<path d="M176,128,96,208V48Z" opacity="0.2"/><path d="M181.66,122.34l-80-80A8,8,0,0,0,88,48V208a8,8,0,0,0,13.66,5.66l80-80A8,8,0,0,0,181.66,122.34ZM104,188.69V67.31L164.69,128Z"/>`]]),eo.styles=_e`
    :host {
      display: contents;
    }
  `,jp([j({type:String,reflect:!0})],eo.prototype,"size",2),jp([j({type:String,reflect:!0})],eo.prototype,"weight",2),jp([j({type:String,reflect:!0})],eo.prototype,"color",2),jp([j({type:Boolean,reflect:!0})],eo.prototype,"mirrored",2),eo=jp([Ie("ph-caret-right")],eo);var P2e=Object.freeze({__proto__:null,get PhCaretRight(){return eo}}),N2e=Object.defineProperty,T2e=Object.getOwnPropertyDescriptor,Vp=(t,e,r,n)=>{for(var i=n>1?void 0:n?T2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N2e(e,r,i),i};let to=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${to.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};to.weightsMap=new Map([["thin",N`<path d="M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"/>`],["light",N`<path d="M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"/>`],["regular",N`<path d="M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"/>`],["bold",N`<path d="M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"/>`],["fill",N`<path d="M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"/>`],["duotone",N`<path d="M208,160H48l80-80Z" opacity="0.2"/><path d="M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"/>`]]),to.styles=_e`
    :host {
      display: contents;
    }
  `,Vp([j({type:String,reflect:!0})],to.prototype,"size",2),Vp([j({type:String,reflect:!0})],to.prototype,"weight",2),Vp([j({type:String,reflect:!0})],to.prototype,"color",2),Vp([j({type:Boolean,reflect:!0})],to.prototype,"mirrored",2),to=Vp([Ie("ph-caret-up")],to);var k2e=Object.freeze({__proto__:null,get PhCaretUp(){return to}}),R2e=Object.defineProperty,D2e=Object.getOwnPropertyDescriptor,zp=(t,e,r,n)=>{for(var i=n>1?void 0:n?D2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&R2e(e,r,i),i};let ro=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${ro.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};ro.weightsMap=new Map([["thin",N`<path d="M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"/>`],["light",N`<path d="M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"/>`],["regular",N`<path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"/>`],["bold",N`<path d="M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"/>`],["fill",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"/>`],["duotone",N`<path d="M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z" opacity="0.2"/><path d="M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"/>`]]),ro.styles=_e`
    :host {
      display: contents;
    }
  `,zp([j({type:String,reflect:!0})],ro.prototype,"size",2),zp([j({type:String,reflect:!0})],ro.prototype,"weight",2),zp([j({type:String,reflect:!0})],ro.prototype,"color",2),zp([j({type:Boolean,reflect:!0})],ro.prototype,"mirrored",2),ro=zp([Ie("ph-check")],ro);var B2e=Object.freeze({__proto__:null,get PhCheck(){return ro}}),M2e=Object.defineProperty,U2e=Object.getOwnPropertyDescriptor,qp=(t,e,r,n)=>{for(var i=n>1?void 0:n?U2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M2e(e,r,i),i};let no=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${no.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};no.weightsMap=new Map([["thin",N`<path d="M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm4,8.09a91.58,91.58,0,0,1,24,4.27V215.64a91.58,91.58,0,0,1-24,4.27Zm32,7.25a92.21,92.21,0,0,1,24,15V197.69a92.21,92.21,0,0,1-24,15ZM36,128a92.11,92.11,0,0,1,88-91.91V219.91A92.11,92.11,0,0,1,36,128Zm160,61.9V66.1a91.83,91.83,0,0,1,0,123.8Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm6,12.2a89.86,89.86,0,0,1,20,3.63V214.17a89.86,89.86,0,0,1-20,3.63Zm32,8.23a90.48,90.48,0,0,1,20,12.81V196.76a90.48,90.48,0,0,1-20,12.81ZM38,128a90.12,90.12,0,0,1,84-89.8V217.8A90.12,90.12,0,0,1,38,128Zm160,56.5V71.5a89.81,89.81,0,0,1,0,113Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,16.37a86.4,86.4,0,0,1,16,3V212.67a86.4,86.4,0,0,1-16,3Zm32,9.26a87.81,87.81,0,0,1,16,10.54V195.83a87.81,87.81,0,0,1-16,10.54ZM40,128a88.11,88.11,0,0,1,80-87.63V215.63A88.11,88.11,0,0,1,40,128Zm160,50.54V77.46a87.82,87.82,0,0,1,0,101.08Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm12,24.87a83.53,83.53,0,0,1,24,7.25V203.88a83.53,83.53,0,0,1-24,7.25ZM44,128a84.12,84.12,0,0,1,72-83.13V211.13A84.12,84.12,0,0,1,44,128Zm144,58.71V69.29a83.81,83.81,0,0,1,0,117.42Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM40,128a88.1,88.1,0,0,1,88-88V216A88.1,88.1,0,0,1,40,128Z"/>`],["duotone",N`<path d="M224,128a96,96,0,0,1-96,96V32A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM40,128a88.11,88.11,0,0,1,80-87.63V215.63A88.11,88.11,0,0,1,40,128Zm96,87.63V40.37a88,88,0,0,1,0,175.26Z"/>`]]),no.styles=_e`
    :host {
      display: contents;
    }
  `,qp([j({type:String,reflect:!0})],no.prototype,"size",2),qp([j({type:String,reflect:!0})],no.prototype,"weight",2),qp([j({type:String,reflect:!0})],no.prototype,"color",2),qp([j({type:Boolean,reflect:!0})],no.prototype,"mirrored",2),no=qp([Ie("ph-circle-half")],no);var L2e=Object.freeze({__proto__:null,get PhCircleHalf(){return no}}),F2e=Object.defineProperty,H2e=Object.getOwnPropertyDescriptor,Wp=(t,e,r,n)=>{for(var i=n>1?void 0:n?H2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F2e(e,r,i),i};let io=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${io.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};io.weightsMap=new Map([["thin",N`<path d="M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"/>`]]),io.styles=_e`
    :host {
      display: contents;
    }
  `,Wp([j({type:String,reflect:!0})],io.prototype,"size",2),Wp([j({type:String,reflect:!0})],io.prototype,"weight",2),Wp([j({type:String,reflect:!0})],io.prototype,"color",2),Wp([j({type:Boolean,reflect:!0})],io.prototype,"mirrored",2),io=Wp([Ie("ph-clock")],io);var j2e=Object.freeze({__proto__:null,get PhClock(){return io}}),V2e=Object.defineProperty,z2e=Object.getOwnPropertyDescriptor,Zp=(t,e,r,n)=>{for(var i=n>1?void 0:n?z2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V2e(e,r,i),i};let so=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${so.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};so.weightsMap=new Map([["thin",N`<path d="M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220ZM174.21,76.42l-64,32a4.08,4.08,0,0,0-1.79,1.79l-32,64A4,4,0,0,0,80,180a4.05,4.05,0,0,0,1.79-.42l64-32a4.08,4.08,0,0,0,1.79-1.79l32-64a4,4,0,0,0-5.37-5.37ZM141,141l-52.08,26L115,115l52.08-26Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218ZM173.32,74.63l-64,32a6,6,0,0,0-2.69,2.69l-32,64A6,6,0,0,0,80,182a6.06,6.06,0,0,0,2.68-.63l64-32a6,6,0,0,0,2.69-2.69l32-64a6,6,0,0,0-8.05-8.05Zm-33.79,64.9L93.42,162.58l23-46.11,46.11-23Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM172.42,72.84l-64,32a8.05,8.05,0,0,0-3.58,3.58l-32,64A8,8,0,0,0,80,184a8.1,8.1,0,0,0,3.58-.84l64-32a8.05,8.05,0,0,0,3.58-3.58l32-64a8,8,0,0,0-10.74-10.74ZM138,138,97.89,158.11,118,118l40.15-20.07Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212ZM163.27,77l-56,24a12,12,0,0,0-6.3,6.3l-24,56A12,12,0,0,0,92.73,179l56-24a12,12,0,0,0,6.3-6.3l24-56A12,12,0,0,0,163.27,77Zm-28.41,57.89-24,10.29,10.29-24,24-10.29Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm51.58,57.79-32,64a4.08,4.08,0,0,1-1.79,1.79l-64,32a4,4,0,0,1-5.37-5.37l32-64a4.08,4.08,0,0,1,1.79-1.79l64-32A4,4,0,0,1,179.58,81.79Z"/>`],["duotone",N`<path d="M128,32a96,96,0,1,0,96,96A96,96,0,0,0,128,32Zm16,112L80,176l32-64,64-32Z" opacity="0.2"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM172.42,72.84l-64,32a8.05,8.05,0,0,0-3.58,3.58l-32,64A8,8,0,0,0,80,184a8.1,8.1,0,0,0,3.58-.84l64-32a8.05,8.05,0,0,0,3.58-3.58l32-64a8,8,0,0,0-10.74-10.74ZM138,138,97.89,158.11,118,118l40.15-20.07Z"/>`]]),so.styles=_e`
    :host {
      display: contents;
    }
  `,Zp([j({type:String,reflect:!0})],so.prototype,"size",2),Zp([j({type:String,reflect:!0})],so.prototype,"weight",2),Zp([j({type:String,reflect:!0})],so.prototype,"color",2),Zp([j({type:Boolean,reflect:!0})],so.prototype,"mirrored",2),so=Zp([Ie("ph-compass")],so);var q2e=Object.freeze({__proto__:null,get PhCompass(){return so}}),W2e=Object.defineProperty,Z2e=Object.getOwnPropertyDescriptor,Kp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W2e(e,r,i),i};let oo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${oo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};oo.weightsMap=new Map([["thin",N`<path d="M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"/>`],["light",N`<path d="M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"/>`],["regular",N`<path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"/>`],["bold",N`<path d="M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"/>`],["fill",N`<path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"/>`],["duotone",N`<path d="M216,40V168H168V88H88V40Z" opacity="0.2"/><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"/>`]]),oo.styles=_e`
    :host {
      display: contents;
    }
  `,Kp([j({type:String,reflect:!0})],oo.prototype,"size",2),Kp([j({type:String,reflect:!0})],oo.prototype,"weight",2),Kp([j({type:String,reflect:!0})],oo.prototype,"color",2),Kp([j({type:Boolean,reflect:!0})],oo.prototype,"mirrored",2),oo=Kp([Ie("ph-copy")],oo);var K2e=Object.freeze({__proto__:null,get PhCopy(){return oo}}),G2e=Object.defineProperty,Y2e=Object.getOwnPropertyDescriptor,Gp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G2e(e,r,i),i};let ao=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${ao.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};ao.weightsMap=new Map([["thin",N`<path d="M224,52H32A12,12,0,0,0,20,64V192a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V64A12,12,0,0,0,224,52ZM32,60H224a4,4,0,0,1,4,4V92H28V64A4,4,0,0,1,32,60ZM224,196H32a4,4,0,0,1-4-4V100H228v92A4,4,0,0,1,224,196Zm-20-28a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h32A4,4,0,0,1,204,168Zm-64,0a4,4,0,0,1-4,4H120a4,4,0,0,1,0-8h16A4,4,0,0,1,140,168Z"/>`],["light",N`<path d="M224,50H32A14,14,0,0,0,18,64V192a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V64A14,14,0,0,0,224,50ZM32,62H224a2,2,0,0,1,2,2V90H30V64A2,2,0,0,1,32,62ZM224,194H32a2,2,0,0,1-2-2V102H226v90A2,2,0,0,1,224,194Zm-18-26a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h32A6,6,0,0,1,206,168Zm-64,0a6,6,0,0,1-6,6H120a6,6,0,0,1,0-12h16A6,6,0,0,1,142,168Z"/>`],["regular",N`<path d="M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"/>`],["bold",N`<path d="M224,44H32A20,20,0,0,0,12,64V192a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V64A20,20,0,0,0,224,44Zm-4,24V88H36V68ZM36,188V112H220v76Zm172-24a12,12,0,0,1-12,12H164a12,12,0,0,1,0-24h32A12,12,0,0,1,208,164Zm-68,0a12,12,0,0,1-12,12H116a12,12,0,0,1,0-24h12A12,12,0,0,1,140,164Z"/>`],["fill",N`<path d="M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM136,176H120a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm64,0H168a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16ZM32,88V64H224V88Z"/>`],["duotone",N`<path d="M232,96v96a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V96Z" opacity="0.2"/><path d="M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"/>`]]),ao.styles=_e`
    :host {
      display: contents;
    }
  `,Gp([j({type:String,reflect:!0})],ao.prototype,"size",2),Gp([j({type:String,reflect:!0})],ao.prototype,"weight",2),Gp([j({type:String,reflect:!0})],ao.prototype,"color",2),Gp([j({type:Boolean,reflect:!0})],ao.prototype,"mirrored",2),ao=Gp([Ie("ph-credit-card")],ao);var X2e=Object.freeze({__proto__:null,get PhCreditCard(){return ao}}),J2e=Object.defineProperty,Q2e=Object.getOwnPropertyDescriptor,Yp=(t,e,r,n)=>{for(var i=n>1?void 0:n?Q2e(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J2e(e,r,i),i};let co=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${co.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};co.weightsMap=new Map([["thin",N`<path d="M152,124H132V52h12a36,36,0,0,1,36,36,4,4,0,0,0,8,0,44.05,44.05,0,0,0-44-44H132V24a4,4,0,0,0-8,0V44H112a44,44,0,0,0,0,88h12v72H104a36,36,0,0,1-36-36,4,4,0,0,0-8,0,44.05,44.05,0,0,0,44,44h20v20a4,4,0,0,0,8,0V212h20a44,44,0,0,0,0-88Zm-40,0a36,36,0,0,1,0-72h12v72Zm40,80H132V132h20a36,36,0,0,1,0,72Z"/>`],["light",N`<path d="M152,122H134V54h10a34,34,0,0,1,34,34,6,6,0,0,0,12,0,46.06,46.06,0,0,0-46-46H134V24a6,6,0,0,0-12,0V42H112a46,46,0,0,0,0,92h10v68H104a34,34,0,0,1-34-34,6,6,0,0,0-12,0,46.06,46.06,0,0,0,46,46h18v18a6,6,0,0,0,12,0V214h18a46,46,0,0,0,0-92Zm-40,0a34,34,0,0,1,0-68h10v68Zm40,80H134V134h18a34,34,0,0,1,0,68Z"/>`],["regular",N`<path d="M152,120H136V56h8a32,32,0,0,1,32,32,8,8,0,0,0,16,0,48.05,48.05,0,0,0-48-48h-8V24a8,8,0,0,0-16,0V40h-8a48,48,0,0,0,0,96h8v64H104a32,32,0,0,1-32-32,8,8,0,0,0-16,0,48.05,48.05,0,0,0,48,48h16v16a8,8,0,0,0,16,0V216h16a48,48,0,0,0,0-96Zm-40,0a32,32,0,0,1,0-64h8v64Zm40,80H136V136h16a32,32,0,0,1,0,64Z"/>`],["bold",N`<path d="M152,116H140V60h4a28,28,0,0,1,28,28,12,12,0,0,0,24,0,52.06,52.06,0,0,0-52-52h-4V24a12,12,0,0,0-24,0V36h-4a52,52,0,0,0,0,104h4v56H104a28,28,0,0,1-28-28,12,12,0,0,0-24,0,52.06,52.06,0,0,0,52,52h12v12a12,12,0,0,0,24,0V220h12a52,52,0,0,0,0-104Zm-40,0a28,28,0,0,1,0-56h4v56Zm40,80H140V140h12a28,28,0,0,1,0,56Z"/>`],["fill",N`<path d="M160,152a16,16,0,0,1-16,16h-8V136h8A16,16,0,0,1,160,152Zm72-24A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-56,24a32,32,0,0,0-32-32h-8V88h4a16,16,0,0,1,16,16,8,8,0,0,0,16,0,32,32,0,0,0-32-32h-4V64a8,8,0,0,0-16,0v8h-4a32,32,0,0,0,0,64h4v32h-8a16,16,0,0,1-16-16,8,8,0,0,0-16,0,32,32,0,0,0,32,32h8v8a8,8,0,0,0,16,0v-8h8A32,32,0,0,0,176,152Zm-76-48a16,16,0,0,0,16,16h4V88h-4A16,16,0,0,0,100,104Z"/>`],["duotone",N`<path d="M192,168a40,40,0,0,1-40,40H128V128h24A40,40,0,0,1,192,168ZM112,48a40,40,0,0,0,0,80h16V48Z" opacity="0.2"/><path d="M152,120H136V56h8a32,32,0,0,1,32,32,8,8,0,0,0,16,0,48.05,48.05,0,0,0-48-48h-8V24a8,8,0,0,0-16,0V40h-8a48,48,0,0,0,0,96h8v64H104a32,32,0,0,1-32-32,8,8,0,0,0-16,0,48.05,48.05,0,0,0,48,48h16v16a8,8,0,0,0,16,0V216h16a48,48,0,0,0,0-96Zm-40,0a32,32,0,0,1,0-64h8v64Zm40,80H136V136h16a32,32,0,0,1,0,64Z"/>`]]),co.styles=_e`
    :host {
      display: contents;
    }
  `,Yp([j({type:String,reflect:!0})],co.prototype,"size",2),Yp([j({type:String,reflect:!0})],co.prototype,"weight",2),Yp([j({type:String,reflect:!0})],co.prototype,"color",2),Yp([j({type:Boolean,reflect:!0})],co.prototype,"mirrored",2),co=Yp([Ie("ph-currency-dollar")],co);var eme=Object.freeze({__proto__:null,get PhCurrencyDollar(){return co}}),tme=Object.defineProperty,rme=Object.getOwnPropertyDescriptor,Xp=(t,e,r,n)=>{for(var i=n>1?void 0:n?rme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&tme(e,r,i),i};let lo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${lo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};lo.weightsMap=new Map([["thin",N`<path d="M208,44H48A20,20,0,0,0,28,64V176a20,20,0,0,0,20,20h76v24H96a4,4,0,0,0,0,8h64a4,4,0,0,0,0-8H132V196h76a20,20,0,0,0,20-20V64A20,20,0,0,0,208,44ZM48,52H208a12,12,0,0,1,12,12v84H36V64A12,12,0,0,1,48,52ZM208,188H48a12,12,0,0,1-12-12V156H220v20A12,12,0,0,1,208,188Z"/>`],["light",N`<path d="M208,42H48A22,22,0,0,0,26,64V176a22,22,0,0,0,22,22h74v20H96a6,6,0,0,0,0,12h64a6,6,0,0,0,0-12H134V198h74a22,22,0,0,0,22-22V64A22,22,0,0,0,208,42ZM48,54H208a10,10,0,0,1,10,10v82H38V64A10,10,0,0,1,48,54ZM208,186H48a10,10,0,0,1-10-10V158H218v18A10,10,0,0,1,208,186Z"/>`],["regular",N`<path d="M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40ZM48,56H208a8,8,0,0,1,8,8v80H40V64A8,8,0,0,1,48,56ZM208,184H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"/>`],["bold",N`<path d="M208,36H48A28,28,0,0,0,20,64V172a28,28,0,0,0,28,28h68v12H96a12,12,0,0,0,0,24h64a12,12,0,0,0,0-24H140V200h68a28,28,0,0,0,28-28V64A28,28,0,0,0,208,36ZM48,60H208a4,4,0,0,1,4,4v72H44V64A4,4,0,0,1,48,60ZM208,176H48a4,4,0,0,1-4-4V160H212v12A4,4,0,0,1,208,176Z"/>`],["fill",N`<path d="M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40Zm0,144H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"/>`],["duotone",N`<path d="M224,64v88H32V64A16,16,0,0,1,48,48H208A16,16,0,0,1,224,64Z" opacity="0.2"/><path d="M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24h72v16H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V200h72a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40ZM48,56H208a8,8,0,0,1,8,8v80H40V64A8,8,0,0,1,48,56ZM208,184H48a8,8,0,0,1-8-8V160H216v16A8,8,0,0,1,208,184Z"/>`]]),lo.styles=_e`
    :host {
      display: contents;
    }
  `,Xp([j({type:String,reflect:!0})],lo.prototype,"size",2),Xp([j({type:String,reflect:!0})],lo.prototype,"weight",2),Xp([j({type:String,reflect:!0})],lo.prototype,"color",2),Xp([j({type:Boolean,reflect:!0})],lo.prototype,"mirrored",2),lo=Xp([Ie("ph-desktop")],lo);var nme=Object.freeze({__proto__:null,get PhDesktop(){return lo}}),ime=Object.defineProperty,sme=Object.getOwnPropertyDescriptor,Jp=(t,e,r,n)=>{for(var i=n>1?void 0:n?sme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ime(e,r,i),i};let uo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${uo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};uo.weightsMap=new Map([["thin",N`<path d="M176,20H80A20,20,0,0,0,60,40V216a20,20,0,0,0,20,20h96a20,20,0,0,0,20-20V40A20,20,0,0,0,176,20ZM68,60H188V196H68ZM80,28h96a12,12,0,0,1,12,12V52H68V40A12,12,0,0,1,80,28Zm96,200H80a12,12,0,0,1-12-12V204H188v12A12,12,0,0,1,176,228Z"/>`],["light",N`<path d="M176,18H80A22,22,0,0,0,58,40V216a22,22,0,0,0,22,22h96a22,22,0,0,0,22-22V40A22,22,0,0,0,176,18ZM70,62H186V194H70ZM80,30h96a10,10,0,0,1,10,10V50H70V40A10,10,0,0,1,80,30Zm96,196H80a10,10,0,0,1-10-10V206H186v10A10,10,0,0,1,176,226Z"/>`],["regular",N`<path d="M176,16H80A24,24,0,0,0,56,40V216a24,24,0,0,0,24,24h96a24,24,0,0,0,24-24V40A24,24,0,0,0,176,16ZM72,64H184V192H72Zm8-32h96a8,8,0,0,1,8,8v8H72V40A8,8,0,0,1,80,32Zm96,192H80a8,8,0,0,1-8-8v-8H184v8A8,8,0,0,1,176,224Z"/>`],["bold",N`<path d="M176,12H80A28,28,0,0,0,52,40V216a28,28,0,0,0,28,28h96a28,28,0,0,0,28-28V40A28,28,0,0,0,176,12ZM76,76H180V180H76Zm4-40h96a4,4,0,0,1,4,4V52H76V40A4,4,0,0,1,80,36Zm96,184H80a4,4,0,0,1-4-4V204H180v12A4,4,0,0,1,176,220Z"/>`],["fill",N`<path d="M176,16H80A24,24,0,0,0,56,40V216a24,24,0,0,0,24,24h96a24,24,0,0,0,24-24V40A24,24,0,0,0,176,16ZM80,32h96a8,8,0,0,1,8,8v8H72V40A8,8,0,0,1,80,32Zm96,192H80a8,8,0,0,1-8-8v-8H184v8A8,8,0,0,1,176,224Z"/>`],["duotone",N`<path d="M192,56V200H64V56Z" opacity="0.2"/><path d="M176,16H80A24,24,0,0,0,56,40V216a24,24,0,0,0,24,24h96a24,24,0,0,0,24-24V40A24,24,0,0,0,176,16ZM72,64H184V192H72Zm8-32h96a8,8,0,0,1,8,8v8H72V40A8,8,0,0,1,80,32Zm96,192H80a8,8,0,0,1-8-8v-8H184v8A8,8,0,0,1,176,224Z"/>`]]),uo.styles=_e`
    :host {
      display: contents;
    }
  `,Jp([j({type:String,reflect:!0})],uo.prototype,"size",2),Jp([j({type:String,reflect:!0})],uo.prototype,"weight",2),Jp([j({type:String,reflect:!0})],uo.prototype,"color",2),Jp([j({type:Boolean,reflect:!0})],uo.prototype,"mirrored",2),uo=Jp([Ie("ph-device-mobile")],uo);var ome=Object.freeze({__proto__:null,get PhDeviceMobile(){return uo}}),ame=Object.defineProperty,cme=Object.getOwnPropertyDescriptor,Qp=(t,e,r,n)=>{for(var i=n>1?void 0:n?cme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ame(e,r,i),i};let ho=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${ho.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};ho.weightsMap=new Map([["thin",N`<path d="M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"/>`],["light",N`<path d="M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"/>`],["regular",N`<path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"/>`],["bold",N`<path d="M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"/>`],["fill",N`<path d="M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"/>`],["duotone",N`<path d="M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z" opacity="0.2"/><path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"/>`]]),ho.styles=_e`
    :host {
      display: contents;
    }
  `,Qp([j({type:String,reflect:!0})],ho.prototype,"size",2),Qp([j({type:String,reflect:!0})],ho.prototype,"weight",2),Qp([j({type:String,reflect:!0})],ho.prototype,"color",2),Qp([j({type:Boolean,reflect:!0})],ho.prototype,"mirrored",2),ho=Qp([Ie("ph-dots-three")],ho);var lme=Object.freeze({__proto__:null,get PhDotsThree(){return ho}}),ume=Object.defineProperty,hme=Object.getOwnPropertyDescriptor,ef=(t,e,r,n)=>{for(var i=n>1?void 0:n?hme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ume(e,r,i),i};let po=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${po.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};po.weightsMap=new Map([["thin",N`<path d="M216,44H40A12,12,0,0,0,28,56V192a12,12,0,0,0,12,12H60v20a4,4,0,0,0,8,0V204H188v20a4,4,0,0,0,8,0V204h20a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44Zm0,152H40a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H216a4,4,0,0,1,4,4v68H195.81a44,44,0,1,0,0,8H220v60A4,4,0,0,1,216,196Zm-52.7-72a12,12,0,1,0,0,8h24.47a36,36,0,1,1,0-8Z"/>`],["light",N`<path d="M216,42H40A14,14,0,0,0,26,56V192a14,14,0,0,0,14,14H58v18a6,6,0,0,0,12,0V206H186v18a6,6,0,0,0,12,0V206h18a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42Zm0,152H40a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H216a2,2,0,0,1,2,2v66H197.6a46,46,0,1,0,0,12H218v58A2,2,0,0,1,216,194Zm-51.37-72a14,14,0,1,0,0,12h20.83a34,34,0,1,1,0-12Z"/>`],["regular",N`<path d="M216,40H40A16,16,0,0,0,24,56V192a16,16,0,0,0,16,16H56v16a8,8,0,0,0,16,0V208H184v16a8,8,0,0,0,16,0V208h16a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,152H40V56H216v64H199.32a48,48,0,1,0,0,16H216v56Zm-50.16-72a16,16,0,1,0,0,16H183a32,32,0,1,1,0-16Z"/>`],["bold",N`<path d="M216,36H40A20,20,0,0,0,20,56V192a20,20,0,0,0,20,20H52v12a12,12,0,0,0,24,0V212H180v12a12,12,0,0,0,24,0V212h12a20,20,0,0,0,20-20V56A20,20,0,0,0,216,36ZM44,188V60H212v52H190.32a44,44,0,1,0,0,24H212v52Zm124-64a20,20,0,1,1-20-20A20,20,0,0,1,168,124Z"/>`],["fill",N`<path d="M216,40H40A16,16,0,0,0,24,56V192a16,16,0,0,0,16,16H56v16a8,8,0,0,0,16,0V208H184v16a8,8,0,0,0,16,0V208h16a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm-8,96H179.09a36,36,0,1,1,0-16H208a8,8,0,0,1,0,16Zm-44-8a20,20,0,1,1-20-20A20,20,0,0,1,164,128Z"/>`],["duotone",N`<path d="M216,48H40a8,8,0,0,0-8,8V192a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V56A8,8,0,0,0,216,48ZM152,168a40,40,0,1,1,40-40A40,40,0,0,1,152,168Z" opacity="0.2"/><path d="M216,40H40A16,16,0,0,0,24,56V192a16,16,0,0,0,16,16H56v16a8,8,0,0,0,16,0V208H184v16a8,8,0,0,0,16,0V208h16a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,152H40V56H216v64H199.32a48,48,0,1,0,0,16H216v56Zm-50.16-72a16,16,0,1,0,0,16H183a32,32,0,1,1,0-16Z"/>`]]),po.styles=_e`
    :host {
      display: contents;
    }
  `,ef([j({type:String,reflect:!0})],po.prototype,"size",2),ef([j({type:String,reflect:!0})],po.prototype,"weight",2),ef([j({type:String,reflect:!0})],po.prototype,"color",2),ef([j({type:Boolean,reflect:!0})],po.prototype,"mirrored",2),po=ef([Ie("ph-vault")],po);var dme=Object.freeze({__proto__:null,get PhVault(){return po}}),pme=Object.defineProperty,fme=Object.getOwnPropertyDescriptor,tf=(t,e,r,n)=>{for(var i=n>1?void 0:n?fme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&pme(e,r,i),i};let fo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${fo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};fo.weightsMap=new Map([["thin",N`<path d="M224,52H32a4,4,0,0,0-4,4V192a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A4,4,0,0,0,224,52Zm-96,86.57L42.28,60H213.72ZM104.63,128,36,190.91V65.09Zm5.92,5.43L125.3,147a4,4,0,0,0,5.4,0l14.75-13.52L213.72,196H42.28ZM151.37,128,220,65.09V190.91Z"/>`],["light",N`<path d="M224,50H32a6,6,0,0,0-6,6V192a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A6,6,0,0,0,224,50Zm-96,85.86L47.42,62H208.58ZM101.67,128,38,186.36V69.64Zm8.88,8.14L124,148.42a6,6,0,0,0,8.1,0l13.4-12.28L208.58,194H47.43ZM154.33,128,218,69.64V186.36Z"/>`],["regular",N`<path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"/>`],["bold",N`<path d="M224,44H32A12,12,0,0,0,20,56V192a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A12,12,0,0,0,224,44Zm-96,83.72L62.85,68h130.3ZM92.79,128,44,172.72V83.28Zm17.76,16.28,9.34,8.57a12,12,0,0,0,16.22,0l9.34-8.57L193.15,188H62.85ZM163.21,128,212,83.28v89.44Z"/>`],["fill",N`<path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"/>`],["duotone",N`<path d="M224,56l-96,88L32,56Z" opacity="0.2"/><path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"/>`]]),fo.styles=_e`
    :host {
      display: contents;
    }
  `,tf([j({type:String,reflect:!0})],fo.prototype,"size",2),tf([j({type:String,reflect:!0})],fo.prototype,"weight",2),tf([j({type:String,reflect:!0})],fo.prototype,"color",2),tf([j({type:Boolean,reflect:!0})],fo.prototype,"mirrored",2),fo=tf([Ie("ph-envelope")],fo);var gme=Object.freeze({__proto__:null,get PhEnvelope(){return fo}}),mme=Object.defineProperty,wme=Object.getOwnPropertyDescriptor,rf=(t,e,r,n)=>{for(var i=n>1?void 0:n?wme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&mme(e,r,i),i};let go=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${go.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};go.weightsMap=new Map([["thin",N`<path d="M196,136a4,4,0,0,1-4,4H64a4,4,0,0,1,0-8H192A4,4,0,0,1,196,136Zm36-52H24a4,4,0,0,0,0,8H232a4,4,0,0,0,0-8Zm-80,96H104a4,4,0,0,0,0,8h48a4,4,0,0,0,0-8Z"/>`],["light",N`<path d="M198,136a6,6,0,0,1-6,6H64a6,6,0,0,1,0-12H192A6,6,0,0,1,198,136Zm34-54H24a6,6,0,0,0,0,12H232a6,6,0,0,0,0-12Zm-80,96H104a6,6,0,0,0,0,12h48a6,6,0,0,0,0-12Z"/>`],["regular",N`<path d="M200,136a8,8,0,0,1-8,8H64a8,8,0,0,1,0-16H192A8,8,0,0,1,200,136Zm32-56H24a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm-80,96H104a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16Z"/>`],["bold",N`<path d="M204,136a12,12,0,0,1-12,12H64a12,12,0,0,1,0-24H192A12,12,0,0,1,204,136Zm28-60H24a12,12,0,0,0,0,24H232a12,12,0,0,0,0-24Zm-80,96H104a12,12,0,0,0,0,24h48a12,12,0,0,0,0-24Z"/>`],["fill",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM144,176H112a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16Zm32-40H80a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16Zm32-40H48a8,8,0,0,1,0-16H208a8,8,0,0,1,0,16Z"/>`],["duotone",N`<path d="M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z" opacity="0.2"/><path d="M200,136a8,8,0,0,1-8,8H64a8,8,0,0,1,0-16H192A8,8,0,0,1,200,136Zm32-56H24a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm-80,96H104a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16Z"/>`]]),go.styles=_e`
    :host {
      display: contents;
    }
  `,rf([j({type:String,reflect:!0})],go.prototype,"size",2),rf([j({type:String,reflect:!0})],go.prototype,"weight",2),rf([j({type:String,reflect:!0})],go.prototype,"color",2),rf([j({type:Boolean,reflect:!0})],go.prototype,"mirrored",2),go=rf([Ie("ph-funnel-simple")],go);var yme=Object.freeze({__proto__:null,get PhFunnelSimple(){return go}}),bme=Object.defineProperty,vme=Object.getOwnPropertyDescriptor,nf=(t,e,r,n)=>{for(var i=n>1?void 0:n?vme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bme(e,r,i),i};let mo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${mo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};mo.weightsMap=new Map([["thin",N`<path d="M128,28h0A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,190.61c-6.33-6.09-23-24.41-31.27-54.61h62.54C151,194.2,134.33,212.52,128,218.61ZM94.82,156a140.42,140.42,0,0,1,0-56h66.36a140.42,140.42,0,0,1,0,56ZM128,37.39c6.33,6.09,23,24.41,31.27,54.61H96.73C105,61.8,121.67,43.48,128,37.39ZM169.41,100h46.23a92.09,92.09,0,0,1,0,56H169.41a152.65,152.65,0,0,0,0-56Zm43.25-8h-45a129.39,129.39,0,0,0-29.19-55.4A92.25,92.25,0,0,1,212.66,92ZM117.54,36.6A129.39,129.39,0,0,0,88.35,92h-45A92.25,92.25,0,0,1,117.54,36.6ZM40.36,100H86.59a152.65,152.65,0,0,0,0,56H40.36a92.09,92.09,0,0,1,0-56Zm3,64h45a129.39,129.39,0,0,0,29.19,55.4A92.25,92.25,0,0,1,43.34,164Zm95.12,55.4A129.39,129.39,0,0,0,167.65,164h45A92.25,92.25,0,0,1,138.46,219.4Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm81.57,64H169.19a132.58,132.58,0,0,0-25.73-50.67A90.29,90.29,0,0,1,209.57,90ZM218,128a89.7,89.7,0,0,1-3.83,26H171.81a155.43,155.43,0,0,0,0-52h42.36A89.7,89.7,0,0,1,218,128Zm-90,87.83a110,110,0,0,1-15.19-19.45A124.24,124.24,0,0,1,99.35,166h57.3a124.24,124.24,0,0,1-13.46,30.38A110,110,0,0,1,128,215.83ZM96.45,154a139.18,139.18,0,0,1,0-52h63.1a139.18,139.18,0,0,1,0,52ZM38,128a89.7,89.7,0,0,1,3.83-26H84.19a155.43,155.43,0,0,0,0,52H41.83A89.7,89.7,0,0,1,38,128Zm90-87.83a110,110,0,0,1,15.19,19.45A124.24,124.24,0,0,1,156.65,90H99.35a124.24,124.24,0,0,1,13.46-30.38A110,110,0,0,1,128,40.17Zm-15.46-.84A132.58,132.58,0,0,0,86.81,90H46.43A90.29,90.29,0,0,1,112.54,39.33ZM46.43,166H86.81a132.58,132.58,0,0,0,25.73,50.67A90.29,90.29,0,0,1,46.43,166Zm97,50.67A132.58,132.58,0,0,0,169.19,166h40.38A90.29,90.29,0,0,1,143.46,216.67Z"/>`],["regular",N`<path d="M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,187a113.4,113.4,0,0,1-20.39-35h40.82a116.94,116.94,0,0,1-10,20.77A108.61,108.61,0,0,1,128,207Zm-26.49-59a135.42,135.42,0,0,1,0-40h53a135.42,135.42,0,0,1,0,40ZM44,128a83.49,83.49,0,0,1,2.43-20H77.25a160.63,160.63,0,0,0,0,40H46.43A83.49,83.49,0,0,1,44,128Zm84-79a113.4,113.4,0,0,1,20.39,35H107.59a116.94,116.94,0,0,1,10-20.77A108.61,108.61,0,0,1,128,49Zm50.73,59h30.82a83.52,83.52,0,0,1,0,40H178.75a160.63,160.63,0,0,0,0-40Zm20.77-24H173.71a140.82,140.82,0,0,0-15.5-34.36A84.51,84.51,0,0,1,199.52,84ZM97.79,49.64A140.82,140.82,0,0,0,82.29,84H56.48A84.51,84.51,0,0,1,97.79,49.64ZM56.48,172H82.29a140.82,140.82,0,0,0,15.5,34.36A84.51,84.51,0,0,1,56.48,172Zm101.73,34.36A140.82,140.82,0,0,0,173.71,172h25.81A84.51,84.51,0,0,1,158.21,206.36Z"/>`],["fill",N`<path d="M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm78.36,64H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM216,128a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM128,43a115.27,115.27,0,0,1,26,45H102A115.11,115.11,0,0,1,128,43ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48Zm50.35,61.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"/>`]]),mo.styles=_e`
    :host {
      display: contents;
    }
  `,nf([j({type:String,reflect:!0})],mo.prototype,"size",2),nf([j({type:String,reflect:!0})],mo.prototype,"weight",2),nf([j({type:String,reflect:!0})],mo.prototype,"color",2),nf([j({type:Boolean,reflect:!0})],mo.prototype,"mirrored",2),mo=nf([Ie("ph-globe")],mo);var Eme=Object.freeze({__proto__:null,get PhGlobe(){return mo}}),Cme=Object.defineProperty,Ame=Object.getOwnPropertyDescriptor,sf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ame(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Cme(e,r,i),i};let wo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${wo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};wo.weightsMap=new Map([["thin",N`<path d="M196,112a4,4,0,0,1-4,4H152a4,4,0,0,1,0-8h40A4,4,0,0,1,196,112Zm-4,28H152a4,4,0,0,0,0,8h40a4,4,0,0,0,0-8Zm36-84V200a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V56A12,12,0,0,1,40,44H216A12,12,0,0,1,228,56Zm-8,0a4,4,0,0,0-4-4H40a4,4,0,0,0-4,4V200a4,4,0,0,0,4,4H216a4,4,0,0,0,4-4ZM131.87,167a4,4,0,1,1-7.74,2C121.06,157,109,148,96,148s-25,9-28.13,21A4,4,0,0,1,64,172a3.87,3.87,0,0,1-1-.13A4,4,0,0,1,60.13,167a36.28,36.28,0,0,1,20.43-23.66,28,28,0,1,1,30.88,0A36.2,36.2,0,0,1,131.87,167ZM96,140a20,20,0,1,0-20-20A20,20,0,0,0,96,140Z"/>`],["light",N`<path d="M198,112a6,6,0,0,1-6,6H152a6,6,0,0,1,0-12h40A6,6,0,0,1,198,112Zm-6,26H152a6,6,0,0,0,0,12h40a6,6,0,0,0,0-12Zm38-82V200a14,14,0,0,1-14,14H40a14,14,0,0,1-14-14V56A14,14,0,0,1,40,42H216A14,14,0,0,1,230,56Zm-12,0a2,2,0,0,0-2-2H40a2,2,0,0,0-2,2V200a2,2,0,0,0,2,2H216a2,2,0,0,0,2-2ZM133.81,166.51a6,6,0,0,1-11.62,3C119.34,158.38,108.08,150,96,150s-23.33,8.38-26.19,19.5a6,6,0,0,1-11.62-3A38,38,0,0,1,76.78,143a30,30,0,1,1,38.45,0A38,38,0,0,1,133.81,166.51ZM96,138a18,18,0,1,0-18-18A18,18,0,0,0,96,138Z"/>`],["regular",N`<path d="M200,112a8,8,0,0,1-8,8H152a8,8,0,0,1,0-16h40A8,8,0,0,1,200,112Zm-8,24H152a8,8,0,0,0,0,16h40a8,8,0,0,0,0-16Zm40-80V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM216,200V56H40V200H216Zm-80.26-34a8,8,0,1,1-15.5,4c-2.63-10.26-13.06-18-24.25-18s-21.61,7.74-24.25,18a8,8,0,1,1-15.5-4,39.84,39.84,0,0,1,17.19-23.34,32,32,0,1,1,45.12,0A39.76,39.76,0,0,1,135.75,166ZM96,136a16,16,0,1,0-16-16A16,16,0,0,0,96,136Z"/>`],["bold",N`<path d="M148,108a12,12,0,0,1,12-12h28a12,12,0,0,1,0,24H160A12,12,0,0,1,148,108Zm40,28H168a12,12,0,0,0,0,24h20a12,12,0,0,0,0-24Zm48-80V200a20,20,0,0,1-20,20H40a20,20,0,0,1-20-20V56A20,20,0,0,1,40,36H216A20,20,0,0,1,236,56Zm-24,4H44V196H212ZM58.28,159.37A43.82,43.82,0,0,1,71.53,142a36,36,0,1,1,56.94,0,43.84,43.84,0,0,1,13.26,17.37,12,12,0,0,1-22.15,9.26C116.48,161.19,108.42,156,100,156s-16.47,5.2-19.59,12.63a12,12,0,1,1-22.13-9.26ZM88,120a12,12,0,1,0,12-12A12,12,0,0,0,88,120Z"/>`],["fill",N`<path d="M112,120a16,16,0,1,1-16-16A16,16,0,0,1,112,120ZM232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM135.75,166a39.76,39.76,0,0,0-17.19-23.34,32,32,0,1,0-45.12,0A39.84,39.84,0,0,0,56.25,166a8,8,0,0,0,15.5,4c2.64-10.25,13.06-18,24.25-18s21.62,7.73,24.25,18a8,8,0,1,0,15.5-4ZM200,144a8,8,0,0,0-8-8H152a8,8,0,0,0,0,16h40A8,8,0,0,0,200,144Zm0-32a8,8,0,0,0-8-8H152a8,8,0,0,0,0,16h40A8,8,0,0,0,200,112Z"/>`],["duotone",N`<path d="M216,48H40a8,8,0,0,0-8,8V200a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V56A8,8,0,0,0,216,48ZM96,144a24,24,0,1,1,24-24A24,24,0,0,1,96,144Z" opacity="0.2"/><path d="M200,112a8,8,0,0,1-8,8H152a8,8,0,0,1,0-16h40A8,8,0,0,1,200,112Zm-8,24H152a8,8,0,0,0,0,16h40a8,8,0,0,0,0-16Zm40-80V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM216,200V56H40V200H216Zm-80.26-34a8,8,0,1,1-15.5,4c-2.63-10.26-13.06-18-24.25-18s-21.61,7.74-24.25,18a8,8,0,1,1-15.5-4,39.84,39.84,0,0,1,17.19-23.34,32,32,0,1,1,45.12,0A39.76,39.76,0,0,1,135.75,166ZM96,136a16,16,0,1,0-16-16A16,16,0,0,0,96,136Z"/>`]]),wo.styles=_e`
    :host {
      display: contents;
    }
  `,sf([j({type:String,reflect:!0})],wo.prototype,"size",2),sf([j({type:String,reflect:!0})],wo.prototype,"weight",2),sf([j({type:String,reflect:!0})],wo.prototype,"color",2),sf([j({type:Boolean,reflect:!0})],wo.prototype,"mirrored",2),wo=sf([Ie("ph-identification-card")],wo);var $me=Object.freeze({__proto__:null,get PhIdentificationCard(){return wo}}),xme=Object.defineProperty,_me=Object.getOwnPropertyDescriptor,of=(t,e,r,n)=>{for(var i=n>1?void 0:n?_me(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&xme(e,r,i),i};let yo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${yo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};yo.weightsMap=new Map([["thin",N`<path d="M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44ZM40,52H216a4,4,0,0,1,4,4V168.4l-32.89-32.89a12,12,0,0,0-17,0l-22.83,22.83-46.82-46.83a12,12,0,0,0-17,0L36,159V56A4,4,0,0,1,40,52ZM36,200V170.34l53.17-53.17a4,4,0,0,1,5.66,0L181.66,204H40A4,4,0,0,1,36,200Zm180,4H193l-40-40,22.83-22.83a4,4,0,0,1,5.66,0L220,179.71V200A4,4,0,0,1,216,204ZM148,100a8,8,0,1,1,8,8A8,8,0,0,1,148,100Z"/>`],["light",N`<path d="M216,42H40A14,14,0,0,0,26,56V200a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM40,54H216a2,2,0,0,1,2,2V163.57L188.53,134.1a14,14,0,0,0-19.8,0l-21.42,21.42L101.9,110.1a14,14,0,0,0-19.8,0L38,154.2V56A2,2,0,0,1,40,54ZM38,200V171.17l52.58-52.58a2,2,0,0,1,2.84,0L176.83,202H40A2,2,0,0,1,38,200Zm178,2H193.8l-38-38,21.41-21.42a2,2,0,0,1,2.83,0l38,38V200A2,2,0,0,1,216,202ZM146,100a10,10,0,1,1,10,10A10,10,0,0,1,146,100Z"/>`],["regular",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"/>`],["bold",N`<path d="M144,96a16,16,0,1,1,16,16A16,16,0,0,1,144,96Zm92-40V200a20,20,0,0,1-20,20H40a20,20,0,0,1-20-20V56A20,20,0,0,1,40,36H216A20,20,0,0,1,236,56ZM44,60v79.72l33.86-33.86a20,20,0,0,1,28.28,0L147.31,147l17.18-17.17a20,20,0,0,1,28.28,0L212,149.09V60Zm0,136H162.34L92,125.66l-48,48Zm168,0V183l-33.37-33.37L164.28,164l32,32Z"/>`],["fill",N`<path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM156,88a12,12,0,1,1-12,12A12,12,0,0,1,156,88Zm60,112H40V160.69l46.34-46.35a8,8,0,0,1,11.32,0h0L165,181.66a8,8,0,0,0,11.32-11.32l-17.66-17.65L173,138.34a8,8,0,0,1,11.31,0L216,170.07V200Z"/>`],["duotone",N`<path d="M224,56V178.06l-39.72-39.72a8,8,0,0,0-11.31,0L147.31,164,97.66,114.34a8,8,0,0,0-11.32,0L32,168.69V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z" opacity="0.2"/><path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"/>`]]),yo.styles=_e`
    :host {
      display: contents;
    }
  `,of([j({type:String,reflect:!0})],yo.prototype,"size",2),of([j({type:String,reflect:!0})],yo.prototype,"weight",2),of([j({type:String,reflect:!0})],yo.prototype,"color",2),of([j({type:Boolean,reflect:!0})],yo.prototype,"mirrored",2),yo=of([Ie("ph-image")],yo);var Sme=Object.freeze({__proto__:null,get PhImage(){return yo}}),Ime=Object.defineProperty,Ome=Object.getOwnPropertyDescriptor,af=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ome(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ime(e,r,i),i};let bo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${bo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};bo.weightsMap=new Map([["thin",N`<path d="M140,176a4,4,0,0,1-4,4,12,12,0,0,1-12-12V128a4,4,0,0,0-4-4,4,4,0,0,1,0-8,12,12,0,0,1,12,12v40a4,4,0,0,0,4,4A4,4,0,0,1,140,176ZM124,92a8,8,0,1,0-8-8A8,8,0,0,0,124,92Zm104,36A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"/>`],["light",N`<path d="M142,176a6,6,0,0,1-6,6,14,14,0,0,1-14-14V128a2,2,0,0,0-2-2,6,6,0,0,1,0-12,14,14,0,0,1,14,14v40a2,2,0,0,0,2,2A6,6,0,0,1,142,176ZM124,94a10,10,0,1,0-10-10A10,10,0,0,0,124,94Zm106,34A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"/>`],["bold",N`<path d="M108,84a16,16,0,1,1,16,16A16,16,0,0,1,108,84Zm128,44A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Zm-72,36.68V132a20,20,0,0,0-20-20,12,12,0,0,0-4,23.32V168a20,20,0,0,0,20,20,12,12,0,0,0,4-23.32Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-4,48a12,12,0,1,1-12,12A12,12,0,0,1,124,72Zm12,112a16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40a8,8,0,0,1,0,16Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M144,176a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176Zm88-48A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128ZM124,96a12,12,0,1,0-12-12A12,12,0,0,0,124,96Z"/>`]]),bo.styles=_e`
    :host {
      display: contents;
    }
  `,af([j({type:String,reflect:!0})],bo.prototype,"size",2),af([j({type:String,reflect:!0})],bo.prototype,"weight",2),af([j({type:String,reflect:!0})],bo.prototype,"color",2),af([j({type:Boolean,reflect:!0})],bo.prototype,"mirrored",2),bo=af([Ie("ph-info")],bo);var Pme=Object.freeze({__proto__:null,get PhInfo(){return bo}}),Nme=Object.defineProperty,Tme=Object.getOwnPropertyDescriptor,cf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Tme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Nme(e,r,i),i};let vo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${vo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};vo.weightsMap=new Map([["thin",N`<path d="M172,232a4,4,0,0,1-4,4H88a4,4,0,0,1,0-8h80A4,4,0,0,1,172,232Zm40-128a83.59,83.59,0,0,1-32.11,66.06A20.2,20.2,0,0,0,172,186v6a12,12,0,0,1-12,12H96a12,12,0,0,1-12-12v-6a20,20,0,0,0-7.76-15.81A83.58,83.58,0,0,1,44,104.47C43.75,59,80.52,21.09,126,20a84,84,0,0,1,86,84Zm-8,0a76,76,0,0,0-77.83-76C85,29,51.77,63.27,52,104.43a75.62,75.62,0,0,0,29.17,59.43A28,28,0,0,1,92,186v6a4,4,0,0,0,4,4h64a4,4,0,0,0,4-4v-6a28.14,28.14,0,0,1,10.94-22.2A75.62,75.62,0,0,0,204,104ZM136.66,52.06a4,4,0,0,0-1.32,7.88C153.53,63,169,78.45,172.06,96.67A4,4,0,0,0,176,100a3.88,3.88,0,0,0,.67-.06,4,4,0,0,0,3.27-4.61A53.51,53.51,0,0,0,136.66,52.06Z"/>`],["light",N`<path d="M174,232a6,6,0,0,1-6,6H88a6,6,0,0,1,0-12h80A6,6,0,0,1,174,232Zm40-128a85.56,85.56,0,0,1-32.88,67.64A18.23,18.23,0,0,0,174,186v6a14,14,0,0,1-14,14H96a14,14,0,0,1-14-14v-6a18,18,0,0,0-7-14.23h0a85.59,85.59,0,0,1-33-67.24C41.74,57.91,79.39,19.12,125.93,18A86,86,0,0,1,214,104Zm-12,0a74,74,0,0,0-75.79-74C86.17,31,53.78,64.34,54,104.42a73.67,73.67,0,0,0,28.4,57.87A29.92,29.92,0,0,1,94,186v6a2,2,0,0,0,2,2h64a2,2,0,0,0,2-2v-6a30.18,30.18,0,0,1,11.7-23.78A73.59,73.59,0,0,0,202,104Zm-20.08-9A55.58,55.58,0,0,0,137,50.08a6,6,0,1,0-2,11.84C152.38,64.84,167.13,79.6,170.08,97a6,6,0,0,0,5.91,5,6.87,6.87,0,0,0,1-.08A6,6,0,0,0,181.92,95Z"/>`],["regular",N`<path d="M176,232a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,232Zm40-128a87.55,87.55,0,0,1-33.64,69.21A16.24,16.24,0,0,0,176,186v6a16,16,0,0,1-16,16H96a16,16,0,0,1-16-16v-6a16,16,0,0,0-6.23-12.66A87.59,87.59,0,0,1,40,104.49C39.74,56.83,78.26,17.14,125.88,16A88,88,0,0,1,216,104Zm-16,0a72,72,0,0,0-73.74-72c-39,.92-70.47,33.39-70.26,72.39a71.65,71.65,0,0,0,27.64,56.3A32,32,0,0,1,96,186v6h64v-6a32.15,32.15,0,0,1,12.47-25.35A71.65,71.65,0,0,0,200,104Zm-16.11-9.34a57.6,57.6,0,0,0-46.56-46.55,8,8,0,0,0-2.66,15.78c16.57,2.79,30.63,16.85,33.44,33.45A8,8,0,0,0,176,104a9,9,0,0,0,1.35-.11A8,8,0,0,0,183.89,94.66Z"/>`],["bold",N`<path d="M180,232a12,12,0,0,1-12,12H88a12,12,0,0,1,0-24h80A12,12,0,0,1,180,232Zm40-128a91.51,91.51,0,0,1-35.17,72.35A12.26,12.26,0,0,0,180,186v2a20,20,0,0,1-20,20H96a20,20,0,0,1-20-20v-2a12,12,0,0,0-4.7-9.51A91.57,91.57,0,0,1,36,104.52C35.73,54.69,76,13.2,125.79,12A92,92,0,0,1,220,104Zm-24,0a68,68,0,0,0-69.65-68C89.56,36.88,59.8,67.55,60,104.38a67.71,67.71,0,0,0,26.1,53.19A35.87,35.87,0,0,1,100,184h56.1A36.13,36.13,0,0,1,170,157.49,67.68,67.68,0,0,0,196,104Zm-20.07-5.32a48.5,48.5,0,0,0-31.91-40,12,12,0,0,0-8,22.62,24.31,24.31,0,0,1,16.09,20,12,12,0,0,0,23.86-2.64Z"/>`],["fill",N`<path d="M176,232a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,232Zm40-128a87.55,87.55,0,0,1-33.64,69.21A16.24,16.24,0,0,0,176,186v6a16,16,0,0,1-16,16H96a16,16,0,0,1-16-16v-6a16,16,0,0,0-6.23-12.66A87.59,87.59,0,0,1,40,104.49C39.74,56.83,78.26,17.14,125.88,16A88,88,0,0,1,216,104Zm-32.11-9.34a57.6,57.6,0,0,0-46.56-46.55,8,8,0,0,0-2.66,15.78c16.57,2.79,30.63,16.85,33.44,33.45A8,8,0,0,0,176,104a9,9,0,0,0,1.35-.11A8,8,0,0,0,183.89,94.66Z"/>`],["duotone",N`<path d="M208,104a79.86,79.86,0,0,1-30.59,62.92A24.29,24.29,0,0,0,168,186v6a8,8,0,0,1-8,8H96a8,8,0,0,1-8-8v-6a24.11,24.11,0,0,0-9.3-19A79.87,79.87,0,0,1,48,104.45C47.76,61.09,82.72,25,126.07,24A80,80,0,0,1,208,104Z" opacity="0.2"/><path d="M176,232a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,232Zm40-128a87.55,87.55,0,0,1-33.64,69.21A16.24,16.24,0,0,0,176,186v6a16,16,0,0,1-16,16H96a16,16,0,0,1-16-16v-6a16,16,0,0,0-6.23-12.66A87.59,87.59,0,0,1,40,104.49C39.74,56.83,78.26,17.14,125.88,16A88,88,0,0,1,216,104Zm-16,0a72,72,0,0,0-73.74-72c-39,.92-70.47,33.39-70.26,72.39a71.65,71.65,0,0,0,27.64,56.3A32,32,0,0,1,96,186v6h64v-6a32.15,32.15,0,0,1,12.47-25.35A71.65,71.65,0,0,0,200,104Zm-16.11-9.34a57.6,57.6,0,0,0-46.56-46.55,8,8,0,0,0-2.66,15.78c16.57,2.79,30.63,16.85,33.44,33.45A8,8,0,0,0,176,104a9,9,0,0,0,1.35-.11A8,8,0,0,0,183.89,94.66Z"/>`]]),vo.styles=_e`
    :host {
      display: contents;
    }
  `,cf([j({type:String,reflect:!0})],vo.prototype,"size",2),cf([j({type:String,reflect:!0})],vo.prototype,"weight",2),cf([j({type:String,reflect:!0})],vo.prototype,"color",2),cf([j({type:Boolean,reflect:!0})],vo.prototype,"mirrored",2),vo=cf([Ie("ph-lightbulb")],vo);var kme=Object.freeze({__proto__:null,get PhLightbulb(){return vo}}),Rme=Object.defineProperty,Dme=Object.getOwnPropertyDescriptor,lf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Dme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Rme(e,r,i),i};let Eo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Eo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Eo.weightsMap=new Map([["thin",N`<path d="M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"/>`],["light",N`<path d="M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"/>`],["regular",N`<path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"/>`],["bold",N`<path d="M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"/>`],["fill",N`<path d="M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"/>`],["duotone",N`<path d="M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z" opacity="0.2"/><path d="M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"/>`]]),Eo.styles=_e`
    :host {
      display: contents;
    }
  `,lf([j({type:String,reflect:!0})],Eo.prototype,"size",2),lf([j({type:String,reflect:!0})],Eo.prototype,"weight",2),lf([j({type:String,reflect:!0})],Eo.prototype,"color",2),lf([j({type:Boolean,reflect:!0})],Eo.prototype,"mirrored",2),Eo=lf([Ie("ph-magnifying-glass")],Eo);var Bme=Object.freeze({__proto__:null,get PhMagnifyingGlass(){return Eo}}),Mme=Object.defineProperty,Ume=Object.getOwnPropertyDescriptor,uf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ume(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Mme(e,r,i),i};let Co=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Co.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Co.weightsMap=new Map([["thin",N`<path d="M229.89,117.43l-168-95.88A12,12,0,0,0,44.7,36l31.08,92L44.71,220A12,12,0,0,0,56,236a12.13,12.13,0,0,0,5.93-1.57l167.94-96.08a12,12,0,0,0,0-20.92Zm-4,14L58,227.47a4,4,0,0,1-5.72-4.83l0-.07L82.87,132H144a4,4,0,0,0,0-8H82.87L52.26,33.37A3.89,3.89,0,0,1,53.44,29,4.13,4.13,0,0,1,56,28a3.88,3.88,0,0,1,1.93.54l168,95.87a4,4,0,0,1,0,7Z"/>`],["light",N`<path d="M230.88,115.69l-168-95.88a14,14,0,0,0-20,16.87L73.66,128,42.81,219.33A14,14,0,0,0,56,238a14.15,14.15,0,0,0,6.93-1.83L230.84,140.1a14,14,0,0,0,0-24.41Zm-5.95,14L57,225.73a2,2,0,0,1-2.86-2.42.42.42,0,0,0,0-.1L84.3,134H144a6,6,0,0,0,0-12H84.3L54.17,32.8a.3.3,0,0,0,0-.1,1.87,1.87,0,0,1,.6-2.2A1.85,1.85,0,0,1,57,30.25l168,95.89a1.93,1.93,0,0,1,1,1.74A2,2,0,0,1,224.93,129.66Z"/>`],["regular",N`<path d="M231.87,114l-168-95.89A16,16,0,0,0,40.92,37.34L71.55,128,40.92,218.67A16,16,0,0,0,56,240a16.15,16.15,0,0,0,7.93-2.1l167.92-96.05a16,16,0,0,0,.05-27.89ZM56,224a.56.56,0,0,0,0-.12L85.74,136H144a8,8,0,0,0,0-16H85.74L56.06,32.16A.46.46,0,0,0,56,32l168,95.83Z"/>`],["bold",N`<path d="M233.86,110.48,65.8,14.58A20,20,0,0,0,37.15,38.64L67.33,128,37.15,217.36A20,20,0,0,0,56,244a20.1,20.1,0,0,0,9.81-2.58l.09-.06,168-96.07a20,20,0,0,0,0-34.81ZM63.19,215.26,88.61,140H144a12,12,0,0,0,0-24H88.61L63.18,40.72l152.76,87.17Z"/>`],["fill",N`<path d="M240,127.89a16,16,0,0,1-8.18,14L63.9,237.9A16.15,16.15,0,0,1,56,240a16,16,0,0,1-15-21.33l27-79.95A4,4,0,0,1,71.72,136H144a8,8,0,0,0,8-8.53,8.19,8.19,0,0,0-8.26-7.47h-72a4,4,0,0,1-3.79-2.72l-27-79.94A16,16,0,0,1,63.84,18.07l168,95.89A16,16,0,0,1,240,127.89Z"/>`],["duotone",N`<path d="M227.91,134.86,59.93,231a8,8,0,0,1-11.44-9.67L80,128,48.49,34.72a8,8,0,0,1,11.44-9.67l168,95.85A8,8,0,0,1,227.91,134.86Z" opacity="0.2"/><path d="M231.87,114l-168-95.89A16,16,0,0,0,40.92,37.34L71.55,128,40.92,218.67A16,16,0,0,0,56,240a16.15,16.15,0,0,0,7.93-2.1l167.92-96.05a16,16,0,0,0,.05-27.89ZM56,224a.56.56,0,0,0,0-.12L85.74,136H144a8,8,0,0,0,0-16H85.74L56.06,32.16A.46.46,0,0,0,56,32l168,95.83Z"/>`]]),Co.styles=_e`
    :host {
      display: contents;
    }
  `,uf([j({type:String,reflect:!0})],Co.prototype,"size",2),uf([j({type:String,reflect:!0})],Co.prototype,"weight",2),uf([j({type:String,reflect:!0})],Co.prototype,"color",2),uf([j({type:Boolean,reflect:!0})],Co.prototype,"mirrored",2),Co=uf([Ie("ph-paper-plane-right")],Co);var Lme=Object.freeze({__proto__:null,get PhPaperPlaneRight(){return Co}}),Fme=Object.defineProperty,Hme=Object.getOwnPropertyDescriptor,hf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Hme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Fme(e,r,i),i};let Ao=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ao.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ao.weightsMap=new Map([["thin",N`<path d="M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"/>`],["light",N`<path d="M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"/>`],["regular",N`<path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>`],["bold",N`<path d="M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"/>`],["fill",N`<path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"/>`],["duotone",N`<path d="M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z" opacity="0.2"/><path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>`]]),Ao.styles=_e`
    :host {
      display: contents;
    }
  `,hf([j({type:String,reflect:!0})],Ao.prototype,"size",2),hf([j({type:String,reflect:!0})],Ao.prototype,"weight",2),hf([j({type:String,reflect:!0})],Ao.prototype,"color",2),hf([j({type:Boolean,reflect:!0})],Ao.prototype,"mirrored",2),Ao=hf([Ie("ph-plus")],Ao);var jme=Object.freeze({__proto__:null,get PhPlus(){return Ao}}),Vme=Object.defineProperty,zme=Object.getOwnPropertyDescriptor,df=(t,e,r,n)=>{for(var i=n>1?void 0:n?zme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Vme(e,r,i),i};let $o=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${$o.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};$o.weightsMap=new Map([["thin",N`<path d="M124,128V48a4,4,0,0,1,8,0v80a4,4,0,0,1-8,0Zm54.18-75.35a4,4,0,1,0-4.36,6.7C198.08,75.17,212,100.2,212,128a84,84,0,0,1-168,0c0-27.8,13.92-52.83,38.18-68.65a4,4,0,0,0-4.36-6.7C51.24,70,36,97.44,36,128a92,92,0,0,0,184,0C220,97.44,204.76,70,178.18,52.65Z"/>`],["light",N`<path d="M122,128V48a6,6,0,0,1,12,0v80a6,6,0,0,1-12,0Zm57.28-77A6,6,0,0,0,172.72,61C196.41,76.47,210,100.88,210,128a82,82,0,0,1-164,0c0-27.12,13.59-51.53,37.28-67A6,6,0,0,0,76.72,51C49.57,68.68,34,96.75,34,128a94,94,0,0,0,188,0C222,96.75,206.43,68.68,179.28,51Z"/>`],["regular",N`<path d="M120,128V48a8,8,0,0,1,16,0v80a8,8,0,0,1-16,0Zm60.37-78.7a8,8,0,0,0-8.74,13.4C194.74,77.77,208,101.57,208,128a80,80,0,0,1-160,0c0-26.43,13.26-50.23,36.37-65.3a8,8,0,0,0-8.74-13.4C47.9,67.38,32,96.06,32,128a96,96,0,0,0,192,0C224,96.06,208.1,67.38,180.37,49.3Z"/>`],["bold",N`<path d="M116,128V48a12,12,0,0,1,24,0v80a12,12,0,0,1-24,0Zm66.55-82a12,12,0,0,0-13.1,20.1C191.41,80.37,204,103,204,128a76,76,0,0,1-152,0c0-25,12.59-47.63,34.55-61.95A12,12,0,0,0,73.45,46C44.56,64.78,28,94.69,28,128a100,100,0,0,0,200,0C228,94.69,211.44,64.78,182.55,46Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104,104,0,0,0,128,24Zm-8,40a8,8,0,0,1,16,0v64a8,8,0,0,1-16,0Zm8,144A80,80,0,0,1,83.55,61.48a8,8,0,1,1,8.9,13.29,64,64,0,1,0,71.1,0,8,8,0,1,1,8.9-13.29A80,80,0,0,1,128,208Z"/>`],["duotone",N`<path d="M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z" opacity="0.2"/><path d="M120,128V48a8,8,0,0,1,16,0v80a8,8,0,0,1-16,0Zm60.37-78.7a8,8,0,0,0-8.74,13.4C194.74,77.77,208,101.57,208,128a80,80,0,0,1-160,0c0-26.43,13.26-50.23,36.37-65.3a8,8,0,0,0-8.74-13.4C47.9,67.38,32,96.06,32,128a96,96,0,0,0,192,0C224,96.06,208.1,67.38,180.37,49.3Z"/>`]]),$o.styles=_e`
    :host {
      display: contents;
    }
  `,df([j({type:String,reflect:!0})],$o.prototype,"size",2),df([j({type:String,reflect:!0})],$o.prototype,"weight",2),df([j({type:String,reflect:!0})],$o.prototype,"color",2),df([j({type:Boolean,reflect:!0})],$o.prototype,"mirrored",2),$o=df([Ie("ph-power")],$o);var qme=Object.freeze({__proto__:null,get PhPower(){return $o}}),Wme=Object.defineProperty,Zme=Object.getOwnPropertyDescriptor,pf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Zme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Wme(e,r,i),i};let xo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${xo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};xo.weightsMap=new Map([["thin",N`<path d="M218.14,161.93a4,4,0,0,0-3.86-.24,24,24,0,0,1-34.23-23.25,24,24,0,0,1,34.23-20.13A4,4,0,0,0,220,114.7V72a12,12,0,0,0-12-12H167a32,32,0,1,0-62.91-10.33A32.57,32.57,0,0,0,105,60H64A12,12,0,0,0,52,72v37a32,32,0,1,0-10.33,62.91A32.28,32.28,0,0,0,52,171v37a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V165.31A4,4,0,0,0,218.14,161.93ZM212,208a4,4,0,0,1-4,4H64a4,4,0,0,1-4-4V165.31a4,4,0,0,0-1.86-3.38,4,4,0,0,0-3.85-.24,24,24,0,0,1-34.24-20.13,24,24,0,0,1,34.24-23.25A4,4,0,0,0,60,114.7V72a4,4,0,0,1,4-4h46.69a4,4,0,0,0,3.62-5.71,24,24,0,0,1,20.13-34.24,24,24,0,0,1,23.25,34.24A4,4,0,0,0,161.31,68H208a4,4,0,0,1,4,4v37a32.57,32.57,0,0,0-10.33-.94A32,32,0,1,0,212,171Z"/>`],["light",N`<path d="M219.21,160.24a6,6,0,0,0-5.78-.35,22,22,0,1,1-11.05-41.83,22.15,22.15,0,0,1,11.05,2.06A6,6,0,0,0,222,114.7V72a14,14,0,0,0-14-14H169.48a35,35,0,0,0,.52-6,34.1,34.1,0,0,0-10.73-24.78,33.64,33.64,0,0,0-25.45-9.15A34,34,0,0,0,102.54,58H64A14,14,0,0,0,50,72v34.53a34,34,0,0,0-30.79,10.2,34,34,0,0,0,22.31,57.18,34.34,34.34,0,0,0,8.48-.44V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V165.31A6,6,0,0,0,219.21,160.24ZM210,208a2,2,0,0,1-2,2H64a2,2,0,0,1-2-2V165.31a6,6,0,0,0-6-6,5.92,5.92,0,0,0-2.57.58,22,22,0,0,1-31.38-18.46,22,22,0,0,1,31.38-21.31A6,6,0,0,0,62,114.7V72a2,2,0,0,1,2-2h46.69a6,6,0,0,0,5.42-8.57,22.25,22.25,0,0,1-2-11,22,22,0,1,1,41.83,11A6,6,0,0,0,161.3,70H208a2,2,0,0,1,2,2v34.54a34,34,0,0,0-39.93,31.28,33.71,33.71,0,0,0,9.14,25.45A34.15,34.15,0,0,0,210,173.48Z"/>`],["regular",N`<path d="M220.27,158.54a8,8,0,0,0-7.7-.46,20,20,0,1,1,0-36.16A8,8,0,0,0,224,114.69V72a16,16,0,0,0-16-16H171.78a35.36,35.36,0,0,0,.22-4,36.11,36.11,0,0,0-11.36-26.24,36,36,0,0,0-60.55,23.62,36.56,36.56,0,0,0,.14,6.62H64A16,16,0,0,0,48,72v32.22a35.36,35.36,0,0,0-4-.22,36.12,36.12,0,0,0-26.24,11.36,35.7,35.7,0,0,0-9.69,27,36.08,36.08,0,0,0,33.31,33.6,35.68,35.68,0,0,0,6.62-.14V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V165.31A8,8,0,0,0,220.27,158.54ZM208,208H64V165.31a8,8,0,0,0-11.43-7.23,20,20,0,1,1,0-36.16A8,8,0,0,0,64,114.69V72h46.69a8,8,0,0,0,7.23-11.43,20,20,0,1,1,36.16,0A8,8,0,0,0,161.31,72H208v32.23a35.68,35.68,0,0,0-6.62-.14A36,36,0,0,0,204,176a35.36,35.36,0,0,0,4-.22Z"/>`],["bold",N`<path d="M222.41,155.16a12,12,0,0,0-11.56-.69A16,16,0,0,1,188,139,16.2,16.2,0,0,1,202.8,124a15.83,15.83,0,0,1,8,1.5A12,12,0,0,0,228,114.7V72a20,20,0,0,0-20-20H176a40.15,40.15,0,0,0-12.62-29.16,39.67,39.67,0,0,0-29.94-10.76,40.08,40.08,0,0,0-37.34,37C96,50.07,96,51,96,52H64A20,20,0,0,0,44,72v28a40.15,40.15,0,0,0-29.16,12.62A40,40,0,0,0,41.1,179.9a28.3,28.3,0,0,0,2.9.1v28a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V165.31A12,12,0,0,0,222.41,155.16ZM204,204H68V165.31a12,12,0,0,0-17.15-10.84A15.9,15.9,0,0,1,42.8,156,16.2,16.2,0,0,1,28,141.06a16,16,0,0,1,22.82-15.52A12,12,0,0,0,68,114.7V76h42.7a12,12,0,0,0,10.83-17.15A15.9,15.9,0,0,1,120,50.8,16.19,16.19,0,0,1,134.94,36a16,16,0,0,1,15.53,22.81A12,12,0,0,0,161.31,76H204v24c-1,0-1.93,0-2.9.11A40,40,0,0,0,204,180h0Z"/>`],["fill",N`<path d="M165.78,224H208a16,16,0,0,0,16-16V170.35A8,8,0,0,0,212.94,163a23.37,23.37,0,0,1-8.94,1.77c-13.23,0-24-11.1-24-24.73s10.77-24.73,24-24.73a23.37,23.37,0,0,1,8.94,1.77A8,8,0,0,0,224,109.65V72a16,16,0,0,0-16-16H171.78a35.36,35.36,0,0,0,.22-4,36,36,0,0,0-72,0,35.36,35.36,0,0,0,.22,4H64A16,16,0,0,0,48,72v32.22a35.36,35.36,0,0,0-4-.22,36,36,0,0,0,0,72,35.36,35.36,0,0,0,4-.22V208a16,16,0,0,0,16,16h42.22"/>`],["duotone",N`<path d="M204,168a28,28,0,0,0,12-2.69V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V165.31a28,28,0,1,1,0-50.62V72a8,8,0,0,1,8-8h46.69a28,28,0,1,1,50.61,0H208a8,8,0,0,1,8,8v42.69A28,28,0,1,0,204,168Z" opacity="0.2"/><path d="M220.27,158.54a8,8,0,0,0-7.7-.46,20,20,0,1,1,0-36.16A8,8,0,0,0,224,114.69V72a16,16,0,0,0-16-16H171.78a35.36,35.36,0,0,0,.22-4,36.15,36.15,0,0,0-11.36-26.25,36,36,0,0,0-60.55,23.63,36.56,36.56,0,0,0,.14,6.62H64A16,16,0,0,0,48,72v32.22a35.36,35.36,0,0,0-4-.22,36.12,36.12,0,0,0-26.24,11.36,35.7,35.7,0,0,0-9.69,27,36.08,36.08,0,0,0,33.31,33.6,36.56,36.56,0,0,0,6.62-.14V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V165.31A8,8,0,0,0,220.27,158.54ZM208,208H64V165.31a8,8,0,0,0-11.43-7.23,20,20,0,1,1,0-36.16A8,8,0,0,0,64,114.69V72h46.69a8,8,0,0,0,7.23-11.43,20,20,0,1,1,36.16,0A8,8,0,0,0,161.31,72H208v32.23a35.68,35.68,0,0,0-6.62-.14A36,36,0,0,0,204,176a35.36,35.36,0,0,0,4-.22Z"/>`]]),xo.styles=_e`
    :host {
      display: contents;
    }
  `,pf([j({type:String,reflect:!0})],xo.prototype,"size",2),pf([j({type:String,reflect:!0})],xo.prototype,"weight",2),pf([j({type:String,reflect:!0})],xo.prototype,"color",2),pf([j({type:Boolean,reflect:!0})],xo.prototype,"mirrored",2),xo=pf([Ie("ph-puzzle-piece")],xo);var Kme=Object.freeze({__proto__:null,get PhPuzzlePiece(){return xo}}),Gme=Object.defineProperty,Yme=Object.getOwnPropertyDescriptor,ff=(t,e,r,n)=>{for(var i=n>1?void 0:n?Yme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Gme(e,r,i),i};let _o=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${_o.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};_o.weightsMap=new Map([["thin",N`<path d="M104,44H56A12,12,0,0,0,44,56v48a12,12,0,0,0,12,12h48a12,12,0,0,0,12-12V56A12,12,0,0,0,104,44Zm4,60a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4Zm-4,36H56a12,12,0,0,0-12,12v48a12,12,0,0,0,12,12h48a12,12,0,0,0,12-12V152A12,12,0,0,0,104,140Zm4,60a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V152a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4ZM200,44H152a12,12,0,0,0-12,12v48a12,12,0,0,0,12,12h48a12,12,0,0,0,12-12V56A12,12,0,0,0,200,44Zm4,60a4,4,0,0,1-4,4H152a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4Zm-64,72V144a4,4,0,0,1,8,0v32a4,4,0,0,1-8,0Zm72-16a4,4,0,0,1-4,4H180v44a4,4,0,0,1-4,4H144a4,4,0,0,1,0-8h28V144a4,4,0,0,1,8,0v12h28A4,4,0,0,1,212,160Zm0,32v16a4,4,0,0,1-8,0V192a4,4,0,0,1,8,0Z"/>`],["light",N`<path d="M104,42H56A14,14,0,0,0,42,56v48a14,14,0,0,0,14,14h48a14,14,0,0,0,14-14V56A14,14,0,0,0,104,42Zm2,62a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2h48a2,2,0,0,1,2,2Zm-2,34H56a14,14,0,0,0-14,14v48a14,14,0,0,0,14,14h48a14,14,0,0,0,14-14V152A14,14,0,0,0,104,138Zm2,62a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V152a2,2,0,0,1,2-2h48a2,2,0,0,1,2,2ZM200,42H152a14,14,0,0,0-14,14v48a14,14,0,0,0,14,14h48a14,14,0,0,0,14-14V56A14,14,0,0,0,200,42Zm2,62a2,2,0,0,1-2,2H152a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2h48a2,2,0,0,1,2,2Zm-64,72V144a6,6,0,0,1,12,0v32a6,6,0,0,1-12,0Zm76-16a6,6,0,0,1-6,6H182v42a6,6,0,0,1-6,6H144a6,6,0,0,1,0-12h26V144a6,6,0,0,1,12,0v10h26A6,6,0,0,1,214,160Zm0,32v16a6,6,0,0,1-12,0V192a6,6,0,0,1,12,0Z"/>`],["regular",N`<path d="M104,40H56A16,16,0,0,0,40,56v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V56A16,16,0,0,0,104,40Zm0,64H56V56h48v48Zm0,32H56a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V152A16,16,0,0,0,104,136Zm0,64H56V152h48v48ZM200,40H152a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,64H152V56h48v48Zm-64,72V144a8,8,0,0,1,16,0v32a8,8,0,0,1-16,0Zm80-16a8,8,0,0,1-8,8H184v40a8,8,0,0,1-8,8H144a8,8,0,0,1,0-16h24V144a8,8,0,0,1,16,0v8h24A8,8,0,0,1,216,160Zm0,32v16a8,8,0,0,1-16,0V192a8,8,0,0,1,16,0Z"/>`],["bold",N`<path d="M100,36H56A20,20,0,0,0,36,56v44a20,20,0,0,0,20,20h44a20,20,0,0,0,20-20V56A20,20,0,0,0,100,36ZM96,96H60V60H96Zm4,40H56a20,20,0,0,0-20,20v44a20,20,0,0,0,20,20h44a20,20,0,0,0,20-20V156A20,20,0,0,0,100,136Zm-4,60H60V160H96ZM200,36H156a20,20,0,0,0-20,20v44a20,20,0,0,0,20,20h44a20,20,0,0,0,20-20V56A20,20,0,0,0,200,36Zm-4,60H160V60h36Zm-60,76V148a12,12,0,0,1,24,0v24a12,12,0,0,1-24,0Zm84-8a12,12,0,0,1-12,12H196v32a12,12,0,0,1-12,12H148a12,12,0,0,1,0-24h24V148a12,12,0,0,1,24,0v4h12A12,12,0,0,1,220,164Z"/>`],["fill",N`<path d="M120,56v48a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40h48A16,16,0,0,1,120,56Zm-16,80H56a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V152A16,16,0,0,0,104,136Zm96-96H152a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40ZM144,184a8,8,0,0,0,8-8V144a8,8,0,0,0-16,0v32A8,8,0,0,0,144,184Zm64-32H184v-8a8,8,0,0,0-16,0v56H144a8,8,0,0,0,0,16h32a8,8,0,0,0,8-8V168h24a8,8,0,0,0,0-16Zm0,32a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V192A8,8,0,0,0,208,184Z"/>`],["duotone",N`<path d="M112,56v48a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8h48A8,8,0,0,1,112,56Zm-8,88H56a8,8,0,0,0-8,8v48a8,8,0,0,0,8,8h48a8,8,0,0,0,8-8V152A8,8,0,0,0,104,144Zm96-96H152a8,8,0,0,0-8,8v48a8,8,0,0,0,8,8h48a8,8,0,0,0,8-8V56A8,8,0,0,0,200,48Z" opacity="0.2"/><path d="M104,40H56A16,16,0,0,0,40,56v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V56A16,16,0,0,0,104,40Zm0,64H56V56h48v48Zm0,32H56a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V152A16,16,0,0,0,104,136Zm0,64H56V152h48v48ZM200,40H152a16,16,0,0,0-16,16v48a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,64H152V56h48v48Zm-64,72V144a8,8,0,0,1,16,0v32a8,8,0,0,1-16,0Zm80-16a8,8,0,0,1-8,8H184v40a8,8,0,0,1-8,8H144a8,8,0,0,1,0-16h24V144a8,8,0,0,1,16,0v8h24A8,8,0,0,1,216,160Zm0,32v16a8,8,0,0,1-16,0V192a8,8,0,0,1,16,0Z"/>`]]),_o.styles=_e`
    :host {
      display: contents;
    }
  `,ff([j({type:String,reflect:!0})],_o.prototype,"size",2),ff([j({type:String,reflect:!0})],_o.prototype,"weight",2),ff([j({type:String,reflect:!0})],_o.prototype,"color",2),ff([j({type:Boolean,reflect:!0})],_o.prototype,"mirrored",2),_o=ff([Ie("ph-qr-code")],_o);var Xme=Object.freeze({__proto__:null,get PhQrCode(){return _o}}),Jme=Object.defineProperty,Qme=Object.getOwnPropertyDescriptor,gf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Qme(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Jme(e,r,i),i};let So=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${So.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};So.weightsMap=new Map([["thin",N`<path d="M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"/>`],["light",N`<path d="M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"/>`],["regular",N`<path d="M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/>`],["bold",N`<path d="M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/>`]]),So.styles=_e`
    :host {
      display: contents;
    }
  `,gf([j({type:String,reflect:!0})],So.prototype,"size",2),gf([j({type:String,reflect:!0})],So.prototype,"weight",2),gf([j({type:String,reflect:!0})],So.prototype,"color",2),gf([j({type:Boolean,reflect:!0})],So.prototype,"mirrored",2),So=gf([Ie("ph-question")],So);var ewe=Object.freeze({__proto__:null,get PhQuestion(){return So}}),twe=Object.defineProperty,rwe=Object.getOwnPropertyDescriptor,mf=(t,e,r,n)=>{for(var i=n>1?void 0:n?rwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&twe(e,r,i),i};let Io=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Io.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Io.weightsMap=new Map([["thin",N`<path d="M188,96c0,27.51-24.77,50.09-56,51.89V160a4,4,0,0,1-8,0V144a4,4,0,0,1,4-4c28.67,0,52-19.74,52-44s-23.33-44-52-44S76,71.74,76,96a4,4,0,0,1-8,0c0-28.67,26.92-52,60-52S188,67.33,188,96ZM128,196a12,12,0,1,0,12,12A12,12,0,0,0,128,196Z"/>`],["light",N`<path d="M190,96c0,28-24.62,51.11-56,53.75V160a6,6,0,0,1-12,0V144a6,6,0,0,1,6-6c27.57,0,50-18.84,50-42s-22.43-42-50-42S78,72.84,78,96a6,6,0,0,1-12,0c0-29.78,27.81-54,62-54S190,66.22,190,96Zm-62,98a14,14,0,1,0,14,14A14,14,0,0,0,128,194Z"/>`],["regular",N`<path d="M192,96c0,28.51-24.47,52.11-56,55.56V160a8,8,0,0,1-16,0V144a8,8,0,0,1,8-8c26.47,0,48-17.94,48-40s-21.53-40-48-40S80,73.94,80,96a8,8,0,0,1-16,0c0-30.88,28.71-56,64-56S192,65.12,192,96Zm-64,96a16,16,0,1,0,16,16A16,16,0,0,0,128,192Z"/>`],["bold",N`<path d="M196,96c0,29.47-24.21,54.05-56,59.06V156a12,12,0,0,1-24,0V144a12,12,0,0,1,12-12c24.26,0,44-16.15,44-36s-19.74-36-44-36S84,76.15,84,96a12,12,0,0,1-24,0c0-33.08,30.5-60,68-60S196,62.92,196,96Zm-68,92a20,20,0,1,0,20,20A20,20,0,0,0,128,188Z"/>`],["fill",N`<path d="M200,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V40A16,16,0,0,0,200,24ZM136,143.28V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.23,139.93,136,143.28ZM140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180Z"/>`],["duotone",N`<path d="M216,40V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V40A16,16,0,0,1,56,24H200A16,16,0,0,1,216,40Z" opacity="0.2"/><path d="M192,96c0,28.51-24.47,52.11-56,55.56V160a8,8,0,0,1-16,0V144a8,8,0,0,1,8-8c26.47,0,48-17.94,48-40s-21.53-40-48-40S80,73.94,80,96a8,8,0,0,1-16,0c0-30.88,28.71-56,64-56S192,65.12,192,96Zm-64,96a16,16,0,1,0,16,16A16,16,0,0,0,128,192Z"/>`]]),Io.styles=_e`
    :host {
      display: contents;
    }
  `,mf([j({type:String,reflect:!0})],Io.prototype,"size",2),mf([j({type:String,reflect:!0})],Io.prototype,"weight",2),mf([j({type:String,reflect:!0})],Io.prototype,"color",2),mf([j({type:Boolean,reflect:!0})],Io.prototype,"mirrored",2),Io=mf([Ie("ph-question-mark")],Io);var nwe=Object.freeze({__proto__:null,get PhQuestionMark(){return Io}}),iwe=Object.defineProperty,swe=Object.getOwnPropertyDescriptor,wf=(t,e,r,n)=>{for(var i=n>1?void 0:n?swe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&iwe(e,r,i),i};let Oo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Oo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Oo.weightsMap=new Map([["thin",N`<path d="M223,105.58c-4-4.2-8.2-8.54-10-12.8-1.65-4-1.73-9.53-1.82-15.41-.14-9-.29-19.19-6.83-25.74s-16.74-6.69-25.74-6.83c-5.88-.09-11.43-.17-15.41-1.82-4.26-1.76-8.6-5.93-12.8-9.95-6.68-6.41-13.59-13-22.42-13s-15.74,6.62-22.42,13c-4.2,4-8.54,8.2-12.8,10-4,1.65-9.53,1.73-15.41,1.82-9,.14-19.19.29-25.74,6.83S44.94,68.37,44.8,77.37c-.09,5.88-.17,11.43-1.82,15.41-1.76,4.26-5.93,8.6-9.95,12.8-6.41,6.68-13,13.59-13,22.42s6.62,15.74,13,22.42c4,4.2,8.2,8.54,10,12.8,1.65,4,1.73,9.53,1.82,15.41.14,9,.29,19.19,6.83,25.74s16.74,6.69,25.74,6.83c5.88.09,11.43.17,15.41,1.82,4.26,1.76,8.6,5.93,12.8,9.95,6.68,6.41,13.59,13,22.42,13s15.74-6.62,22.42-13c4.2-4,8.54-8.2,12.8-10,4-1.65,9.53-1.73,15.41-1.82,9-.14,19.19-.29,25.74-6.83s6.69-16.74,6.83-25.74c.09-5.88.17-11.43,1.82-15.41,1.76-4.26,5.93-8.6,9.95-12.8,6.41-6.68,13-13.59,13-22.42S229.38,112.26,223,105.58Zm-5.78,39.3c-4.54,4.73-9.24,9.63-11.57,15.28-2.23,5.39-2.33,12-2.43,18.35-.12,8.2-.24,16-4.49,20.2s-12,4.37-20.2,4.49c-6.37.1-13,.2-18.35,2.43-5.65,2.33-10.55,7-15.28,11.57C139.09,222.75,133.62,228,128,228s-11.09-5.25-16.88-10.8c-4.73-4.54-9.63-9.24-15.28-11.57-5.39-2.23-12-2.33-18.35-2.43-8.2-.12-15.95-.24-20.2-4.49s-4.37-12-4.49-20.2c-.1-6.37-.2-13-2.43-18.35-2.33-5.65-7-10.55-11.57-15.28C33.25,139.09,28,133.62,28,128s5.25-11.09,10.8-16.88c4.54-4.73,9.24-9.63,11.57-15.28,2.23-5.39,2.33-12,2.43-18.35.12-8.2.24-15.95,4.49-20.2s12-4.37,20.2-4.49c6.37-.1,13-.2,18.35-2.43,5.65-2.33,10.55-7,15.28-11.57C116.91,33.25,122.38,28,128,28s11.09,5.25,16.88,10.8c4.73,4.54,9.63,9.24,15.28,11.57,5.39,2.23,12,2.33,18.35,2.43,8.2.12,16,.24,20.2,4.49s4.37,12,4.49,20.2c.1,6.37.2,13,2.43,18.35,2.33,5.65,7,10.55,11.57,15.28,5.55,5.79,10.8,11.26,10.8,16.88S222.75,139.09,217.2,144.88Zm-46.37-43.71a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17Z"/>`],["light",N`<path d="M224.42,104.2c-3.9-4.07-7.93-8.27-9.55-12.18-1.5-3.63-1.58-9-1.67-14.68-.14-9.38-.3-20-7.42-27.12S188,42.94,178.66,42.8c-5.68-.09-11-.17-14.68-1.67-3.91-1.62-8.11-5.65-12.18-9.55C145.16,25.22,137.64,18,128,18s-17.16,7.22-23.8,13.58c-4.07,3.9-8.27,7.93-12.18,9.55-3.63,1.5-9,1.58-14.68,1.67-9.38.14-20,.3-27.12,7.42S42.94,68,42.8,77.34c-.09,5.68-.17,11-1.67,14.68-1.62,3.91-5.65,8.11-9.55,12.18C25.22,110.84,18,118.36,18,128s7.22,17.16,13.58,23.8c3.9,4.07,7.93,8.27,9.55,12.18,1.5,3.63,1.58,9,1.67,14.68.14,9.38.3,20,7.42,27.12S68,213.06,77.34,213.2c5.68.09,11,.17,14.68,1.67,3.91,1.62,8.11,5.65,12.18,9.55C110.84,230.78,118.36,238,128,238s17.16-7.22,23.8-13.58c4.07-3.9,8.27-7.93,12.18-9.55,3.63-1.5,9-1.58,14.68-1.67,9.38-.14,20-.3,27.12-7.42s7.28-17.74,7.42-27.12c.09-5.68.17-11,1.67-14.68,1.62-3.91,5.65-8.11,9.55-12.18C230.78,145.16,238,137.64,238,128S230.78,110.84,224.42,104.2Zm-8.66,39.3c-4.67,4.86-9.5,9.9-12,15.9-2.38,5.74-2.48,12.52-2.58,19.08-.11,7.44-.23,15.14-3.9,18.82s-11.38,3.79-18.82,3.9c-6.56.1-13.34.2-19.08,2.58-6,2.48-11,7.31-15.91,12-5.25,5-10.68,10.24-15.49,10.24s-10.24-5.21-15.5-10.24c-4.86-4.67-9.9-9.5-15.9-12-5.74-2.38-12.52-2.48-19.08-2.58-7.44-.11-15.14-.23-18.82-3.9s-3.79-11.38-3.9-18.82c-.1-6.56-.2-13.34-2.58-19.08-2.48-6-7.31-11-12-15.91C35.21,138.24,30,132.81,30,128s5.21-10.24,10.24-15.5c4.67-4.86,9.5-9.9,12-15.9,2.38-5.74,2.48-12.52,2.58-19.08.11-7.44.23-15.14,3.9-18.82s11.38-3.79,18.82-3.9c6.56-.1,13.34-.2,19.08-2.58,6-2.48,11-7.31,15.91-12C117.76,35.21,123.19,30,128,30s10.24,5.21,15.5,10.24c4.86,4.67,9.9,9.5,15.9,12,5.74,2.38,12.52,2.48,19.08,2.58,7.44.11,15.14.23,18.82,3.9s3.79,11.38,3.9,18.82c.1,6.56.2,13.34,2.58,19.08,2.48,6,7.31,11,12,15.91,5,5.25,10.24,10.68,10.24,15.49S220.79,138.24,215.76,143.5ZM172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76Z"/>`],["regular",N`<path d="M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-11.55,39.29c-4.79,5-9.75,10.17-12.38,16.52-2.52,6.1-2.63,13.07-2.73,19.82-.1,7-.21,14.33-3.32,17.43s-10.39,3.22-17.43,3.32c-6.75.1-13.72.21-19.82,2.73-6.35,2.63-11.52,7.59-16.52,12.38S132,224,128,224s-9.15-4.92-14.11-9.69-10.17-9.75-16.52-12.38c-6.1-2.52-13.07-2.63-19.82-2.73-7-.1-14.33-.21-17.43-3.32s-3.22-10.39-3.32-17.43c-.1-6.75-.21-13.72-2.73-19.82-2.63-6.35-7.59-11.52-12.38-16.52S32,132,32,128s4.92-9.15,9.69-14.11,9.75-10.17,12.38-16.52c2.52-6.1,2.63-13.07,2.73-19.82.1-7,.21-14.33,3.32-17.43S70.51,56.9,77.55,56.8c6.75-.1,13.72-.21,19.82-2.73,6.35-2.63,11.52-7.59,16.52-12.38S124,32,128,32s9.15,4.92,14.11,9.69,10.17,9.75,16.52,12.38c6.1,2.52,13.07,2.63,19.82,2.73,7,.1,14.33.21,17.43,3.32s3.22,10.39,3.32,17.43c.1,6.75.21,13.72,2.73,19.82,2.63,6.35,7.59,11.52,12.38,16.52S224,124,224,128,219.08,137.15,214.31,142.11ZM173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34Z"/>`],["bold",N`<path d="M228.75,100.05c-3.52-3.67-7.15-7.46-8.34-10.33-1.06-2.56-1.14-7.83-1.21-12.47-.15-10-.34-22.44-9.18-31.27s-21.27-9-31.27-9.18c-4.64-.07-9.91-.15-12.47-1.21-2.87-1.19-6.66-4.82-10.33-8.34C148.87,20.46,140.05,12,128,12s-20.87,8.46-27.95,15.25c-3.67,3.52-7.46,7.15-10.33,8.34-2.56,1.06-7.83,1.14-12.47,1.21C67.25,37,54.81,37.14,46,46S37,67.25,36.8,77.25c-.07,4.64-.15,9.91-1.21,12.47-1.19,2.87-4.82,6.66-8.34,10.33C20.46,107.13,12,116,12,128S20.46,148.87,27.25,156c3.52,3.67,7.15,7.46,8.34,10.33,1.06,2.56,1.14,7.83,1.21,12.47.15,10,.34,22.44,9.18,31.27s21.27,9,31.27,9.18c4.64.07,9.91.15,12.47,1.21,2.87,1.19,6.66,4.82,10.33,8.34C107.13,235.54,116,244,128,244s20.87-8.46,27.95-15.25c3.67-3.52,7.46-7.15,10.33-8.34,2.56-1.06,7.83-1.14,12.47-1.21,10-.15,22.44-.34,31.27-9.18s9-21.27,9.18-31.27c.07-4.64.15-9.91,1.21-12.47,1.19-2.87,4.82-6.66,8.34-10.33C235.54,148.87,244,140.05,244,128S235.54,107.13,228.75,100.05Zm-17.32,39.29c-4.82,5-10.28,10.72-13.19,17.76-2.82,6.8-2.93,14.16-3,21.29-.08,5.36-.19,12.71-2.15,14.66s-9.3,2.07-14.66,2.15c-7.13.11-14.49.22-21.29,3-7,2.91-12.73,8.37-17.76,13.19C135.78,214.84,130.4,220,128,220s-7.78-5.16-11.34-8.57c-5-4.82-10.72-10.28-17.76-13.19-6.8-2.82-14.16-2.93-21.29-3-5.36-.08-12.71-.19-14.66-2.15s-2.07-9.3-2.15-14.66c-.11-7.13-.22-14.49-3-21.29-2.91-7-8.37-12.73-13.19-17.76C41.16,135.78,36,130.4,36,128s5.16-7.78,8.57-11.34c4.82-5,10.28-10.72,13.19-17.76,2.82-6.8,2.93-14.16,3-21.29C60.88,72.25,61,64.9,63,63s9.3-2.07,14.66-2.15c7.13-.11,14.49-.22,21.29-3,7-2.91,12.73-8.37,17.76-13.19C120.22,41.16,125.6,36,128,36s7.78,5.16,11.34,8.57c5,4.82,10.72,10.28,17.76,13.19,6.8,2.82,14.16,2.93,21.29,3,5.36.08,12.71.19,14.66,2.15s2.07,9.3,2.15,14.66c.11,7.13.22,14.49,3,21.29,2.91,7,8.37,12.73,13.19,17.76,3.41,3.56,8.57,8.94,8.57,11.34S214.84,135.78,211.43,139.34ZM176.49,95.51a12,12,0,0,1,0,17l-56,56a12,12,0,0,1-17,0l-24-24a12,12,0,1,1,17-17L112,143l47.51-47.52A12,12,0,0,1,176.49,95.51Z"/>`],["fill",N`<path d="M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-52.2,6.84-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"/>`],["duotone",N`<path d="M232,128c0,12.51-17.82,21.95-22.68,33.69-4.68,11.32,1.42,30.65-7.78,39.85s-28.53,3.1-39.85,7.78C150,214.18,140.5,232,128,232s-22-17.82-33.69-22.68c-11.32-4.68-30.65,1.42-39.85-7.78s-3.1-28.53-7.78-39.85C41.82,150,24,140.5,24,128s17.82-22,22.68-33.69C51.36,83,45.26,63.66,54.46,54.46S83,51.36,94.31,46.68C106.05,41.82,115.5,24,128,24S150,41.82,161.69,46.68c11.32,4.68,30.65-1.42,39.85,7.78s3.1,28.53,7.78,39.85C214.18,106.05,232,115.5,232,128Z" opacity="0.2"/><path d="M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-11.55,39.29c-4.79,5-9.75,10.17-12.38,16.52-2.52,6.1-2.63,13.07-2.73,19.82-.1,7-.21,14.33-3.32,17.43s-10.39,3.22-17.43,3.32c-6.75.1-13.72.21-19.82,2.73-6.35,2.63-11.52,7.59-16.52,12.38S132,224,128,224s-9.15-4.92-14.11-9.69-10.17-9.75-16.52-12.38c-6.1-2.52-13.07-2.63-19.82-2.73-7-.1-14.33-.21-17.43-3.32s-3.22-10.39-3.32-17.43c-.1-6.75-.21-13.72-2.73-19.82-2.63-6.35-7.59-11.52-12.38-16.52S32,132,32,128s4.92-9.15,9.69-14.11,9.75-10.17,12.38-16.52c2.52-6.1,2.63-13.07,2.73-19.82.1-7,.21-14.33,3.32-17.43S70.51,56.9,77.55,56.8c6.75-.1,13.72-.21,19.82-2.73,6.35-2.63,11.52-7.59,16.52-12.38S124,32,128,32s9.15,4.92,14.11,9.69,10.17,9.75,16.52,12.38c6.1,2.52,13.07,2.63,19.82,2.73,7,.1,14.33.21,17.43,3.32s3.22,10.39,3.32,17.43c.1,6.75.21,13.72,2.73,19.82,2.63,6.35,7.59,11.52,12.38,16.52S224,124,224,128,219.08,137.15,214.31,142.11ZM173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34Z"/>`]]),Oo.styles=_e`
    :host {
      display: contents;
    }
  `,wf([j({type:String,reflect:!0})],Oo.prototype,"size",2),wf([j({type:String,reflect:!0})],Oo.prototype,"weight",2),wf([j({type:String,reflect:!0})],Oo.prototype,"color",2),wf([j({type:Boolean,reflect:!0})],Oo.prototype,"mirrored",2),Oo=wf([Ie("ph-seal-check")],Oo);var owe=Object.freeze({__proto__:null,get PhSealCheck(){return Oo}}),awe=Object.defineProperty,cwe=Object.getOwnPropertyDescriptor,yf=(t,e,r,n)=>{for(var i=n>1?void 0:n?cwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&awe(e,r,i),i};let Po=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Po.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Po.weightsMap=new Map([["thin",N`<path d="M116,216a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h64a4,4,0,0,1,0,8H52V212h60A4,4,0,0,1,116,216Zm110.83-90.83-40-40a4,4,0,0,0-5.66,5.66L214.34,124H112a4,4,0,0,0,0,8H214.34l-33.17,33.17a4,4,0,0,0,5.66,5.66l40-40A4,4,0,0,0,226.83,125.17Z"/>`],["light",N`<path d="M118,216a6,6,0,0,1-6,6H48a6,6,0,0,1-6-6V40a6,6,0,0,1,6-6h64a6,6,0,0,1,0,12H54V210h58A6,6,0,0,1,118,216Zm110.24-92.24-40-40a6,6,0,0,0-8.48,8.48L209.51,122H112a6,6,0,0,0,0,12h97.51l-29.75,29.76a6,6,0,1,0,8.48,8.48l40-40A6,6,0,0,0,228.24,123.76Z"/>`],["regular",N`<path d="M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"/>`],["bold",N`<path d="M124,216a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V40A12,12,0,0,1,48,28h64a12,12,0,0,1,0,24H60V204h52A12,12,0,0,1,124,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L195,116H112a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,232.49,119.51Z"/>`],["fill",N`<path d="M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40A8,8,0,0,0,176,88v32H112a8,8,0,0,0,0,16h64v32a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,229.66,122.34Z"/>`],["duotone",N`<path d="M224,56V200a16,16,0,0,1-16,16H48V40H208A16,16,0,0,1,224,56Z" opacity="0.2"/><path d="M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"/>`]]),Po.styles=_e`
    :host {
      display: contents;
    }
  `,yf([j({type:String,reflect:!0})],Po.prototype,"size",2),yf([j({type:String,reflect:!0})],Po.prototype,"weight",2),yf([j({type:String,reflect:!0})],Po.prototype,"color",2),yf([j({type:Boolean,reflect:!0})],Po.prototype,"mirrored",2),Po=yf([Ie("ph-sign-out")],Po);var lwe=Object.freeze({__proto__:null,get PhSignOut(){return Po}}),uwe=Object.defineProperty,hwe=Object.getOwnPropertyDescriptor,bf=(t,e,r,n)=>{for(var i=n>1?void 0:n?hwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&uwe(e,r,i),i};let No=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${No.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};No.weightsMap=new Map([["thin",N`<path d="M132,32V64a4,4,0,0,1-8,0V32a4,4,0,0,1,8,0Zm41.25,54.75a4,4,0,0,0,2.83-1.18L198.71,63a4,4,0,0,0-5.66-5.66L170.43,79.92a4,4,0,0,0,2.82,6.83ZM224,124H192a4,4,0,0,0,0,8h32a4,4,0,0,0,0-8Zm-47.92,46.43a4,4,0,1,0-5.65,5.65l22.62,22.63a4,4,0,0,0,5.66-5.66ZM128,188a4,4,0,0,0-4,4v32a4,4,0,0,0,8,0V192A4,4,0,0,0,128,188ZM79.92,170.43,57.29,193.05A4,4,0,0,0,63,198.71l22.62-22.63a4,4,0,1,0-5.65-5.65ZM68,128a4,4,0,0,0-4-4H32a4,4,0,0,0,0,8H64A4,4,0,0,0,68,128ZM63,57.29A4,4,0,0,0,57.29,63L79.92,85.57a4,4,0,1,0,5.65-5.65Z"/>`],["light",N`<path d="M134,32V64a6,6,0,0,1-12,0V32a6,6,0,0,1,12,0Zm39.25,56.75A6,6,0,0,0,177.5,87l22.62-22.63a6,6,0,0,0-8.48-8.48L169,78.5a6,6,0,0,0,4.24,10.25ZM224,122H192a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12Zm-46.5,47A6,6,0,0,0,169,177.5l22.63,22.62a6,6,0,0,0,8.48-8.48ZM128,186a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V192A6,6,0,0,0,128,186ZM78.5,169,55.88,191.64a6,6,0,1,0,8.48,8.48L87,177.5A6,6,0,1,0,78.5,169ZM70,128a6,6,0,0,0-6-6H32a6,6,0,0,0,0,12H64A6,6,0,0,0,70,128ZM64.36,55.88a6,6,0,0,0-8.48,8.48L78.5,87A6,6,0,1,0,87,78.5Z"/>`],["regular",N`<path d="M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"/>`],["bold",N`<path d="M140,32V64a12,12,0,0,1-24,0V32a12,12,0,0,1,24,0Zm33.25,62.75a12,12,0,0,0,8.49-3.52L204.37,68.6a12,12,0,0,0-17-17L164.77,74.26a12,12,0,0,0,8.48,20.49ZM224,116H192a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24Zm-42.26,48.77a12,12,0,1,0-17,17l22.63,22.63a12,12,0,0,0,17-17ZM128,180a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V192A12,12,0,0,0,128,180ZM74.26,164.77,51.63,187.4a12,12,0,0,0,17,17l22.63-22.63a12,12,0,1,0-17-17ZM76,128a12,12,0,0,0-12-12H32a12,12,0,0,0,0,24H64A12,12,0,0,0,76,128ZM68.6,51.63a12,12,0,1,0-17,17L74.26,91.23a12,12,0,0,0,17-17Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm33.94,58.75,17-17a8,8,0,0,1,11.32,11.32l-17,17a8,8,0,0,1-11.31-11.31ZM48,136a8,8,0,0,1,0-16H72a8,8,0,0,1,0,16Zm46.06,37.25-17,17a8,8,0,0,1-11.32-11.32l17-17a8,8,0,0,1,11.31,11.31Zm0-79.19a8,8,0,0,1-11.31,0l-17-17A8,8,0,0,1,77.09,65.77l17,17A8,8,0,0,1,94.06,94.06ZM136,208a8,8,0,0,1-16,0V184a8,8,0,0,1,16,0Zm0-136a8,8,0,0,1-16,0V48a8,8,0,0,1,16,0Zm54.23,118.23a8,8,0,0,1-11.32,0l-17-17a8,8,0,0,1,11.31-11.31l17,17A8,8,0,0,1,190.23,190.23ZM208,136H184a8,8,0,0,1,0-16h24a8,8,0,0,1,0,16Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M136,32V64a8,8,0,0,1-16,0V32a8,8,0,0,1,16,0Zm37.25,58.75a8,8,0,0,0,5.66-2.35l22.63-22.62a8,8,0,0,0-11.32-11.32L167.6,77.09a8,8,0,0,0,5.65,13.66ZM224,120H192a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16Zm-45.09,47.6a8,8,0,0,0-11.31,11.31l22.62,22.63a8,8,0,0,0,11.32-11.32ZM128,184a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V192A8,8,0,0,0,128,184ZM77.09,167.6,54.46,190.22a8,8,0,0,0,11.32,11.32L88.4,178.91A8,8,0,0,0,77.09,167.6ZM72,128a8,8,0,0,0-8-8H32a8,8,0,0,0,0,16H64A8,8,0,0,0,72,128ZM65.78,54.46A8,8,0,0,0,54.46,65.78L77.09,88.4A8,8,0,0,0,88.4,77.09Z"/>`]]),No.styles=_e`
    :host {
      display: contents;
    }
  `,bf([j({type:String,reflect:!0})],No.prototype,"size",2),bf([j({type:String,reflect:!0})],No.prototype,"weight",2),bf([j({type:String,reflect:!0})],No.prototype,"color",2),bf([j({type:Boolean,reflect:!0})],No.prototype,"mirrored",2),No=bf([Ie("ph-spinner")],No);var dwe=Object.freeze({__proto__:null,get PhSpinner(){return No}}),pwe=Object.defineProperty,fwe=Object.getOwnPropertyDescriptor,vf=(t,e,r,n)=>{for(var i=n>1?void 0:n?fwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&pwe(e,r,i),i};let To=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${To.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};To.weightsMap=new Map([["thin",N`<path d="M216,52H172V40a20,20,0,0,0-20-20H104A20,20,0,0,0,84,40V52H40a4,4,0,0,0,0,8H52V208a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V60h12a4,4,0,0,0,0-8ZM92,40a12,12,0,0,1,12-12h48a12,12,0,0,1,12,12V52H92ZM196,208a4,4,0,0,1-4,4H64a4,4,0,0,1-4-4V60H196ZM108,104v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Zm48,0v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Z"/>`],["light",N`<path d="M216,50H174V40a22,22,0,0,0-22-22H104A22,22,0,0,0,82,40V50H40a6,6,0,0,0,0,12H50V208a14,14,0,0,0,14,14H192a14,14,0,0,0,14-14V62h10a6,6,0,0,0,0-12ZM94,40a10,10,0,0,1,10-10h48a10,10,0,0,1,10,10V50H94ZM194,208a2,2,0,0,1-2,2H64a2,2,0,0,1-2-2V62H194ZM110,104v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Zm48,0v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Z"/>`],["regular",N`<path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"/>`],["bold",N`<path d="M216,48H180V36A28,28,0,0,0,152,8H104A28,28,0,0,0,76,36V48H40a12,12,0,0,0,0,24h4V208a20,20,0,0,0,20,20H192a20,20,0,0,0,20-20V72h4a12,12,0,0,0,0-24ZM100,36a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4V48H100Zm88,168H68V72H188ZM116,104v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Zm48,0v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Z"/>`],["fill",N`<path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM112,168a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm0-120H96V40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Z"/>`],["duotone",N`<path d="M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z" opacity="0.2"/><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"/>`]]),To.styles=_e`
    :host {
      display: contents;
    }
  `,vf([j({type:String,reflect:!0})],To.prototype,"size",2),vf([j({type:String,reflect:!0})],To.prototype,"weight",2),vf([j({type:String,reflect:!0})],To.prototype,"color",2),vf([j({type:Boolean,reflect:!0})],To.prototype,"mirrored",2),To=vf([Ie("ph-trash")],To);var gwe=Object.freeze({__proto__:null,get PhTrash(){return To}}),mwe=Object.defineProperty,wwe=Object.getOwnPropertyDescriptor,Ef=(t,e,r,n)=>{for(var i=n>1?void 0:n?wwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&mwe(e,r,i),i};let ko=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${ko.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};ko.weightsMap=new Map([["thin",N`<path d="M227.46,214c-16.52-28.56-43-48.06-73.68-55.09a68,68,0,1,0-51.56,0c-30.64,7-57.16,26.53-73.68,55.09a4,4,0,0,0,6.92,4C55,184.19,89.62,164,128,164s73,20.19,92.54,54a4,4,0,0,0,3.46,2,3.93,3.93,0,0,0,2-.54A4,4,0,0,0,227.46,214ZM68,96a60,60,0,1,1,60,60A60.07,60.07,0,0,1,68,96Z"/>`],["light",N`<path d="M229.19,213c-15.81-27.32-40.63-46.49-69.47-54.62a70,70,0,1,0-63.44,0C67.44,166.5,42.62,185.67,26.81,213a6,6,0,1,0,10.38,6C56.4,185.81,90.34,166,128,166s71.6,19.81,90.81,53a6,6,0,1,0,10.38-6ZM70,96a58,58,0,1,1,58,58A58.07,58.07,0,0,1,70,96Z"/>`],["regular",N`<path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"/>`],["bold",N`<path d="M234.38,210a123.36,123.36,0,0,0-60.78-53.23,76,76,0,1,0-91.2,0A123.36,123.36,0,0,0,21.62,210a12,12,0,1,0,20.77,12c18.12-31.32,50.12-50,85.61-50s67.49,18.69,85.61,50a12,12,0,0,0,20.77-12ZM76,96a52,52,0,1,1,52,52A52.06,52.06,0,0,1,76,96Z"/>`],["fill",N`<path d="M230.93,220a8,8,0,0,1-6.93,4H32a8,8,0,0,1-6.92-12c15.23-26.33,38.7-45.21,66.09-54.16a72,72,0,1,1,73.66,0c27.39,8.95,50.86,27.83,66.09,54.16A8,8,0,0,1,230.93,220Z"/>`],["duotone",N`<path d="M192,96a64,64,0,1,1-64-64A64,64,0,0,1,192,96Z" opacity="0.2"/><path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"/>`]]),ko.styles=_e`
    :host {
      display: contents;
    }
  `,Ef([j({type:String,reflect:!0})],ko.prototype,"size",2),Ef([j({type:String,reflect:!0})],ko.prototype,"weight",2),Ef([j({type:String,reflect:!0})],ko.prototype,"color",2),Ef([j({type:Boolean,reflect:!0})],ko.prototype,"mirrored",2),ko=Ef([Ie("ph-user")],ko);var ywe=Object.freeze({__proto__:null,get PhUser(){return ko}}),bwe=Object.defineProperty,vwe=Object.getOwnPropertyDescriptor,Cf=(t,e,r,n)=>{for(var i=n>1?void 0:n?vwe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bwe(e,r,i),i};let Ro=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Ro.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Ro.weightsMap=new Map([["thin",N`<path d="M216,68H56a12,12,0,0,1,0-24H192a4,4,0,0,0,0-8H56A20,20,0,0,0,36,56V184a20,20,0,0,0,20,20H216a12,12,0,0,0,12-12V80A12,12,0,0,0,216,68Zm4,124a4,4,0,0,1-4,4H56a12,12,0,0,1-12-12V72a19.86,19.86,0,0,0,12,4H216a4,4,0,0,1,4,4Zm-32-60a8,8,0,1,1-8-8A8,8,0,0,1,188,132Z"/>`],["light",N`<path d="M216,66H56a10,10,0,0,1,0-20H192a6,6,0,0,0,0-12H56A22,22,0,0,0,34,56V184a22,22,0,0,0,22,22H216a14,14,0,0,0,14-14V80A14,14,0,0,0,216,66Zm2,126a2,2,0,0,1-2,2H56a10,10,0,0,1-10-10V75.59A21.84,21.84,0,0,0,56,78H216a2,2,0,0,1,2,2Zm-28-60a10,10,0,1,1-10-10A10,10,0,0,1,190,132Z"/>`],["regular",N`<path d="M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm0,128H56a8,8,0,0,1-8-8V78.63A23.84,23.84,0,0,0,56,80H216Zm-48-60a12,12,0,1,1,12,12A12,12,0,0,1,168,132Z"/>`],["bold",N`<path d="M196,136a16,16,0,1,1-16-16A16,16,0,0,1,196,136Zm40-36v80a32,32,0,0,1-32,32H60a32,32,0,0,1-32-32V60.92A32,32,0,0,1,60,28H192a12,12,0,0,1,0,24H60a8,8,0,0,0-8,8.26v.08A8.32,8.32,0,0,0,60.48,68H204A32,32,0,0,1,236,100Zm-24,0a8,8,0,0,0-8-8H60.48A33.72,33.72,0,0,1,52,90.92V180a8,8,0,0,0,8,8H204a8,8,0,0,0,8-8Z"/>`],["fill",N`<path d="M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm-36,80a12,12,0,1,1,12-12A12,12,0,0,1,180,144Z"/>`],["duotone",N`<path d="M224,80V192a8,8,0,0,1-8,8H56a16,16,0,0,1-16-16V56A16,16,0,0,0,56,72H216A8,8,0,0,1,224,80Z" opacity="0.2"/><path d="M216,64H56a8,8,0,0,1,0-16H192a8,8,0,0,0,0-16H56A24,24,0,0,0,32,56V184a24,24,0,0,0,24,24H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64Zm0,128H56a8,8,0,0,1-8-8V78.63A23.84,23.84,0,0,0,56,80H216Zm-48-60a12,12,0,1,1,12,12A12,12,0,0,1,168,132Z"/>`]]),Ro.styles=_e`
    :host {
      display: contents;
    }
  `,Cf([j({type:String,reflect:!0})],Ro.prototype,"size",2),Cf([j({type:String,reflect:!0})],Ro.prototype,"weight",2),Cf([j({type:String,reflect:!0})],Ro.prototype,"color",2),Cf([j({type:Boolean,reflect:!0})],Ro.prototype,"mirrored",2),Ro=Cf([Ie("ph-wallet")],Ro);var Ewe=Object.freeze({__proto__:null,get PhWallet(){return Ro}}),Cwe=Object.defineProperty,Awe=Object.getOwnPropertyDescriptor,Af=(t,e,r,n)=>{for(var i=n>1?void 0:n?Awe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Cwe(e,r,i),i};let Do=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Do.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Do.weightsMap=new Map([["thin",N`<path d="M233.34,190.09,145.88,38.22h0a20.75,20.75,0,0,0-35.76,0L22.66,190.09a19.52,19.52,0,0,0,0,19.71A20.36,20.36,0,0,0,40.54,220H215.46a20.36,20.36,0,0,0,17.86-10.2A19.52,19.52,0,0,0,233.34,190.09ZM226.4,205.8a12.47,12.47,0,0,1-10.94,6.2H40.54a12.47,12.47,0,0,1-10.94-6.2,11.45,11.45,0,0,1,0-11.72L117.05,42.21a12.76,12.76,0,0,1,21.9,0L226.4,194.08A11.45,11.45,0,0,1,226.4,205.8ZM124,144V104a4,4,0,0,1,8,0v40a4,4,0,0,1-8,0Zm12,36a8,8,0,1,1-8-8A8,8,0,0,1,136,180Z"/>`],["light",N`<path d="M235.07,189.09,147.61,37.22h0a22.75,22.75,0,0,0-39.22,0L20.93,189.09a21.53,21.53,0,0,0,0,21.72A22.35,22.35,0,0,0,40.55,222h174.9a22.35,22.35,0,0,0,19.6-11.19A21.53,21.53,0,0,0,235.07,189.09ZM224.66,204.8a10.46,10.46,0,0,1-9.21,5.2H40.55a10.46,10.46,0,0,1-9.21-5.2,9.51,9.51,0,0,1,0-9.72L118.79,43.21a10.75,10.75,0,0,1,18.42,0l87.46,151.87A9.51,9.51,0,0,1,224.66,204.8ZM122,144V104a6,6,0,0,1,12,0v40a6,6,0,0,1-12,0Zm16,36a10,10,0,1,1-10-10A10,10,0,0,1,138,180Z"/>`],["regular",N`<path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM222.93,203.8a8.5,8.5,0,0,1-7.48,4.2H40.55a8.5,8.5,0,0,1-7.48-4.2,7.59,7.59,0,0,1,0-7.72L120.52,44.21a8.75,8.75,0,0,1,15,0l87.45,151.87A7.59,7.59,0,0,1,222.93,203.8ZM120,144V104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,180Z"/>`],["bold",N`<path d="M240.26,186.1,152.81,34.23h0a28.74,28.74,0,0,0-49.62,0L15.74,186.1a27.45,27.45,0,0,0,0,27.71A28.31,28.31,0,0,0,40.55,228h174.9a28.31,28.31,0,0,0,24.79-14.19A27.45,27.45,0,0,0,240.26,186.1Zm-20.8,15.7a4.46,4.46,0,0,1-4,2.2H40.55a4.46,4.46,0,0,1-4-2.2,3.56,3.56,0,0,1,0-3.73L124,46.2a4.77,4.77,0,0,1,8,0l87.44,151.87A3.56,3.56,0,0,1,219.46,201.8ZM116,136V104a12,12,0,0,1,24,0v32a12,12,0,0,1-24,0Zm28,40a16,16,0,1,1-16-16A16,16,0,0,1,144,176Z"/>`],["fill",N`<path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"/>`],["duotone",N`<path d="M215.46,216H40.54C27.92,216,20,202.79,26.13,192.09L113.59,40.22c6.3-11,22.52-11,28.82,0l87.46,151.87C236,202.79,228.08,216,215.46,216Z" opacity="0.2"/><path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM222.93,203.8a8.5,8.5,0,0,1-7.48,4.2H40.55a8.5,8.5,0,0,1-7.48-4.2,7.59,7.59,0,0,1,0-7.72L120.52,44.21a8.75,8.75,0,0,1,15,0l87.45,151.87A7.59,7.59,0,0,1,222.93,203.8ZM120,144V104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,180Z"/>`]]),Do.styles=_e`
    :host {
      display: contents;
    }
  `,Af([j({type:String,reflect:!0})],Do.prototype,"size",2),Af([j({type:String,reflect:!0})],Do.prototype,"weight",2),Af([j({type:String,reflect:!0})],Do.prototype,"color",2),Af([j({type:Boolean,reflect:!0})],Do.prototype,"mirrored",2),Do=Af([Ie("ph-warning")],Do);var $we=Object.freeze({__proto__:null,get PhWarning(){return Do}}),xwe=Object.defineProperty,_we=Object.getOwnPropertyDescriptor,$f=(t,e,r,n)=>{for(var i=n>1?void 0:n?_we(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&xwe(e,r,i),i};let Bo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Bo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Bo.weightsMap=new Map([["thin",N`<path d="M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm-4-84V80a4,4,0,0,1,8,0v56a4,4,0,0,1-8,0Zm12,36a8,8,0,1,1-8-8A8,8,0,0,1,136,172Z"/>`],["light",N`<path d="M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm-6-82V80a6,6,0,0,1,12,0v56a6,6,0,0,1-12,0Zm16,36a10,10,0,1,1-10-10A10,10,0,0,1,138,172Z"/>`],["regular",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"/>`],["bold",N`<path d="M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm-12-80V80a12,12,0,0,1,24,0v52a12,12,0,0,1-24,0Zm28,40a16,16,0,1,1-16-16A16,16,0,0,1,144,172Z"/>`],["fill",N`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-8,56a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm8,104a12,12,0,1,1,12-12A12,12,0,0,1,128,184Z"/>`],["duotone",N`<path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"/>`]]),Bo.styles=_e`
    :host {
      display: contents;
    }
  `,$f([j({type:String,reflect:!0})],Bo.prototype,"size",2),$f([j({type:String,reflect:!0})],Bo.prototype,"weight",2),$f([j({type:String,reflect:!0})],Bo.prototype,"color",2),$f([j({type:Boolean,reflect:!0})],Bo.prototype,"mirrored",2),Bo=$f([Ie("ph-warning-circle")],Bo);var Swe=Object.freeze({__proto__:null,get PhWarningCircle(){return Bo}}),Iwe=Object.defineProperty,Owe=Object.getOwnPropertyDescriptor,xf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Owe(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Iwe(e,r,i),i};let Mo=class extends $e{constructor(){super(...arguments),this.size="1em",this.weight="regular",this.color="currentColor",this.mirrored=!1}render(){var t;return Se`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="${this.size}"
      height="${this.size}"
      fill="${this.color}"
      viewBox="0 0 256 256"
      transform=${this.mirrored?"scale(-1, 1)":null}
    >
      ${Mo.weightsMap.get((t=this.weight)!=null?t:"regular")}
    </svg>`}};Mo.weightsMap=new Map([["thin",N`<path d="M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"/>`],["light",N`<path d="M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"/>`],["regular",N`<path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"/>`],["bold",N`<path d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"/>`],["fill",N`<path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"/>`],["duotone",N`<path d="M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z" opacity="0.2"/><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"/>`]]),Mo.styles=_e`
    :host {
      display: contents;
    }
  `,xf([j({type:String,reflect:!0})],Mo.prototype,"size",2),xf([j({type:String,reflect:!0})],Mo.prototype,"weight",2),xf([j({type:String,reflect:!0})],Mo.prototype,"color",2),xf([j({type:Boolean,reflect:!0})],Mo.prototype,"mirrored",2),Mo=xf([Ie("ph-x")],Mo);var Pwe=Object.freeze({__proto__:null,get PhX(){return Mo}});Ui.EthereumProvider=JQ,Ui.OPTIONAL_EVENTS=px,Ui.OPTIONAL_METHODS=dx,Ui.REQUIRED_EVENTS=l2,Ui.REQUIRED_METHODS=c2,Ui.default=d2,Object.defineProperty(Ui,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
